import{s as Z,o as w,p as k,k as ne,z as I,i as v,f as b,A as M,a as y,g as x,e as L,t as S,c as N,b as P,d as E,B as H,m as A,h as $,j as z,n as ae}from"../chunks/scheduler.qwlzZWkV.js";import{S as ee,i as te,e as B,c as O,a as V,m as j,t as m,b as p,d as q,g as F,f as G}from"../chunks/index.BnCGSlNV.js";import{$ as le,a as re,b as J,s as se,c as oe,r as ie,e as D,d as C,f as K}from"../chunks/index.BVw3gBTF.js";import{E as fe,D as ce,T as ue}from"../chunks/time-grid-item.BEBeae-P.js";function Q(o,a,s){const t=o.slice();return t[13]=a[s],t}function R(o,a,s){const t=o.slice();return t[17]=a[s],t}function U(o,a,s){const t=o.slice();t[20]=a[s];const e=!C(t[20].start,t[13]);t[21]=e;const i=!C(t[20].end,t[13]);t[22]=i;const n=C(t[20].start,t[13])?K(t[20].start):t[2];t[23]=n;const r=C(t[20].end,t[13])?K(t[20].end):t[3];return t[24]=r,t}function de(o){let a,s,t=o[17].name+"",e,i,n,r=o[20].start.toDate().toLocaleString()+"",l,_,g=o[20].end.toDate().toLocaleString()+"",h,f;return{c(){a=L("div"),s=L("p"),e=S(t),i=y(),n=L("p"),l=S(r),_=S(" - "),h=S(g),this.h()},l(c){a=N(c,"DIV",{style:!0,class:!0});var d=P(a);s=N(d,"P",{});var u=P(s);e=E(u,t),u.forEach(b),i=x(d),n=N(d,"P",{});var T=P(n);l=E(T,r),_=E(T," - "),h=E(T,g),T.forEach(b),d.forEach(b),this.h()},h(){H(a,"background-color",o[5].get(o[17].uuid)),A(a,"class",f="w-full h-full shadow "+(o[21]?"":"rounded-t-lg")+" "+(o[22]?"":"rounded-b-lg"))},m(c,d){v(c,a,d),$(a,s),$(s,e),$(a,i),$(a,n),$(n,l),$(n,_),$(n,h)},p(c,d){d&16&&t!==(t=c[17].name+"")&&z(e,t),d&80&&r!==(r=c[20].start.toDate().toLocaleString()+"")&&z(l,r),d&80&&g!==(g=c[20].end.toDate().toLocaleString()+"")&&z(h,g),d&48&&H(a,"background-color",c[5].get(c[17].uuid)),d&80&&f!==(f="w-full h-full shadow "+(c[21]?"":"rounded-t-lg")+" "+(c[22]?"":"rounded-b-lg"))&&A(a,"class",f)},d(c){c&&b(a)}}}function W(o){let a,s;return a=new ue({props:{tgContext:o[16],start:o[23],end:o[24],class:"pl-1 pr-1 "+(o[21]?"pt-0":"pt-1")+" "+(o[22]?"pb-0":"pb-1"),$$slots:{default:[de]},$$scope:{ctx:o}}}),{c(){O(a.$$.fragment)},l(t){V(a.$$.fragment,t)},m(t,e){j(a,t,e),s=!0},p(t,e){const i={};e&65536&&(i.tgContext=t[16]),e&84&&(i.start=t[23]),e&88&&(i.end=t[24]),e&80&&(i.class="pl-1 pr-1 "+(t[21]?"pt-0":"pt-1")+" "+(t[22]?"pb-0":"pb-1")),e&134217840&&(i.$$scope={dirty:e,ctx:t}),a.$set(i)},i(t){s||(m(a.$$.fragment,t),s=!0)},o(t){p(a.$$.fragment,t),s=!1},d(t){q(a,t)}}}function X(o){let a,s,t=D(o[17].occurrencesOn(o[13])),e=[];for(let n=0;n<t.length;n+=1)e[n]=W(U(o,t,n));const i=n=>p(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();a=I()},l(n){for(let r=0;r<e.length;r+=1)e[r].l(n);a=I()},m(n,r){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,r);v(n,a,r),s=!0},p(n,r){if(r&65660){t=D(n[17].occurrencesOn(n[13]));let l;for(l=0;l<t.length;l+=1){const _=U(n,t,l);e[l]?(e[l].p(_,r),m(e[l],1)):(e[l]=W(_),e[l].c(),m(e[l],1),e[l].m(a.parentNode,a))}for(F(),l=t.length;l<e.length;l+=1)i(l);G()}},i(n){if(!s){for(let r=0;r<t.length;r+=1)m(e[r]);s=!0}},o(n){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)p(e[r]);s=!1},d(n){n&&b(a),M(e,n)}}}function _e(o){let a,s,t=D(o[4]),e=[];for(let n=0;n<t.length;n+=1)e[n]=X(R(o,t,n));const i=n=>p(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();a=y()},l(n){for(let r=0;r<e.length;r+=1)e[r].l(n);a=x(n)},m(n,r){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,r);v(n,a,r),s=!0},p(n,r){if(r&65660){t=D(n[4]);let l;for(l=0;l<t.length;l+=1){const _=R(n,t,l);e[l]?(e[l].p(_,r),m(e[l],1)):(e[l]=X(_),e[l].c(),m(e[l],1),e[l].m(a.parentNode,a))}for(F(),l=t.length;l<e.length;l+=1)i(l);G()}},i(n){if(!s){for(let r=0;r<t.length;r+=1)m(e[r]);s=!0}},o(n){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)p(e[r]);s=!1},d(n){n&&b(a),M(e,n)}}}function Y(o){let a,s;return a=new ce({props:{context:o[12],day:o[13],$$slots:{default:[_e,({tgContext:t})=>({16:t}),({tgContext:t})=>t?65536:0]},$$scope:{ctx:o}}}),{c(){O(a.$$.fragment)},l(t){V(a.$$.fragment,t)},m(t,e){j(a,t,e),s=!0},p(t,e){const i={};e&4096&&(i.context=t[12]),e&64&&(i.day=t[13]),e&134283388&&(i.$$scope={dirty:e,ctx:t}),a.$set(i)},i(t){s||(m(a.$$.fragment,t),s=!0)},o(t){p(a.$$.fragment,t),s=!1},d(t){q(a,t)}}}function me(o){let a,s,t=D(o[6]),e=[];for(let n=0;n<t.length;n+=1)e[n]=Y(Q(o,t,n));const i=n=>p(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();a=I()},l(n){for(let r=0;r<e.length;r+=1)e[r].l(n);a=I()},m(n,r){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,r);v(n,a,r),s=!0},p(n,r){if(r&69756){t=D(n[6]);let l;for(l=0;l<t.length;l+=1){const _=Q(n,t,l);e[l]?(e[l].p(_,r),m(e[l],1)):(e[l]=Y(_),e[l].c(),m(e[l],1),e[l].m(a.parentNode,a))}for(F(),l=t.length;l<e.length;l+=1)i(l);G()}},i(n){if(!s){for(let r=0;r<t.length;r+=1)m(e[r]);s=!0}},o(n){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)p(e[r]);s=!1},d(n){n&&b(a),M(e,n)}}}function he(o){let a,s,t,e,i,n;function r(f){o[8](f)}function l(f){o[9](f)}function _(f){o[10](f)}function g(f){o[11](f)}let h={class:"h-dvh w-full",$$slots:{default:[me,({context:f})=>({12:f}),({context:f})=>f?4096:0]},$$scope:{ctx:o}};return o[0]!==void 0&&(h.startDate=o[0]),o[1]!==void 0&&(h.endDate=o[1]),o[2]!==void 0&&(h.startTime=o[2]),o[3]!==void 0&&(h.endTime=o[3]),a=new fe({props:h}),w.push(()=>B(a,"startDate",r)),w.push(()=>B(a,"endDate",l)),w.push(()=>B(a,"startTime",_)),w.push(()=>B(a,"endTime",g)),{c(){O(a.$$.fragment)},l(f){V(a.$$.fragment,f)},m(f,c){j(a,f,c),n=!0},p(f,[c]){const d={};c&134221948&&(d.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,d.startDate=f[0],k(()=>s=!1)),!t&&c&2&&(t=!0,d.endDate=f[1],k(()=>t=!1)),!e&&c&4&&(e=!0,d.startTime=f[2],k(()=>e=!1)),!i&&c&8&&(i=!0,d.endTime=f[3],k(()=>i=!1)),a.$set(d)},i(f){n||(m(a.$$.fragment,f),n=!0)},o(f){p(a.$$.fragment,f),n=!1},d(f){q(a,f)}}}function ge(o,a,s){let t,e,i,{startDate:n=le(re())}=a,{endDate:r=n.add({days:7})}=a,{startTime:l=new J(0,0)}=a,{endTime:_=new J(23,59)}=a;const g=se.shifts;ne(o,g,u=>s(4,i=u));function h(u){n=u,s(0,n)}function f(u){r=u,s(1,r)}function c(u){l=u,s(2,l)}function d(u){_=u,s(3,_)}return o.$$set=u=>{"startDate"in u&&s(0,n=u.startDate),"endDate"in u&&s(1,r=u.endDate),"startTime"in u&&s(2,l=u.startTime),"endTime"in u&&s(3,_=u.endTime)},o.$$.update=()=>{o.$$.dirty&3&&s(6,t=oe(n,r)),o.$$.dirty&16&&s(5,e=new Map(i.map(u=>[u.uuid,ie().lighten(.4).hex()])))},[n,r,l,_,i,e,t,g,h,f,c,d]}class pe extends ee{constructor(a){super(),te(this,a,ge,he,Z,{startDate:0,endDate:1,startTime:2,endTime:3})}}function be(o){let a,s,t;return s=new pe({}),{c(){a=L("div"),O(s.$$.fragment),this.h()},l(e){a=N(e,"DIV",{class:!0});var i=P(a);V(s.$$.fragment,i),i.forEach(b),this.h()},h(){A(a,"class","w-full bg-gray-50")},m(e,i){v(e,a,i),j(s,a,null),t=!0},p:ae,i(e){t||(m(s.$$.fragment,e),t=!0)},o(e){p(s.$$.fragment,e),t=!1},d(e){e&&b(a),q(s)}}}class we extends ee{constructor(a){super(),te(this,a,null,be,Z,{})}}export{we as component};
