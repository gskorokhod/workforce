import{s as se,w as S,e as H,a as T,c as J,b as Q,g as j,f as V,m as R,i as q,h as G,x as A,y as he,q as ne,u as le,r as oe,v as ie,n as re,z as be}from"../chunks/scheduler.D36odqhC.js";import{S as fe,i as ue,e as D,c as k,a as I,m as F,t as _,g as U,b as p,f as W,d as v}from"../chunks/index.DXrj4SHy.js";import{D as $e,E as we,c as X,M as Ce,T as ke,S as Ie,a as Fe,P as ve,b as ye}from"../chunks/table-header.CMRKwPOm.js";import{B as Ve,s as ce,L as Y}from"../chunks/index.Dke_Yfp6.js";import{w as Ee}from"../chunks/index.B03QNBc8.js";import{P as Ke,C as Pe}from"../chunks/column-hide-selector.Bwy1CQX-.js";import{m as Z}from"../chunks/index.DG-QY__O.js";const Le=a=>({}),x=a=>({}),Me=a=>({}),ee=a=>({});function te(a){let e,s;return e=new Ce({props:{locations:a[12],class:"aspect-auto "+a[3],onMarkerClick:a[15]}}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&4096&&(o.locations=t[12]),n&8&&(o.class="aspect-auto "+t[3]),e.$set(o)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){v(e,t)}}}function ae(a){let e,s;return e=new ke({props:{sticky:!0,$$slots:{end:[ze],middle:[De],start:[Ae]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&67109280&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){v(e,t)}}}function Se(a){let e,s;return e=new ye({}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){v(e,t)}}}function Ae(a){let e,s,t;e=new Ve({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[Se]},$$scope:{ctx:a}}}),e.$on("click",a[16]);const n=a[18].start,o=ne(n,a,a[26],x);return{c(){k(e.$$.fragment),s=T(),o&&o.c()},l(f){I(e.$$.fragment,f),s=j(f),o&&o.l(f)},m(f,d){F(e,f,d),q(f,s,d),o&&o.m(f,d),t=!0},p(f,d){const r={};d&67108864&&(r.$$scope={dirty:d,ctx:f}),e.$set(r),o&&o.p&&(!t||d&67108864)&&le(o,n,f,f[26],t?ie(n,f[26],d,Le):oe(f[26]),x)},i(f){t||(_(e.$$.fragment,f),_(o,f),t=!0)},o(f){p(e.$$.fragment,f),p(o,f),t=!1},d(f){f&&V(s),v(e,f),o&&o.d(f)}}}function De(a){let e;const s=a[18].middle,t=ne(s,a,a[26],ee);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,o){t&&t.m(n,o),e=!0},p(n,o){t&&t.p&&(!e||o&67108864)&&le(t,s,n,n[26],e?ie(s,n[26],o,Me):oe(n[26]),ee)},i(n){e||(_(t,n),e=!0)},o(n){p(t,n),e=!1},d(n){t&&t.d(n)}}}function ze(a){let e,s,t,n,o;function f(r){a[19](r)}let d={flatColumns:a[8]};return a[7]!==void 0&&(d.hideForId=a[7]),e=new Pe({props:d}),S.push(()=>D(e,"hideForId",f)),n=new Ie({props:{onInput:a[20]}}),{c(){k(e.$$.fragment),t=T(),k(n.$$.fragment)},l(r){I(e.$$.fragment,r),t=j(r),I(n.$$.fragment,r)},m(r,g){F(e,r,g),q(r,t,g),F(n,r,g),o=!0},p(r,g){const $={};g&256&&($.flatColumns=r[8]),!s&&g&128&&(s=!0,$.hideForId=r[7],A(()=>s=!1)),e.$set($);const C={};g&32&&(C.onInput=r[20]),n.$set(C)},i(r){o||(_(e.$$.fragment,r),_(n.$$.fragment,r),o=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),o=!1},d(r){r&&V(t),v(e,r),v(n,r)}}}function Ne(a){let e,s,t,n,o,f,d,r,g,$,C,h,E,w,c=a[1]&&te(a),m=a[1]&&ae(a);function B(i){a[21](i)}function z(i){a[22](i)}function K(i){a[23](i)}function N(i){a[24](i)}let y={class:"w-full",columnInitializers:a[13],data:a[0],actions:a[4],defaultAction:a[14]};a[5]!==void 0&&(y.filterValue=a[5]),a[8]!==void 0&&(y.flatColumns=a[8]),a[7]!==void 0&&(y.hideForId=a[7]),a[6]!==void 0&&(y.sortKeys=a[6]),o=new $e({props:y}),S.push(()=>D(o,"filterValue",B)),S.push(()=>D(o,"flatColumns",z)),S.push(()=>D(o,"hideForId",K)),S.push(()=>D(o,"sortKeys",N));function O(i){a[25](i)}let P={item:a[9],title:a[11]};return a[10]!==void 0&&(P.open=a[10]),h=new we({props:P}),S.push(()=>D(h,"open",O)),{c(){e=H("div"),c&&c.c(),s=T(),t=H("div"),m&&m.c(),n=T(),k(o.$$.fragment),C=T(),k(h.$$.fragment),this.h()},l(i){e=J(i,"DIV",{class:!0});var u=Q(e);c&&c.l(u),s=j(u),t=J(u,"DIV",{class:!0});var b=Q(t);m&&m.l(b),n=j(b),I(o.$$.fragment,b),b.forEach(V),u.forEach(V),C=j(i),I(h.$$.fragment,i),this.h()},h(){R(t,"class","mt-4 flex h-max w-full flex-col items-start justify-start overflow-y-scroll"),R(e,"class",$="flex flex-col items-start justify-start "+a[2])},m(i,u){q(i,e,u),c&&c.m(e,null),G(e,s),G(e,t),m&&m.m(t,null),G(t,n),F(o,t,null),q(i,C,u),F(h,i,u),w=!0},p(i,[u]){i[1]?c?(c.p(i,u),u&2&&_(c,1)):(c=te(i),c.c(),_(c,1),c.m(e,s)):c&&(U(),p(c,1,1,()=>{c=null}),W()),i[1]?m?(m.p(i,u),u&2&&_(m,1)):(m=ae(i),m.c(),_(m,1),m.m(t,n)):m&&(U(),p(m,1,1,()=>{m=null}),W());const b={};u&1&&(b.data=i[0]),u&16&&(b.actions=i[4]),!f&&u&32&&(f=!0,b.filterValue=i[5],A(()=>f=!1)),!d&&u&256&&(d=!0,b.flatColumns=i[8],A(()=>d=!1)),!r&&u&128&&(r=!0,b.hideForId=i[7],A(()=>r=!1)),!g&&u&64&&(g=!0,b.sortKeys=i[6],A(()=>g=!1)),o.$set(b),(!w||u&4&&$!==($="flex flex-col items-start justify-start "+i[2]))&&R(e,"class",$);const L={};u&512&&(L.item=i[9]),u&2048&&(L.title=i[11]),!E&&u&1024&&(E=!0,L.open=i[10],A(()=>E=!1)),h.$set(L)},i(i){w||(_(c),_(m),_(o.$$.fragment,i),_(h.$$.fragment,i),w=!0)},o(i){p(c),p(m),p(o.$$.fragment,i),p(h.$$.fragment,i),w=!1},d(i){i&&(V(e),V(C)),c&&c.d(),m&&m.d(),v(o),v(h,i)}}}function Te(a,e,s){let t,n=re,o=()=>(n(),n=be(r,l=>s(12,t=l)),r);a.$$.on_destroy.push(()=>n());let{$$slots:f={},$$scope:d}=e,{data:r}=e;o();let{header:g=!0}=e,{state:$=ce}=e,C=new Map,h=Ee(""),E=Fe([]),w={},c,{class:m=""}=e,{mapClass:B="h-[300px] w-full"}=e,z,K=!1,N="Edit Location",y=[{accessor:l=>l,cell:l=>X(ve,{item:l.value}),header:"Picture",id:"picture",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:l=>l.name,header:"Name",id:"name"},{accessor:l=>{var M;return((M=l.point)==null?void 0:M.address.format(["street","settlement","country","postcode"]))||"No Address"},header:"Address",id:"address"},{accessor:l=>Z(l.min.people,l.max.people,"people"),header:"Capacity (People)",id:"capacity_people"},{accessor:l=>Z(l.min.tasks,l.max.tasks,"tasks"),header:"Capacity (Tasks)",id:"capacity_tasks"}];for(const l of he($.templates).location.keys)y.push({accessor:M=>M.properties.get(l),cell:M=>X(Ke,{property:l,value:M.value}),header:l.name,id:l.uuid});let{actions:O=new Map([...C,["Edit",l=>P(l)],["Delete",l=>l.delete()]])}=e;function P(l){s(11,N="Edit Location"),s(9,z=l.pull()),s(10,K=!0)}function i(l){l instanceof Y&&P(l)}function u(){s(11,N="Create new Location"),s(9,z=new Y({name:""},$)),s(10,K=!0)}function b(l){w=l,s(7,w)}const L=l=>h.set(l);function me(l){h=l,s(5,h)}function de(l){c=l,s(8,c)}function _e(l){w=l,s(7,w)}function pe(l){E=l,s(6,E)}function ge(l){K=l,s(10,K)}return a.$$set=l=>{"data"in l&&o(s(0,r=l.data)),"header"in l&&s(1,g=l.header),"state"in l&&s(17,$=l.state),"class"in l&&s(2,m=l.class),"mapClass"in l&&s(3,B=l.mapClass),"actions"in l&&s(4,O=l.actions),"$$scope"in l&&s(26,d=l.$$scope)},[r,g,m,B,O,h,E,w,c,z,K,N,t,y,P,i,u,$,f,b,L,me,de,_e,pe,ge,d]}class je extends fe{constructor(e){super(),ue(this,e,Te,Ne,se,{data:0,header:1,state:17,class:2,mapClass:3,actions:4})}}function qe(a){let e,s,t;return s=new je({props:{data:a[0],class:"h-full w-full",mapClass:"w-full h-[50%]"}}),{c(){e=H("main"),k(s.$$.fragment),this.h()},l(n){e=J(n,"MAIN",{class:!0});var o=Q(e);I(s.$$.fragment,o),o.forEach(V),this.h()},h(){R(e,"class","h-full w-full")},m(n,o){q(n,e,o),F(s,e,null),t=!0},p:re,i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){p(s.$$.fragment,n),t=!1},d(n){n&&V(e),v(s)}}}function Be(a){return[ce.locations]}class We extends fe{constructor(e){super(),ue(this,e,Be,qe,se,{})}}export{We as component};
