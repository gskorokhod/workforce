import{s as ae,o as v,e as G,a as T,c as H,b as J,g as j,f as E,m as O,i as z,h as R,p as y,q as se,u as ne,r as le,v as oe,n as ie,w as ge}from"../chunks/scheduler.DIMlZrn7.js";import{S as re,i as fe,e as A,c as k,a as I,m as F,t as _,g as U,b as p,f as W,d as V}from"../chunks/index.BbMYPCUx.js";import{B as he,s as ue,L as X}from"../chunks/index.DDgUyM2d.js";import{w as be}from"../chunks/index.wMRSEewu.js";import{D as $e,E as we,M as Ce,T as ke,C as Ie,S as Fe,c as Ve,a as Ee,P as Ke,d as Pe}from"../chunks/table-header.ci9QVQQ-.js";import{m as Y}from"../chunks/index.BqXV28zw.js";const Le=a=>({}),Z=a=>({}),Me=a=>({}),x=a=>({});function ee(a){let e,s;return e=new Ce({props:{locations:a[12],class:"aspect-auto "+a[3],onMarkerClick:a[15]}}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&4096&&(o.locations=t[12]),n&8&&(o.class="aspect-auto "+t[3]),e.$set(o)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function te(a){let e,s;return e=new ke({props:{sticky:!0,$$slots:{end:[Ae],middle:[ye],start:[ve]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},p(t,n){const o={};n&67109280&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function Se(a){let e,s;return e=new Pe({}),{c(){k(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){F(e,t,n),s=!0},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function ve(a){let e,s,t;e=new he({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[Se]},$$scope:{ctx:a}}}),e.$on("click",a[16]);const n=a[18].start,o=se(n,a,a[26],Z);return{c(){k(e.$$.fragment),s=T(),o&&o.c()},l(f){I(e.$$.fragment,f),s=j(f),o&&o.l(f)},m(f,m){F(e,f,m),z(f,s,m),o&&o.m(f,m),t=!0},p(f,m){const r={};m&67108864&&(r.$$scope={dirty:m,ctx:f}),e.$set(r),o&&o.p&&(!t||m&67108864)&&ne(o,n,f,f[26],t?oe(n,f[26],m,Le):le(f[26]),Z)},i(f){t||(_(e.$$.fragment,f),_(o,f),t=!0)},o(f){p(e.$$.fragment,f),p(o,f),t=!1},d(f){f&&E(s),V(e,f),o&&o.d(f)}}}function ye(a){let e;const s=a[18].middle,t=se(s,a,a[26],x);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,o){t&&t.m(n,o),e=!0},p(n,o){t&&t.p&&(!e||o&67108864)&&ne(t,s,n,n[26],e?oe(s,n[26],o,Me):le(n[26]),x)},i(n){e||(_(t,n),e=!0)},o(n){p(t,n),e=!1},d(n){t&&t.d(n)}}}function Ae(a){let e,s,t,n,o;function f(r){a[19](r)}let m={flatColumns:a[8]};return a[7]!==void 0&&(m.hideForId=a[7]),e=new Ie({props:m}),v.push(()=>A(e,"hideForId",f)),n=new Fe({props:{onInput:a[20]}}),{c(){k(e.$$.fragment),t=T(),k(n.$$.fragment)},l(r){I(e.$$.fragment,r),t=j(r),I(n.$$.fragment,r)},m(r,g){F(e,r,g),z(r,t,g),F(n,r,g),o=!0},p(r,g){const $={};g&256&&($.flatColumns=r[8]),!s&&g&128&&(s=!0,$.hideForId=r[7],y(()=>s=!1)),e.$set($);const C={};g&32&&(C.onInput=r[20]),n.$set(C)},i(r){o||(_(e.$$.fragment,r),_(n.$$.fragment,r),o=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),o=!1},d(r){r&&E(t),V(e,r),V(n,r)}}}function De(a){let e,s,t,n,o,f,m,r,g,$,C,h,K,w,c=a[1]&&ee(a),d=a[1]&&te(a);function q(i){a[21](i)}function D(i){a[22](i)}function P(i){a[23](i)}function N(i){a[24](i)}let L={class:"w-full",columnInitializers:a[13],data:a[0],actions:a[4],defaultAction:a[14]};a[5]!==void 0&&(L.filterValue=a[5]),a[8]!==void 0&&(L.flatColumns=a[8]),a[7]!==void 0&&(L.hideForId=a[7]),a[6]!==void 0&&(L.sortKeys=a[6]),o=new $e({props:L}),v.push(()=>A(o,"filterValue",q)),v.push(()=>A(o,"flatColumns",D)),v.push(()=>A(o,"hideForId",P)),v.push(()=>A(o,"sortKeys",N));function B(i){a[25](i)}let M={item:a[9],title:a[11]};return a[10]!==void 0&&(M.open=a[10]),h=new we({props:M}),v.push(()=>A(h,"open",B)),{c(){e=G("div"),c&&c.c(),s=T(),t=G("div"),d&&d.c(),n=T(),k(o.$$.fragment),C=T(),k(h.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var u=J(e);c&&c.l(u),s=j(u),t=H(u,"DIV",{class:!0});var b=J(t);d&&d.l(b),n=j(b),I(o.$$.fragment,b),b.forEach(E),u.forEach(E),C=j(i),I(h.$$.fragment,i),this.h()},h(){O(t,"class","mt-4 flex h-max w-full flex-col items-start justify-start overflow-y-scroll"),O(e,"class",$="flex flex-col items-start justify-start "+a[2])},m(i,u){z(i,e,u),c&&c.m(e,null),R(e,s),R(e,t),d&&d.m(t,null),R(t,n),F(o,t,null),z(i,C,u),F(h,i,u),w=!0},p(i,[u]){i[1]?c?(c.p(i,u),u&2&&_(c,1)):(c=ee(i),c.c(),_(c,1),c.m(e,s)):c&&(U(),p(c,1,1,()=>{c=null}),W()),i[1]?d?(d.p(i,u),u&2&&_(d,1)):(d=te(i),d.c(),_(d,1),d.m(t,n)):d&&(U(),p(d,1,1,()=>{d=null}),W());const b={};u&1&&(b.data=i[0]),u&16&&(b.actions=i[4]),!f&&u&32&&(f=!0,b.filterValue=i[5],y(()=>f=!1)),!m&&u&256&&(m=!0,b.flatColumns=i[8],y(()=>m=!1)),!r&&u&128&&(r=!0,b.hideForId=i[7],y(()=>r=!1)),!g&&u&64&&(g=!0,b.sortKeys=i[6],y(()=>g=!1)),o.$set(b),(!w||u&4&&$!==($="flex flex-col items-start justify-start "+i[2]))&&O(e,"class",$);const S={};u&512&&(S.item=i[9]),u&2048&&(S.title=i[11]),!K&&u&1024&&(K=!0,S.open=i[10],y(()=>K=!1)),h.$set(S)},i(i){w||(_(c),_(d),_(o.$$.fragment,i),_(h.$$.fragment,i),w=!0)},o(i){p(c),p(d),p(o.$$.fragment,i),p(h.$$.fragment,i),w=!1},d(i){i&&(E(e),E(C)),c&&c.d(),d&&d.d(),V(o),V(h,i)}}}function Ne(a,e,s){let t,n=ie,o=()=>(n(),n=ge(r,l=>s(12,t=l)),r);a.$$.on_destroy.push(()=>n());let{$$slots:f={},$$scope:m}=e,{data:r}=e;o();let{header:g=!0}=e,{state:$=ue}=e,C=new Map,h=be(""),K=Ve([]),w={},c,{class:d=""}=e,{mapClass:q="h-[300px] w-full"}=e,D,P=!1,N="Edit Person",L=[{accessor:l=>l,cell:l=>Ee(Ke,{item:l.value}),header:"Picture",id:"picture",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:l=>l.name,header:"Name",id:"name"},{accessor:l=>{var Q;return((Q=l.point)==null?void 0:Q.address.format(["street","settlement","country","postcode"]))||"No Address"},header:"Address",id:"address"},{accessor:l=>Y(l.min.people,l.max.people,"people"),header:"Capacity (People)",id:"capacity_people"},{accessor:l=>Y(l.min.tasks,l.max.tasks,"tasks"),header:"Capacity (Tasks)",id:"capacity_tasks"}],{actions:B=new Map([...C,["Edit",l=>M(l)],["Delete",l=>l.delete()]])}=e;function M(l){s(11,N="Edit Location"),s(9,D=l),s(10,P=!0)}function i(l){l instanceof X&&M(l)}function u(){s(11,N="Create new Location"),s(9,D=new X({},$)),s(10,P=!0)}function b(l){w=l,s(7,w)}const S=l=>h.set(l);function ce(l){h=l,s(5,h)}function de(l){c=l,s(8,c)}function me(l){w=l,s(7,w)}function _e(l){K=l,s(6,K)}function pe(l){P=l,s(10,P)}return a.$$set=l=>{"data"in l&&o(s(0,r=l.data)),"header"in l&&s(1,g=l.header),"state"in l&&s(17,$=l.state),"class"in l&&s(2,d=l.class),"mapClass"in l&&s(3,q=l.mapClass),"actions"in l&&s(4,B=l.actions),"$$scope"in l&&s(26,m=l.$$scope)},[r,g,d,q,B,h,K,w,c,D,P,N,t,L,M,i,u,$,f,b,S,ce,de,me,_e,pe,m]}class Te extends re{constructor(e){super(),fe(this,e,Ne,De,ae,{data:0,header:1,state:17,class:2,mapClass:3,actions:4})}}function je(a){let e,s,t;return s=new Te({props:{data:a[0],class:"h-full w-full",mapClass:"w-full h-[50%]"}}),{c(){e=G("main"),k(s.$$.fragment),this.h()},l(n){e=H(n,"MAIN",{class:!0});var o=J(e);I(s.$$.fragment,o),o.forEach(E),this.h()},h(){O(e,"class","h-full w-full")},m(n,o){z(n,e,o),F(s,e,null),t=!0},p:ie,i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){p(s.$$.fragment,n),t=!1},d(n){n&&E(e),V(s)}}}function ze(a){return[ue.locations]}class Je extends re{constructor(e){super(),fe(this,e,ze,je,ae,{})}}export{Je as component};
