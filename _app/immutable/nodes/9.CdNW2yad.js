import{s as se,w as K,e as L,a as y,c as Q,b as U,g as z,f as w,m as R,i as q,h as X,x as P,B as Y,q as ae,u as ne,r as le,v as oe,n as ue}from"../chunks/scheduler.DpdggcV9.js";import{S as re,i as ie,e as S,c as I,a as C,m as F,t as h,g as de,b,f as ce,d as v}from"../chunks/index.KweK3yxl.js";import{E as me,D as _e,S as pe,h as ge,i as he}from"../chunks/delete-dialog.B_NFlwz3.js";import{B as be,s as fe,k as $e}from"../chunks/stores.CiPEPIsB.js";import{w as ke}from"../chunks/index.DKR0vYLz.js";import{D as we,c as Z,T as Ie,a as Ce}from"../chunks/table-header.BNCtrxSs.js";import{P as Fe}from"../chunks/property-value.D63xMnEZ.js";import{m as ve}from"../chunks/index.Dv-tIgqn.js";import{C as De}from"../chunks/column-hide-selector.C-7mzX7I.js";const Te=a=>({}),x=a=>({}),Ve=a=>({}),ee=a=>({});function te(a){let e,t;return e=new Ie({props:{sticky:!0,$$slots:{end:[Se],middle:[Pe],start:[Ke]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,s){F(e,n,s),t=!0},p(n,s){const r={};s&33554640&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function Ee(a){let e,t;return e=new he({}),{c(){I(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,s){F(e,n,s),t=!0},i(n){t||(h(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function Ke(a){let e,t,n;e=new be({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[Ee]},$$scope:{ctx:a}}}),e.$on("click",a[14]);const s=a[16].start,r=ae(s,a,a[25],x);return{c(){I(e.$$.fragment),t=y(),r&&r.c()},l(i){C(e.$$.fragment,i),t=z(i),r&&r.l(i)},m(i,c){F(e,i,c),q(i,t,c),r&&r.m(i,c),n=!0},p(i,c){const f={};c&33554432&&(f.$$scope={dirty:c,ctx:i}),e.$set(f),r&&r.p&&(!n||c&33554432)&&ne(r,s,i,i[25],n?oe(s,i[25],c,Te):le(i[25]),x)},i(i){n||(h(e.$$.fragment,i),h(r,i),n=!0)},o(i){b(e.$$.fragment,i),b(r,i),n=!1},d(i){i&&w(t),v(e,i),r&&r.d(i)}}}function Pe(a){let e;const t=a[16].middle,n=ae(t,a,a[25],ee);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,r){n&&n.m(s,r),e=!0},p(s,r){n&&n.p&&(!e||r&33554432)&&ne(n,t,s,s[25],e?oe(t,s[25],r,Ve):le(s[25]),ee)},i(s){e||(h(n,s),e=!0)},o(s){b(n,s),e=!1},d(s){n&&n.d(s)}}}function Se(a){let e,t,n,s,r;function i(f){a[17](f)}let c={flatColumns:a[7]};return a[6]!==void 0&&(c.hideForId=a[6]),e=new De({props:c}),K.push(()=>S(e,"hideForId",i)),s=new pe({props:{onInput:a[18]}}),{c(){I(e.$$.fragment),n=y(),I(s.$$.fragment)},l(f){C(e.$$.fragment,f),n=z(f),C(s.$$.fragment,f)},m(f,_){F(e,f,_),q(f,n,_),F(s,f,_),r=!0},p(f,_){const $={};_&128&&($.flatColumns=f[7]),!t&&_&64&&(t=!0,$.hideForId=f[6],P(()=>t=!1)),e.$set($);const m={};_&16&&(m.onInput=f[18]),s.$set(m)},i(f){r||(h(e.$$.fragment,f),h(s.$$.fragment,f),r=!0)},o(f){b(e.$$.fragment,f),b(s.$$.fragment,f),r=!1},d(f){f&&w(n),v(e,f),v(s,f)}}}function je(a){let e,t,n,s,r,i,c,f,_,$,m,T,V,g,D,k,d=a[1]&&te(a);function A(l){a[19](l)}function B(l){a[20](l)}function W(l){a[21](l)}function M(l){a[22](l)}let E={class:"w-full",columnInitializers:a[12],data:a[0],actions:a[3],header:a[1],defaultAction:a[13]};a[4]!==void 0&&(E.filterValue=a[4]),a[7]!==void 0&&(E.flatColumns=a[7]),a[6]!==void 0&&(E.hideForId=a[6]),a[5]!==void 0&&(E.sortKeys=a[5]),s=new we({props:E}),K.push(()=>S(s,"filterValue",A)),K.push(()=>S(s,"flatColumns",B)),K.push(()=>S(s,"hideForId",W)),K.push(()=>S(s,"sortKeys",M));function G(l){a[23](l)}let N={selected:a[8],title:a[11]};a[10]!==void 0&&(N.open=a[10]),m=new me({props:N}),K.push(()=>S(m,"open",G));function H(l){a[24](l)}let O={selected:a[8]};return a[9]!==void 0&&(O.open=a[9]),g=new _e({props:O}),K.push(()=>S(g,"open",H)),{c(){e=L("div"),t=L("div"),d&&d.c(),n=y(),I(s.$$.fragment),$=y(),I(m.$$.fragment),V=y(),I(g.$$.fragment),this.h()},l(l){e=Q(l,"DIV",{class:!0});var u=U(e);t=Q(u,"DIV",{class:!0});var p=U(t);d&&d.l(p),n=z(p),C(s.$$.fragment,p),p.forEach(w),u.forEach(w),$=z(l),C(m.$$.fragment,l),V=z(l),C(g.$$.fragment,l),this.h()},h(){R(t,"class","mt-4 flex h-max w-full flex-col items-start justify-start overflow-y-scroll"),R(e,"class",_="flex flex-col items-start justify-start "+a[2])},m(l,u){q(l,e,u),X(e,t),d&&d.m(t,null),X(t,n),F(s,t,null),q(l,$,u),F(m,l,u),q(l,V,u),F(g,l,u),k=!0},p(l,[u]){l[1]?d?(d.p(l,u),u&2&&h(d,1)):(d=te(l),d.c(),h(d,1),d.m(t,n)):d&&(de(),b(d,1,1,()=>{d=null}),ce());const p={};u&1&&(p.data=l[0]),u&8&&(p.actions=l[3]),u&2&&(p.header=l[1]),!r&&u&16&&(r=!0,p.filterValue=l[4],P(()=>r=!1)),!i&&u&128&&(i=!0,p.flatColumns=l[7],P(()=>i=!1)),!c&&u&64&&(c=!0,p.hideForId=l[6],P(()=>c=!1)),!f&&u&32&&(f=!0,p.sortKeys=l[5],P(()=>f=!1)),s.$set(p),(!k||u&4&&_!==(_="flex flex-col items-start justify-start "+l[2]))&&R(e,"class",_);const j={};u&256&&(j.selected=l[8]),u&2048&&(j.title=l[11]),!T&&u&1024&&(T=!0,j.open=l[10],P(()=>T=!1)),m.$set(j);const o={};u&256&&(o.selected=l[8]),!D&&u&512&&(D=!0,o.open=l[9],P(()=>D=!1)),g.$set(o)},i(l){k||(h(d),h(s.$$.fragment,l),h(m.$$.fragment,l),h(g.$$.fragment,l),k=!0)},o(l){b(d),b(s.$$.fragment,l),b(m.$$.fragment,l),b(g.$$.fragment,l),k=!1},d(l){l&&(w(e),w($),w(V)),d&&d.d(),v(s),v(m,l),v(g,l)}}}function qe(a,e,t){let{$$slots:n={},$$scope:s}=e,{data:r}=e,{header:i=!0}=e,{state:c=fe}=e,f=new Map,_=ke(""),$=Ce([]),m={},T,{class:V=""}=e,g,D=!1,k=!1,d="Edit Task",A=[{accessor:o=>o,cell:o=>Z(ge,{item:o.value}),header:"Picture",id:"picture",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:o=>o.name,header:"Name",id:"name"},{accessor:o=>ve(o.min.people,o.max.people,"people"),header:"Required Workers",id:"capacity"}];for(const o of Y(c.templates).task.keys)A.push({accessor:J=>J.properties.get(o),cell:J=>Z(Fe,{property:o,value:J.value}),header:o.name,id:o.uuid});let{actions:B=new Map([...f,["Edit",M],["Delete",W]])}=e;function W(o){Y(c.settings).askDeleteConfirmation?(t(8,g=o),t(9,D=!0)):o.delete()}function M(o){t(11,d="Edit Task"),t(8,g=o.pull()),t(10,k=!0)}function E(){t(11,d="Create new Task"),t(8,g=new $e({name:""},c)),t(10,k=!0)}function G(o){m=o,t(6,m)}const N=o=>_.set(o);function H(o){_=o,t(4,_)}function O(o){T=o,t(7,T)}function l(o){m=o,t(6,m)}function u(o){$=o,t(5,$)}function p(o){k=o,t(10,k)}function j(o){D=o,t(9,D)}return a.$$set=o=>{"data"in o&&t(0,r=o.data),"header"in o&&t(1,i=o.header),"state"in o&&t(15,c=o.state),"class"in o&&t(2,V=o.class),"actions"in o&&t(3,B=o.actions),"$$scope"in o&&t(25,s=o.$$scope)},[r,i,V,B,_,$,m,T,g,D,k,d,A,M,E,c,n,G,N,H,O,l,u,p,j,s]}class ye extends re{constructor(e){super(),ie(this,e,qe,je,se,{data:0,header:1,state:15,class:2,actions:3})}}function ze(a){let e,t,n;return t=new ye({props:{data:a[0],class:"h-full w-full"}}),{c(){e=L("main"),I(t.$$.fragment),this.h()},l(s){e=Q(s,"MAIN",{class:!0});var r=U(e);C(t.$$.fragment,r),r.forEach(w),this.h()},h(){R(e,"class","h-full w-full")},m(s,r){q(s,e,r),F(t,e,null),n=!0},p:ue,i(s){n||(h(t.$$.fragment,s),n=!0)},o(s){b(t.$$.fragment,s),n=!1},d(s){s&&w(e),v(t)}}}function Ae(a){return[fe.tasks]}class Le extends re{constructor(e){super(),ie(this,e,Ae,ze,se,{})}}export{Le as component};
