import{s as ee,a as A,B as N,g as j,i as C,f as k,t as R,d as T,j as U,n as q,e as X,c as Y,b as Z,r as O,h as y,w as P,x as E,C as Re,y as Ve,k as Te,o as Ke,u as Ne,p as Pe,q as Ee}from"../chunks/scheduler.CfTqBbps.js";import{S as te,i as ne,c as $,a as g,m as h,t as _,b as m,d as b,g as ae,f as le,e as L}from"../chunks/index.BMQpolGU.js";import{D as Ue,c as me,R as qe,a as Le,C as He}from"../chunks/column-hide-selector.DxLTjeiX.js";import{C as Oe}from"../chunks/constraints-for-list.mitfACEy.js";import{e as Ge,a as Je,f as Qe,g as We,C as ie,d as pe,A as Se,i as Ae,j as je,S as Xe}from"../chunks/search.CbyWi5od.js";import{d as x,e as re,h as $e,i as Ye,B as Ze}from"../chunks/index.DhF70wyd.js";import{M as De}from"../chunks/map-pin.CGunzyLK.js";import{l as W,m as ge,r as ye}from"../chunks/person.DEL9NjrQ.js";import{w as de}from"../chunks/parse.iudxBx5H.js";import{M as xe,a as et,L as tt}from"../chunks/location-edit-dialog.C7-3YUNI.js";import{e as he}from"../chunks/Icon.CPJVuA9m.js";import{T as nt}from"../chunks/top_bar.BR58X00F.js";import{d as at,c as lt}from"../chunks/osm.CFNGuLEW.js";function ot(s){let t,n;return t=new ie({props:{class:s[5],variant:s[2],$$slots:{hover_icon:[ct],icon:[ft],default:[it]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&32&&(l.class=e[5]),a&4&&(l.variant=e[2]),a&66&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function st(s){let t,n;return t=new ie({props:{class:s[5],variant:s[2],$$slots:{hover_icon:[_t],icon:[ut]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&32&&(l.class=e[5]),a&4&&(l.variant=e[2]),a&64&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function rt(s){let t,n,e,a;const l=[dt,mt],o=[];function i(r,f){return r[3]?0:1}return t=i(s),n=o[t]=l[t](s),{c(){n.c(),e=N()},l(r){n.l(r),e=N()},m(r,f){o[t].m(r,f),C(r,e,f),a=!0},p(r,f){let w=t;t=i(r),t===w?o[t].p(r,f):(ae(),m(o[w],1,1,()=>{o[w]=null}),le(),n=o[t],n?n.p(r,f):(n=o[t]=l[t](r),n.c()),_(n,1),n.m(e.parentNode,e))},i(r){a||(_(n),a=!0)},o(r){m(n),a=!1},d(r){r&&k(e),o[t].d(r)}}}function it(s){let t=x(s[1])+"",n;return{c(){n=R(t)},l(e){n=T(e,t)},m(e,a){C(e,n,a)},p(e,a){a&2&&t!==(t=x(e[1])+"")&&U(n,t)},d(e){e&&k(n)}}}function ft(s){let t,n;return t=new De({props:{slot:"icon"}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p:q,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ct(s){let t,n;return t=new pe({props:{slot:"hover_icon"}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p:q,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ut(s){let t,n;return t=new De({props:{slot:"icon"}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p:q,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function _t(s){let t,n;return t=new pe({props:{slot:"hover_icon"}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p:q,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function mt(s){let t,n;return t=new ie({props:{class:s[5],$$slots:{icon:[ht],default:[pt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&32&&(l.class=e[5]),a&65&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function dt(s){let t,n;return t=new ie({props:{class:s[5]+" !p-0",$$slots:{icon:[kt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&32&&(l.class=e[5]+" !p-0"),a&65&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function pt(s){let t=x(s[0].name)+"",n;return{c(){n=R(t)},l(e){n=T(e,t)},m(e,a){C(e,n,a)},p(e,a){a&1&&t!==(t=x(e[0].name)+"")&&U(n,t)},d(e){e&&k(n)}}}function $t(s){let t=re(s[0].name)+"",n;return{c(){n=R(t)},l(e){n=T(e,t)},m(e,a){C(e,n,a)},p(e,a){a&1&&t!==(t=re(e[0].name)+"")&&U(n,t)},d(e){e&&k(n)}}}function gt(s){let t,n,e,a;return t=new Ae({props:{alt:s[0].name,src:s[0].image_url}}),e=new je({props:{$$slots:{default:[$t]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment),n=A(),$(e.$$.fragment)},l(l){g(t.$$.fragment,l),n=j(l),g(e.$$.fragment,l)},m(l,o){h(t,l,o),C(l,n,o),h(e,l,o),a=!0},p(l,o){const i={};o&1&&(i.alt=l[0].name),o&1&&(i.src=l[0].image_url),t.$set(i);const r={};o&65&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){a||(_(t.$$.fragment,l),_(e.$$.fragment,l),a=!0)},o(l){m(t.$$.fragment,l),m(e.$$.fragment,l),a=!1},d(l){l&&k(n),b(t,l),b(e,l)}}}function ht(s){let t,n;return t=new Se({props:{class:"h-10 w-10",slot:"icon",$$slots:{default:[gt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&65&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function bt(s){let t=re(s[0].name)+"",n;return{c(){n=R(t)},l(e){n=T(e,t)},m(e,a){C(e,n,a)},p(e,a){a&1&&t!==(t=re(e[0].name)+"")&&U(n,t)},d(e){e&&k(n)}}}function wt(s){let t,n,e,a;return t=new Ae({props:{alt:s[0].name,src:s[0].image_url}}),e=new je({props:{$$slots:{default:[bt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment),n=A(),$(e.$$.fragment)},l(l){g(t.$$.fragment,l),n=j(l),g(e.$$.fragment,l)},m(l,o){h(t,l,o),C(l,n,o),h(e,l,o),a=!0},p(l,o){const i={};o&1&&(i.alt=l[0].name),o&1&&(i.src=l[0].image_url),t.$set(i);const r={};o&65&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){a||(_(t.$$.fragment,l),_(e.$$.fragment,l),a=!0)},o(l){m(t.$$.fragment,l),m(e.$$.fragment,l),a=!1},d(l){l&&k(n),b(t,l),b(e,l)}}}function kt(s){let t,n;return t=new Se({props:{class:"h-10 w-10",slot:"icon",$$slots:{default:[wt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&65&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function vt(s){let t,n,e,a;const l=[rt,st,ot],o=[];function i(r,f){return r[0]?0:r[3]?1:2}return t=i(s),n=o[t]=l[t](s),{c(){n.c(),e=N()},l(r){n.l(r),e=N()},m(r,f){o[t].m(r,f),C(r,e,f),a=!0},p(r,f){let w=t;t=i(r),t===w?o[t].p(r,f):(ae(),m(o[w],1,1,()=>{o[w]=null}),le(),n=o[t],n?n.p(r,f):(n=o[t]=l[t](r),n.c()),_(n,1),n.m(e.parentNode,e))},i(r){a||(_(n),a=!0)},o(r){m(n),a=!1},d(r){r&&k(e),o[t].d(r)}}}function be(s){let t,n;return t=new We({props:{class:"max-w-[200px]",$$slots:{default:[Ft]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&67&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function It(s){let t;return{c(){t=R(s[1])},l(n){t=T(n,s[1])},m(n,e){C(n,t,e)},p(n,e){e&2&&U(t,n[1])},d(n){n&&k(t)}}}function Ct(s){let t,n=s[0].name+"",e,a,l,o=s[0].address+"",i;return{c(){t=X("h3"),e=R(n),a=A(),l=X("p"),i=R(o),this.h()},l(r){t=Y(r,"H3",{class:!0});var f=Z(t);e=T(f,n),f.forEach(k),a=j(r),l=Y(r,"P",{class:!0});var w=Z(l);i=T(w,o),w.forEach(k),this.h()},h(){O(t,"class","font-semibold"),O(l,"class","text-muted-foreground")},m(r,f){C(r,t,f),y(t,e),C(r,a,f),C(r,l,f),y(l,i)},p(r,f){f&1&&n!==(n=r[0].name+"")&&U(e,n),f&1&&o!==(o=r[0].address+"")&&U(i,o)},d(r){r&&(k(t),k(a),k(l))}}}function Ft(s){let t;function n(l,o){return l[0]?Ct:It}let e=n(s),a=e(s);return{c(){a.c(),t=N()},l(l){a.l(l),t=N()},m(l,o){a.m(l,o),C(l,t,o)},p(l,o){e===(e=n(l))&&a?a.p(l,o):(a.d(1),a=e(l),a&&(a.c(),a.m(t.parentNode,t)))},d(l){l&&k(t),a.d(l)}}}function Vt(s){let t,n,e,a;t=new Qe({props:{$$slots:{default:[vt]},$$scope:{ctx:s}}});let l=s[4]&&be(s);return{c(){$(t.$$.fragment),n=A(),l&&l.c(),e=N()},l(o){g(t.$$.fragment,o),n=j(o),l&&l.l(o),e=N()},m(o,i){h(t,o,i),C(o,n,i),l&&l.m(o,i),C(o,e,i),a=!0},p(o,i){const r={};i&111&&(r.$$scope={dirty:i,ctx:o}),t.$set(r),o[4]?l?(l.p(o,i),i&16&&_(l,1)):(l=be(o),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(ae(),m(l,1,1,()=>{l=null}),le())},i(o){a||(_(t.$$.fragment,o),_(l),a=!0)},o(o){m(t.$$.fragment,o),m(l),a=!1},d(o){o&&(k(n),k(e)),b(t,o),l&&l.d(o)}}}function Kt(s){let t,n;return t=new Ge({props:{$$slots:{default:[Vt]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,[a]){const l={};a&127&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function Nt(s,t,n){let{location:e=void 0}=t,{placeholder:a="Unassigned"}=t,{variant:l=Je.default}=t,{compact:o=!0}=t,{popoverEnabled:i=!0}=t,{class:r=""}=t;return s.$$set=f=>{"location"in f&&n(0,e=f.location),"placeholder"in f&&n(1,a=f.placeholder),"variant"in f&&n(2,l=f.variant),"compact"in f&&n(3,o=f.compact),"popoverEnabled"in f&&n(4,i=f.popoverEnabled),"class"in f&&n(5,r=f.class)},[e,a,l,o,i,r]}class Pt extends te{constructor(t){super(),ne(this,t,Nt,Kt,ee,{location:0,placeholder:1,variant:2,compact:3,popoverEnabled:4,class:5})}}function Et(s){let t,n,e,a,l,o;function i(p){s[8](p)}function r(p){s[9](p)}function f(p){s[10](p)}function w(p){s[11](p)}let F={class:s[5],columnInitializers:s[6],data:s[4]};return s[0]!==void 0&&(F.filterValue=s[0]),s[3]!==void 0&&(F.flatColumns=s[3]),s[2]!==void 0&&(F.hideForId=s[2]),s[1]!==void 0&&(F.sortKeys=s[1]),t=new Ue({props:F}),P.push(()=>L(t,"filterValue",i)),P.push(()=>L(t,"flatColumns",r)),P.push(()=>L(t,"hideForId",f)),P.push(()=>L(t,"sortKeys",w)),{c(){$(t.$$.fragment)},l(p){g(t.$$.fragment,p)},m(p,v){h(t,p,v),o=!0},p(p,[v]){const V={};v&32&&(V.class=p[5]),v&16&&(V.data=p[4]),!n&&v&1&&(n=!0,V.filterValue=p[0],E(()=>n=!1)),!e&&v&8&&(e=!0,V.flatColumns=p[3],E(()=>e=!1)),!a&&v&4&&(a=!0,V.hideForId=p[2],E(()=>a=!1)),!l&&v&2&&(l=!0,V.sortKeys=p[1],E(()=>l=!1)),t.$set(V)},i(p){o||(_(t.$$.fragment,p),o=!0)},o(p){m(t.$$.fragment,p),o=!1},d(p){b(t,p)}}}function Lt(s,t,n){let{data:e=W}=t,{actions:a=new Map}=t,{filterValue:l=de("")}=t,{sortKeys:o=Le([])}=t,{hideForId:i={}}=t,{flatColumns:r}=t,{class:f=""}=t,w=[{accessor:c=>c,cell:c=>me(Pt,{location:c.value}),header:"Image",id:"image",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:"name",cell:c=>x(c.value),header:"Name",id:"name"},{accessor:"address",header:"Address",id:"address"},{accessor:c=>c,cell:c=>me(Oe,{forOperand:c.value}),header:"Constraints",id:"constraints",plugins:{sort:{getSortValue:c=>ge(c).map(K=>K.type).join(" ")},tableFilter:{getFilterValue:c=>ge(c).map(K=>K.type).join(" ")}}}];a.size>0&&w.push({accessor:c=>c,cell:c=>me(qe,{actions:a,item:c.value}),header:"Actions",id:"actions",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}});function F(c){l=c,n(0,l)}function p(c){r=c,n(3,r)}function v(c){i=c,n(2,i)}function V(c){o=c,n(1,o)}return s.$$set=c=>{"data"in c&&n(4,e=c.data),"actions"in c&&n(7,a=c.actions),"filterValue"in c&&n(0,l=c.filterValue),"sortKeys"in c&&n(1,o=c.sortKeys),"hideForId"in c&&n(2,i=c.hideForId),"flatColumns"in c&&n(3,r=c.flatColumns),"class"in c&&n(5,f=c.class)},[l,o,i,r,e,f,w,a,F,p,v,V]}class St extends te{constructor(t){super(),ne(this,t,Lt,Et,ee,{data:4,actions:7,filterValue:0,sortKeys:1,hideForId:2,flatColumns:3,class:5})}}function we(s,t,n){const e=s.slice();return e[3]=t[n],e}function ke(s){let t,n;return t=new et({props:{location:s[3]}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,a){const l={};a&4&&(l.location=e[3]),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ve(s){let t,n,e=s[3].coordinates&&ke(s);return{c(){e&&e.c(),t=N()},l(a){e&&e.l(a),t=N()},m(a,l){e&&e.m(a,l),C(a,t,l),n=!0},p(a,l){a[3].coordinates?e?(e.p(a,l),l&4&&_(e,1)):(e=ke(a),e.c(),_(e,1),e.m(t.parentNode,t)):e&&(ae(),m(e,1,1,()=>{e=null}),le())},i(a){n||(_(e),n=!0)},o(a){m(e),n=!1},d(a){a&&k(t),e&&e.d(a)}}}function At(s){let t,n,e=he(s[2]),a=[];for(let o=0;o<e.length;o+=1)a[o]=ve(we(s,e,o));const l=o=>m(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();t=N()},l(o){for(let i=0;i<a.length;i+=1)a[i].l(o);t=N()},m(o,i){for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(o,i);C(o,t,i),n=!0},p(o,i){if(i&4){e=he(o[2]);let r;for(r=0;r<e.length;r+=1){const f=we(o,e,r);a[r]?(a[r].p(f,i),_(a[r],1)):(a[r]=ve(f),a[r].c(),_(a[r],1),a[r].m(t.parentNode,t))}for(ae(),r=e.length;r<a.length;r+=1)l(r);le()}},i(o){if(!n){for(let i=0;i<e.length;i+=1)_(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)m(a[i]);n=!1},d(o){o&&k(t),Re(a,o)}}}function jt(s){let t,n;return t=new xe({props:{bounds:$e(s[2].map(Ie)),class:s[1],standardControls:!0,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",$$slots:{default:[At]},$$scope:{ctx:s}}}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},p(e,[a]){const l={};a&4&&(l.bounds=$e(e[2].map(Ie))),a&2&&(l.class=e[1]),a&68&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}const Ie=s=>s.coordinates;function Dt(s,t,n){let e,a=q,l=()=>(a(),a=Ve(o,r=>n(2,e=r)),o);s.$$.on_destroy.push(()=>a());let{locations:o=W}=t;l();let{class:i=""}=t;return s.$$set=r=>{"locations"in r&&l(n(0,o=r.locations)),"class"in r&&n(1,i=r.class)},[o,i,e]}class Mt extends te{constructor(t){super(),ne(this,t,Dt,jt,ee,{locations:0,class:1})}}const Bt=s=>({}),Ce=s=>({}),zt=s=>({}),Fe=s=>({});function Rt(s){let t,n;return t=new pe({}),{c(){$(t.$$.fragment)},l(e){g(t.$$.fragment,e)},m(e,a){h(t,e,a),n=!0},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function Tt(s){let t,n,e;t=new Ze({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon_xl",variant:"ghost",$$slots:{default:[Rt]},$$scope:{ctx:s}}}),t.$on("click",s[10]);const a=s[14].start,l=Ke(a,s,s[23],Ce);return{c(){$(t.$$.fragment),n=A(),l&&l.c()},l(o){g(t.$$.fragment,o),n=j(o),l&&l.l(o)},m(o,i){h(t,o,i),C(o,n,i),l&&l.m(o,i),e=!0},p(o,i){const r={};i&8388608&&(r.$$scope={dirty:i,ctx:o}),t.$set(r),l&&l.p&&(!e||i&8388608)&&Ne(l,a,o,o[23],e?Ee(a,o[23],i,Bt):Pe(o[23]),Ce)},i(o){e||(_(t.$$.fragment,o),_(l,o),e=!0)},o(o){m(t.$$.fragment,o),m(l,o),e=!1},d(o){o&&k(n),b(t,o),l&&l.d(o)}}}function Ut(s){let t;const n=s[14].middle,e=Ke(n,s,s[23],Fe);return{c(){e&&e.c()},l(a){e&&e.l(a)},m(a,l){e&&e.m(a,l),t=!0},p(a,l){e&&e.p&&(!t||l&8388608)&&Ne(e,n,a,a[23],t?Ee(n,a[23],l,zt):Pe(a[23]),Fe)},i(a){t||(_(e,a),t=!0)},o(a){m(e,a),t=!1},d(a){e&&e.d(a)}}}function qt(s){let t,n,e,a,l;function o(r){s[15](r)}let i={flatColumns:s[4]};return s[5]!==void 0&&(i.hideForId=s[5]),t=new He({props:i}),P.push(()=>L(t,"hideForId",o)),a=new Xe({props:{onInput:s[16]}}),{c(){$(t.$$.fragment),e=A(),$(a.$$.fragment)},l(r){g(t.$$.fragment,r),e=j(r),g(a.$$.fragment,r)},m(r,f){h(t,r,f),C(r,e,f),h(a,r,f),l=!0},p(r,f){const w={};f&16&&(w.flatColumns=r[4]),!n&&f&32&&(n=!0,w.hideForId=r[5],E(()=>n=!1)),t.$set(w);const F={};f&4&&(F.onInput=r[16]),a.$set(F)},i(r){l||(_(t.$$.fragment,r),_(a.$$.fragment,r),l=!0)},o(r){m(t.$$.fragment,r),m(a.$$.fragment,r),l=!1},d(r){r&&k(e),b(t,r),b(a,r)}}}function Ht(s){let t,n,e,a,l,o,i,r,f,w,F,p,v,V,c,K;n=new Mt({props:{class:"h-[600px] w-full",locations:s[0]}}),a=new nt({props:{sticky:!0,$$slots:{end:[qt],middle:[Ut],start:[Tt]},$$scope:{ctx:s}}});function S(u){s[17](u)}function D(u){s[18](u)}function G(u){s[19](u)}function fe(u){s[20](u)}let B={actions:s[11],class:"w-full",data:s[0]};s[2]!==void 0&&(B.filterValue=s[2]),s[4]!==void 0&&(B.flatColumns=s[4]),s[5]!==void 0&&(B.hideForId=s[5]),s[3]!==void 0&&(B.sortKeys=s[3]),o=new St({props:B}),P.push(()=>L(o,"filterValue",S)),P.push(()=>L(o,"flatColumns",D)),P.push(()=>L(o,"hideForId",G)),P.push(()=>L(o,"sortKeys",fe));function ce(u){s[21](u)}function ue(u){s[22](u)}let J={onSubmit:s[9],otherLocations:s[8]};return s[7]!==void 0&&(J.locationProps=s[7]),s[6]!==void 0&&(J.open=s[6]),v=new tt({props:J}),P.push(()=>L(v,"locationProps",ce)),P.push(()=>L(v,"open",ue)),{c(){t=X("div"),$(n.$$.fragment),e=A(),$(a.$$.fragment),l=A(),$(o.$$.fragment),p=A(),$(v.$$.fragment),this.h()},l(u){t=Y(u,"DIV",{class:!0});var I=Z(t);g(n.$$.fragment,I),e=j(I),g(a.$$.fragment,I),l=j(I),g(o.$$.fragment,I),I.forEach(k),p=j(u),g(v.$$.fragment,u),this.h()},h(){O(t,"class",F="flex h-full w-full flex-col items-start justify-start overflow-y-scroll "+s[1])},m(u,I){C(u,t,I),h(n,t,null),y(t,e),h(a,t,null),y(t,l),h(o,t,null),C(u,p,I),h(v,u,I),K=!0},p(u,[I]){const oe={};I&1&&(oe.locations=u[0]),n.$set(oe);const se={};I&8388660&&(se.$$scope={dirty:I,ctx:u}),a.$set(se);const M={};I&1&&(M.data=u[0]),!i&&I&4&&(i=!0,M.filterValue=u[2],E(()=>i=!1)),!r&&I&16&&(r=!0,M.flatColumns=u[4],E(()=>r=!1)),!f&&I&32&&(f=!0,M.hideForId=u[5],E(()=>f=!1)),!w&&I&8&&(w=!0,M.sortKeys=u[3],E(()=>w=!1)),o.$set(M),(!K||I&2&&F!==(F="flex h-full w-full flex-col items-start justify-start overflow-y-scroll "+u[1]))&&O(t,"class",F);const H={};I&256&&(H.otherLocations=u[8]),!V&&I&128&&(V=!0,H.locationProps=u[7],E(()=>V=!1)),!c&&I&64&&(c=!0,H.open=u[6],E(()=>c=!1)),v.$set(H)},i(u){K||(_(n.$$.fragment,u),_(a.$$.fragment,u),_(o.$$.fragment,u),_(v.$$.fragment,u),K=!0)},o(u){m(n.$$.fragment,u),m(a.$$.fragment,u),m(o.$$.fragment,u),m(v.$$.fragment,u),K=!1},d(u){u&&(k(t),k(p)),b(n),b(a),b(o),b(v,u)}}}function Ot(s,t,n){let e,a,l,o=q,i=()=>(o(),o=Ve(w,d=>n(13,l=d)),w);Te(s,W,d=>n(24,a=d)),s.$$.on_destroy.push(()=>o());let{$$slots:r={},$$scope:f}=t,{data:w=W}=t;i();let F=de(""),p=Le([]),v,V={},{class:c=""}=t,K=!1,S,D=de(G());function G(){return{...at(),coordinates:Ye(a.map(d=>d.coordinates))??[0,0]}}function fe(d){n(12,S=d.uuid),D.set(d),n(6,K=!0)}function B(d){ye(d)}function ce(d){W.update(z=>{if(S!==void 0){const Q=z.findIndex(_e=>_e.uuid===S);if(Q!==-1){console.log("Updating index: ",Q);const _e=z[Q];return z[Q]={..._e,...d},console.log(z[Q]),z}}let ze=lt(d);return z.push(ze),z}),D.set(G()),n(12,S=void 0),n(6,K=!1)}function ue(){D.set(G()),n(12,S=void 0),n(6,K=!0)}const J=new Map([["Delete",B],["Edit",fe]]);function u(d){V=d,n(5,V)}const I=d=>F.set(d);function oe(d){F=d,n(2,F)}function se(d){v=d,n(4,v)}function M(d){V=d,n(5,V)}function H(d){p=d,n(3,p)}function Me(d){D=d,n(7,D)}function Be(d){K=d,n(6,K)}return s.$$set=d=>{"data"in d&&i(n(0,w=d.data)),"class"in d&&n(1,c=d.class),"$$scope"in d&&n(23,f=d.$$scope)},s.$$.update=()=>{s.$$.dirty&12288&&n(8,e=l.filter(d=>d.uuid!==S))},[w,c,F,p,v,V,K,D,e,ce,ue,J,S,l,r,u,I,oe,se,M,H,Me,Be,f]}class Gt extends te{constructor(t){super(),ne(this,t,Ot,Ht,ee,{data:0,class:1})}}function Jt(s){let t,n,e,a;return e=new Gt({}),{c(){t=X("div"),n=X("main"),$(e.$$.fragment),this.h()},l(l){t=Y(l,"DIV",{class:!0});var o=Z(t);n=Y(o,"MAIN",{class:!0});var i=Z(n);g(e.$$.fragment,i),i.forEach(k),o.forEach(k),this.h()},h(){O(n,"class","h-dvh w-full p-4"),O(t,"class","w-full bg-gray-50")},m(l,o){C(l,t,o),y(t,n),h(e,n,null),a=!0},p:q,i(l){a||(_(e.$$.fragment,l),a=!0)},o(l){m(e.$$.fragment,l),a=!1},d(l){l&&k(t),b(e)}}}class sn extends te{constructor(t){super(),ne(this,t,null,Jt,ee,{})}}export{sn as component};
