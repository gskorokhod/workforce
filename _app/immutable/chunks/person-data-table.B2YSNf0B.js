import{s as ee,w as y,e as te,a as H,c as se,b as ae,g as T,f as B,m as J,i as z,h as ne,x as D,y as oe,q as M,u as G,r as O,v as R}from"./scheduler.D36odqhC.js";import{S as le,i as re,e as S,c as C,a as P,m as k,t as h,g as ie,b,f as fe,d as K}from"./index.DXrj4SHy.js";import{D as ue,E as de,c as L,T as ce,a as _e,P as me,S as ge,b as he}from"./table-header.Csx85VSr.js";import{s as be,$ as pe,P as we,B as Ie}from"./index.BmHYn6PF.js";import{w as Fe}from"./index.B03QNBc8.js";import{P as Ce,C as Pe}from"./column-hide-selector.CGcmCzvg.js";const ke=s=>({}),Q=s=>({}),Ke=s=>({}),U=s=>({}),Ve=s=>({}),W=s=>({});function X(s){let e;const n=s[16].header,t=M(n,s,s[24],W),a=t||Ee(s);return{c(){a&&a.c()},l(l){a&&a.l(l)},m(l,i){a&&a.m(l,i),e=!0},p(l,i){t?t.p&&(!e||i&16777216)&&G(t,n,l,l[24],e?R(n,l[24],i,Ve):O(l[24]),W):a&&a.p&&(!e||i&16777285)&&a.p(l,e?i:-1)},i(l){e||(h(a,l),e=!0)},o(l){b(a,l),e=!1},d(l){a&&a.d(l)}}}function ye(s){let e,n;return e=new he({}),{c(){C(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){k(e,t,a),n=!0},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function De(s){let e,n,t;e=new Ie({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[ye]},$$scope:{ctx:s}}}),e.$on("click",s[13]);const a=s[16].start,l=M(a,s,s[24],Q);return{c(){C(e.$$.fragment),n=H(),l&&l.c()},l(i){P(e.$$.fragment,i),n=T(i),l&&l.l(i)},m(i,c){k(e,i,c),z(i,n,c),l&&l.m(i,c),t=!0},p(i,c){const f={};c&16777216&&(f.$$scope={dirty:c,ctx:i}),e.$set(f),l&&l.p&&(!t||c&16777216)&&G(l,a,i,i[24],t?R(a,i[24],c,ke):O(i[24]),Q)},i(i){t||(h(e.$$.fragment,i),h(l,i),t=!0)},o(i){b(e.$$.fragment,i),b(l,i),t=!1},d(i){i&&B(n),K(e,i),l&&l.d(i)}}}function Se(s){let e;const n=s[16].middle,t=M(n,s,s[24],U);return{c(){t&&t.c()},l(a){t&&t.l(a)},m(a,l){t&&t.m(a,l),e=!0},p(a,l){t&&t.p&&(!e||l&16777216)&&G(t,n,a,a[24],e?R(n,a[24],l,Ke):O(a[24]),U)},i(a){e||(h(t,a),e=!0)},o(a){b(t,a),e=!1},d(a){t&&t.d(a)}}}function Ae(s){let e,n,t,a,l;function i(f){s[17](f)}let c={flatColumns:s[6]};return s[2]!==void 0&&(c.hideForId=s[2]),e=new Pe({props:c}),y.push(()=>S(e,"hideForId",i)),a=new ge({props:{onInput:s[18]}}),{c(){C(e.$$.fragment),t=H(),C(a.$$.fragment)},l(f){P(e.$$.fragment,f),t=T(f),P(a.$$.fragment,f)},m(f,_){k(e,f,_),z(f,t,_),k(a,f,_),l=!0},p(f,_){const m={};_&64&&(m.flatColumns=f[6]),!n&&_&4&&(n=!0,m.hideForId=f[2],D(()=>n=!1)),e.$set(m);const g={};_&1&&(g.onInput=f[18]),a.$set(g)},i(f){l||(h(e.$$.fragment,f),h(a.$$.fragment,f),l=!0)},o(f){b(e.$$.fragment,f),b(a.$$.fragment,f),l=!1},d(f){f&&B(t),K(e,f),K(a,f)}}}function Ee(s){let e,n;return e=new ce({props:{sticky:!0,$$slots:{end:[Ae],middle:[Se],start:[De]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){k(e,t,a),n=!0},p(t,a){const l={};a&16777285&&(l.$$scope={dirty:a,ctx:t}),e.$set(l)},i(t){n||(h(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){K(e,t)}}}function ve(s){let e,n,t,a,l,i,c,f,_,m,g,p,u=s[4]&&X(s);function A(r){s[19](r)}function F(r){s[20](r)}function E(r){s[21](r)}function N(r){s[22](r)}let w={class:"w-full",columnInitializers:s[10],data:s[3],actions:s[11],defaultAction:s[12]};s[0]!==void 0&&(w.filterValue=s[0]),s[6]!==void 0&&(w.flatColumns=s[6]),s[2]!==void 0&&(w.hideForId=s[2]),s[1]!==void 0&&(w.sortKeys=s[1]),t=new ue({props:w}),y.push(()=>S(t,"filterValue",A)),y.push(()=>S(t,"flatColumns",F)),y.push(()=>S(t,"hideForId",E)),y.push(()=>S(t,"sortKeys",N));function j(r){s[23](r)}let v={item:s[7],title:s[9]};return s[8]!==void 0&&(v.open=s[8]),m=new de({props:v}),y.push(()=>S(m,"open",j)),{c(){e=te("div"),u&&u.c(),n=H(),C(t.$$.fragment),_=H(),C(m.$$.fragment),this.h()},l(r){e=se(r,"DIV",{class:!0});var d=ae(e);u&&u.l(d),n=T(d),P(t.$$.fragment,d),d.forEach(B),_=T(r),P(m.$$.fragment,r),this.h()},h(){J(e,"class",f="flex flex-col items-start justify-start "+s[5])},m(r,d){z(r,e,d),u&&u.m(e,null),ne(e,n),k(t,e,null),z(r,_,d),k(m,r,d),p=!0},p(r,[d]){r[4]?u?(u.p(r,d),d&16&&h(u,1)):(u=X(r),u.c(),h(u,1),u.m(e,n)):u&&(ie(),b(u,1,1,()=>{u=null}),fe());const I={};d&8&&(I.data=r[3]),!a&&d&1&&(a=!0,I.filterValue=r[0],D(()=>a=!1)),!l&&d&64&&(l=!0,I.flatColumns=r[6],D(()=>l=!1)),!i&&d&4&&(i=!0,I.hideForId=r[2],D(()=>i=!1)),!c&&d&2&&(c=!0,I.sortKeys=r[1],D(()=>c=!1)),t.$set(I),(!p||d&32&&f!==(f="flex flex-col items-start justify-start "+r[5]))&&J(e,"class",f);const V={};d&128&&(V.item=r[7]),d&512&&(V.title=r[9]),!g&&d&256&&(g=!0,V.open=r[8],D(()=>g=!1)),m.$set(V)},i(r){p||(h(u),h(t.$$.fragment,r),h(m.$$.fragment,r),p=!0)},o(r){b(u),b(t.$$.fragment,r),b(m.$$.fragment,r),p=!1},d(r){r&&(B(e),B(_)),u&&u.d(),K(t),K(m,r)}}}function Be(s,e,n){let{$$slots:t={},$$scope:a}=e,{data:l}=e,{showHeader:i=!0}=e,{state:c=be}=e,{rowActions:f=new Map}=e,{filterValue:_=Fe("")}=e,{sortKeys:m=_e([])}=e,{hideForId:g={}}=e,p,{class:u=""}=e,A,F=!1,E="Edit Person";const N=new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"});let w=[{accessor:o=>o,cell:o=>L(me,{item:o.value}),header:"Avatar",id:"avatar",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:o=>o.name,header:"Name",id:"name"},{accessor:o=>o.dob?N.format(o.dob.toDate(pe())):"Not Set",header:"Date of Birth",id:"dob"}];for(const o of oe(c.templates).person.keys)w.push({accessor:q=>q.properties.get(o),cell:q=>L(Ce,{property:o,value:q.value}),header:o.name,id:o.uuid});let j=new Map([...f,["Edit",o=>v(o)],["Delete",o=>o.delete()]]);function v(o){n(9,E="Edit Person"),n(7,A=o.pull()),n(8,F=!0)}function r(){n(9,E="Create new Person"),n(7,A=new we({name:""},c)),n(8,F=!0)}function d(o){g=o,n(2,g)}const I=o=>_.set(o);function V(o){_=o,n(0,_)}function Y(o){p=o,n(6,p)}function Z(o){g=o,n(2,g)}function $(o){m=o,n(1,m)}function x(o){F=o,n(8,F)}return s.$$set=o=>{"data"in o&&n(3,l=o.data),"showHeader"in o&&n(4,i=o.showHeader),"state"in o&&n(14,c=o.state),"rowActions"in o&&n(15,f=o.rowActions),"filterValue"in o&&n(0,_=o.filterValue),"sortKeys"in o&&n(1,m=o.sortKeys),"hideForId"in o&&n(2,g=o.hideForId),"class"in o&&n(5,u=o.class),"$$scope"in o&&n(24,a=o.$$scope)},[_,m,g,l,i,u,p,A,F,E,w,j,v,r,c,f,t,d,I,V,Y,Z,$,x,a]}class Me extends le{constructor(e){super(),re(this,e,Be,ve,ee,{data:3,showHeader:4,state:14,rowActions:15,filterValue:0,sortKeys:1,hideForId:2,class:5})}}export{Me as P};
