var _v=Object.defineProperty;var gv=(n,e,i)=>e in n?_v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var vp=(n,e,i)=>gv(n,typeof e!="symbol"?e+"":e,i);import{s as st,o as re,p as wt,q as Ke,u as Je,r as Ye,v as Qe,B as Cs,y as Ss,a2 as Tr,a3 as Ir,k as ei,z as He,i as Q,f as F,J as qe,w as Dt,e as Ze,c as Ge,b as $e,ab as wp,M as xi,L as rt,N as _t,D as Gi,K as jt,Q as is,n as Ci,C as yv,G as kl,t as Ct,d as St,j as Ai,h as ut,ae as dd,m as gt,a as it,g as nt,af as w0,x as Fi,A as Yn,a5 as Fo,ac as _a,a6 as vl,ag as ks,ah as md,ai as bv,a8 as vv,aj as wv,aa as xv,ak as xp,ad as _f,l as ts,H as uf,E as x0,a4 as kp,al as qh}from"./scheduler.CDLDw09V.js";import{S as lt,i as ct,c as ce,a as ue,m as fe,t as z,b as D,d as he,g as Tt,f as It,h as Bo,j as No,k as Do,e as Bi}from"./index.M2DpfpR6.js";import{b1 as Cp,I as wa,g as yt,a as Ei,J as Un,H as ga,ax as ed,b2 as kv,b3 as Cv,a$ as pd,b4 as Sv,w as Lo,x as Xc,y as wl,as as Mo,z as Jn,aJ as ba,E as ya,F as Hs,G as Kn,Q as wi,D as _d,au as k0,b5 as Bc,b6 as Tv,b7 as Iv,b8 as Sp,U as Zh,aT as Av,aX as Tp,b9 as Ev,ba as Pv,O as Mv,N as zv,aV as Dv,bb as Lv,at as Rv,aq as Ov,bc as Fv,aW as bl,bd as Bv,ar as Gh,be as Nv,aS as Vv,bf as Ip,bg as jv,bh as Uv,c as Lt,aZ as gd,B as jr,bi as yd,e as Zi,aY as qv,bj as C0,bk as Ap,P as td,j as Zv,bl as Gv,S as S0,a3 as Hv,C as xs,l as Wv,$ as qc,bm as T0,aO as Ts,aP as Xv,b as yn,i as Kv,M as Jv,T as Yv,d as Ep,bn as Pp,bo as Qv,bp as $v,h as e2,Z as _r,bq as t2,br as i2,o as n2,bs as r2,bt as s2,L as Zc,V as af,ai as o2,bu as a2,R as I0,bv as l2,bw as c2,bx as ff,by as Mp,A as u2,s as bd,bz as f2}from"./stores.CKcWXSS-.js";import{s as h2,n as d2,u as m2,o as A0,x as p2,t as _2,g as g2,p as y2,y as b2,b as Vo,z as v2,r as jo,d as Xs,c as Ur,h as w2,v as E0,I as Cl,R as gf,T as Kc,P as yf,A as x2,a as k2,C as C2,e as S2,L as Sr,f as T2,i as I2,D as A2,j as E2,l as P2,m as M2,k as z2,B as D2}from"./index.DIudJtd1.js";import{w as cn,d as Cn,a as L2,r as zo}from"./index.Btam6rZm.js";const R2=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function zp(n){return typeof n=="object"&&n!==null&&"eq"in n&&typeof n.eq=="function"}function P0(n,e,i){return zp(n)&&zp(e)?n.eq(e):Cp(n)&&Cp(e)?n.uuid===e.uuid:n===e}function Dp(n,e){return n.some(i=>P0(i,e))}function id(n,e){return n.filter(i=>!P0(i,e))}function Lp(n,e=.03){if(n.length===0)return;let i=n[0][0],t=n[0][0],r=n[0][1],s=n[0][1];for(const[f,p]of n)f<i&&(i=f),f>t&&(t=f),p<r&&(r=p),p>s&&(s=p);const l=[i-e,s+e],o=[t+e,r-e];return[l,o]}function O2(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function F2(n){let e,i;const t=[{name:"check"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[O2]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function B2(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 6 9 17l-5-5"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class vd extends lt{constructor(e){super(),ct(this,e,B2,F2,st,{})}}function N2(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function V2(n){let e,i;const t=[{name:"chevron-down"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[N2]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function j2(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class wd extends lt{constructor(e){super(),ct(this,e,j2,V2,st,{})}}function U2(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function q2(n){let e,i;const t=[{name:"loader"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[U2]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function Z2(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class G2 extends lt{constructor(e){super(),ct(this,e,Z2,q2,st,{})}}function H2(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function W2(n){let e,i;const t=[{name:"minus"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[H2]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function X2(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M5 12h14"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class K2 extends lt{constructor(e){super(),ct(this,e,X2,W2,st,{})}}function J2(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Y2(n){let e,i;const t=[{name:"pipette"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[J2]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function Q2(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m2 22 1-1h3l9-9"}],["path",{d:"M3 21v-3l9-9"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class $2 extends lt{constructor(e){super(),ct(this,e,Q2,Y2,st,{})}}function ew(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function tw(n){let e,i;const t=[{name:"plus"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[ew]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function iw(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}class M0 extends lt{constructor(e){super(),ct(this,e,iw,tw,st,{})}}function nw(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function rw(n){let e,i;const t=[{name:"search"},n[1],{iconNode:n[0]}];let r={$$slots:{default:[nw]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wa({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[t[0],l&2&&Ei(s[1]),l&1&&{iconNode:s[0]}]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function sw(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return n.$$set=l=>{i(1,e=re(re({},e),wt(l))),"$$scope"in l&&i(3,r=l.$$scope)},e=wt(e),[s,e,t,r]}let z0=class extends lt{constructor(e){super(),ct(this,e,sw,rw,st,{})}};function ow(n){n.setAttribute("data-highlighted","")}function aw(n){n.removeAttribute("data-highlighted")}function Hh(n){return Array.from(n.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>Un(e))}function lw(n,e=500){let i=null;return function(...t){const r=()=>{i=null,n(...t)};i&&clearTimeout(i),i=setTimeout(r,e)}}function cw(n){const e=n.slice();return e.sort(fw),uw(e)}function uw(n){if(n.length<=1)return n.slice();const e=[];for(let t=0;t<n.length;t++){const r=n[t];for(;e.length>=2;){const s=e[e.length-1],l=e[e.length-2];if((s.x-l.x)*(r.y-l.y)>=(s.y-l.y)*(r.x-l.x))e.pop();else break}e.push(r)}e.pop();const i=[];for(let t=n.length-1;t>=0;t--){const r=n[t];for(;i.length>=2;){const s=i[i.length-1],l=i[i.length-2];if((s.x-l.x)*(r.y-l.y)>=(s.y-l.y)*(r.x-l.x))i.pop();else break}i.push(r)}return i.pop(),e.length==1&&i.length==1&&e[0].x==i[0].x&&e[0].y==i[0].y?e:e.concat(i)}function fw(n,e){return n.x<e.x?-1:n.x>e.x?1:n.y<e.y?-1:n.y>e.y?1:0}function hw(n){const e=n.getBoundingClientRect();return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom}]}function dw(n){const e=n.flatMap(i=>hw(i));return cw(e)}function mw(n,e){let i=!1;for(let t=0,r=e.length-1;t<e.length;r=t++){const s=e[t].x,l=e[t].y,o=e[r].x,f=e[r].y;l>n.y!=f>n.y&&n.x<(o-s)*(n.y-l)/(f-l)+s&&(i=!i)}return i}function pa(n){ga&&h2(1).then(()=>{const e=document.activeElement;!Un(e)||e===n||(e.tabIndex=-1,n&&(n.tabIndex=0,n.focus()))})}function D0(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function iR(n){const e=D0(),t=e.indexOf(n)+1,r=e[t];return t<e.length&&Un(r)?r:null}function nR(n){const e=D0(),t=e.indexOf(n)-1,r=e[t];return t>=0&&Un(r)?r:null}const pw=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),_w={onMatch:pa,getCurrentItem:()=>document.activeElement};function gw(n={}){const e={..._w,...n},i=ed(cn([])),t=lw(()=>{i.update(()=>[])});return{typed:i,resetTyped:t,handleTypeaheadSearch:(s,l)=>{if(pw.has(s))return;const o=e.getCurrentItem(),f=Cs(i);if(!Array.isArray(f))return;f.push(s.toLowerCase()),i.set(f);const p=l.filter(Z=>!(Z.getAttribute("disabled")==="true"||Z.getAttribute("aria-disabled")==="true"||Z.hasAttribute("data-disabled"))),C=f.length>1&&f.every(Z=>Z===f[0])?f[0]:f.join(""),A=Un(o)?p.indexOf(o):-1;let V=kv(p,Math.max(A,0));C.length===1&&(V=V.filter(Z=>Z!==o));const G=V.find(Z=>(Z==null?void 0:Z.innerText)&&Z.innerText.toLowerCase().startsWith(C.toLowerCase()));Un(G)&&G!==o&&e.onMatch(G),t()}}}function yw(n){return e=>{const i=e.target,t=Cv(n);if(!t||!pd(i))return!1;const r=t.id;return!!(Sv(i)&&r===i.htmlFor||i.closest(`label[for="${r}"]`))}}const bw={src:"",delayMs:0,onLoadingStatusChange:void 0},vw=n=>{const e={...bw,...n},i=Lo(Xc(e,"loadingStatus","onLoadingStatusChange")),{src:t,delayMs:r}=i,s=e.loadingStatus??cn("loading"),l=wl(s,e==null?void 0:e.onLoadingStatusChange);Mo([t,r],([p,g])=>{if(ga){const C=new Image;C.src=p,C.onload=()=>{if(r!==void 0){const A=window.setTimeout(()=>{l.set("loaded")},g);return()=>window.clearTimeout(A)}else l.set("loaded")},C.onerror=()=>{l.set("error")}}});const o=Jn("avatar-image",{stores:[t,l],returned:([p,g])=>{const C=ba({display:g==="loaded"?"block":"none"});return{src:p,style:C}}}),f=Jn("avatar-fallback",{stores:[l],returned:([p])=>({style:p==="loaded"?ba({display:"none"}):void 0,hidden:p==="loaded"?!0:void 0})});return{elements:{image:o,fallback:f},states:{loadingStatus:l},options:i}},ww={disabled:!1,required:!1,name:void 0,value:"on",defaultChecked:!1};function xw(n){const e={...ww,...n},i=Lo(Xc(e,"checked","defaultChecked")),{disabled:t,name:r,required:s,value:l}=i,o=e.checked??cn(e.defaultChecked),f=wl(o,e==null?void 0:e.onCheckedChange),p=Jn("checkbox",{stores:[f,t,s],returned:([V,U,G])=>({"data-disabled":ya(U),disabled:ya(U),"data-state":V==="indeterminate"?"indeterminate":V?"checked":"unchecked",type:"button",role:"checkbox","aria-checked":V==="indeterminate"?"mixed":V,"aria-required":G}),action:V=>({destroy:Hs(Kn(V,"keydown",G=>{G.key===wi.ENTER&&G.preventDefault()}),Kn(V,"click",()=>{t.get()||f.update(G=>G==="indeterminate"?!0:!G)}))})}),g=Jn("checkbox-input",{stores:[f,r,l,s,t],returned:([V,U,G,Z,K])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:U,value:G,checked:V==="indeterminate"?!1:V,required:Z,disabled:ya(K),style:ba({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})}),C=Cn(f,V=>V==="indeterminate"),A=Cn(f,V=>V===!0);return{elements:{root:p,input:g},states:{checked:f},helpers:{isIndeterminate:C,isChecked:A},options:i}}const kw=[wi.ARROW_LEFT,wi.ESCAPE,wi.ARROW_RIGHT,wi.SHIFT,wi.CAPS_LOCK,wi.CONTROL,wi.ALT,wi.META,wi.ENTER,wi.F1,wi.F2,wi.F3,wi.F4,wi.F5,wi.F6,wi.F7,wi.F8,wi.F9,wi.F10,wi.F11,wi.F12],Cw={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,closeOnEscape:!0,forceVisible:!1,portal:void 0,builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0},Sw=["trigger","menu","label"];function Tw(n){const e={...Cw,...n},i=ed(cn(null)),t=ed(cn(null)),r=e.selected??cn(e.defaultSelected),s=wl(r,e==null?void 0:e.onSelectedChange),l=Cn(t,dt=>dt?Rt(dt):void 0),o=e.open??cn(e.defaultOpen),f=wl(o,e==null?void 0:e.onOpenChange),p=Lo({...Xc(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:g,loop:C,closeOnOutsideClick:A,closeOnEscape:V,preventScroll:U,portal:G,forceVisible:Z,positioning:K,multiple:q,arrowSize:ie,disabled:oe,required:se,typeahead:pe,name:Ie,highlightOnHover:Ce,onOutsideClick:je}=p,{name:Ve,selector:de}=_d(e.builder),Me=Lo({...k0(Sw),...e.ids}),{handleTypeaheadSearch:Re}=gw({onMatch:dt=>{t.set(dt),dt.scrollIntoView({block:g.get()})},getCurrentItem(){return t.get()}});function Rt(dt){const Mt=dt.getAttribute("data-value"),ri=dt.getAttribute("data-label"),Ti=dt.hasAttribute("data-disabled");return{value:Mt&&JSON.parse(Mt),label:ri??dt.textContent??void 0,disabled:!!Ti}}const ti=dt=>{s.update(Mt=>{if(q.get()){const Ti=Array.isArray(Mt)?[...Mt]:[];return Bv(dt,Ti,(Fe,ot)=>Bc(Fe.value,ot.value))}return dt})};function Jt(dt){const Mt=Rt(dt);ti(Mt)}async function We(){f.set(!0);const dt=document.getElementById(Me.trigger.get());if(!dt)return;dt!==i.get()&&i.set(dt),await Ss();const Mt=document.getElementById(Me.menu.get());if(!Un(Mt))return;const ri=Mt.querySelector("[aria-selected=true]");Un(ri)&&t.set(ri)}function Le(){f.set(!1),t.set(null)}const pt=d2({open:f,forceVisible:Z,activeTrigger:i}),xt=Cn([s],([dt])=>Mt=>Array.isArray(dt)?dt.some(ri=>Bc(ri.value,Mt)):Tv(Mt)?Bc(dt==null?void 0:dt.value,Iv(Mt,void 0)):Bc(dt==null?void 0:dt.value,Mt)),At=Cn([l],([dt])=>Mt=>Bc(dt==null?void 0:dt.value,Mt)),di=Jn(Ve("trigger"),{stores:[f,t,oe,Me.menu,Me.trigger,Me.label],returned:([dt,Mt,ri,Ti,Fe,ot])=>({"aria-activedescendant":Mt==null?void 0:Mt.id,"aria-autocomplete":"list","aria-controls":Ti,"aria-expanded":dt,"aria-labelledby":ot,id:Fe,role:"combobox",disabled:ya(ri),type:e.builder==="select"?"button":void 0}),action:dt=>{const Mt=Fv(dt),ri=Hs(Kn(dt,"click",()=>{dt.focus(),f.get()?Le():We()}),Kn(dt,"keydown",ot=>{if(!f.get()){if(kw.includes(ot.key)||ot.key===wi.TAB||ot.key===wi.BACKSPACE&&Mt&&dt.value===""||ot.key===wi.SPACE&&Sp(dt))return;We(),Ss().then(()=>{if(s.get())return;const Wt=document.getElementById(Me.menu.get());if(!Un(Wt))return;const pi=Array.from(Wt.querySelectorAll(`${de("item")}:not([data-disabled]):not([data-hidden])`)).filter(ln=>Un(ln));pi.length&&(ot.key===wi.ARROW_DOWN?(t.set(pi[0]),pi[0].scrollIntoView({block:g.get()})):ot.key===wi.ARROW_UP&&(t.set(Zh(pi)),Zh(pi).scrollIntoView({block:g.get()})))})}if(ot.key===wi.TAB){Le();return}if(ot.key===wi.ENTER&&!ot.isComposing||ot.key===wi.SPACE&&Sp(dt)){ot.preventDefault();const Ne=t.get();Ne&&Jt(Ne),q.get()||Le()}if(ot.key===wi.ARROW_UP&&ot.altKey&&Le(),Av.includes(ot.key)){ot.preventDefault();const Ne=document.getElementById(Me.menu.get());if(!Un(Ne))return;const Wt=Hh(Ne);if(!Wt.length)return;const pi=Wt.filter(qr=>!Tp(qr)&&qr.dataset.hidden===void 0),ln=t.get(),xn=ln?pi.indexOf(ln):-1,ar=C.get(),Dn=g.get();let Sn;switch(ot.key){case wi.ARROW_DOWN:Sn=zv(pi,xn,ar);break;case wi.ARROW_UP:Sn=Mv(pi,xn,ar);break;case wi.PAGE_DOWN:Sn=Pv(pi,xn,10,ar);break;case wi.PAGE_UP:Sn=Ev(pi,xn,10,ar);break;case wi.HOME:Sn=pi[0];break;case wi.END:Sn=Zh(pi);break;default:return}t.set(Sn),Sn==null||Sn.scrollIntoView({block:Dn})}else if(pe.get()){const Ne=document.getElementById(Me.menu.get());if(!Un(Ne))return;Re(ot.key,Hh(Ne))}}));let Ti=bl;const Fe=Dv(dt,{handler:Le,enabled:Cn([f,V],([ot,hn])=>ot&&hn)});return Fe&&Fe.destroy&&(Ti=Fe.destroy),{destroy(){ri(),Ti()}}}}),Yt=Jn(Ve("menu"),{stores:[pt,Me.menu],returned:([dt,Mt])=>({hidden:dt?void 0:!0,id:Mt,role:"listbox",style:ba({display:dt?void 0:"none"})}),action:dt=>{let Mt=bl;const ri=Hs(Mo([pt,G,A,K,i],([Ti,Fe,ot,hn,Ne])=>{Mt(),!(!Ti||!Ne)&&Ss().then(()=>{Mt();const Wt=yw(Me.trigger.get());Mt=m2(dt,{anchorElement:Ne,open:f,options:{floating:hn,focusTrap:null,modal:{closeOnInteractOutside:ot,onClose:Le,open:Ti,shouldCloseOnInteractOutside:pi=>{var xn;if((xn=je.get())==null||xn(pi),pi.defaultPrevented)return!1;const ln=pi.target;return!(!pd(ln)||ln===Ne||Ne.contains(ln)||Wt(pi))}},escapeKeydown:null,portal:A0(dt,Fe)}}).destroy})}));return{destroy:()=>{ri(),Mt()}}}}),{elements:{root:li}}=p2(),{action:vt}=Cs(li),fi=Jn(Ve("label"),{stores:[Me.label,Me.trigger],returned:([dt,Mt])=>({id:dt,for:Mt}),action:vt}),ai=Jn(Ve("option"),{stores:[xt],returned:([dt])=>Mt=>{const ri=dt(Mt.value);return{"data-value":JSON.stringify(Mt.value),"data-label":Mt.label,"data-disabled":ya(Mt.disabled),"aria-disabled":Mt.disabled?!0:void 0,"aria-selected":ri,"data-selected":ri?"":void 0,id:Lv(),role:"option"}},action:dt=>({destroy:Hs(Kn(dt,"click",ri=>{if(Tp(dt)){ri.preventDefault();return}Jt(dt),q.get()||Le()}),Mo(Ce,ri=>ri?Hs(Kn(dt,"mouseover",()=>{t.set(dt)}),Kn(dt,"mouseleave",()=>{t.set(null)})):void 0))})}),Ot=Jn(Ve("group"),{returned:()=>dt=>({role:"group","aria-labelledby":dt})}),ft=Jn(Ve("group-label"),{returned:()=>dt=>({id:dt})}),xe=Rv({value:Cn([s],([dt])=>{const Mt=Array.isArray(dt)?dt.map(ri=>ri.value):dt==null?void 0:dt.value;return typeof Mt=="string"?Mt:JSON.stringify(Mt)}),name:L2(Ie),required:se,prefix:e.builder}),Ni=Jn(Ve("arrow"),{stores:ie,returned:dt=>({"data-arrow":!0,style:ba({position:"absolute",width:`var(--arrow-size, ${dt}px)`,height:`var(--arrow-size, ${dt}px)`})})});return Ov(()=>{if(!ga)return;const dt=document.getElementById(Me.menu.get()),Mt=document.getElementById(Me.trigger.get());if(Mt&&i.set(Mt),!dt)return;const ri=dt.querySelector("[data-selected]");Un(ri)}),Mo([t],([dt])=>{if(!ga)return;const Mt=document.getElementById(Me.menu.get());Un(Mt)&&Hh(Mt).forEach(ri=>{ri===dt?ow(ri):aw(ri)})}),Mo([f],([dt])=>{if(!ga)return;let Mt=bl;return U.get()&&dt&&(Mt=_2()),()=>{Mt()}}),{ids:Me,elements:{trigger:di,group:Ot,option:ai,menu:Yt,groupLabel:ft,label:fi,hiddenInput:xe,arrow:Ni},states:{open:f,selected:s,highlighted:l,highlightedItem:t},helpers:{isSelected:xt,isHighlighted:At,closeMenu:Le},options:p}}function Iw(n){const e=Tw({...n,builder:"select"}),i=Cn(e.states.selected,t=>Array.isArray(t)?t.map(r=>r.label).join(", "):(t==null?void 0:t.label)??"");return{...e,elements:{...e.elements},states:{...e.states,selectedLabel:i}}}const Aw={orientation:"horizontal",decorative:!1},Ew=n=>{const e={...Aw,...n},i=Lo(e),{orientation:t,decorative:r}=i;return{elements:{root:Jn("separator",{stores:[t,r],returned:([l,o])=>({role:o?"none":"separator","aria-orientation":l==="vertical"?l:void 0,"aria-hidden":o,"data-orientation":l})})},options:i}},Pw={type:"single",orientation:"horizontal",loop:!0,rovingFocus:!0,disabled:!1,defaultValue:""},{name:Rp,selector:nf}=_d("toggle-group"),Mw=n=>{const e={...Pw,...n},i=Lo(Xc(e,"value")),{type:t,orientation:r,loop:s,rovingFocus:l,disabled:o}=i,f=e.defaultValue?e.defaultValue:e.type==="single"?void 0:[],p=e.value??cn(f),g=wl(p,e==null?void 0:e.onValueChange),C=Jn(Rp(),{stores:r,returned:U=>({role:"group","data-orientation":U})}),A=Jn(Rp("item"),{stores:[g,o,r,t],returned:([U,G,Z,K])=>q=>{const ie=typeof q=="string"?q:q.value,oe=typeof q=="string"?!1:!!q.disabled,se=G||oe,pe=Array.isArray(U)?U.includes(ie):U===ie,Ie=K==="single",Ce=K==="multiple"||K===void 0;return{disabled:ya(se),pressed:pe,"data-orientation":Z,"data-disabled":ya(se),"data-state":pe?"on":"off","data-value":ie,"aria-pressed":Ce?pe:void 0,"aria-checked":Ie?pe:void 0,type:"button",role:Ie?"radio":void 0,tabindex:pe?0:-1}},action:U=>{let G=bl;const Z=U.closest(nf());if(!Un(Z))return{};const K=Array.from(Z.querySelectorAll(nf("item"))),q=g.get();!(Array.isArray(q)?q.length>0:!!q)&&K[0]===U&&(U.tabIndex=0);function oe(){const pe=U.dataset.value,Ie=U.dataset.disabled==="true";return{value:pe,disabled:Ie}}function se(){const{value:pe,disabled:Ie}=oe();pe===void 0||Ie||g.update(Ce=>Array.isArray(Ce)?Ce.includes(pe)?Ce.filter(je=>je!==pe):[...Ce,pe]:Ce===pe?void 0:pe)}return G=Hs(Kn(U,"click",()=>{se()}),Kn(U,"keydown",pe=>{if(pe.key===wi.SPACE||pe.key===wi.ENTER){pe.preventDefault(),se();return}if(!l.get())return;const Ie=pe.currentTarget;if(!Un(Ie))return;const Ce=Ie.closest(nf());if(!Un(Ce))return;const je=Array.from(Ce.querySelectorAll(nf("item")+":not([data-disabled])")).filter(Jt=>Un(Jt)),Ve=je.indexOf(Ie),de=g2(Ie),Me=r.get(),Re={horizontal:de==="rtl"?wi.ARROW_LEFT:wi.ARROW_RIGHT,vertical:wi.ARROW_DOWN}[Me??"horizontal"],Rt={horizontal:de==="rtl"?wi.ARROW_RIGHT:wi.ARROW_LEFT,vertical:wi.ARROW_UP}[Me??"horizontal"],ti=s.get();if(pe.key===Re){pe.preventDefault();const Jt=Ve+1;Jt>=je.length&&ti?pa(je[0]):pa(je[Jt])}else if(pe.key===Rt){pe.preventDefault();const Jt=Ve-1;Jt<0&&ti?pa(je[je.length-1]):pa(je[Jt])}else pe.key===wi.HOME?(pe.preventDefault(),pa(je[0])):pe.key===wi.END&&(pe.preventDefault(),pa(je[je.length-1]))})),{destroy:G}}}),V=Cn(g,U=>G=>Array.isArray(U)?U.includes(G):U===G);return{elements:{root:C,item:A},states:{value:g},helpers:{isPressed:V},options:i}},zw={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,closeOnPointerDown:!0,openDelay:1e3,closeDelay:0,forceVisible:!1,portal:void 0,closeOnEscape:!0,disableHoverableContent:!1,group:void 0},{name:Wh}=_d("tooltip"),rf=new Map,Dw=["trigger","content"];function Lw(n){const e={...zw,...n},i=Lo(Xc(e,"open","ids")),{positioning:t,arrowSize:r,closeOnPointerDown:s,openDelay:l,closeDelay:o,forceVisible:f,portal:p,closeOnEscape:g,disableHoverableContent:C,group:A}=i,V=e.open??cn(e.defaultOpen),U=wl(V,e==null?void 0:e.onOpenChange),G=cn(null),Z=Lo({...k0(Dw),...e.ids});let K=!1;const q=Me=>ga?document.getElementById(Z[Me].get()):null;let ie=null,oe=null;function se(Me){oe&&(window.clearTimeout(oe),oe=null),ie||(ie=window.setTimeout(()=>{U.set(!0),G.update(Re=>Re??Me),ie=null},l.get()))}function pe(Me){if(ie&&(window.clearTimeout(ie),ie=null),Me&&de){G.set("pointer");return}oe||(oe=window.setTimeout(()=>{U.set(!1),G.set(null),Me&&(K=!1),oe=null},o.get()))}const Ie=Cn([U,f],([Me,Re])=>Me||Re),Ce=Jn(Wh("trigger"),{stores:[Z.content,Z.trigger,U],returned:([Me,Re,Rt])=>({"aria-describedby":Me,id:Re,"data-state":Rt?"open":"closed"}),action:Me=>{const Re=ti=>{g.get()&&ti.key===wi.ESCAPE&&(ie&&(window.clearTimeout(ie),ie=null),U.set(!1))};return{destroy:Hs(Kn(Me,"pointerdown",()=>{s.get()&&(U.set(!1),K=!0,ie&&(window.clearTimeout(ie),ie=null))}),Kn(Me,"pointerenter",ti=>{Ip(ti)||se("pointer")}),Kn(Me,"pointerleave",ti=>{Ip(ti)||ie&&(window.clearTimeout(ie),ie=null)}),Kn(Me,"focus",()=>{K||se("focus")}),Kn(Me,"blur",()=>pe(!0)),Kn(Me,"keydown",Re),Gh(document,"keydown",Re))}}}),je=Jn(Wh("content"),{stores:[Ie,U,p,Z.content],returned:([Me,Re,Rt,ti])=>Nv({role:"tooltip",hidden:Me?void 0:!0,tabindex:-1,style:Me?void 0:ba({display:"none"}),id:ti,"data-portal":Vv(Rt),"data-state":Re?"open":"closed"}),action:Me=>{let Re=bl,Rt=bl;const ti=Mo([Ie,t,p],([Le,pt,xt])=>{Rt(),Re();const At=q("trigger");!Le||!At||Ss().then(()=>{Rt(),Re();const di=A0(Me,xt);di&&(Rt=y2(Me,di).destroy),Re=b2(At,Me,pt).destroy})});function Jt(Le){if(!U.get())return;const pt=Le.target;if(!pd(pt)&&!jv(pt))return;const xt=q("trigger");xt&&pt.contains(xt)&&pe()}const We=Hs(Kn(Me,"pointerenter",()=>se("pointer")),Kn(Me,"pointerdown",()=>se("pointer")),Gh(window,"scroll",Jt,{capture:!0}));return{destroy(){We(),Rt(),Re(),ti()}}}}),Ve=Jn(Wh("arrow"),{stores:r,returned:Me=>({"data-arrow":!0,style:ba({position:"absolute",width:`var(--arrow-size, ${Me}px)`,height:`var(--arrow-size, ${Me}px)`})})});let de=!1;return Mo(U,Me=>{const Re=A.get();if(Re===void 0||Re===!1)return;if(!Me){rf.get(Re)===U&&rf.delete(Re);return}const Rt=rf.get(Re);Rt==null||Rt.set(!1),rf.set(Re,U)}),Mo([U,G],([Me,Re])=>{if(!(!Me||!ga))return Hs(Gh(document,"mousemove",Rt=>{const ti=q("content"),Jt=q("trigger");if(!ti||!Jt)return;const We=C.get()?[Jt]:[Jt,ti],Le=dw(We);de=mw({x:Rt.clientX,y:Rt.clientY},Le),Re==="pointer"&&(de||pe())}))}),{ids:Z,elements:{trigger:Ce,content:je,arrow:Ve},states:{open:U},options:i}}function xd(n,e){return n.length!==e.length?!1:n.every((i,t)=>i===e[t])}function L0(){return{NAME:"alert-dialog",PARTS:["action","cancel","content","description","overlay","portal","title","trigger"]}}function Rw(n){const{NAME:e,PARTS:i}=L0(),t=Vo(e,i),r=v2({...jo(n),role:"alertdialog",forceVisible:!0}),s={...r,getAttrs:t,updateOption:Xs(r.options)};return Tr(e,s),{...s,updateOption:Xs(s.options),getAttrs:t}}function xa(){const{NAME:n}=L0();return Ir(n)}const Ow=n=>({ids:n&1}),Op=n=>({ids:n[0]});function Fw(n){let e;const i=n[12].default,t=Ke(i,n,n[11],Op);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&Je(t,i,r,r[11],e?Qe(i,r[11],s,Ow):Ye(r[11]),Op)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Bw(n,e,i){let t,{$$slots:r={},$$scope:s}=e,{preventScroll:l=void 0}=e,{closeOnEscape:o=void 0}=e,{closeOnOutsideClick:f=!1}=e,{portal:p=void 0}=e,{open:g=void 0}=e,{onOpenChange:C=void 0}=e,{openFocus:A=void 0}=e,{closeFocus:V=void 0}=e,{onOutsideClick:U=void 0}=e;const{states:{open:G},updateOption:Z,ids:K}=Rw({closeOnEscape:o,preventScroll:l,closeOnOutsideClick:f,portal:p,forceVisible:!0,defaultOpen:g,openFocus:A,closeFocus:V,onOutsideClick:U,onOpenChange:({next:ie})=>(g!==ie&&(C==null||C(ie),i(2,g=ie)),ie)}),q=Cn([K.content,K.description,K.title],([ie,oe,se])=>({content:ie,description:oe,title:se}));return ei(n,q,ie=>i(0,t=ie)),n.$$set=ie=>{"preventScroll"in ie&&i(3,l=ie.preventScroll),"closeOnEscape"in ie&&i(4,o=ie.closeOnEscape),"closeOnOutsideClick"in ie&&i(5,f=ie.closeOnOutsideClick),"portal"in ie&&i(6,p=ie.portal),"open"in ie&&i(2,g=ie.open),"onOpenChange"in ie&&i(7,C=ie.onOpenChange),"openFocus"in ie&&i(8,A=ie.openFocus),"closeFocus"in ie&&i(9,V=ie.closeFocus),"onOutsideClick"in ie&&i(10,U=ie.onOutsideClick),"$$scope"in ie&&i(11,s=ie.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&g!==void 0&&G.set(g),n.$$.dirty&8&&Z("preventScroll",l),n.$$.dirty&16&&Z("closeOnEscape",o),n.$$.dirty&32&&Z("closeOnOutsideClick",f),n.$$.dirty&64&&Z("portal",p),n.$$.dirty&256&&Z("openFocus",A),n.$$.dirty&512&&Z("closeFocus",V),n.$$.dirty&1024&&Z("onOutsideClick",U)},[t,q,g,l,o,f,p,C,A,V,U,s,r]}class Nw extends lt{constructor(e){super(),ct(this,e,Bw,Fw,st,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const Vw=n=>({builder:n&8}),Fp=n=>({builder:n[3]}),jw=n=>({builder:n&8}),Bp=n=>({builder:n[3]});function Uw(n){let e=n[1],i,t,r=n[1]&&Xh(n);return{c(){r&&r.c(),i=He()},l(s){r&&r.l(s),i=He()},m(s,l){r&&r.m(s,l),Q(s,i,l),t=!0},p(s,l){s[1]?e?st(e,s[1])?(r.d(1),r=Xh(s),e=s[1],r.c(),r.m(i.parentNode,i)):r.p(s,l):(r=Xh(s),e=s[1],r.c(),r.m(i.parentNode,i)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(z(r,s),t=!0)},o(s){D(r,s),t=!1},d(s){s&&F(i),r&&r.d(s)}}}function qw(n){let e;const i=n[9].default,t=Ke(i,n,n[8],Bp);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,jw):Ye(r[8]),Bp)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Xh(n){let e,i,t,r;const s=n[9].default,l=Ke(s,n,n[8],Fp);let o=[n[3],n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze(n[1]),l&&l.c(),this.h()},l(p){e=Ge(p,(n[1]||"null").toUpperCase(),{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){wp(n[1])(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[10](e),i=!0,t||(r=xi(n[3].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&264)&&Je(l,s,p,p[8],i?Qe(s,p[8],g,Vw):Ye(p[8]),Fp),wp(p[1])(e,f=yt(o,[g&8&&p[3],g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[10](null),t=!1,r()}}}function Zw(n){let e,i,t,r;const s=[qw,Uw],l=[];function o(f,p){return f[2]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Gw(n,e,i){let t;const r=["level","asChild","id","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{level:p="h2"}=e,{asChild:g=!1}=e,{id:C=void 0}=e,{el:A=void 0}=e;const{elements:{title:V},ids:U,getAttrs:G}=xa();ei(n,V,q=>i(7,l=q));const Z=G("title");function K(q){Dt[q?"unshift":"push"](()=>{A=q,i(0,A)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(5,s=qe(e,r)),"level"in q&&i(1,p=q.level),"asChild"in q&&i(2,g=q.asChild),"id"in q&&i(6,C=q.id),"el"in q&&i(0,A=q.el),"$$scope"in q&&i(8,f=q.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&C&&U.title.set(C),n.$$.dirty&128&&i(3,t=l),n.$$.dirty&8&&Object.assign(t,Z)},[A,p,g,t,V,s,C,l,f,o,K]}let Hw=class extends lt{constructor(e){super(),ct(this,e,Gw,Zw,st,{level:1,asChild:2,id:6,el:0})}};const Ww=n=>({builder:n&4}),Np=n=>({builder:n[2]}),Xw=n=>({builder:n&4}),Vp=n=>({builder:n[2]});function Kw(n){let e,i,t,r;const s=n[8].default,l=Ke(s,n,n[7],Np);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[9](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4]),_t(e,"m-keydown",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&132)&&Je(l,s,p,p[7],i?Qe(s,p[7],g,Ww):Ye(p[7]),Np),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[9](null),t=!1,Gi(r)}}}function Jw(n){let e;const i=n[8].default,t=Ke(i,n,n[7],Vp);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,Xw):Ye(r[7]),Vp)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Yw(n){let e,i,t,r;const s=[Jw,Kw],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Qw(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{close:C},getAttrs:A}=xa();ei(n,C,Z=>i(6,l=Z));const V=Ur(),U=A("action");function G(Z){Dt[Z?"unshift":"push"](()=>{g=Z,i(0,g)})}return n.$$set=Z=>{e=re(re({},e),wt(Z)),i(5,s=qe(e,r)),"asChild"in Z&&i(1,p=Z.asChild),"el"in Z&&i(0,g=Z.el),"$$scope"in Z&&i(7,f=Z.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,U)},[g,p,t,C,V,s,l,f,o,G]}let $w=class extends lt{constructor(e){super(),ct(this,e,Qw,Yw,st,{asChild:1,el:0})}};const ex=n=>({builder:n&4}),jp=n=>({builder:n[2]}),tx=n=>({builder:n&4}),Up=n=>({builder:n[2]});function ix(n){let e,i,t,r;const s=n[8].default,l=Ke(s,n,n[7],jp);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[9](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4]),_t(e,"m-keydown",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&132)&&Je(l,s,p,p[7],i?Qe(s,p[7],g,ex):Ye(p[7]),jp),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[9](null),t=!1,Gi(r)}}}function nx(n){let e;const i=n[8].default,t=Ke(i,n,n[7],Up);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,tx):Ye(r[7]),Up)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function rx(n){let e,i,t,r;const s=[nx,ix],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function sx(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{close:C},getAttrs:A}=xa();ei(n,C,Z=>i(6,l=Z));const V=Ur(),U=A("cancel");function G(Z){Dt[Z?"unshift":"push"](()=>{g=Z,i(0,g)})}return n.$$set=Z=>{e=re(re({},e),wt(Z)),i(5,s=qe(e,r)),"asChild"in Z&&i(1,p=Z.asChild),"el"in Z&&i(0,g=Z.el),"$$scope"in Z&&i(7,f=Z.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,U)},[g,p,t,C,V,s,l,f,o,G]}let ox=class extends lt{constructor(e){super(),ct(this,e,sx,rx,st,{asChild:1,el:0})}};const ax=n=>({builder:n&4}),qp=n=>({builder:n[2]}),lx=n=>({builder:n&4}),Zp=n=>({builder:n[2]});function cx(n){let e,i,t,r;const s=n[7].default,l=Ke(s,n,n[6],qp);let o=[n[2],n[4]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[8](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&68)&&Je(l,s,p,p[6],i?Qe(s,p[6],g,ax):Ye(p[6]),qp),rt(e,f=yt(o,[g&4&&p[2],g&16&&p[4]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[8](null),t=!1,r()}}}function ux(n){let e;const i=n[7].default,t=Ke(i,n,n[6],Zp);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Je(t,i,r,r[6],e?Qe(i,r[6],s,lx):Ye(r[6]),Zp)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function fx(n){let e,i,t,r;const s=[ux,cx],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function hx(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{portalled:C},getAttrs:A}=xa();ei(n,C,G=>i(5,l=G));const V=A("portal");function U(G){Dt[G?"unshift":"push"](()=>{g=G,i(0,g)})}return n.$$set=G=>{e=re(re({},e),wt(G)),i(4,s=qe(e,r)),"asChild"in G&&i(1,p=G.asChild),"el"in G&&i(0,g=G.el),"$$scope"in G&&i(6,f=G.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,V)},[g,p,t,C,s,l,f,o,U]}let dx=class extends lt{constructor(e){super(),ct(this,e,hx,fx,st,{asChild:1,el:0})}};const mx=n=>({builder:n[0]&256}),Gp=n=>({builder:n[8]}),px=n=>({builder:n[0]&256}),Hp=n=>({builder:n[8]}),_x=n=>({builder:n[0]&256}),Wp=n=>({builder:n[8]}),gx=n=>({builder:n[0]&256}),Xp=n=>({builder:n[8]}),yx=n=>({builder:n[0]&256}),Kp=n=>({builder:n[8]}),bx=n=>({builder:n[0]&256}),Jp=n=>({builder:n[8]});function vx(n){let e,i,t,r;const s=n[16].default,l=Ke(s,n,n[15],Gp);let o=[n[8],n[12]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[56](e),i=!0,t||(r=[xi(n[8].action(e)),_t(e,"pointerdown",n[45]),_t(e,"pointermove",n[46]),_t(e,"pointerup",n[47]),_t(e,"touchcancel",n[48]),_t(e,"touchend",n[49]),_t(e,"touchmove",n[50],{passive:!1}),_t(e,"touchstart",n[51],{passive:!1})],t=!0)},p(p,g){l&&l.p&&(!i||g[0]&33024)&&Je(l,s,p,p[15],i?Qe(s,p[15],g,mx):Ye(p[15]),Gp),rt(e,f=yt(o,[g[0]&256&&p[8],g[0]&4096&&p[12]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[56](null),t=!1,Gi(r)}}}function wx(n){let e,i,t,r,s;const l=n[16].default,o=Ke(l,n,n[15],Hp);let f=[n[8],n[12]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[55](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"pointerdown",n[38]),_t(e,"pointermove",n[39]),_t(e,"pointerup",n[40]),_t(e,"touchcancel",n[41]),_t(e,"touchend",n[42]),_t(e,"touchmove",n[43],{passive:!1}),_t(e,"touchstart",n[44],{passive:!1})],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&33024)&&Je(o,l,n,n[15],t?Qe(l,n[15],C,px):Ye(n[15]),Hp),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&4096&&n[12]]))},i(g){t||(z(o,g),i&&i.end(1),t=!0)},o(g){D(o,g),g&&(i=Bo(e,n[5],n[6])),t=!1},d(g){g&&F(e),o&&o.d(g),n[55](null),g&&i&&i.end(),r=!1,Gi(s)}}}function xx(n){let e,i,t,r,s;const l=n[16].default,o=Ke(l,n,n[15],Wp);let f=[n[8],n[12]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[54](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"pointerdown",n[31]),_t(e,"pointermove",n[32]),_t(e,"pointerup",n[33]),_t(e,"touchcancel",n[34]),_t(e,"touchend",n[35]),_t(e,"touchmove",n[36],{passive:!1}),_t(e,"touchstart",n[37],{passive:!1})],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&33024)&&Je(o,l,n,n[15],t?Qe(l,n[15],C,_x):Ye(n[15]),Wp),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&4096&&n[12]]))},i(g){t||(z(o,g),g&&(i||is(()=>{i=No(e,n[3],n[4]),i.start()})),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),n[54](null),r=!1,Gi(s)}}}function kx(n){let e,i,t,r,s,l;const o=n[16].default,f=Ke(o,n,n[15],Xp);let p=[n[8],n[12]],g={};for(let C=0;C<p.length;C+=1)g=re(g,p[C]);return{c(){e=Ze("div"),f&&f.c(),this.h()},l(C){e=Ge(C,"DIV",{});var A=$e(e);f&&f.l(A),A.forEach(F),this.h()},h(){rt(e,g)},m(C,A){Q(C,e,A),f&&f.m(e,null),n[53](e),r=!0,s||(l=[xi(n[8].action(e)),_t(e,"pointerdown",n[24]),_t(e,"pointermove",n[25]),_t(e,"pointerup",n[26]),_t(e,"touchcancel",n[27]),_t(e,"touchend",n[28]),_t(e,"touchmove",n[29],{passive:!1}),_t(e,"touchstart",n[30],{passive:!1})],s=!0)},p(C,A){n=C,f&&f.p&&(!r||A[0]&33024)&&Je(f,o,n,n[15],r?Qe(o,n[15],A,gx):Ye(n[15]),Xp),rt(e,g=yt(p,[A[0]&256&&n[8],A[0]&4096&&n[12]]))},i(C){r||(z(f,C),C&&is(()=>{r&&(t&&t.end(1),i=No(e,n[3],n[4]),i.start())}),r=!0)},o(C){D(f,C),i&&i.invalidate(),C&&(t=Bo(e,n[5],n[6])),r=!1},d(C){C&&F(e),f&&f.d(C),n[53](null),C&&t&&t.end(),s=!1,Gi(l)}}}function Cx(n){let e,i,t,r,s;const l=n[16].default,o=Ke(l,n,n[15],Kp);let f=[n[8],n[12]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[52](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"pointerdown",n[17]),_t(e,"pointermove",n[18]),_t(e,"pointerup",n[19]),_t(e,"touchcancel",n[20]),_t(e,"touchend",n[21]),_t(e,"touchmove",n[22],{passive:!1}),_t(e,"touchstart",n[23],{passive:!1})],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&33024)&&Je(o,l,n,n[15],t?Qe(l,n[15],C,yx):Ye(n[15]),Kp),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&4096&&n[12]]))},i(g){t||(z(o,g),g&&is(()=>{t&&(i||(i=Do(e,n[1],n[2],!0)),i.run(1))}),t=!0)},o(g){D(o,g),g&&(i||(i=Do(e,n[1],n[2],!1)),i.run(0)),t=!1},d(g){g&&F(e),o&&o.d(g),n[52](null),g&&i&&i.end(),r=!1,Gi(s)}}}function Sx(n){let e;const i=n[16].default,t=Ke(i,n,n[15],Jp);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&33024)&&Je(t,i,r,r[15],e?Qe(i,r[15],s,bx):Ye(r[15]),Jp)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Tx(n){let e,i,t,r;const s=[Sx,Cx,kx,xx,wx,vx],l=[];function o(f,p){return f[7]&&f[9]?0:f[1]&&f[9]?1:f[3]&&f[5]&&f[9]?2:f[3]&&f[9]?3:f[5]&&f[9]?4:f[9]?5:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function Ix(n,e,i){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","id","asChild","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{transition:g=void 0}=e,{transitionConfig:C=void 0}=e,{inTransition:A=void 0}=e,{inTransitionConfig:V=void 0}=e,{outTransition:U=void 0}=e,{outTransitionConfig:G=void 0}=e,{id:Z=void 0}=e,{asChild:K=!1}=e,{el:q=void 0}=e;const{elements:{content:ie},states:{open:oe},ids:se,getAttrs:pe}=xa();ei(n,ie,Ae=>i(14,l=Ae)),ei(n,oe,Ae=>i(9,o=Ae));const Ie=pe("content");function Ce(Ae){jt.call(this,n,Ae)}function je(Ae){jt.call(this,n,Ae)}function Ve(Ae){jt.call(this,n,Ae)}function de(Ae){jt.call(this,n,Ae)}function Me(Ae){jt.call(this,n,Ae)}function Re(Ae){jt.call(this,n,Ae)}function Rt(Ae){jt.call(this,n,Ae)}function ti(Ae){jt.call(this,n,Ae)}function Jt(Ae){jt.call(this,n,Ae)}function We(Ae){jt.call(this,n,Ae)}function Le(Ae){jt.call(this,n,Ae)}function pt(Ae){jt.call(this,n,Ae)}function xt(Ae){jt.call(this,n,Ae)}function At(Ae){jt.call(this,n,Ae)}function di(Ae){jt.call(this,n,Ae)}function Yt(Ae){jt.call(this,n,Ae)}function li(Ae){jt.call(this,n,Ae)}function vt(Ae){jt.call(this,n,Ae)}function fi(Ae){jt.call(this,n,Ae)}function ai(Ae){jt.call(this,n,Ae)}function Ot(Ae){jt.call(this,n,Ae)}function ft(Ae){jt.call(this,n,Ae)}function xe(Ae){jt.call(this,n,Ae)}function Ni(Ae){jt.call(this,n,Ae)}function dt(Ae){jt.call(this,n,Ae)}function Mt(Ae){jt.call(this,n,Ae)}function ri(Ae){jt.call(this,n,Ae)}function Ti(Ae){jt.call(this,n,Ae)}function Fe(Ae){jt.call(this,n,Ae)}function ot(Ae){jt.call(this,n,Ae)}function hn(Ae){jt.call(this,n,Ae)}function Ne(Ae){jt.call(this,n,Ae)}function Wt(Ae){jt.call(this,n,Ae)}function pi(Ae){jt.call(this,n,Ae)}function ln(Ae){jt.call(this,n,Ae)}function xn(Ae){Dt[Ae?"unshift":"push"](()=>{q=Ae,i(0,q)})}function ar(Ae){Dt[Ae?"unshift":"push"](()=>{q=Ae,i(0,q)})}function Dn(Ae){Dt[Ae?"unshift":"push"](()=>{q=Ae,i(0,q)})}function Sn(Ae){Dt[Ae?"unshift":"push"](()=>{q=Ae,i(0,q)})}function qr(Ae){Dt[Ae?"unshift":"push"](()=>{q=Ae,i(0,q)})}return n.$$set=Ae=>{e=re(re({},e),wt(Ae)),i(12,s=qe(e,r)),"transition"in Ae&&i(1,g=Ae.transition),"transitionConfig"in Ae&&i(2,C=Ae.transitionConfig),"inTransition"in Ae&&i(3,A=Ae.inTransition),"inTransitionConfig"in Ae&&i(4,V=Ae.inTransitionConfig),"outTransition"in Ae&&i(5,U=Ae.outTransition),"outTransitionConfig"in Ae&&i(6,G=Ae.outTransitionConfig),"id"in Ae&&i(13,Z=Ae.id),"asChild"in Ae&&i(7,K=Ae.asChild),"el"in Ae&&i(0,q=Ae.el),"$$scope"in Ae&&i(15,p=Ae.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8192&&Z&&se.content.set(Z),n.$$.dirty[0]&16384&&i(8,t=l),n.$$.dirty[0]&256&&Object.assign(t,Ie)},[q,g,C,A,V,U,G,K,t,o,ie,oe,s,Z,l,p,f,Ce,je,Ve,de,Me,Re,Rt,ti,Jt,We,Le,pt,xt,At,di,Yt,li,vt,fi,ai,Ot,ft,xe,Ni,dt,Mt,ri,Ti,Fe,ot,hn,Ne,Wt,pi,ln,xn,ar,Dn,Sn,qr]}let Ax=class extends lt{constructor(e){super(),ct(this,e,Ix,Tx,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,id:13,asChild:7,el:0},null,[-1,-1])}};const Ex=n=>({builder:n&256}),Yp=n=>({builder:n[8]});function Px(n){let e,i,t,r=[n[8],n[12]],s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return{c(){e=Ze("div"),this.h()},l(l){e=Ge(l,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,s)},m(l,o){Q(l,e,o),n[20](e),i||(t=xi(n[8].action(e)),i=!0)},p(l,o){rt(e,s=yt(r,[o&256&&l[8],o&4096&&l[12]]))},i:Ci,o:Ci,d(l){l&&F(e),n[20](null),i=!1,t()}}}function Mx(n){let e,i,t,r,s,l=[n[8],n[12]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("div"),this.h()},l(f){e=Ge(f,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),n[19](e),t=!0,r||(s=xi(n[8].action(e)),r=!0)},p(f,p){n=f,rt(e,o=yt(l,[p&256&&n[8],p&4096&&n[12]]))},i(f){t||(i&&i.end(1),t=!0)},o(f){f&&(i=Bo(e,n[5],n[6])),t=!1},d(f){f&&F(e),n[19](null),f&&i&&i.end(),r=!1,s()}}}function zx(n){let e,i,t,r,s=[n[8],n[12]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("div"),this.h()},l(o){e=Ge(o,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),n[18](e),t||(r=xi(n[8].action(e)),t=!0)},p(o,f){n=o,rt(e,l=yt(s,[f&256&&n[8],f&4096&&n[12]]))},i(o){o&&(i||is(()=>{i=No(e,n[3],n[4]),i.start()}))},o:Ci,d(o){o&&F(e),n[18](null),t=!1,r()}}}function Dx(n){let e,i,t,r,s,l,o=[n[8],n[12]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),this.h()},l(p){e=Ge(p,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),n[17](e),r=!0,s||(l=xi(n[8].action(e)),s=!0)},p(p,g){n=p,rt(e,f=yt(o,[g&256&&n[8],g&4096&&n[12]]))},i(p){r||(p&&is(()=>{r&&(t&&t.end(1),i=No(e,n[3],n[4]),i.start())}),r=!0)},o(p){i&&i.invalidate(),p&&(t=Bo(e,n[5],n[6])),r=!1},d(p){p&&F(e),n[17](null),p&&t&&t.end(),s=!1,l()}}}function Lx(n){let e,i,t,r,s,l=[n[8],n[12]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("div"),this.h()},l(f){e=Ge(f,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),n[16](e),t=!0,r||(s=xi(n[8].action(e)),r=!0)},p(f,p){n=f,rt(e,o=yt(l,[p&256&&n[8],p&4096&&n[12]]))},i(f){t||(f&&is(()=>{t&&(i||(i=Do(e,n[1],n[2],!0)),i.run(1))}),t=!0)},o(f){f&&(i||(i=Do(e,n[1],n[2],!1)),i.run(0)),t=!1},d(f){f&&F(e),n[16](null),f&&i&&i.end(),r=!1,s()}}}function Rx(n){let e;const i=n[15].default,t=Ke(i,n,n[14],Yp);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16640)&&Je(t,i,r,r[14],e?Qe(i,r[14],s,Ex):Ye(r[14]),Yp)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Ox(n){let e,i,t,r;const s=[Rx,Lx,Dx,zx,Mx,Px],l=[];function o(f,p){return f[7]&&f[9]?0:f[1]&&f[9]?1:f[3]&&f[5]&&f[9]?2:f[3]&&f[9]?3:f[5]&&f[9]?4:f[9]?5:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function Fx(n,e,i){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{transition:g=void 0}=e,{transitionConfig:C=void 0}=e,{inTransition:A=void 0}=e,{inTransitionConfig:V=void 0}=e,{outTransition:U=void 0}=e,{outTransitionConfig:G=void 0}=e,{asChild:Z=!1}=e,{el:K=void 0}=e;const{elements:{overlay:q},states:{open:ie},getAttrs:oe}=xa();ei(n,q,de=>i(13,l=de)),ei(n,ie,de=>i(9,o=de));const se=oe("overlay");function pe(de){Dt[de?"unshift":"push"](()=>{K=de,i(0,K)})}function Ie(de){Dt[de?"unshift":"push"](()=>{K=de,i(0,K)})}function Ce(de){Dt[de?"unshift":"push"](()=>{K=de,i(0,K)})}function je(de){Dt[de?"unshift":"push"](()=>{K=de,i(0,K)})}function Ve(de){Dt[de?"unshift":"push"](()=>{K=de,i(0,K)})}return n.$$set=de=>{e=re(re({},e),wt(de)),i(12,s=qe(e,r)),"transition"in de&&i(1,g=de.transition),"transitionConfig"in de&&i(2,C=de.transitionConfig),"inTransition"in de&&i(3,A=de.inTransition),"inTransitionConfig"in de&&i(4,V=de.inTransitionConfig),"outTransition"in de&&i(5,U=de.outTransition),"outTransitionConfig"in de&&i(6,G=de.outTransitionConfig),"asChild"in de&&i(7,Z=de.asChild),"el"in de&&i(0,K=de.el),"$$scope"in de&&i(14,p=de.$$scope)},n.$$.update=()=>{n.$$.dirty&8192&&i(8,t=l),n.$$.dirty&256&&Object.assign(t,se)},[K,g,C,A,V,U,G,Z,t,o,q,ie,s,l,p,f,pe,Ie,Ce,je,Ve]}let Bx=class extends lt{constructor(e){super(),ct(this,e,Fx,Ox,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const Nx=n=>({builder:n&4}),Qp=n=>({builder:n[2]}),Vx=n=>({builder:n&4}),$p=n=>({builder:n[2]});function jx(n){let e,i,t,r;const s=n[8].default,l=Ke(s,n,n[7],Qp);let o=[n[2],n[4]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[9](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&132)&&Je(l,s,p,p[7],i?Qe(s,p[7],g,Nx):Ye(p[7]),Qp),rt(e,f=yt(o,[g&4&&p[2],g&16&&p[4]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[9](null),t=!1,r()}}}function Ux(n){let e;const i=n[8].default,t=Ke(i,n,n[7],$p);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,Vx):Ye(r[7]),$p)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function qx(n){let e,i,t,r;const s=[Ux,jx],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Zx(n,e,i){let t;const r=["asChild","id","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{id:g=void 0}=e,{el:C=void 0}=e;const{elements:{description:A},ids:V,getAttrs:U}=xa();ei(n,A,K=>i(6,l=K));const G=U("description");function Z(K){Dt[K?"unshift":"push"](()=>{C=K,i(0,C)})}return n.$$set=K=>{e=re(re({},e),wt(K)),i(4,s=qe(e,r)),"asChild"in K&&i(1,p=K.asChild),"id"in K&&i(5,g=K.id),"el"in K&&i(0,C=K.el),"$$scope"in K&&i(7,f=K.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&g&&V.description.set(g),n.$$.dirty&64&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,G)},[C,p,t,A,s,g,l,f,o,Z]}let Gx=class extends lt{constructor(e){super(),ct(this,e,Zx,qx,st,{asChild:1,id:5,el:0})}};function kd(){return{NAME:"avatar",PARTS:["root","image","fallback"]}}function Hx(n){const{NAME:e,PARTS:i}=kd(),t=Vo(e,i),r={...vw(jo(n)),getAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function Wx(n=""){const{NAME:e}=kd(),i=Ir(e);return n?i.options.src.set(n):i.options.src.set(""),i}function Xx(){const{NAME:n}=kd();return Ir(n)}const Kx=n=>({}),e_=n=>({attrs:n[2]}),Jx=n=>({}),t_=n=>({attrs:n[2]});function Yx(n){let e,i;const t=n[8].default,r=Ke(t,n,n[7],e_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("div"),r&&r.c(),this.h()},l(o){e=Ge(o,"DIV",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[9](e),i=!0},p(o,f){r&&r.p&&(!i||f&128)&&Je(r,t,o,o[7],i?Qe(t,o[7],f,Kx):Ye(o[7]),e_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[9](null)}}}function Qx(n){let e;const i=n[8].default,t=Ke(i,n,n[7],t_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,Jx):Ye(r[7]),t_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function $x(n){let e,i,t,r;const s=[Qx,Yx],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function ek(n,e,i){const t=["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{delayMs:o=void 0}=e,{loadingStatus:f=void 0}=e,{onLoadingStatusChange:p=void 0}=e,{asChild:g=!1}=e,{el:C=void 0}=e;const{states:{loadingStatus:A},updateOption:V,getAttrs:U}=Hx({src:"",delayMs:o,onLoadingStatusChange:({next:K})=>(i(4,f=K),p==null||p(K),K)}),G=U("root");function Z(K){Dt[K?"unshift":"push"](()=>{C=K,i(0,C)})}return n.$$set=K=>{e=re(re({},e),wt(K)),i(3,r=qe(e,t)),"delayMs"in K&&i(5,o=K.delayMs),"loadingStatus"in K&&i(4,f=K.loadingStatus),"onLoadingStatusChange"in K&&i(6,p=K.onLoadingStatusChange),"asChild"in K&&i(1,g=K.asChild),"el"in K&&i(0,C=K.el),"$$scope"in K&&i(7,l=K.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&f!==void 0&&A.set(f),n.$$.dirty&32&&V("delayMs",o)},[C,g,G,r,f,o,p,l,s,Z]}let tk=class extends lt{constructor(e){super(),ct(this,e,ek,$x,st,{delayMs:5,loadingStatus:4,onLoadingStatusChange:6,asChild:1,el:0})}};const ik=n=>({builder:n&8}),i_=n=>({builder:n[3]});function nk(n){let e,i,t,r=[n[3],{alt:n[1]},n[5]],s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return{c(){e=Ze("img"),this.h()},l(l){e=Ge(l,"IMG",{alt:!0}),this.h()},h(){rt(e,s)},m(l,o){Q(l,e,o),n[10](e),i||(t=xi(n[3].action(e)),i=!0)},p(l,o){rt(e,s=yt(r,[o&8&&l[3],o&2&&{alt:l[1]},o&32&&l[5]]))},i:Ci,o:Ci,d(l){l&&F(e),n[10](null),i=!1,t()}}}function rk(n){let e;const i=n[9].default,t=Ke(i,n,n[8],i_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,ik):Ye(r[8]),i_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function sk(n){let e,i,t,r;const s=[rk,nk],l=[];function o(f,p){return f[2]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function ok(n,e,i){let t,r;const s=["src","alt","asChild","el"];let l=qe(e,s),o,f=Ci,p=()=>(f(),f=yv(t,q=>i(7,o=q)),t);n.$$.on_destroy.push(()=>f());let{$$slots:g={},$$scope:C}=e,{src:A=void 0}=e,{alt:V=void 0}=e,{asChild:U=!1}=e,{el:G=void 0}=e;const Z={"data-bits-avatar-image":""};function K(q){Dt[q?"unshift":"push"](()=>{G=q,i(0,G)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(5,l=qe(e,s)),"src"in q&&i(6,A=q.src),"alt"in q&&i(1,V=q.alt),"asChild"in q&&i(2,U=q.asChild),"el"in q&&i(0,G=q.el),"$$scope"in q&&i(8,C=q.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&p(i(4,t=Wx(A).elements.image)),n.$$.dirty&128&&i(3,r=o),n.$$.dirty&8&&Object.assign(r,Z)},[G,V,U,r,t,l,A,o,C,g,K]}let ak=class extends lt{constructor(e){super(),ct(this,e,ok,sk,st,{src:6,alt:1,asChild:2,el:0})}};const lk=n=>({builder:n&4}),n_=n=>({builder:n[2]}),ck=n=>({builder:n&4}),r_=n=>({builder:n[2]});function uk(n){let e,i,t,r;const s=n[7].default,l=Ke(s,n,n[6],n_);let o=[n[2],n[4]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("span"),l&&l.c(),this.h()},l(p){e=Ge(p,"SPAN",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[8](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&68)&&Je(l,s,p,p[6],i?Qe(s,p[6],g,lk):Ye(p[6]),n_),rt(e,f=yt(o,[g&4&&p[2],g&16&&p[4]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[8](null),t=!1,r()}}}function fk(n){let e;const i=n[7].default,t=Ke(i,n,n[6],r_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Je(t,i,r,r[6],e?Qe(i,r[6],s,ck):Ye(r[6]),r_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function hk(n){let e,i,t,r;const s=[fk,uk],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function dk(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{fallback:C},getAttrs:A}=Xx();ei(n,C,G=>i(5,l=G));const V=A("fallback");function U(G){Dt[G?"unshift":"push"](()=>{g=G,i(0,g)})}return n.$$set=G=>{e=re(re({},e),wt(G)),i(4,s=qe(e,r)),"asChild"in G&&i(1,p=G.asChild),"el"in G&&i(0,g=G.el),"$$scope"in G&&i(6,f=G.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,V)},[g,p,t,C,s,l,f,o,U]}let mk=class extends lt{constructor(e){super(),ct(this,e,dk,hk,st,{asChild:1,el:0})}};function R0(){return{NAME:"calendar",PARTS:["root","prev-button","next-button","heading","grid","day","header","grid-head","head-cell","grid-body","cell","grid-row"]}}function pk(n){const{NAME:e,PARTS:i}=R0(),t=Vo(e,i),r={...Uv(jo(n)),getCalendarAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function fs(){const{NAME:n}=R0();return Ir(n)}const _k=n=>({months:n[0]&8,weekdays:n[0]&16,builder:n[0]&4}),s_=n=>({months:n[3],weekdays:n[4],builder:n[2]}),gk=n=>({months:n[0]&8,weekdays:n[0]&16,builder:n[0]&4}),o_=n=>({months:n[3],weekdays:n[4],builder:n[2]});function yk(n){let e,i,t,r;const s=n[34].default,l=Ke(s,n,n[33],s_);let o=[n[2],n[9]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[35](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-keydown",n[8])],t=!0)},p(p,g){l&&l.p&&(!i||g[0]&28|g[1]&4)&&Je(l,s,p,p[33],i?Qe(s,p[33],g,_k):Ye(p[33]),s_),rt(e,f=yt(o,[g[0]&4&&p[2],g[0]&512&&p[9]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[35](null),t=!1,Gi(r)}}}function bk(n){let e;const i=n[34].default,t=Ke(i,n,n[33],o_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&28|s[1]&4)&&Je(t,i,r,r[33],e?Qe(i,r[33],s,gk):Ye(r[33]),o_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function vk(n){let e,i,t,r;const s=[bk,yk],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function wk(n,e,i){let t;const r=["placeholder","onPlaceholderChange","value","onValueChange","preventDeselect","minValue","maxValue","pagedNavigation","weekStartsOn","locale","isDateUnavailable","isDateDisabled","disabled","readonly","fixedWeeks","calendarLabel","weekdayFormat","multiple","asChild","id","numberOfMonths","initialFocus","el"];let s=qe(e,r),l,o,f,{$$slots:p={},$$scope:g}=e,{placeholder:C=void 0}=e,{onPlaceholderChange:A=void 0}=e,{value:V=void 0}=e,{onValueChange:U=void 0}=e,{preventDeselect:G=void 0}=e,{minValue:Z=void 0}=e,{maxValue:K=void 0}=e,{pagedNavigation:q=void 0}=e,{weekStartsOn:ie=void 0}=e,{locale:oe=void 0}=e,{isDateUnavailable:se=void 0}=e,{isDateDisabled:pe=void 0}=e,{disabled:Ie=void 0}=e,{readonly:Ce=void 0}=e,{fixedWeeks:je=void 0}=e,{calendarLabel:Ve=void 0}=e,{weekdayFormat:de=void 0}=e,{multiple:Me=!1}=e,{asChild:Re=!1}=e,{id:Rt=void 0}=e,{numberOfMonths:ti=void 0}=e,{initialFocus:Jt=!1}=e,{el:We=void 0}=e;kl(()=>{!Jt||!We||w2(We)});const{elements:{calendar:Le},states:{value:pt,placeholder:xt,months:At,weekdays:di},updateOption:Yt,ids:li,getCalendarAttrs:vt}=pk({defaultPlaceholder:C,defaultValue:V,preventDeselect:G,minValue:Z,maxValue:K,pagedNavigation:q,weekStartsOn:ie,locale:oe,isDateUnavailable:se,isDateDisabled:pe,disabled:Ie,readonly:Ce,fixedWeeks:je,calendarLabel:Ve,weekdayFormat:de,multiple:Me,numberOfMonths:ti,onPlaceholderChange:({next:xe})=>(C!==xe&&(A==null||A(xe),i(10,C=xe)),xe),onValueChange:({next:xe})=>Array.isArray(xe)?((!Array.isArray(V)||!xd(V,xe))&&(U==null||U(xe),i(11,V=xe)),xe):(V!==xe&&(U==null||U(xe),i(11,V=xe)),xe)});ei(n,Le,xe=>i(32,o=xe)),ei(n,At,xe=>i(31,l=xe)),ei(n,di,xe=>i(4,f=xe));const fi=vt("root"),ai=Ur();let Ot=l;function ft(xe){Dt[xe?"unshift":"push"](()=>{We=xe,i(0,We)})}return n.$$set=xe=>{e=re(re({},e),wt(xe)),i(9,s=qe(e,r)),"placeholder"in xe&&i(10,C=xe.placeholder),"onPlaceholderChange"in xe&&i(12,A=xe.onPlaceholderChange),"value"in xe&&i(11,V=xe.value),"onValueChange"in xe&&i(13,U=xe.onValueChange),"preventDeselect"in xe&&i(14,G=xe.preventDeselect),"minValue"in xe&&i(15,Z=xe.minValue),"maxValue"in xe&&i(16,K=xe.maxValue),"pagedNavigation"in xe&&i(17,q=xe.pagedNavigation),"weekStartsOn"in xe&&i(18,ie=xe.weekStartsOn),"locale"in xe&&i(19,oe=xe.locale),"isDateUnavailable"in xe&&i(20,se=xe.isDateUnavailable),"isDateDisabled"in xe&&i(21,pe=xe.isDateDisabled),"disabled"in xe&&i(22,Ie=xe.disabled),"readonly"in xe&&i(23,Ce=xe.readonly),"fixedWeeks"in xe&&i(24,je=xe.fixedWeeks),"calendarLabel"in xe&&i(25,Ve=xe.calendarLabel),"weekdayFormat"in xe&&i(26,de=xe.weekdayFormat),"multiple"in xe&&i(27,Me=xe.multiple),"asChild"in xe&&i(1,Re=xe.asChild),"id"in xe&&i(28,Rt=xe.id),"numberOfMonths"in xe&&i(29,ti=xe.numberOfMonths),"initialFocus"in xe&&i(30,Jt=xe.initialFocus),"el"in xe&&i(0,We=xe.el),"$$scope"in xe&&i(33,g=xe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&268435456&&Rt&&li.calendar.set(Rt),n.$$.dirty[0]&2048&&V!==void 0&&pt.set(Array.isArray(V)?[...V]:V),n.$$.dirty[0]&1024&&C!==void 0&&xt.set(C),n.$$.dirty[0]&16384&&Yt("preventDeselect",G),n.$$.dirty[0]&32768&&Yt("minValue",Z),n.$$.dirty[0]&65536&&Yt("maxValue",K),n.$$.dirty[0]&131072&&Yt("pagedNavigation",q),n.$$.dirty[0]&262144&&Yt("weekStartsOn",ie),n.$$.dirty[0]&524288&&Yt("locale",oe),n.$$.dirty[0]&1048576&&Yt("isDateUnavailable",se),n.$$.dirty[0]&2097152&&Yt("isDateDisabled",pe),n.$$.dirty[0]&4194304&&Yt("disabled",Ie),n.$$.dirty[0]&8388608&&Yt("readonly",Ce),n.$$.dirty[0]&16777216&&Yt("fixedWeeks",je),n.$$.dirty[0]&33554432&&Yt("calendarLabel",Ve),n.$$.dirty[0]&67108864&&Yt("weekdayFormat",de),n.$$.dirty[0]&536870912&&Yt("numberOfMonths",ti),n.$$.dirty[1]&2&&i(2,t=o),n.$$.dirty[0]&4&&Object.assign(t,fi),n.$$.dirty[1]&1&&i(3,Ot=l)},[We,Re,t,Ot,f,Le,At,di,ai,s,C,V,A,U,G,Z,K,q,ie,oe,se,pe,Ie,Ce,je,Ve,de,Me,Rt,ti,Jt,l,o,g,p,ft]}class xk extends lt{constructor(e){super(),ct(this,e,wk,vk,st,{placeholder:10,onPlaceholderChange:12,value:11,onValueChange:13,preventDeselect:14,minValue:15,maxValue:16,pagedNavigation:17,weekStartsOn:18,locale:19,isDateUnavailable:20,isDateDisabled:21,disabled:22,readonly:23,fixedWeeks:24,calendarLabel:25,weekdayFormat:26,multiple:27,asChild:1,id:28,numberOfMonths:29,initialFocus:30,el:0},null,[-1,-1])}}const kk=n=>({builder:n&8,disabled:n&64,unavailable:n&32,selected:n&16}),a_=n=>({builder:n[3],disabled:n[6],unavailable:n[5],selected:n[4]}),Ck=n=>({builder:n&8,disabled:n&64,unavailable:n&32,selected:n&16}),l_=n=>({builder:n[3],disabled:n[6],unavailable:n[5],selected:n[4]});function Sk(n){let e,i,t,r;const s=n[19].default,l=Ke(s,n,n[18],a_),o=l||Ik(n);let f=[n[3],n[12]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[20](e),i=!0,t||(r=[xi(n[3].action(e)),_t(e,"m-click",n[11])],t=!0)},p(g,C){l?l.p&&(!i||C&262264)&&Je(l,s,g,g[18],i?Qe(s,g[18],C,kk):Ye(g[18]),a_):o&&o.p&&(!i||C&2)&&o.p(g,i?C:-1),rt(e,p=yt(f,[C&8&&g[3],C&4096&&g[12]]))},i(g){i||(z(o,g),i=!0)},o(g){D(o,g),i=!1},d(g){g&&F(e),o&&o.d(g),n[20](null),t=!1,Gi(r)}}}function Tk(n){let e;const i=n[19].default,t=Ke(i,n,n[18],l_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&262264)&&Je(t,i,r,r[18],e?Qe(i,r[18],s,Ck):Ye(r[18]),l_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Ik(n){let e=n[1].day+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&2&&e!==(e=t[1].day+"")&&Ai(i,e)},d(t){t&&F(i)}}}function Ak(n){let e,i,t,r;const s=[Tk,Sk],l=[];function o(f,p){return f[2]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Ek(n,e,i){let t,r,s,l;const o=["date","month","asChild","el"];let f=qe(e,o),p,g,C,A,{$$slots:V={},$$scope:U}=e,{date:G}=e,{month:Z}=e,{asChild:K=!1}=e,{el:q=void 0}=e;const{elements:{cell:ie},helpers:{isDateDisabled:oe,isDateUnavailable:se,isDateSelected:pe},getCalendarAttrs:Ie}=fs();ei(n,ie,de=>i(17,A=de)),ei(n,oe,de=>i(16,C=de)),ei(n,se,de=>i(15,g=de)),ei(n,pe,de=>i(14,p=de));const Ce=Ie("day"),je=Ur();function Ve(de){Dt[de?"unshift":"push"](()=>{q=de,i(0,q)})}return n.$$set=de=>{e=re(re({},e),wt(de)),i(12,f=qe(e,o)),"date"in de&&i(1,G=de.date),"month"in de&&i(13,Z=de.month),"asChild"in de&&i(2,K=de.asChild),"el"in de&&i(0,q=de.el),"$$scope"in de&&i(18,U=de.$$scope)},n.$$.update=()=>{n.$$.dirty&139266&&i(3,t=A(G,Z)),n.$$.dirty&8&&Object.assign(t,Ce),n.$$.dirty&65538&&i(6,r=C(G)),n.$$.dirty&32770&&i(5,s=g(G)),n.$$.dirty&16386&&i(4,l=p(G))},[q,G,K,t,l,s,r,ie,oe,se,pe,je,f,Z,p,g,C,A,U,V,Ve]}let Pk=class extends lt{constructor(e){super(),ct(this,e,Ek,Ak,st,{date:1,month:13,asChild:2,el:0})}};const Mk=n=>({builder:n&4}),c_=n=>({builder:n[2]}),zk=n=>({builder:n&4}),u_=n=>({builder:n[2]});function Dk(n){let e,i,t,r;const s=n[7].default,l=Ke(s,n,n[6],c_);let o=[n[2],n[4]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("table"),l&&l.c(),this.h()},l(p){e=Ge(p,"TABLE",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[8](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&68)&&Je(l,s,p,p[6],i?Qe(s,p[6],g,Mk):Ye(p[6]),c_),rt(e,f=yt(o,[g&4&&p[2],g&16&&p[4]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[8](null),t=!1,r()}}}function Lk(n){let e;const i=n[7].default,t=Ke(i,n,n[6],u_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Je(t,i,r,r[6],e?Qe(i,r[6],s,zk):Ye(r[6]),u_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Rk(n){let e,i,t,r;const s=[Lk,Dk],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Ok(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{grid:C},getCalendarAttrs:A}=fs();ei(n,C,G=>i(5,l=G));const V=A("grid");function U(G){Dt[G?"unshift":"push"](()=>{g=G,i(0,g)})}return n.$$set=G=>{e=re(re({},e),wt(G)),i(4,s=qe(e,r)),"asChild"in G&&i(1,p=G.asChild),"el"in G&&i(0,g=G.el),"$$scope"in G&&i(6,f=G.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,V)},[g,p,t,C,s,l,f,o,U]}let Fk=class extends lt{constructor(e){super(),ct(this,e,Ok,Rk,st,{asChild:1,el:0})}};const Bk=n=>({}),f_=n=>({attrs:n[2]}),Nk=n=>({}),h_=n=>({attrs:n[2]});function Vk(n){let e,i;const t=n[5].default,r=Ke(t,n,n[4],f_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("tbody"),r&&r.c(),this.h()},l(o){e=Ge(o,"TBODY",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[6](e),i=!0},p(o,f){r&&r.p&&(!i||f&16)&&Je(r,t,o,o[4],i?Qe(t,o[4],f,Bk):Ye(o[4]),f_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[6](null)}}}function jk(n){let e;const i=n[5].default,t=Ke(i,n,n[4],h_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,Nk):Ye(r[4]),h_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Uk(n){let e,i,t,r;const s=[jk,Vk],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function qk(n,e,i){const t=["asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{el:f=void 0}=e;const{getCalendarAttrs:p}=fs(),g=p("grid-body");function C(A){Dt[A?"unshift":"push"](()=>{f=A,i(0,f)})}return n.$$set=A=>{e=re(re({},e),wt(A)),i(3,r=qe(e,t)),"asChild"in A&&i(1,o=A.asChild),"el"in A&&i(0,f=A.el),"$$scope"in A&&i(4,l=A.$$scope)},[f,o,g,r,l,s,C]}let Zk=class extends lt{constructor(e){super(),ct(this,e,qk,Uk,st,{asChild:1,el:0})}};const Gk=n=>({attrs:n&4}),d_=n=>({attrs:n[2]}),Hk=n=>({attrs:n&4}),m_=n=>({attrs:n[2]});function Wk(n){let e,i;const t=n[10].default,r=Ke(t,n,n[9],d_);let s=[n[5],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("td"),r&&r.c(),this.h()},l(o){e=Ge(o,"TD",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[11](e),i=!0},p(o,f){r&&r.p&&(!i||f&516)&&Je(r,t,o,o[9],i?Qe(t,o[9],f,Gk):Ye(o[9]),d_),rt(e,l=yt(s,[f&32&&o[5],f&4&&o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[11](null)}}}function Xk(n){let e;const i=n[10].default,t=Ke(i,n,n[9],m_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&516)&&Je(t,i,r,r[9],e?Qe(i,r[9],s,Hk):Ye(r[9]),m_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Kk(n){let e,i,t,r;const s=[Xk,Wk],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function Jk(n,e,i){let t;const r=["date","asChild","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{date:g}=e,{asChild:C=!1}=e,{el:A=void 0}=e;const{helpers:{isDateDisabled:V,isDateUnavailable:U},getCalendarAttrs:G}=fs();ei(n,V,K=>i(7,l=K)),ei(n,U,K=>i(8,o=K));function Z(K){Dt[K?"unshift":"push"](()=>{A=K,i(0,A)})}return n.$$set=K=>{e=re(re({},e),wt(K)),i(5,s=qe(e,r)),"date"in K&&i(6,g=K.date),"asChild"in K&&i(1,C=K.asChild),"el"in K&&i(0,A=K.el),"$$scope"in K&&i(9,p=K.$$scope)},n.$$.update=()=>{n.$$.dirty&448&&i(2,t={...G("cell"),"aria-disabled":l(g)||o(g),"data-disabled":l(g)?"":void 0,role:"gridcell"})},[A,C,t,V,U,s,g,l,o,p,f,Z]}let Yk=class extends lt{constructor(e){super(),ct(this,e,Jk,Kk,st,{date:6,asChild:1,el:0})}};const Qk=n=>({}),p_=n=>({attrs:n[2]}),$k=n=>({}),__=n=>({attrs:n[2]});function eC(n){let e,i;const t=n[5].default,r=Ke(t,n,n[4],p_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("thead"),r&&r.c(),this.h()},l(o){e=Ge(o,"THEAD",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[6](e),i=!0},p(o,f){r&&r.p&&(!i||f&16)&&Je(r,t,o,o[4],i?Qe(t,o[4],f,Qk):Ye(o[4]),p_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[6](null)}}}function tC(n){let e;const i=n[5].default,t=Ke(i,n,n[4],__);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,$k):Ye(r[4]),__)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function iC(n){let e,i,t,r;const s=[tC,eC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function nC(n,e,i){const t=["asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{el:f=void 0}=e;const{getCalendarAttrs:p}=fs(),g={...p("grid-head"),"aria-hidden":!0};function C(A){Dt[A?"unshift":"push"](()=>{f=A,i(0,f)})}return n.$$set=A=>{e=re(re({},e),wt(A)),i(3,r=qe(e,t)),"asChild"in A&&i(1,o=A.asChild),"el"in A&&i(0,f=A.el),"$$scope"in A&&i(4,l=A.$$scope)},[f,o,g,r,l,s,C]}let rC=class extends lt{constructor(e){super(),ct(this,e,nC,iC,st,{asChild:1,el:0})}};const sC=n=>({}),g_=n=>({attrs:n[2]}),oC=n=>({}),y_=n=>({attrs:n[2]});function aC(n){let e,i;const t=n[5].default,r=Ke(t,n,n[4],g_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("th"),r&&r.c(),this.h()},l(o){e=Ge(o,"TH",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[6](e),i=!0},p(o,f){r&&r.p&&(!i||f&16)&&Je(r,t,o,o[4],i?Qe(t,o[4],f,sC):Ye(o[4]),g_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[6](null)}}}function lC(n){let e;const i=n[5].default,t=Ke(i,n,n[4],y_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,oC):Ye(r[4]),y_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function cC(n){let e,i,t,r;const s=[lC,aC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function uC(n,e,i){const t=["asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{el:f=void 0}=e;const{getCalendarAttrs:p}=fs(),g=p("head-cell");function C(A){Dt[A?"unshift":"push"](()=>{f=A,i(0,f)})}return n.$$set=A=>{e=re(re({},e),wt(A)),i(3,r=qe(e,t)),"asChild"in A&&i(1,o=A.asChild),"el"in A&&i(0,f=A.el),"$$scope"in A&&i(4,l=A.$$scope)},[f,o,g,r,l,s,C]}let fC=class extends lt{constructor(e){super(),ct(this,e,uC,cC,st,{asChild:1,el:0})}};const hC=n=>({}),b_=n=>({attrs:n[2]}),dC=n=>({}),v_=n=>({attrs:n[2]});function mC(n){let e,i;const t=n[5].default,r=Ke(t,n,n[4],b_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("tr"),r&&r.c(),this.h()},l(o){e=Ge(o,"TR",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[6](e),i=!0},p(o,f){r&&r.p&&(!i||f&16)&&Je(r,t,o,o[4],i?Qe(t,o[4],f,hC):Ye(o[4]),b_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[6](null)}}}function pC(n){let e;const i=n[5].default,t=Ke(i,n,n[4],v_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,dC):Ye(r[4]),v_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function _C(n){let e,i,t,r;const s=[pC,mC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function gC(n,e,i){const t=["asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{el:f=void 0}=e;const{getCalendarAttrs:p}=fs(),g=p("grid-row");function C(A){Dt[A?"unshift":"push"](()=>{f=A,i(0,f)})}return n.$$set=A=>{e=re(re({},e),wt(A)),i(3,r=qe(e,t)),"asChild"in A&&i(1,o=A.asChild),"el"in A&&i(0,f=A.el),"$$scope"in A&&i(4,l=A.$$scope)},[f,o,g,r,l,s,C]}let yC=class extends lt{constructor(e){super(),ct(this,e,gC,_C,st,{asChild:1,el:0})}};const bC=n=>({}),w_=n=>({attrs:n[2]}),vC=n=>({}),x_=n=>({attrs:n[2]});function wC(n){let e,i;const t=n[5].default,r=Ke(t,n,n[4],w_);let s=[n[3],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("header"),r&&r.c(),this.h()},l(o){e=Ge(o,"HEADER",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[6](e),i=!0},p(o,f){r&&r.p&&(!i||f&16)&&Je(r,t,o,o[4],i?Qe(t,o[4],f,bC):Ye(o[4]),w_),rt(e,l=yt(s,[f&8&&o[3],o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[6](null)}}}function xC(n){let e;const i=n[5].default,t=Ke(i,n,n[4],x_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,vC):Ye(r[4]),x_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function kC(n){let e,i,t,r;const s=[xC,wC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function CC(n,e,i){const t=["asChild","el"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{el:f=void 0}=e;const{getCalendarAttrs:p}=fs(),g=p("header");function C(A){Dt[A?"unshift":"push"](()=>{f=A,i(0,f)})}return n.$$set=A=>{e=re(re({},e),wt(A)),i(3,r=qe(e,t)),"asChild"in A&&i(1,o=A.asChild),"el"in A&&i(0,f=A.el),"$$scope"in A&&i(4,l=A.$$scope)},[f,o,g,r,l,s,C]}let SC=class extends lt{constructor(e){super(),ct(this,e,CC,kC,st,{asChild:1,el:0})}};const TC=n=>({builder:n&4,headingValue:n&8}),k_=n=>({builder:n[2],headingValue:n[3]}),IC=n=>({builder:n&4,headingValue:n&8}),C_=n=>({builder:n[2],headingValue:n[3]});function AC(n){let e,i,t,r;const s=n[9].default,l=Ke(s,n,n[8],k_),o=l||PC(n);let f=[n[2],n[6]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[10](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(g,C){l?l.p&&(!i||C&268)&&Je(l,s,g,g[8],i?Qe(s,g[8],C,TC):Ye(g[8]),k_):o&&o.p&&(!i||C&8)&&o.p(g,i?C:-1),rt(e,p=yt(f,[C&4&&g[2],C&64&&g[6]]))},i(g){i||(z(o,g),i=!0)},o(g){D(o,g),i=!1},d(g){g&&F(e),o&&o.d(g),n[10](null),t=!1,r()}}}function EC(n){let e;const i=n[9].default,t=Ke(i,n,n[8],C_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&268)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,IC):Ye(r[8]),C_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function PC(n){let e;return{c(){e=Ct(n[3])},l(i){e=St(i,n[3])},m(i,t){Q(i,e,t)},p(i,t){t&8&&Ai(e,i[3])},d(i){i&&F(e)}}}function MC(n){let e,i,t,r;const s=[EC,AC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function zC(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{asChild:g=!1}=e,{el:C=void 0}=e;const{elements:{heading:A},states:{headingValue:V},getCalendarAttrs:U}=fs();ei(n,A,K=>i(7,l=K)),ei(n,V,K=>i(3,o=K));const G=U("heading");function Z(K){Dt[K?"unshift":"push"](()=>{C=K,i(0,C)})}return n.$$set=K=>{e=re(re({},e),wt(K)),i(6,s=qe(e,r)),"asChild"in K&&i(1,g=K.asChild),"el"in K&&i(0,C=K.el),"$$scope"in K&&i(8,p=K.$$scope)},n.$$.update=()=>{n.$$.dirty&128&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,G)},[C,g,t,o,A,V,s,l,p,f,Z]}let DC=class extends lt{constructor(e){super(),ct(this,e,zC,MC,st,{asChild:1,el:0})}};const LC=n=>({builder:n&4}),S_=n=>({builder:n[2]}),RC=n=>({builder:n&4}),T_=n=>({builder:n[2]});function OC(n){let e,i,t,r;const s=n[8].default,l=Ke(s,n,n[7],S_);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[9](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&132)&&Je(l,s,p,p[7],i?Qe(s,p[7],g,LC):Ye(p[7]),S_),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[9](null),t=!1,Gi(r)}}}function FC(n){let e;const i=n[8].default,t=Ke(i,n,n[7],T_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,RC):Ye(r[7]),T_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function BC(n){let e,i,t,r;const s=[FC,OC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function NC(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{nextButton:C},getCalendarAttrs:A}=fs();ei(n,C,Z=>i(6,l=Z));const V=A("next-button"),U=Ur();function G(Z){Dt[Z?"unshift":"push"](()=>{g=Z,i(0,g)})}return n.$$set=Z=>{e=re(re({},e),wt(Z)),i(5,s=qe(e,r)),"asChild"in Z&&i(1,p=Z.asChild),"el"in Z&&i(0,g=Z.el),"$$scope"in Z&&i(7,f=Z.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,V)},[g,p,t,C,U,s,l,f,o,G]}let VC=class extends lt{constructor(e){super(),ct(this,e,NC,BC,st,{asChild:1,el:0})}};const jC=n=>({builder:n&4}),I_=n=>({builder:n[2]}),UC=n=>({builder:n&4}),A_=n=>({builder:n[2]});function qC(n){let e,i,t,r;const s=n[8].default,l=Ke(s,n,n[7],I_);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[9](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&132)&&Je(l,s,p,p[7],i?Qe(s,p[7],g,jC):Ye(p[7]),I_),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[9](null),t=!1,Gi(r)}}}function ZC(n){let e;const i=n[8].default,t=Ke(i,n,n[7],A_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,UC):Ye(r[7]),A_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function GC(n){let e,i,t,r;const s=[ZC,qC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function HC(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{el:g=void 0}=e;const{elements:{prevButton:C},getCalendarAttrs:A}=fs();ei(n,C,Z=>i(6,l=Z));const V=A("prev-button"),U=Ur();function G(Z){Dt[Z?"unshift":"push"](()=>{g=Z,i(0,g)})}return n.$$set=Z=>{e=re(re({},e),wt(Z)),i(5,s=qe(e,r)),"asChild"in Z&&i(1,p=Z.asChild),"el"in Z&&i(0,g=Z.el),"$$scope"in Z&&i(7,f=Z.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,V)},[g,p,t,C,U,s,l,f,o,G]}let WC=class extends lt{constructor(e){super(),ct(this,e,HC,GC,st,{asChild:1,el:0})}};function O0(){return{NAME:"checkbox",PARTS:["root","input","indicator"]}}function XC(n){const{NAME:e,PARTS:i}=O0(),t=Vo(e,i),r={...xw(jo(n)),getAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function KC(){const{NAME:n}=O0();return Ir(n)}const JC=n=>({builder:n&4}),E_=n=>({builder:n[2]}),YC=n=>({builder:n&4}),P_=n=>({builder:n[2]});function QC(n){let e,i,t,r;const s=n[15].default,l=Ke(s,n,n[14],E_);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[16](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4]),_t(e,"m-keydown",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&16388)&&Je(l,s,p,p[14],i?Qe(s,p[14],g,JC):Ye(p[14]),E_),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[16](null),t=!1,Gi(r)}}}function $C(n){let e;const i=n[15].default,t=Ke(i,n,n[14],P_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&Je(t,i,r,r[14],e?Qe(i,r[14],s,YC):Ye(r[14]),P_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function eS(n){let e,i,t,r;const s=[$C,QC],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function tS(n,e,i){let t,r;const s=["checked","disabled","name","required","value","onCheckedChange","asChild","el"];let l=qe(e,s),o,{$$slots:f={},$$scope:p}=e,{checked:g=!1}=e,{disabled:C=void 0}=e,{name:A=void 0}=e,{required:V=void 0}=e,{value:U=void 0}=e,{onCheckedChange:G=void 0}=e,{asChild:Z=!1}=e,{el:K=void 0}=e;const{elements:{root:q},states:{checked:ie},updateOption:oe,getAttrs:se}=XC({defaultChecked:g,disabled:C,name:A,required:V,value:U,onCheckedChange:({next:Ce})=>(g!==Ce&&(G==null||G(Ce),i(6,g=Ce)),Ce)});ei(n,q,Ce=>i(13,o=Ce));const pe=Ur();function Ie(Ce){Dt[Ce?"unshift":"push"](()=>{K=Ce,i(0,K)})}return n.$$set=Ce=>{e=re(re({},e),wt(Ce)),i(5,l=qe(e,s)),"checked"in Ce&&i(6,g=Ce.checked),"disabled"in Ce&&i(7,C=Ce.disabled),"name"in Ce&&i(8,A=Ce.name),"required"in Ce&&i(9,V=Ce.required),"value"in Ce&&i(10,U=Ce.value),"onCheckedChange"in Ce&&i(11,G=Ce.onCheckedChange),"asChild"in Ce&&i(1,Z=Ce.asChild),"el"in Ce&&i(0,K=Ce.el),"$$scope"in Ce&&i(14,p=Ce.$$scope)},n.$$.update=()=>{n.$$.dirty&128&&i(12,t={...se("root"),disabled:C?!0:void 0}),n.$$.dirty&64&&g!==void 0&&ie.set(g),n.$$.dirty&128&&oe("disabled",C),n.$$.dirty&256&&oe("name",A),n.$$.dirty&512&&oe("required",V),n.$$.dirty&1024&&oe("value",U),n.$$.dirty&8192&&i(2,r=o),n.$$.dirty&4100&&Object.assign(r,t)},[K,Z,r,q,pe,l,g,C,A,V,U,G,t,o,p,f,Ie]}let iS=class extends lt{constructor(e){super(),ct(this,e,tS,eS,st,{checked:6,disabled:7,name:8,required:9,value:10,onCheckedChange:11,asChild:1,el:0})}};const nS=n=>({attrs:n&4,isChecked:n&8,isIndeterminate:n&16}),M_=n=>({attrs:n[2],isChecked:n[3],isIndeterminate:n[4]}),rS=n=>({attrs:n&4,isChecked:n&8,isIndeterminate:n&16}),z_=n=>({attrs:n[2],isChecked:n[3],isIndeterminate:n[4]});function sS(n){let e,i;const t=n[11].default,r=Ke(t,n,n[10],M_);let s=[n[8],n[2]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("div"),r&&r.c(),this.h()},l(o){e=Ge(o,"DIV",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[12](e),i=!0},p(o,f){r&&r.p&&(!i||f&1052)&&Je(r,t,o,o[10],i?Qe(t,o[10],f,nS):Ye(o[10]),M_),rt(e,l=yt(s,[f&256&&o[8],f&4&&o[2]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o),n[12](null)}}}function oS(n){let e;const i=n[11].default,t=Ke(i,n,n[10],z_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1052)&&Je(t,i,r,r[10],e?Qe(i,r[10],s,rS):Ye(r[10]),z_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function aS(n){let e,i,t,r;const s=[oS,sS],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function lS(n){return n==="indeterminate"?"indeterminate":n?"checked":"unchecked"}function cS(n,e,i){let t;const r=["asChild","el"];let s=qe(e,r),l,o,f,{$$slots:p={},$$scope:g}=e,{asChild:C=!1}=e,{el:A=void 0}=e;const{helpers:{isChecked:V,isIndeterminate:U},states:{checked:G},getAttrs:Z}=KC();ei(n,V,q=>i(3,o=q)),ei(n,U,q=>i(4,f=q)),ei(n,G,q=>i(9,l=q));function K(q){Dt[q?"unshift":"push"](()=>{A=q,i(0,A)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(8,s=qe(e,r)),"asChild"in q&&i(1,C=q.asChild),"el"in q&&i(0,A=q.el),"$$scope"in q&&i(10,g=q.$$scope)},n.$$.update=()=>{n.$$.dirty&512&&i(2,t={...Z("indicator"),"data-state":lS(l)})},[A,C,t,o,f,V,U,G,s,l,g,p,K]}class uS extends lt{constructor(e){super(),ct(this,e,cS,aS,st,{asChild:1,el:0})}}function fS(){return{NAME:"separator",PARTS:["root"]}}function hS(n){const{NAME:e,PARTS:i}=fS(),t=Vo(e,i),r={...Ew(jo(n)),getAttrs:t};return{...r,updateOption:Xs(r.options)}}const dS=n=>({builder:n&4}),D_=n=>({builder:n[2]});function mS(n){let e,i,t,r=[n[2],n[4]],s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return{c(){e=Ze("div"),this.h()},l(l){e=Ge(l,"DIV",{}),$e(e).forEach(F),this.h()},h(){rt(e,s)},m(l,o){Q(l,e,o),n[10](e),i||(t=xi(n[2].action(e)),i=!0)},p(l,o){rt(e,s=yt(r,[o&4&&l[2],o&16&&l[4]]))},i:Ci,o:Ci,d(l){l&&F(e),n[10](null),i=!1,t()}}}function pS(n){let e;const i=n[9].default,t=Ke(i,n,n[8],D_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,dS):Ye(r[8]),D_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function _S(n){let e,i,t,r;const s=[pS,mS],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function gS(n,e,i){let t;const r=["orientation","decorative","asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{orientation:p="horizontal"}=e,{decorative:g=!0}=e,{asChild:C=!1}=e,{el:A=void 0}=e;const{elements:{root:V},updateOption:U,getAttrs:G}=hS({orientation:p,decorative:g});ei(n,V,q=>i(7,l=q));const Z=G("root");function K(q){Dt[q?"unshift":"push"](()=>{A=q,i(0,A)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(4,s=qe(e,r)),"orientation"in q&&i(5,p=q.orientation),"decorative"in q&&i(6,g=q.decorative),"asChild"in q&&i(1,C=q.asChild),"el"in q&&i(0,A=q.el),"$$scope"in q&&i(8,f=q.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&U("orientation",p),n.$$.dirty&64&&U("decorative",g),n.$$.dirty&128&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,Z)},[A,C,t,V,s,p,g,l,f,o,K]}let yS=class extends lt{constructor(e){super(),ct(this,e,gS,_S,st,{orientation:5,decorative:6,asChild:1,el:0})}};function bf(){return{NAME:"select",GROUP_NAME:"select-group",ITEM_NAME:"select-item",PARTS:["arrow","content","group","item","indicator","input","label","trigger","value"]}}function Sl(){const{NAME:n}=bf();return Ir(n)}function bS(n){const{NAME:e,PARTS:i}=bf(),t=Vo(e,i),r={...Iw({...jo(n),forceVisible:!0}),getAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function vS(n){const{ITEM_NAME:e}=bf(),i=Sl();return Tr(e,n),i}function wS(){const{ITEM_NAME:n}=bf(),{helpers:{isSelected:e},getAttrs:i}=Sl();return{value:Ir(n),isSelected:e,getAttrs:i}}function xS(n){const i={...{side:"bottom",align:"center",sameWidth:!0},...n},{options:{positioning:t}}=Sl();E0(t)(i)}const kS=n=>({ids:n&1}),L_=n=>({ids:n[0]});function CS(n){let e;const i=n[19].default,t=Ke(i,n,n[18],L_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&262145)&&Je(t,i,r,r[18],e?Qe(i,r[18],s,kS):Ye(r[18]),L_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function SS(n,e,i){let t,{$$slots:r={},$$scope:s}=e,{required:l=void 0}=e,{disabled:o=void 0}=e,{preventScroll:f=void 0}=e,{loop:p=void 0}=e,{closeOnEscape:g=void 0}=e,{closeOnOutsideClick:C=void 0}=e,{portal:A=void 0}=e,{name:V=void 0}=e,{multiple:U=!1}=e,{selected:G=void 0}=e,{onSelectedChange:Z=void 0}=e,{open:K=void 0}=e,{onOpenChange:q=void 0}=e,{items:ie=[]}=e,{onOutsideClick:oe=void 0}=e,{typeahead:se=void 0}=e;const{states:{open:pe,selected:Ie},updateOption:Ce,ids:je}=bS({required:l,disabled:o,preventScroll:f,loop:p,closeOnEscape:g,closeOnOutsideClick:C,portal:A,name:V,onOutsideClick:oe,multiple:U,forceVisible:!0,defaultSelected:Array.isArray(G)?[...G]:G,defaultOpen:K,onSelectedChange:({next:de})=>Array.isArray(de)?((!Array.isArray(G)||!xd(G,de))&&(Z==null||Z(de),i(2,G=de)),de):(G!==de&&(Z==null||Z(de),i(2,G=de)),de),onOpenChange:({next:de})=>(K!==de&&(q==null||q(de),i(3,K=de)),de),items:ie,typeahead:se}),Ve=Cn([je.menu,je.trigger,je.label],([de,Me,Re])=>({menu:de,trigger:Me,label:Re}));return ei(n,Ve,de=>i(0,t=de)),n.$$set=de=>{"required"in de&&i(4,l=de.required),"disabled"in de&&i(5,o=de.disabled),"preventScroll"in de&&i(6,f=de.preventScroll),"loop"in de&&i(7,p=de.loop),"closeOnEscape"in de&&i(8,g=de.closeOnEscape),"closeOnOutsideClick"in de&&i(9,C=de.closeOnOutsideClick),"portal"in de&&i(10,A=de.portal),"name"in de&&i(11,V=de.name),"multiple"in de&&i(12,U=de.multiple),"selected"in de&&i(2,G=de.selected),"onSelectedChange"in de&&i(13,Z=de.onSelectedChange),"open"in de&&i(3,K=de.open),"onOpenChange"in de&&i(14,q=de.onOpenChange),"items"in de&&i(15,ie=de.items),"onOutsideClick"in de&&i(16,oe=de.onOutsideClick),"typeahead"in de&&i(17,se=de.typeahead),"$$scope"in de&&i(18,s=de.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&K!==void 0&&pe.set(K),n.$$.dirty&4&&G!==void 0&&Ie.set(Array.isArray(G)?[...G]:G),n.$$.dirty&16&&Ce("required",l),n.$$.dirty&32&&Ce("disabled",o),n.$$.dirty&64&&Ce("preventScroll",f),n.$$.dirty&128&&Ce("loop",p),n.$$.dirty&256&&Ce("closeOnEscape",g),n.$$.dirty&512&&Ce("closeOnOutsideClick",C),n.$$.dirty&1024&&Ce("portal",A),n.$$.dirty&2048&&Ce("name",V),n.$$.dirty&4096&&Ce("multiple",U),n.$$.dirty&65536&&Ce("onOutsideClick",oe),n.$$.dirty&131072&&Ce("typeahead",se)},[t,Ve,G,K,l,o,f,p,g,C,A,V,U,Z,q,ie,oe,se,s,r]}class TS extends lt{constructor(e){super(),ct(this,e,SS,CS,st,{required:4,disabled:5,preventScroll:6,loop:7,closeOnEscape:8,closeOnOutsideClick:9,portal:10,name:11,multiple:12,selected:2,onSelectedChange:13,open:3,onOpenChange:14,items:15,onOutsideClick:16,typeahead:17})}}const IS=n=>({builder:n[0]&256}),R_=n=>({builder:n[8]}),AS=n=>({builder:n[0]&256}),O_=n=>({builder:n[8]}),ES=n=>({builder:n[0]&256}),F_=n=>({builder:n[8]}),PS=n=>({builder:n[0]&256}),B_=n=>({builder:n[8]}),MS=n=>({builder:n[0]&256}),N_=n=>({builder:n[8]}),zS=n=>({builder:n[0]&256}),V_=n=>({builder:n[8]});function DS(n){let e,i,t,r;const s=n[28].default,l=Ke(s,n,n[27],R_);let o=[n[8],n[13]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[38](e),i=!0,t||(r=[xi(n[8].action(e)),_t(e,"m-pointerleave",n[12]),_t(e,"keydown",n[33])],t=!0)},p(p,g){l&&l.p&&(!i||g[0]&134217984)&&Je(l,s,p,p[27],i?Qe(s,p[27],g,IS):Ye(p[27]),R_),rt(e,f=yt(o,[g[0]&256&&p[8],g[0]&8192&&p[13]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[38](null),t=!1,Gi(r)}}}function LS(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],O_);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[37](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerleave",n[12]),_t(e,"keydown",n[32])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,AS):Ye(n[27]),O_),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),i&&i.end(1),t=!0)},o(g){D(o,g),g&&(i=Bo(e,n[5],n[6])),t=!1},d(g){g&&F(e),o&&o.d(g),n[37](null),g&&i&&i.end(),r=!1,Gi(s)}}}function RS(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],F_);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[36](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerleave",n[12]),_t(e,"keydown",n[31])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,ES):Ye(n[27]),F_),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),g&&(i||is(()=>{i=No(e,n[3],n[4]),i.start()})),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),n[36](null),r=!1,Gi(s)}}}function OS(n){let e,i,t,r,s,l;const o=n[28].default,f=Ke(o,n,n[27],B_);let p=[n[8],n[13]],g={};for(let C=0;C<p.length;C+=1)g=re(g,p[C]);return{c(){e=Ze("div"),f&&f.c(),this.h()},l(C){e=Ge(C,"DIV",{});var A=$e(e);f&&f.l(A),A.forEach(F),this.h()},h(){rt(e,g)},m(C,A){Q(C,e,A),f&&f.m(e,null),n[35](e),r=!0,s||(l=[xi(n[8].action(e)),_t(e,"m-pointerleave",n[12]),_t(e,"keydown",n[30])],s=!0)},p(C,A){n=C,f&&f.p&&(!r||A[0]&134217984)&&Je(f,o,n,n[27],r?Qe(o,n[27],A,PS):Ye(n[27]),B_),rt(e,g=yt(p,[A[0]&256&&n[8],A[0]&8192&&n[13]]))},i(C){r||(z(f,C),C&&is(()=>{r&&(t&&t.end(1),i=No(e,n[3],n[4]),i.start())}),r=!0)},o(C){D(f,C),i&&i.invalidate(),C&&(t=Bo(e,n[5],n[6])),r=!1},d(C){C&&F(e),f&&f.d(C),n[35](null),C&&t&&t.end(),s=!1,Gi(l)}}}function FS(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],N_);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[34](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerleave",n[12]),_t(e,"keydown",n[29])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,MS):Ye(n[27]),N_),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),g&&is(()=>{t&&(i||(i=Do(e,n[1],n[2],!0)),i.run(1))}),t=!0)},o(g){D(o,g),g&&(i||(i=Do(e,n[1],n[2],!1)),i.run(0)),t=!1},d(g){g&&F(e),o&&o.d(g),n[34](null),g&&i&&i.end(),r=!1,Gi(s)}}}function BS(n){let e;const i=n[28].default,t=Ke(i,n,n[27],V_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&134217984)&&Je(t,i,r,r[27],e?Qe(i,r[27],s,zS):Ye(r[27]),V_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function NS(n){let e,i,t,r;const s=[BS,FS,OS,RS,LS,DS],l=[];function o(f,p){return f[7]&&f[9]?0:f[1]&&f[9]?1:f[3]&&f[5]&&f[9]?2:f[3]&&f[9]?3:f[5]&&f[9]?4:f[9]?5:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function VS(n,e,i){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{transition:g=void 0}=e,{transitionConfig:C=void 0}=e,{inTransition:A=void 0}=e,{inTransitionConfig:V=void 0}=e,{outTransition:U=void 0}=e,{outTransitionConfig:G=void 0}=e,{asChild:Z=!1}=e,{id:K=void 0}=e,{side:q="bottom"}=e,{align:ie="center"}=e,{sideOffset:oe=0}=e,{alignOffset:se=0}=e,{collisionPadding:pe=8}=e,{avoidCollisions:Ie=!0}=e,{collisionBoundary:Ce=void 0}=e,{sameWidth:je=!0}=e,{fitViewport:Ve=!1}=e,{strategy:de="absolute"}=e,{overlap:Me=!1}=e,{el:Re=void 0}=e;const{elements:{menu:Rt},states:{open:ti},ids:Jt,getAttrs:We}=Sl();ei(n,Rt,xe=>i(26,o=xe)),ei(n,ti,xe=>i(9,l=xe));const Le=Ur(),pt=We("content");function xt(xe){jt.call(this,n,xe)}function At(xe){jt.call(this,n,xe)}function di(xe){jt.call(this,n,xe)}function Yt(xe){jt.call(this,n,xe)}function li(xe){jt.call(this,n,xe)}function vt(xe){Dt[xe?"unshift":"push"](()=>{Re=xe,i(0,Re)})}function fi(xe){Dt[xe?"unshift":"push"](()=>{Re=xe,i(0,Re)})}function ai(xe){Dt[xe?"unshift":"push"](()=>{Re=xe,i(0,Re)})}function Ot(xe){Dt[xe?"unshift":"push"](()=>{Re=xe,i(0,Re)})}function ft(xe){Dt[xe?"unshift":"push"](()=>{Re=xe,i(0,Re)})}return n.$$set=xe=>{e=re(re({},e),wt(xe)),i(13,s=qe(e,r)),"transition"in xe&&i(1,g=xe.transition),"transitionConfig"in xe&&i(2,C=xe.transitionConfig),"inTransition"in xe&&i(3,A=xe.inTransition),"inTransitionConfig"in xe&&i(4,V=xe.inTransitionConfig),"outTransition"in xe&&i(5,U=xe.outTransition),"outTransitionConfig"in xe&&i(6,G=xe.outTransitionConfig),"asChild"in xe&&i(7,Z=xe.asChild),"id"in xe&&i(14,K=xe.id),"side"in xe&&i(15,q=xe.side),"align"in xe&&i(16,ie=xe.align),"sideOffset"in xe&&i(17,oe=xe.sideOffset),"alignOffset"in xe&&i(18,se=xe.alignOffset),"collisionPadding"in xe&&i(19,pe=xe.collisionPadding),"avoidCollisions"in xe&&i(20,Ie=xe.avoidCollisions),"collisionBoundary"in xe&&i(21,Ce=xe.collisionBoundary),"sameWidth"in xe&&i(22,je=xe.sameWidth),"fitViewport"in xe&&i(23,Ve=xe.fitViewport),"strategy"in xe&&i(24,de=xe.strategy),"overlap"in xe&&i(25,Me=xe.overlap),"el"in xe&&i(0,Re=xe.el),"$$scope"in xe&&i(27,p=xe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&K&&Jt.menu.set(K),n.$$.dirty[0]&67108864&&i(8,t=o),n.$$.dirty[0]&256&&Object.assign(t,pt),n.$$.dirty[0]&67076608&&l&&xS({side:q,align:ie,sideOffset:oe,alignOffset:se,collisionPadding:pe,avoidCollisions:Ie,collisionBoundary:Ce,sameWidth:je,fitViewport:Ve,strategy:de,overlap:Me})},[Re,g,C,A,V,U,G,Z,t,l,Rt,ti,Le,s,K,q,ie,oe,se,pe,Ie,Ce,je,Ve,de,Me,o,p,f,xt,At,di,Yt,li,vt,fi,ai,Ot,ft]}let jS=class extends lt{constructor(e){super(),ct(this,e,VS,NS,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}};const US=n=>({builder:n&16,isSelected:n&32}),j_=n=>({builder:n[4],isSelected:n[5]}),qS=n=>({builder:n&16,isSelected:n&32}),U_=n=>({builder:n[4],isSelected:n[5]});function ZS(n){let e,i,t,r;const s=n[14].default,l=Ke(s,n,n[13],j_),o=l||HS(n);let f=[n[4],n[9]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[19](e),i=!0,t||(r=[xi(n[4].action(e)),_t(e,"m-click",n[8]),_t(e,"m-pointermove",n[8]),_t(e,"focusin",n[15]),_t(e,"keydown",n[16]),_t(e,"focusout",n[17]),_t(e,"pointerleave",n[18])],t=!0)},p(g,C){l?l.p&&(!i||C&8240)&&Je(l,s,g,g[13],i?Qe(s,g[13],C,US):Ye(g[13]),j_):o&&o.p&&(!i||C&6)&&o.p(g,i?C:-1),rt(e,p=yt(f,[C&16&&g[4],C&512&&g[9]]))},i(g){i||(z(o,g),i=!0)},o(g){D(o,g),i=!1},d(g){g&&F(e),o&&o.d(g),n[19](null),t=!1,Gi(r)}}}function GS(n){let e;const i=n[14].default,t=Ke(i,n,n[13],U_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&Je(t,i,r,r[13],e?Qe(i,r[13],s,qS):Ye(r[13]),U_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function HS(n){let e=(n[2]||n[1])+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&6&&e!==(e=(t[2]||t[1])+"")&&Ai(i,e)},d(t){t&&F(i)}}}function WS(n){let e,i,t,r;const s=[GS,ZS],l=[];function o(f,p){return f[3]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function XS(n,e,i){let t,r;const s=["value","disabled","label","asChild","el"];let l=qe(e,s),o,f,{$$slots:p={},$$scope:g}=e,{value:C}=e,{disabled:A=void 0}=e,{label:V=void 0}=e,{asChild:U=!1}=e,{el:G=void 0}=e;const{elements:{option:Z},helpers:{isSelected:K},getAttrs:q}=vS(C);ei(n,Z,Ve=>i(12,f=Ve)),ei(n,K,Ve=>i(11,o=Ve));const ie=Ur(),oe=q("item");function se(Ve){jt.call(this,n,Ve)}function pe(Ve){jt.call(this,n,Ve)}function Ie(Ve){jt.call(this,n,Ve)}function Ce(Ve){jt.call(this,n,Ve)}function je(Ve){Dt[Ve?"unshift":"push"](()=>{G=Ve,i(0,G)})}return n.$$set=Ve=>{e=re(re({},e),wt(Ve)),i(9,l=qe(e,s)),"value"in Ve&&i(1,C=Ve.value),"disabled"in Ve&&i(10,A=Ve.disabled),"label"in Ve&&i(2,V=Ve.label),"asChild"in Ve&&i(3,U=Ve.asChild),"el"in Ve&&i(0,G=Ve.el),"$$scope"in Ve&&i(13,g=Ve.$$scope)},n.$$.update=()=>{n.$$.dirty&5126&&i(4,t=f({value:C,disabled:A,label:V})),n.$$.dirty&16&&Object.assign(t,oe),n.$$.dirty&2050&&i(5,r=o(C))},[G,C,V,U,t,r,Z,K,ie,l,A,o,f,g,p,se,pe,Ie,Ce,je]}let KS=class extends lt{constructor(e){super(),ct(this,e,XS,WS,st,{value:1,disabled:10,label:2,asChild:3,el:0})}};const JS=n=>({isSelected:n&4}),q_=n=>({attrs:n[5],isSelected:n[2](n[4])}),YS=n=>({isSelected:n&4}),Z_=n=>({attrs:n[5],isSelected:n[2](n[4])});function QS(n){let e,i=n[2](n[4]),t,r=i&&G_(n),s=[n[6],n[5]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("div"),r&&r.c(),this.h()},l(o){e=Ge(o,"DIV",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),n[9](e),t=!0},p(o,f){f&4&&(i=o[2](o[4])),i?r?(r.p(o,f),f&4&&z(r,1)):(r=G_(o),r.c(),z(r,1),r.m(e,null)):r&&(Tt(),D(r,1,1,()=>{r=null}),It()),rt(e,l=yt(s,[f&64&&o[6],o[5]]))},i(o){t||(z(r),t=!0)},o(o){D(r),t=!1},d(o){o&&F(e),r&&r.d(),n[9](null)}}}function $S(n){let e;const i=n[8].default,t=Ke(i,n,n[7],Z_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,YS):Ye(r[7]),Z_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function G_(n){let e;const i=n[8].default,t=Ke(i,n,n[7],q_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,JS):Ye(r[7]),q_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function eT(n){let e,i,t,r;const s=[$S,QS],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function tT(n,e,i){const t=["asChild","el"];let r=qe(e,t),s,{$$slots:l={},$$scope:o}=e,{asChild:f=!1}=e,{el:p=void 0}=e;const{isSelected:g,value:C,getAttrs:A}=wS();ei(n,g,G=>i(2,s=G));const V=A("indicator");function U(G){Dt[G?"unshift":"push"](()=>{p=G,i(0,p)})}return n.$$set=G=>{e=re(re({},e),wt(G)),i(6,r=qe(e,t)),"asChild"in G&&i(1,f=G.asChild),"el"in G&&i(0,p=G.el),"$$scope"in G&&i(7,o=G.$$scope)},[p,f,s,g,C,V,r,o,l,U]}class iT extends lt{constructor(e){super(),ct(this,e,tT,eT,st,{asChild:1,el:0})}}const nT=n=>({builder:n&4}),H_=n=>({builder:n[2]}),rT=n=>({builder:n&4}),W_=n=>({builder:n[2]});function sT(n){let e,i,t,r;const s=n[9].default,l=Ke(s,n,n[8],H_);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[10](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4]),_t(e,"m-keydown",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&260)&&Je(l,s,p,p[8],i?Qe(s,p[8],g,nT):Ye(p[8]),H_),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[10](null),t=!1,Gi(r)}}}function oT(n){let e;const i=n[9].default,t=Ke(i,n,n[8],W_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,rT):Ye(r[8]),W_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function aT(n){let e,i,t,r;const s=[oT,sT],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function lT(n,e,i){let t;const r=["asChild","id","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{id:g=void 0}=e,{el:C=void 0}=e;const{elements:{trigger:A},ids:V,getAttrs:U}=Sl();ei(n,A,q=>i(7,l=q));const G=Ur(),Z=U("trigger");function K(q){Dt[q?"unshift":"push"](()=>{C=q,i(0,C)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(5,s=qe(e,r)),"asChild"in q&&i(1,p=q.asChild),"id"in q&&i(6,g=q.id),"el"in q&&i(0,C=q.el),"$$scope"in q&&i(8,f=q.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&g&&V.trigger.set(g),n.$$.dirty&128&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,Z)},[C,p,t,A,G,s,g,l,f,o,K]}let cT=class extends lt{constructor(e){super(),ct(this,e,lT,aT,st,{asChild:1,id:6,el:0})}};const uT=n=>({label:n&8}),X_=n=>({label:n[3],attrs:n[5]});function fT(n){let e,i=(n[3]||n[1])+"",t,r,s=[n[6],n[5],{"data-placeholder":r=n[3]?void 0:""}],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("span"),t=Ct(i),this.h()},l(o){e=Ge(o,"SPAN",{"data-placeholder":!0});var f=$e(e);t=St(f,i),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),ut(e,t),n[10](e)},p(o,f){f&10&&i!==(i=(o[3]||o[1])+"")&&dd(t,i,l.contenteditable),rt(e,l=yt(s,[f&64&&o[6],o[5],f&8&&r!==(r=o[3]?void 0:"")&&{"data-placeholder":r}]))},i:Ci,o:Ci,d(o){o&&F(e),n[10](null)}}}function hT(n){let e;const i=n[9].default,t=Ke(i,n,n[8],X_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,uT):Ye(r[8]),X_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function dT(n){let e,i,t,r;const s=[hT,fT],l=[];function o(f,p){return f[2]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function mT(n,e,i){let t;const r=["placeholder","asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{placeholder:p=""}=e,{asChild:g=!1}=e,{el:C=void 0}=e;const{states:{selectedLabel:A},getAttrs:V}=Sl();ei(n,A,Z=>i(7,l=Z));const U=V("value");function G(Z){Dt[Z?"unshift":"push"](()=>{C=Z,i(0,C)})}return n.$$set=Z=>{e=re(re({},e),wt(Z)),i(6,s=qe(e,r)),"placeholder"in Z&&i(1,p=Z.placeholder),"asChild"in Z&&i(2,g=Z.asChild),"el"in Z&&i(0,C=Z.el),"$$scope"in Z&&i(8,f=Z.$$scope)},n.$$.update=()=>{n.$$.dirty&128&&i(3,t=l)},[C,p,g,t,A,U,s,l,f,o,G]}class pT extends lt{constructor(e){super(),ct(this,e,mT,dT,st,{placeholder:1,asChild:2,el:0})}}function F0(){return{NAME:"toggle-group",PARTS:["root","item"]}}function _T(n){const{NAME:e,PARTS:i}=F0(),t=Vo(e,i),r={...Mw(jo(n)),getAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function gT(){const{NAME:n}=F0();return Ir(n)}const yT=n=>({builder:n&4}),K_=n=>({builder:n[2]}),bT=n=>({builder:n&4}),J_=n=>({builder:n[2]});function vT(n){let e,i,t,r;const s=n[13].default,l=Ke(s,n,n[12],K_);let o=[n[2],n[4]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[14](e),i=!0,t||(r=xi(n[2].action(e)),t=!0)},p(p,g){l&&l.p&&(!i||g&4100)&&Je(l,s,p,p[12],i?Qe(s,p[12],g,yT):Ye(p[12]),K_),rt(e,f=yt(o,[g&4&&p[2],g&16&&p[4]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[14](null),t=!1,r()}}}function wT(n){let e;const i=n[13].default,t=Ke(i,n,n[12],J_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4100)&&Je(t,i,r,r[12],e?Qe(i,r[12],s,bT):Ye(r[12]),J_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function xT(n){let e,i,t,r;const s=[wT,vT],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function kT(n,e,i){let t;const r=["type","disabled","loop","value","orientation","onValueChange","asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{type:p="single"}=e,{disabled:g=void 0}=e,{loop:C=void 0}=e,{value:A=void 0}=e,{orientation:V=void 0}=e,{onValueChange:U=void 0}=e,{asChild:G=!1}=e,{el:Z=void 0}=e;const{elements:{root:K},states:{value:q},updateOption:ie,getAttrs:oe}=_T({disabled:g,type:p,defaultValue:A,loop:C,orientation:V,onValueChange:({next:Ie})=>Array.isArray(Ie)?((!Array.isArray(A)||!xd(A,Ie))&&(U==null||U(Ie),i(5,A=Ie)),Ie):(A!==Ie&&(U==null||U(Ie),i(5,A=Ie)),Ie)});ei(n,K,Ie=>i(11,l=Ie));const se=oe("root");function pe(Ie){Dt[Ie?"unshift":"push"](()=>{Z=Ie,i(0,Z)})}return n.$$set=Ie=>{e=re(re({},e),wt(Ie)),i(4,s=qe(e,r)),"type"in Ie&&i(6,p=Ie.type),"disabled"in Ie&&i(7,g=Ie.disabled),"loop"in Ie&&i(8,C=Ie.loop),"value"in Ie&&i(5,A=Ie.value),"orientation"in Ie&&i(9,V=Ie.orientation),"onValueChange"in Ie&&i(10,U=Ie.onValueChange),"asChild"in Ie&&i(1,G=Ie.asChild),"el"in Ie&&i(0,Z=Ie.el),"$$scope"in Ie&&i(12,f=Ie.$$scope)},n.$$.update=()=>{n.$$.dirty&32&&A!==void 0&&q.set(Array.isArray(A)?[...A]:A),n.$$.dirty&128&&ie("disabled",g),n.$$.dirty&256&&ie("loop",C),n.$$.dirty&64&&ie("type",p),n.$$.dirty&512&&ie("orientation",V),n.$$.dirty&2048&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,se)},[Z,G,t,K,s,A,p,g,C,V,U,l,f,o,pe]}let CT=class extends lt{constructor(e){super(),ct(this,e,kT,xT,st,{type:6,disabled:7,loop:8,value:5,orientation:9,onValueChange:10,asChild:1,el:0})}};const ST=n=>({builder:n&4}),Y_=n=>({builder:n[2]}),TT=n=>({builder:n&4}),Q_=n=>({builder:n[2]});function IT(n){let e,i,t,r;const s=n[10].default,l=Ke(s,n,n[9],Y_);let o=[n[2],n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[11](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-click",n[4]),_t(e,"m-keydown",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&516)&&Je(l,s,p,p[9],i?Qe(s,p[9],g,ST):Ye(p[9]),Y_),rt(e,f=yt(o,[g&4&&p[2],g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[11](null),t=!1,Gi(r)}}}function AT(n){let e;const i=n[10].default,t=Ke(i,n,n[9],Q_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&516)&&Je(t,i,r,r[9],e?Qe(i,r[9],s,TT):Ye(r[9]),Q_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function ET(n){let e,i,t,r;const s=[AT,IT],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function PT(n,e,i){let t;const r=["value","disabled","asChild","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{value:p}=e,{disabled:g=!1}=e,{asChild:C=!1}=e,{el:A=void 0}=e;const{elements:{item:V},getAttrs:U}=gT();ei(n,V,q=>i(8,l=q));const G=Ur(),Z=U("item");function K(q){Dt[q?"unshift":"push"](()=>{A=q,i(0,A)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(5,s=qe(e,r)),"value"in q&&i(6,p=q.value),"disabled"in q&&i(7,g=q.disabled),"asChild"in q&&i(1,C=q.asChild),"el"in q&&i(0,A=q.el),"$$scope"in q&&i(9,f=q.$$scope)},n.$$.update=()=>{n.$$.dirty&448&&i(2,t=l({value:p,disabled:g})),n.$$.dirty&4&&Object.assign(t,Z)},[A,C,t,V,G,s,p,g,l,f,o,K]}let MT=class extends lt{constructor(e){super(),ct(this,e,PT,ET,st,{value:6,disabled:7,asChild:1,el:0})}};function B0(){return{NAME:"tooltip",PARTS:["arrow","content","trigger"]}}function zT(n){const{NAME:e,PARTS:i}=B0(),t=Vo(e,i),r={...Lw({positioning:{placement:"top",gutter:0},openDelay:700,...jo(n),forceVisible:!0}),getAttrs:t};return Tr(e,r),{...r,updateOption:Xs(r.options)}}function Cd(){const{NAME:n}=B0();return Ir(n)}function DT(n){const i={...{side:"top",align:"center",sideOffset:1},...n},{options:{positioning:t}}=Cd();E0(t)({...i})}const LT=n=>({ids:n&1}),$_=n=>({ids:n[0]});function RT(n){let e;const i=n[12].default,t=Ke(i,n,n[11],$_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&Je(t,i,r,r[11],e?Qe(i,r[11],s,LT):Ye(r[11]),$_)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function OT(n,e,i){let t,{$$slots:r={},$$scope:s}=e,{closeOnEscape:l=void 0}=e,{portal:o=void 0}=e,{closeOnPointerDown:f=void 0}=e,{openDelay:p=void 0}=e,{closeDelay:g=void 0}=e,{open:C=void 0}=e,{onOpenChange:A=void 0}=e,{disableHoverableContent:V=void 0}=e,{group:U=void 0}=e;const{states:{open:G},updateOption:Z,ids:K}=zT({closeOnEscape:l,portal:o,closeOnPointerDown:f,openDelay:p,closeDelay:g,forceVisible:!0,defaultOpen:C,disableHoverableContent:V,group:U,onOpenChange:({next:ie})=>(C!==ie&&(A==null||A(ie),i(2,C=ie)),ie),positioning:{gutter:0,offset:{mainAxis:1}}}),q=Cn([K.content,K.trigger],([ie,oe])=>({content:ie,trigger:oe}));return ei(n,q,ie=>i(0,t=ie)),n.$$set=ie=>{"closeOnEscape"in ie&&i(3,l=ie.closeOnEscape),"portal"in ie&&i(4,o=ie.portal),"closeOnPointerDown"in ie&&i(5,f=ie.closeOnPointerDown),"openDelay"in ie&&i(6,p=ie.openDelay),"closeDelay"in ie&&i(7,g=ie.closeDelay),"open"in ie&&i(2,C=ie.open),"onOpenChange"in ie&&i(8,A=ie.onOpenChange),"disableHoverableContent"in ie&&i(9,V=ie.disableHoverableContent),"group"in ie&&i(10,U=ie.group),"$$scope"in ie&&i(11,s=ie.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&C!==void 0&&G.set(C),n.$$.dirty&8&&Z("closeOnEscape",l),n.$$.dirty&16&&Z("portal",o),n.$$.dirty&32&&Z("closeOnPointerDown",f),n.$$.dirty&64&&Z("openDelay",p),n.$$.dirty&128&&Z("closeDelay",g),n.$$.dirty&1024&&Z("group",U),n.$$.dirty&512&&Z("disableHoverableContent",V)},[t,q,C,l,o,f,p,g,A,V,U,s,r]}class FT extends lt{constructor(e){super(),ct(this,e,OT,RT,st,{closeOnEscape:3,portal:4,closeOnPointerDown:5,openDelay:6,closeDelay:7,open:2,onOpenChange:8,disableHoverableContent:9,group:10})}}const BT=n=>({builder:n[0]&256}),eg=n=>({builder:n[8]}),NT=n=>({builder:n[0]&256}),tg=n=>({builder:n[8]}),VT=n=>({builder:n[0]&256}),ig=n=>({builder:n[8]}),jT=n=>({builder:n[0]&256}),ng=n=>({builder:n[8]}),UT=n=>({builder:n[0]&256}),rg=n=>({builder:n[8]}),qT=n=>({builder:n[0]&256}),sg=n=>({builder:n[8]});function ZT(n){let e,i,t,r;const s=n[28].default,l=Ke(s,n,n[27],eg);let o=[n[8],n[13]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),n[33](e),i=!0,t||(r=[xi(n[8].action(e)),_t(e,"m-pointerdown",n[12]),_t(e,"m-pointerenter",n[12])],t=!0)},p(p,g){l&&l.p&&(!i||g[0]&134217984)&&Je(l,s,p,p[27],i?Qe(s,p[27],g,BT):Ye(p[27]),eg),rt(e,f=yt(o,[g[0]&256&&p[8],g[0]&8192&&p[13]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[33](null),t=!1,Gi(r)}}}function GT(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],tg);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[32](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerdown",n[12]),_t(e,"m-pointerenter",n[12])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,NT):Ye(n[27]),tg),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),i&&i.end(1),t=!0)},o(g){D(o,g),g&&(i=Bo(e,n[5],n[6])),t=!1},d(g){g&&F(e),o&&o.d(g),n[32](null),g&&i&&i.end(),r=!1,Gi(s)}}}function HT(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],ig);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[31](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerdown",n[12]),_t(e,"m-pointerenter",n[12])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,VT):Ye(n[27]),ig),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),g&&(i||is(()=>{i=No(e,n[3],n[4]),i.start()})),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),n[31](null),r=!1,Gi(s)}}}function WT(n){let e,i,t,r,s,l;const o=n[28].default,f=Ke(o,n,n[27],ng);let p=[n[8],n[13]],g={};for(let C=0;C<p.length;C+=1)g=re(g,p[C]);return{c(){e=Ze("div"),f&&f.c(),this.h()},l(C){e=Ge(C,"DIV",{});var A=$e(e);f&&f.l(A),A.forEach(F),this.h()},h(){rt(e,g)},m(C,A){Q(C,e,A),f&&f.m(e,null),n[30](e),r=!0,s||(l=[xi(n[8].action(e)),_t(e,"m-pointerdown",n[12]),_t(e,"m-pointerenter",n[12])],s=!0)},p(C,A){n=C,f&&f.p&&(!r||A[0]&134217984)&&Je(f,o,n,n[27],r?Qe(o,n[27],A,jT):Ye(n[27]),ng),rt(e,g=yt(p,[A[0]&256&&n[8],A[0]&8192&&n[13]]))},i(C){r||(z(f,C),C&&is(()=>{r&&(t&&t.end(1),i=No(e,n[3],n[4]),i.start())}),r=!0)},o(C){D(f,C),i&&i.invalidate(),C&&(t=Bo(e,n[5],n[6])),r=!1},d(C){C&&F(e),f&&f.d(C),n[30](null),C&&t&&t.end(),s=!1,Gi(l)}}}function XT(n){let e,i,t,r,s;const l=n[28].default,o=Ke(l,n,n[27],rg);let f=[n[8],n[13]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("div"),o&&o.c(),this.h()},l(g){e=Ge(g,"DIV",{});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),n[29](e),t=!0,r||(s=[xi(n[8].action(e)),_t(e,"m-pointerdown",n[12]),_t(e,"m-pointerenter",n[12])],r=!0)},p(g,C){n=g,o&&o.p&&(!t||C[0]&134217984)&&Je(o,l,n,n[27],t?Qe(l,n[27],C,UT):Ye(n[27]),rg),rt(e,p=yt(f,[C[0]&256&&n[8],C[0]&8192&&n[13]]))},i(g){t||(z(o,g),g&&is(()=>{t&&(i||(i=Do(e,n[1],n[2],!0)),i.run(1))}),t=!0)},o(g){D(o,g),g&&(i||(i=Do(e,n[1],n[2],!1)),i.run(0)),t=!1},d(g){g&&F(e),o&&o.d(g),n[29](null),g&&i&&i.end(),r=!1,Gi(s)}}}function KT(n){let e;const i=n[28].default,t=Ke(i,n,n[27],sg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&134217984)&&Je(t,i,r,r[27],e?Qe(i,r[27],s,qT):Ye(r[27]),sg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function JT(n){let e,i,t,r;const s=[KT,XT,WT,HT,GT,ZT],l=[];function o(f,p){return f[7]&&f[9]?0:f[1]&&f[9]?1:f[3]&&f[5]&&f[9]?2:f[3]&&f[9]?3:f[5]&&f[9]?4:f[9]?5:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function YT(n,e,i){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{transition:g=void 0}=e,{transitionConfig:C=void 0}=e,{inTransition:A=void 0}=e,{inTransitionConfig:V=void 0}=e,{outTransition:U=void 0}=e,{outTransitionConfig:G=void 0}=e,{asChild:Z=!1}=e,{id:K=void 0}=e,{side:q="top"}=e,{align:ie="center"}=e,{sideOffset:oe=0}=e,{alignOffset:se=0}=e,{collisionPadding:pe=8}=e,{avoidCollisions:Ie=!0}=e,{collisionBoundary:Ce=void 0}=e,{sameWidth:je=!1}=e,{fitViewport:Ve=!1}=e,{strategy:de="absolute"}=e,{overlap:Me=!1}=e,{el:Re=void 0}=e;const{elements:{content:Rt},states:{open:ti},ids:Jt,getAttrs:We}=Cd();ei(n,Rt,vt=>i(26,o=vt)),ei(n,ti,vt=>i(9,l=vt));const Le=Ur(),pt=We("content");function xt(vt){Dt[vt?"unshift":"push"](()=>{Re=vt,i(0,Re)})}function At(vt){Dt[vt?"unshift":"push"](()=>{Re=vt,i(0,Re)})}function di(vt){Dt[vt?"unshift":"push"](()=>{Re=vt,i(0,Re)})}function Yt(vt){Dt[vt?"unshift":"push"](()=>{Re=vt,i(0,Re)})}function li(vt){Dt[vt?"unshift":"push"](()=>{Re=vt,i(0,Re)})}return n.$$set=vt=>{e=re(re({},e),wt(vt)),i(13,s=qe(e,r)),"transition"in vt&&i(1,g=vt.transition),"transitionConfig"in vt&&i(2,C=vt.transitionConfig),"inTransition"in vt&&i(3,A=vt.inTransition),"inTransitionConfig"in vt&&i(4,V=vt.inTransitionConfig),"outTransition"in vt&&i(5,U=vt.outTransition),"outTransitionConfig"in vt&&i(6,G=vt.outTransitionConfig),"asChild"in vt&&i(7,Z=vt.asChild),"id"in vt&&i(14,K=vt.id),"side"in vt&&i(15,q=vt.side),"align"in vt&&i(16,ie=vt.align),"sideOffset"in vt&&i(17,oe=vt.sideOffset),"alignOffset"in vt&&i(18,se=vt.alignOffset),"collisionPadding"in vt&&i(19,pe=vt.collisionPadding),"avoidCollisions"in vt&&i(20,Ie=vt.avoidCollisions),"collisionBoundary"in vt&&i(21,Ce=vt.collisionBoundary),"sameWidth"in vt&&i(22,je=vt.sameWidth),"fitViewport"in vt&&i(23,Ve=vt.fitViewport),"strategy"in vt&&i(24,de=vt.strategy),"overlap"in vt&&i(25,Me=vt.overlap),"el"in vt&&i(0,Re=vt.el),"$$scope"in vt&&i(27,p=vt.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&K&&Jt.content.set(K),n.$$.dirty[0]&67108864&&i(8,t=o),n.$$.dirty[0]&256&&Object.assign(t,pt),n.$$.dirty[0]&67076608&&l&&DT({side:q,align:ie,sideOffset:oe,alignOffset:se,collisionPadding:pe,avoidCollisions:Ie,collisionBoundary:Ce,sameWidth:je,fitViewport:Ve,strategy:de,overlap:Me})},[Re,g,C,A,V,U,G,Z,t,l,Rt,ti,Le,s,K,q,ie,oe,se,pe,Ie,Ce,je,Ve,de,Me,o,p,f,xt,At,di,Yt,li]}let QT=class extends lt{constructor(e){super(),ct(this,e,YT,JT,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}};const $T=n=>({builder:n&4}),og=n=>({builder:n[2]}),eI=n=>({builder:n&4}),ag=n=>({builder:n[2]});function tI(n){let e,i,t,r;const s=n[9].default,l=Ke(s,n,n[8],og);let o=[n[2],{type:"button"},n[5]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("button"),l&&l.c(),this.h()},l(p){e=Ge(p,"BUTTON",{type:!0});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),e.autofocus&&e.focus(),n[10](e),i=!0,t||(r=[xi(n[2].action(e)),_t(e,"m-blur",n[4]),_t(e,"m-focus",n[4]),_t(e,"m-keydown",n[4]),_t(e,"m-pointerdown",n[4]),_t(e,"m-pointerenter",n[4]),_t(e,"m-pointerleave",n[4])],t=!0)},p(p,g){l&&l.p&&(!i||g&260)&&Je(l,s,p,p[8],i?Qe(s,p[8],g,$T):Ye(p[8]),og),rt(e,f=yt(o,[g&4&&p[2],{type:"button"},g&32&&p[5]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),n[10](null),t=!1,Gi(r)}}}function iI(n){let e;const i=n[9].default,t=Ke(i,n,n[8],ag);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&Je(t,i,r,r[8],e?Qe(i,r[8],s,eI):Ye(r[8]),ag)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function nI(n){let e,i,t,r;const s=[iI,tI],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function rI(n,e,i){let t;const r=["asChild","id","el"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,{id:g=void 0}=e,{el:C=void 0}=e;const{elements:{trigger:A},ids:V,getAttrs:U}=Cd();ei(n,A,q=>i(7,l=q));const G=Ur(),Z=U("trigger");function K(q){Dt[q?"unshift":"push"](()=>{C=q,i(0,C)})}return n.$$set=q=>{e=re(re({},e),wt(q)),i(5,s=qe(e,r)),"asChild"in q&&i(1,p=q.asChild),"id"in q&&i(6,g=q.id),"el"in q&&i(0,C=q.el),"$$scope"in q&&i(8,f=q.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&g&&V.trigger.set(g),n.$$.dirty&128&&i(2,t=l),n.$$.dirty&4&&Object.assign(t,Z)},[C,p,t,A,G,s,g,l,f,o,K]}class sI extends lt{constructor(e){super(),ct(this,e,rI,nI,st,{asChild:1,id:6,el:0})}}function oI(n){let e,i,t,r;const s=n[3].default,l=Ke(s,n,n[2],null);let o=[{class:t=Lt("w-full caption-bottom text-sm",n[0])},n[1]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),i=Ze("table"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{class:!0});var g=$e(e);i=Ge(g,"TABLE",{class:!0});var C=$e(i);l&&l.l(C),C.forEach(F),g.forEach(F),this.h()},h(){rt(i,f),gt(e,"class","relative w-full overflow-auto")},m(p,g){Q(p,e,g),ut(e,i),l&&l.m(i,null),r=!0},p(p,[g]){l&&l.p&&(!r||g&4)&&Je(l,s,p,p[2],r?Qe(s,p[2],g,null):Ye(p[2]),null),rt(i,f=yt(o,[(!r||g&1&&t!==(t=Lt("w-full caption-bottom text-sm",p[0])))&&{class:t},g&2&&p[1]]))},i(p){r||(z(l,p),r=!0)},o(p){D(l,p),r=!1},d(p){p&&F(e),l&&l.d(p)}}}function aI(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(2,l=f.$$scope)},[o,r,l,s]}class DR extends lt{constructor(e){super(),ct(this,e,aI,oI,st,{class:0})}}function lI(n){let e,i,t;const r=n[3].default,s=Ke(r,n,n[2],null);let l=[{class:i=Lt("[&_tr:last-child]:border-0",n[0])},n[1]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("tbody"),s&&s.c(),this.h()},l(f){e=Ge(f,"TBODY",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),s&&s.m(e,null),t=!0},p(f,[p]){s&&s.p&&(!t||p&4)&&Je(s,r,f,f[2],t?Qe(r,f[2],p,null):Ye(f[2]),null),rt(e,o=yt(l,[(!t||p&1&&i!==(i=Lt("[&_tr:last-child]:border-0",f[0])))&&{class:i},p&2&&f[1]]))},i(f){t||(z(s,f),t=!0)},o(f){D(s,f),t=!1},d(f){f&&F(e),s&&s.d(f)}}}function cI(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(2,l=f.$$scope)},[o,r,l,s]}class LR extends lt{constructor(e){super(),ct(this,e,cI,lI,st,{class:0})}}function uI(n){let e,i,t,r,s;const l=n[3].default,o=Ke(l,n,n[2],null);let f=[{class:i=Lt("p-4 align-middle [&:has([role=checkbox])]:pr-0",n[0])},n[1]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("td"),o&&o.c(),this.h()},l(g){e=Ge(g,"TD",{class:!0});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),t=!0,r||(s=[_t(e,"click",n[4]),_t(e,"keydown",n[5])],r=!0)},p(g,[C]){o&&o.p&&(!t||C&4)&&Je(o,l,g,g[2],t?Qe(l,g[2],C,null):Ye(g[2]),null),rt(e,p=yt(f,[(!t||C&1&&i!==(i=Lt("p-4 align-middle [&:has([role=checkbox])]:pr-0",g[0])))&&{class:i},C&2&&g[1]]))},i(g){t||(z(o,g),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),r=!1,Gi(s)}}}function fI(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(2,l=g.$$scope)},[o,r,l,s,f,p]}class RR extends lt{constructor(e){super(),ct(this,e,fI,uI,st,{class:0})}}function hI(n){let e,i,t,r,s;const l=n[3].default,o=Ke(l,n,n[2],null);let f=[{class:i=Lt("[&_tr]:border-b",n[0])},n[1]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("thead"),o&&o.c(),this.h()},l(g){e=Ge(g,"THEAD",{class:!0});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),t=!0,r||(s=[_t(e,"click",n[4]),_t(e,"keydown",n[5])],r=!0)},p(g,[C]){o&&o.p&&(!t||C&4)&&Je(o,l,g,g[2],t?Qe(l,g[2],C,null):Ye(g[2]),null),rt(e,p=yt(f,[(!t||C&1&&i!==(i=Lt("[&_tr]:border-b",g[0])))&&{class:i},C&2&&g[1]]))},i(g){t||(z(o,g),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),r=!1,Gi(s)}}}function dI(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(2,l=g.$$scope)},[o,r,l,s,f,p]}class OR extends lt{constructor(e){super(),ct(this,e,dI,hI,st,{class:0})}}function mI(n){let e,i,t,r,s;const l=n[3].default,o=Ke(l,n,n[2],null);let f=[{class:i=Lt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n[0])},n[1]],p={};for(let g=0;g<f.length;g+=1)p=re(p,f[g]);return{c(){e=Ze("tr"),o&&o.c(),this.h()},l(g){e=Ge(g,"TR",{class:!0});var C=$e(e);o&&o.l(C),C.forEach(F),this.h()},h(){rt(e,p)},m(g,C){Q(g,e,C),o&&o.m(e,null),t=!0,r||(s=[_t(e,"click",n[4]),_t(e,"keydown",n[5])],r=!0)},p(g,[C]){o&&o.p&&(!t||C&4)&&Je(o,l,g,g[2],t?Qe(l,g[2],C,null):Ye(g[2]),null),rt(e,p=yt(f,[(!t||C&1&&i!==(i=Lt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",g[0])))&&{class:i},C&2&&g[1]]))},i(g){t||(z(o,g),t=!0)},o(g){D(o,g),t=!1},d(g){g&&F(e),o&&o.d(g),r=!1,Gi(s)}}}function pI(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(2,l=g.$$scope)},[o,r,l,s,f,p]}class FR extends lt{constructor(e){super(),ct(this,e,pI,mI,st,{class:0})}}function _I(n){let e;const i=n[5].default,t=Ke(i,n,n[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&Je(t,i,r,r[6],e?Qe(i,r[6],s,null):Ye(r[6]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function gI(n){let e,i;const t=[{transition:n[2]},{transitionConfig:n[3]},{sideOffset:n[1]},{class:Lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md",n[0])},n[4]];let r={$$slots:{default:[_I]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new QT({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&31?yt(t,[l&4&&{transition:s[2]},l&8&&{transitionConfig:s[3]},l&2&&{sideOffset:s[1]},l&1&&{class:Lt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md",s[0])},l&16&&Ei(s[4])]):{};l&64&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function yI(n,e,i){const t=["class","sideOffset","transition","transitionConfig"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{sideOffset:f=4}=e,{transition:p=gd}=e,{transitionConfig:g={y:8,duration:150}}=e;return n.$$set=C=>{e=re(re({},e),wt(C)),i(4,r=qe(e,t)),"class"in C&&i(0,o=C.class),"sideOffset"in C&&i(1,f=C.sideOffset),"transition"in C&&i(2,p=C.transition),"transitionConfig"in C&&i(3,g=C.transitionConfig),"$$scope"in C&&i(6,l=C.$$scope)},[o,f,p,g,r,s,l]}class Jc extends lt{constructor(e){super(),ct(this,e,yI,gI,st,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}const Yc=FT,Is=sI;function lg(n,e,i){const t=n.slice();return t[24]=e[i],t[26]=i,t}function bI(n){let e,i;return e=new z0({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function cg(n){let e,i;return e=new yf({props:{class:"w-full p-0 "+n[2],$$slots:{default:[wI]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4&&(s.class="w-full p-0 "+t[2]),r&134217776&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function vI(n){let e=n[24]+"",i,t;return{c(){i=Ct(e),t=it()},l(r){i=St(r,e),t=nt(r)},m(r,s){Q(r,i,s),Q(r,t,s)},p(r,s){s&16&&e!==(e=r[24]+"")&&Ai(i,e)},d(r){r&&(F(i),F(t))}}}function ug(n){let e,i;function t(){return n[18](n[24])}function r(){return n[19](n[26])}return e=new jr({props:{type:"button",variant:"ghost",size:"sm",class:"!h-fit w-full justify-start !whitespace-normal text-left "+(n[5]===n[26]&&"bg-muted"),$$slots:{default:[vI]},$$scope:{ctx:n}}}),e.$on("click",t),e.$on("mouseenter",r),e.$on("mouseleave",n[20]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,l){n=s;const o={};l&32&&(o.class="!h-fit w-full justify-start !whitespace-normal text-left "+(n[5]===n[26]&&"bg-muted")),l&134217744&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function wI(n){let e,i,t=Zi(n[4]),r=[];for(let l=0;l<t.length;l+=1)r[l]=ug(lg(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){e=Ze("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=Ge(l,"DIV",{class:!0});var o=$e(e);for(let f=0;f<r.length;f+=1)r[f].l(o);o.forEach(F),this.h()},h(){gt(e,"class","group/suggestions flex max-h-[300px] w-full flex-col overflow-y-scroll p-0")},m(l,o){Q(l,e,o);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);i=!0},p(l,o){if(o&2096){t=Zi(l[4]);let f;for(f=0;f<t.length;f+=1){const p=lg(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=ug(p),r[f].c(),z(r[f],1),r[f].m(e,null))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function xI(n){let e,i,t,r;e=new Kc({props:{class:"absolute -bottom-2 left-0 right-0",disabled:!0}});let s=n[4].length>0&&cg(n);return{c(){ce(e.$$.fragment),i=it(),s&&s.c(),t=He()},l(l){ue(e.$$.fragment,l),i=nt(l),s&&s.l(l),t=He()},m(l,o){fe(e,l,o),Q(l,i,o),s&&s.m(l,o),Q(l,t,o),r=!0},p(l,o){l[4].length>0?s?(s.p(l,o),o&16&&z(s,1)):(s=cg(l),s.c(),z(s,1),s.m(t.parentNode,t)):s&&(Tt(),D(s,1,1,()=>{s=null}),It())},i(l){r||(z(e.$$.fragment,l),z(s),r=!0)},o(l){D(e.$$.fragment,l),D(s),r=!1},d(l){l&&(F(i),F(t)),he(e,l),s&&s.d(l)}}}function kI(n){let e,i,t,r,s,l,o,f,p,g,C,A;function V(K){n[17](K)}let U={id:n[3],type:"text",placeholder:n[1],class:"overflow-ellipsis pr-12 outline-none focus:outline-accent-foreground "+n[2]};n[0]!==void 0&&(U.value=n[0]),i=new Cl({props:U}),Dt.push(()=>Bi(i,"value",V)),i.$on("input",n[8]),i.$on("focus",n[10]),s=new jr({props:{type:"submit",variant:"ghost",size:"icon",class:"absolute right-0 top-1/2 -translate-y-1/2 transform text-muted-foreground transition-all group-hover/search:text-accent-foreground group-focus/search:text-accent-foreground",$$slots:{default:[bI]},$$scope:{ctx:n}}});function G(K){n[21](K)}let Z={disableFocusTrap:!0,$$slots:{default:[xI]},$$scope:{ctx:n}};return n[7]!==void 0&&(Z.open=n[7]),o=new gf({props:Z}),Dt.push(()=>Bi(o,"open",G)),{c(){e=Ze("form"),ce(i.$$.fragment),r=it(),ce(s.$$.fragment),l=it(),ce(o.$$.fragment),this.h()},l(K){e=Ge(K,"FORM",{class:!0});var q=$e(e);ue(i.$$.fragment,q),r=nt(q),ue(s.$$.fragment,q),l=nt(q),ue(o.$$.fragment,q),q.forEach(F),this.h()},h(){gt(e,"class",p="group/search relative h-10 overflow-visible rounded-md bg-white shadow "+n[2])},m(K,q){Q(K,e,q),fe(i,e,null),ut(e,r),fe(s,e,null),ut(e,l),fe(o,e,null),n[22](e),g=!0,C||(A=_t(e,"submit",w0(n[9])),C=!0)},p(K,[q]){const ie={};q&8&&(ie.id=K[3]),q&2&&(ie.placeholder=K[1]),q&4&&(ie.class="overflow-ellipsis pr-12 outline-none focus:outline-accent-foreground "+K[2]),!t&&q&1&&(t=!0,ie.value=K[0],Fi(()=>t=!1)),i.$set(ie);const oe={};q&134217728&&(oe.$$scope={dirty:q,ctx:K}),s.$set(oe);const se={};q&134217780&&(se.$$scope={dirty:q,ctx:K}),!f&&q&128&&(f=!0,se.open=K[7],Fi(()=>f=!1)),o.$set(se),(!g||q&4&&p!==(p="group/search relative h-10 overflow-visible rounded-md bg-white shadow "+K[2]))&&gt(e,"class",p)},i(K){g||(z(i.$$.fragment,K),z(s.$$.fragment,K),z(o.$$.fragment,K),g=!0)},o(K){D(i.$$.fragment,K),D(s.$$.fragment,K),D(o.$$.fragment,K),g=!1},d(K){K&&F(e),he(i),he(s),he(o),n[22](null),C=!1,A()}}}let CI=300;function SI(n,e,i){let t=[],{value:r=""}=e,{placeholder:s="Search"}=e,{submitOnSelect:l=!0}=e,{class:o=""}=e,{useSuggestionOnSubmit:f=!0}=e,p=0,g,C=!1,{id:A=void 0}=e,{onInput:V=()=>{}}=e,{onSubmit:U=()=>{}}=e,{getSuggestions:G=()=>Promise.resolve([])}=e;function Z(de){G(de).then(Me=>{i(4,t=Me),i(7,C=!0)})}const K=yd(()=>{Z(r),V(r)},CI);function q(){i(7,C=!1),f&&t.length>p&&i(0,r=t[p]),U(r),document.activeElement.blur()}function ie(){Z(r)}function oe(de){var Me;i(0,r=de),i(4,t=[de]),l?q():(V(de),(Me=g.querySelector("input"))==null||Me.focus())}function se(de){r=de,i(0,r)}const pe=de=>oe(de),Ie=de=>i(5,p=de),Ce=()=>i(5,p=0);function je(de){C=de,i(7,C)}function Ve(de){Dt[de?"unshift":"push"](()=>{g=de,i(6,g)})}return n.$$set=de=>{"value"in de&&i(0,r=de.value),"placeholder"in de&&i(1,s=de.placeholder),"submitOnSelect"in de&&i(12,l=de.submitOnSelect),"class"in de&&i(2,o=de.class),"useSuggestionOnSubmit"in de&&i(13,f=de.useSuggestionOnSubmit),"id"in de&&i(3,A=de.id),"onInput"in de&&i(14,V=de.onInput),"onSubmit"in de&&i(15,U=de.onSubmit),"getSuggestions"in de&&i(16,G=de.getSuggestions)},[r,s,o,A,t,p,g,C,K,q,ie,oe,l,f,V,U,G,se,pe,Ie,Ce,je,Ve]}class N0 extends lt{constructor(e){super(),ct(this,e,SI,kI,st,{value:0,placeholder:1,submitOnSelect:12,class:2,useSuggestionOnSubmit:13,id:3,onInput:14,onSubmit:15,getSuggestions:16})}}function TI(n){let e,i;return e=new K2({props:{class:"h-3.5 w-3.5"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function II(n){let e,i;return e=new vd({props:{class:"h-3.5 w-3.5"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function AI(n){let e,i,t,r;const s=[II,TI],l=[];function o(f,p){return f[5]?0:f[6]?1:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e!==g&&(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i||(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function EI(n){let e,i;return e=new uS({props:{class:Lt("flex h-4 w-4 items-center justify-center text-current"),$$slots:{default:[AI,({isChecked:t,isIndeterminate:r})=>({5:t,6:r}),({isChecked:t,isIndeterminate:r})=>(t?32:0)|(r?64:0)]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&224&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function PI(n){let e,i,t;const r=[{class:Lt("peer box-content h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[disabled=true]:cursor-not-allowed data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[disabled=true]:opacity-50",n[1])},n[2]];function s(o){n[3](o)}let l={$$slots:{default:[EI]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)l=re(l,r[o]);return n[0]!==void 0&&(l.checked=n[0]),e=new iS({props:l}),Dt.push(()=>Bi(e,"checked",s)),e.$on("click",n[4]),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),t=!0},p(o,[f]){const p=f&6?yt(r,[f&2&&{class:Lt("peer box-content h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[disabled=true]:cursor-not-allowed data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[disabled=true]:opacity-50",o[1])},f&4&&Ei(o[2])]):{};f&128&&(p.$$scope={dirty:f,ctx:o}),!i&&f&1&&(i=!0,p.checked=o[0],Fi(()=>i=!1)),e.$set(p)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function MI(n,e,i){const t=["class","checked"];let r=qe(e,t),{class:s=void 0}=e,{checked:l=!1}=e;function o(p){l=p,i(0,l)}function f(p){jt.call(this,n,p)}return n.$$set=p=>{e=re(re({},e),wt(p)),i(2,r=qe(e,t)),"class"in p&&i(1,s=p.class),"checked"in p&&i(0,l=p.checked)},[l,s,r,o,f]}class V0 extends lt{constructor(e){super(),ct(this,e,MI,PI,st,{class:1,checked:0})}}const fg=1,zI=.9,DI=.8,LI=.17,Kh=.1,Jh=.999,RI=.9999,OI=.99,FI=/[\\/_+.#"@[({&]/,BI=/[\\/_+.#"@[({&]/g,NI=/[\s-]/,j0=/[\s-]/g;function nd(n,e,i,t,r,s,l){if(s===e.length)return r===n.length?fg:OI;const o=`${r},${s}`;if(l[o]!==void 0)return l[o];const f=t.charAt(s);let p=i.indexOf(f,r),g=0,C,A,V,U;for(;p>=0;)C=nd(n,e,i,t,p+1,s+1,l),C>g&&(p===r?C*=fg:FI.test(n.charAt(p-1))?(C*=DI,V=n.slice(r,p-1).match(BI),V&&r>0&&(C*=Math.pow(Jh,V.length))):NI.test(n.charAt(p-1))?(C*=zI,U=n.slice(r,p-1).match(j0),U&&r>0&&(C*=Math.pow(Jh,U.length))):(C*=LI,r>0&&(C*=Math.pow(Jh,p-r))),n.charAt(p)!==e.charAt(s)&&(C*=RI)),(C<Kh&&i.charAt(p-1)===t.charAt(s+1)||t.charAt(s+1)===t.charAt(s)&&i.charAt(p-1)!==t.charAt(s))&&(A=nd(n,e,i,t,p+1,s+2,l),A*Kh>C&&(C=A*Kh)),C>g&&(g=C),p=i.indexOf(f,p+1);return l[o]=g,g}function hg(n){return n.toLowerCase().replace(j0," ")}function VI(n,e){return nd(n,e,hg(n),hg(e),0,0,{})}const jI=typeof document<"u";function BR(n){return n instanceof HTMLElement}function Sd(n){return n===void 0}function us(){return qv(10)}const Nc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*"};function UI(n,...e){const i={};for(const t of Object.keys(n))e.includes(t)||(i[t]=n[t]);return i}function U0(n){const e={};for(const i in n){const t=n[i];t!==void 0&&(e[i]=t)}return e}function qI(n){const e={};return Object.keys(n).forEach(i=>{const t=i,r=n[t];e[t]=cn(r)}),e}function ma(n,e){const i=ZI(n,(t,r)=>({stores:t,onUnsubscribe:r})).subscribe(({stores:t,onUnsubscribe:r})=>{const s=e(t);s&&r(s)});return Fo(i),i}function ZI(n,e){let i=[];const t=o=>{i.push(o)},r=()=>{i.forEach(o=>o()),i=[]},s=Cn(n,o=>(r(),e(o,t)));return Fo(r),{...s,subscribe:(...o)=>{const f=s.subscribe(...o);return()=>{f(),r()}}}}function GI(n){return Object.keys(n).reduce((e,i)=>n[i]===void 0?e:e+`${i}:${n[i]};`,"")}const HI={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function hf(n,e,i,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>n.addEventListener(s,i,t)),()=>{r.forEach(s=>n.removeEventListener(s,i,t))}}function q0(...n){return(...e)=>{for(const i of n)typeof i=="function"&&i(...e)}}const Z0="Command",G0="CommandState",H0="CommandGroup",WI="[data-cmdk-list-sizer]",Vc="[data-cmdk-group]",dg="[data-cmdk-group-items]",XI="[data-cmdk-group-heading]",W0="[data-cmdk-item]",Yh=`${W0}:not([aria-disabled="true"])`,cs="data-value",X0=(n,e)=>VI(n,e);function Td(){return Ir(Z0)}function vf(){return Ir(G0)}function KI(n){const e=us();return Tr(H0,{id:e,alwaysRender:Sd(n)?!1:n}),{id:e}}function JI(){const n=Ir(H0);if(n)return n}function YI(n){const e={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return cn(n?{...e,...U0(n)}:e)}const QI={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:X0,ids:{root:us(),list:us(),label:us(),input:us()}};function $I(n){const e={root:us(),list:us(),label:us(),input:us(),...n.ids},i={...QI,...U0(n)},t=n.state??YI({value:i.value}),r=cn(new Set),s=cn(new Map),l=cn(new Map),o=cn(null),f=qI(UI(i,"value","ids"));let p=Cs(r),g=Cs(s),C=Cs(l),A=Cs(f.shouldFilter),V=Cs(f.loop),U=Cs(f.label),G=Cs(f.filter);ma(f.shouldFilter,We=>{A=We}),ma(f.loop,We=>{V=We}),ma(f.filter,We=>{G=We}),ma(f.label,We=>{U=We}),ma(r,We=>{p=We}),ma(s,We=>{g=We}),ma(l,We=>{C=We});const Z={value:(We,Le)=>{Le!==C.get(We)&&(l.update(pt=>(pt.set(We,Le),pt)),t.update(pt=>(pt.filtered.items.set(We,se(Le,pt.search)),pt)))},item:(We,Le)=>(r.update(pt=>pt.add(We)),Le&&s.update(pt=>{var xt;return pt.has(Le)?(xt=pt.get(Le))==null||xt.add(We):pt.set(Le,new Set([We])),pt}),t.update(pt=>{const xt=q(pt,A);if(!xt.value){const At=oe();xt.value=At??""}return xt}),()=>{l.update(pt=>(pt.delete(We),pt)),r.update(pt=>(pt.delete(We),pt)),t.update(pt=>{pt.filtered.items.delete(We);const xt=Ce(),At=q(pt);return(xt==null?void 0:xt.getAttribute("id"))===We&&(At.value=oe()??""),pt})}),group:We=>(s.update(Le=>(Le.has(We)||Le.set(We,new Set),Le)),()=>{l.update(Le=>(Le.delete(We),Le)),s.update(Le=>(Le.delete(We),Le))}),filter:()=>A,label:U||n["aria-label"]||"",commandEl:o,ids:e,updateState:K};function K(We,Le,pt){t.update(xt=>{var At;return Object.is(xt[We],Le)||(xt[We]=Le,We==="search"?(xt=q(xt,A),xt=ie(xt,A),Ss().then(()=>t.update(li=>{var vt;return li.value=oe()??"",(vt=n.onValueChange)==null||vt.call(n,li.value),li}))):We==="value"&&((At=n.onValueChange)==null||At.call(n,xt.value),pt||Ss().then(()=>pe()))),xt})}function q(We,Le){const pt=Le??A;if(!We.search||!pt)return We.filtered.count=p.size,We;We.filtered.groups=new Set;let xt=0;for(const At of p){const di=C.get(At),Yt=se(di,We.search);We.filtered.items.set(At,Yt),Yt>0&&xt++}for(const[At,di]of g)for(const Yt of di){const li=We.filtered.items.get(Yt);li&&li>0&&We.filtered.groups.add(At)}return We.filtered.count=xt,We}function ie(We,Le){var vt;const pt=Le??A;if(!We.search||!pt)return We;const xt=We.filtered.items,At=[];for(const fi of We.filtered.groups){const ai=g.get(fi);if(!ai)continue;let Ot=0;for(const ft of ai){const xe=xt.get(ft);Sd(xe)||(Ot=Math.max(xe,Ot))}At.push([fi,Ot])}const di=document.getElementById(e.root);if(!di)return We;const Yt=di.querySelector(WI),li=Ie(di).sort((fi,ai)=>{const Ot=fi.getAttribute(cs)??"",ft=ai.getAttribute(cs)??"";return(xt.get(Ot)??0)-(xt.get(ft)??0)});for(const fi of li){const ai=fi.closest(dg),Ot=fi.closest(`${dg} > *`);if(ai)if(fi.parentElement===ai)ai.appendChild(fi);else{if(!Ot)continue;ai.appendChild(Ot)}else if(fi.parentElement===Yt)Yt==null||Yt.appendChild(fi);else{if(!Ot)continue;Yt==null||Yt.appendChild(Ot)}}At.sort((fi,ai)=>ai[1]-fi[1]);for(const fi of At){const ai=di.querySelector(`${Vc}[${cs}="${fi[0]}"]`);(vt=ai==null?void 0:ai.parentElement)==null||vt.appendChild(ai)}return We}function oe(){const We=Ie().find(pt=>!pt.ariaDisabled);if(!We)return;const Le=We.getAttribute(cs);if(Le)return Le}function se(We,Le){const pt=We==null?void 0:We.toLowerCase().trim(),xt=G;return xt?pt?xt(pt,Le):0:pt?X0(pt,Le):0}function pe(){var Le;const We=Ce();We&&(((Le=We.parentElement)==null?void 0:Le.firstChild)===We&&Ss().then(()=>{var pt,xt;return(xt=(pt=We.closest(Vc))==null?void 0:pt.querySelector(XI))==null?void 0:xt.scrollIntoView({block:"nearest"})}),Ss().then(()=>We.scrollIntoView({block:"nearest"})))}function Ie(We){const Le=We??document.getElementById(e.root);return Le?Array.from(Le.querySelectorAll(Yh)).filter(pt=>!!pt):[]}function Ce(We){const Le=document.getElementById(e.root);if(!Le)return;const pt=Le.querySelector(`${Yh}[aria-selected="true"]`);if(pt)return pt}function je(We){const Le=document.getElementById(e.root);if(!Le)return;const xt=Ie(Le)[We];xt&&K("value",xt.getAttribute(cs)??"")}function Ve(We){const Le=Ce(),pt=Ie(),xt=pt.findIndex(di=>di===Le);let At=pt[xt+We];V&&(xt+We<0?At=pt[pt.length-1]:xt+We===pt.length?At=pt[0]:At=pt[xt+We]),At&&K("value",At.getAttribute(cs)??"")}function de(We){const Le=Ce();let pt=Le==null?void 0:Le.closest(Vc),xt;for(;pt&&!xt;)pt=We>0?eA(pt,Vc):tA(pt,Vc),xt=pt==null?void 0:pt.querySelector(Yh);xt?K("value",xt.getAttribute(cs)??""):Ve(We)}function Me(){return je(Ie().length-1)}function Re(We){We.preventDefault(),We.metaKey?Me():We.altKey?de(1):Ve(1)}function Rt(We){We.preventDefault(),We.metaKey?je(0):We.altKey?de(-1):Ve(-1)}function ti(We){switch(We.key){case Nc.ARROW_DOWN:Re(We);break;case Nc.ARROW_UP:Rt(We);break;case Nc.HOME:We.preventDefault(),je(0);break;case Nc.END:We.preventDefault(),Me();break;case Nc.ENTER:{We.preventDefault();const Le=Ce();Le&&(Le==null||Le.click())}}}Tr(Z0,Z);const Jt={subscribe:t.subscribe,update:t.update,set:t.set,updateState:K};return Tr(G0,Jt),{state:Jt,handleRootKeydown:ti,commandEl:o,ids:e}}function eA(n,e){let i=n.nextElementSibling;for(;i;){if(i.matches(e))return i;i=i.nextElementSibling}}function tA(n,e){let i=n.previousElementSibling;for(;i;){if(i.matches(e))return i;i=i.previousElementSibling}}const iA=n=>n&4,nA=n=>({}),mg=n=>({...n[2]}),rA=n=>n&4,sA=n=>({}),pg=n=>({...n[2]});function oA(n){let e,i,t=(n[0]??"")+"",r,s,l,o,f,p=[n[6]],g={};for(let G=0;G<p.length;G+=1)g=re(g,p[G]);const C=n[18].default,A=Ke(C,n,n[17],mg);let V=[n[5],n[7]],U={};for(let G=0;G<V.length;G+=1)U=re(U,V[G]);return{c(){e=Ze("div"),i=Ze("label"),r=Ct(t),s=it(),A&&A.c(),this.h()},l(G){e=Ge(G,"DIV",{});var Z=$e(e);i=Ge(Z,"LABEL",{});var K=$e(i);r=St(K,t),K.forEach(F),s=nt(Z),A&&A.l(Z),Z.forEach(F),this.h()},h(){rt(i,g),rt(e,U)},m(G,Z){Q(G,e,Z),ut(e,i),ut(i,r),ut(e,s),A&&A.m(e,null),l=!0,o||(f=xi(n[4].call(null,e)),o=!0)},p(G,Z){(!l||Z&1)&&t!==(t=(G[0]??"")+"")&&dd(r,t,g.contenteditable),A&&A.p&&(!l||Z&131076)&&Je(A,C,G,G[17],iA(Z)||!l?Ye(G[17]):Qe(C,G[17],Z,nA),mg),rt(e,U=yt(V,[G[5],Z&128&&G[7]]))},i(G){l||(z(A,G),l=!0)},o(G){D(A,G),l=!1},d(G){G&&F(e),A&&A.d(G),o=!1,f()}}}function aA(n){let e;const i=n[18].default,t=Ke(i,n,n[17],pg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&131076)&&Je(t,i,r,r[17],rA(s)||!e?Ye(r[17]):Qe(i,r[17],s,sA),pg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function lA(n){let e,i,t,r;const s=[aA,oA],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function cA(n,e,i){let t;const r=["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{label:p=void 0}=e,{shouldFilter:g=!0}=e,{filter:C=void 0}=e,{value:A=void 0}=e,{onValueChange:V=void 0}=e,{loop:U=void 0}=e,{onKeydown:G=void 0}=e,{state:Z=void 0}=e,{ids:K=void 0}=e,{asChild:q=!1}=e;const{commandEl:ie,handleRootKeydown:oe,ids:se,state:pe}=$I({label:p,shouldFilter:g,filter:C,value:A,onValueChange:Re=>{Re!==A&&(i(8,A=Re),V==null||V(Re))},loop:U,state:Z,ids:K});ei(n,pe,Re=>i(16,l=Re));function Ie(Re){Re&&Re!==l.value&&_a(pe,l.value=Re,l)}function Ce(Re){return ie.set(Re),{destroy:q0(hf(Re,"keydown",de))}}const je={role:"application",id:se.root,"data-cmdk-root":""},Ve={"data-cmdk-label":"",for:se.input,id:se.label,style:GI(HI)};function de(Re){G==null||G(Re),!Re.defaultPrevented&&oe(Re)}const Me={action:Ce,attrs:je};return n.$$set=Re=>{e=re(re({},e),wt(Re)),i(7,s=qe(e,r)),"label"in Re&&i(0,p=Re.label),"shouldFilter"in Re&&i(9,g=Re.shouldFilter),"filter"in Re&&i(10,C=Re.filter),"value"in Re&&i(8,A=Re.value),"onValueChange"in Re&&i(11,V=Re.onValueChange),"loop"in Re&&i(12,U=Re.loop),"onKeydown"in Re&&i(13,G=Re.onKeydown),"state"in Re&&i(14,Z=Re.state),"ids"in Re&&i(15,K=Re.ids),"asChild"in Re&&i(1,q=Re.asChild),"$$scope"in Re&&i(17,f=Re.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&Ie(A),n.$$.dirty&65536&&i(2,t={root:Me,label:{attrs:Ve},stateStore:pe,state:l})},[p,q,t,pe,Ce,je,Ve,s,A,g,C,V,U,G,Z,K,l,f,o]}let uA=class extends lt{constructor(e){super(),ct(this,e,cA,lA,st,{label:0,shouldFilter:9,filter:10,value:8,onValueChange:11,loop:12,onKeydown:13,state:14,ids:15,asChild:1})}};function fA(n){return Object.keys(n).reduce((e,i)=>n[i]===void 0?e:e+`${i}:${n[i]};`,"")}fA({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function _g(n){function e(i){return i(n),()=>{}}return{subscribe:e}}const sf=n=>new Proxy(n,{get(e,i,t){return Reflect.get(e,i,t)},ownKeys(e){return Reflect.ownKeys(e).filter(i=>i!=="action")}}),gg=n=>typeof n=="function";hA("empty");function hA(n,e){const{stores:i,action:t,returned:r}={},s=(()=>{if(i&&r)return Cn(i,o=>{const f=r(o);if(gg(f)){const p=(...g)=>sf({...f(...g),[`data-melt-${n}`]:"",action:t??gl});return p.action=t??gl,p}return sf({...f,[`data-melt-${n}`]:"",action:t??gl})});{const o=r,f=o==null?void 0:o();if(gg(f)){const p=(...g)=>sf({...f(...g),[`data-melt-${n}`]:"",action:t??gl});return p.action=t??gl,_g(p)}return _g(sf({...f,[`data-melt-${n}`]:"",action:t??gl}))}})(),l=t??(()=>{});return l.subscribe=s.subscribe,l}function gl(){}function K0(n,e,i,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>n.addEventListener(s,i,t)),()=>{r.forEach(s=>n.removeEventListener(s,i,t))}}function dA(n,...e){const i={};for(const t of Object.keys(n))e.includes(t)||(i[t]=n[t]);return i}const mA={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};zo(void 0,n=>{function e(t){n(t),n(void 0)}return K0(document,"pointerup",e,{passive:!1,capture:!0})});zo(void 0,n=>{function e(t){t&&t.key===mA.ESCAPE&&n(t),n(void 0)}return K0(document,"keydown",e,{passive:!1})});zo(!1),zo(!1),zo(void 0);const pA={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...dA(pA,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const _A=n=>({}),yg=n=>({attrs:n[4]});function bg(n){let e,i,t,r;const s=[yA,gA],l=[];function o(f,p){return f[0]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function gA(n){let e,i;const t=n[8].default,r=Ke(t,n,n[7],null);let s=[n[4],n[5]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("div"),r&&r.c(),this.h()},l(o){e=Ge(o,"DIV",{});var f=$e(e);r&&r.l(f),f.forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),r&&r.m(e,null),i=!0},p(o,f){r&&r.p&&(!i||f&128)&&Je(r,t,o,o[7],i?Qe(t,o[7],f,null):Ye(o[7]),null),rt(e,l=yt(s,[o[4],f&32&&o[5]]))},i(o){i||(z(r,o),i=!0)},o(o){D(r,o),i=!1},d(o){o&&F(e),r&&r.d(o)}}}function yA(n){let e;const i=n[8].default,t=Ke(i,n,n[7],yg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,_A):Ye(r[7]),yg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function bA(n){let e,i,t=!n[1]&&n[2]&&bg(n);return{c(){t&&t.c(),e=He()},l(r){t&&t.l(r),e=He()},m(r,s){t&&t.m(r,s),Q(r,e,s),i=!0},p(r,[s]){!r[1]&&r[2]?t?(t.p(r,s),s&6&&z(t,1)):(t=bg(r),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(r){i||(z(t),i=!0)},o(r){D(t),i=!1},d(r){r&&F(e),t&&t.d(r)}}}function vA(n,e,i){let t;const r=["asChild"];let s=qe(e,r),l,{$$slots:o={},$$scope:f}=e,{asChild:p=!1}=e,g=!0;kl(()=>{i(1,g=!1)});const C=vf();ei(n,C,V=>i(6,l=V));const A={"data-cmdk-empty":"",role:"presentation"};return n.$$set=V=>{e=re(re({},e),wt(V)),i(5,s=qe(e,r)),"asChild"in V&&i(0,p=V.asChild),"$$scope"in V&&i(7,f=V.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&i(2,t=l.filtered.count===0)},[p,g,t,C,A,s,l,f,o]}class wA extends lt{constructor(e){super(),ct(this,e,vA,bA,st,{asChild:0})}}const xA=n=>({container:n&32,group:n&16}),vg=n=>({container:n[5],group:n[4],heading:{attrs:n[8]}}),kA=n=>({container:n&32,group:n&16}),wg=n=>({container:n[5],group:n[4],heading:{attrs:n[8]}});function CA(n){let e,i,t,r,s,l,o=n[0]&&xg(n);const f=n[14].default,p=Ke(f,n,n[13],vg);let g=[n[2]],C={};for(let U=0;U<g.length;U+=1)C=re(C,g[U]);let A=[n[3],n[9]],V={};for(let U=0;U<A.length;U+=1)V=re(V,A[U]);return{c(){e=Ze("div"),o&&o.c(),i=it(),t=Ze("div"),p&&p.c(),this.h()},l(U){e=Ge(U,"DIV",{});var G=$e(e);o&&o.l(G),i=nt(G),t=Ge(G,"DIV",{});var Z=$e(t);p&&p.l(Z),Z.forEach(F),G.forEach(F),this.h()},h(){rt(t,C),rt(e,V)},m(U,G){Q(U,e,G),o&&o.m(e,null),ut(e,i),ut(e,t),p&&p.m(t,null),r=!0,s||(l=xi(n[7].call(null,e)),s=!0)},p(U,G){U[0]?o?o.p(U,G):(o=xg(U),o.c(),o.m(e,i)):o&&(o.d(1),o=null),p&&p.p&&(!r||G&8240)&&Je(p,f,U,U[13],r?Qe(f,U[13],G,xA):Ye(U[13]),vg),rt(t,C=yt(g,[G&4&&U[2]])),rt(e,V=yt(A,[G&8&&U[3],G&512&&U[9]]))},i(U){r||(z(p,U),r=!0)},o(U){D(p,U),r=!1},d(U){U&&F(e),o&&o.d(),p&&p.d(U),s=!1,l()}}}function SA(n){let e;const i=n[14].default,t=Ke(i,n,n[13],wg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&Je(t,i,r,r[13],e?Qe(i,r[13],s,kA):Ye(r[13]),wg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function xg(n){let e,i,t=[n[8]],r={};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return{c(){e=Ze("div"),i=Ct(n[0]),this.h()},l(s){e=Ge(s,"DIV",{});var l=$e(e);i=St(l,n[0]),l.forEach(F),this.h()},h(){rt(e,r)},m(s,l){Q(s,e,l),ut(e,i)},p(s,l){l&1&&dd(i,s[0],r.contenteditable)},d(s){s&&F(e)}}}function TA(n){let e,i,t,r;const s=[SA,CA],l=[];function o(f,p){return f[1]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function IA(n,e,i){let t,r,s,l;const o=["heading","value","alwaysRender","asChild"];let f=qe(e,o),p,{$$slots:g={},$$scope:C}=e,{heading:A=void 0}=e,{value:V=""}=e,{alwaysRender:U=!1}=e,{asChild:G=!1}=e;const{id:Z}=KI(U),K=Td(),q=vf(),ie=us(),oe=Cn(q,Ie=>U||K.filter()===!1||!Ie.search?!0:Ie.filtered.groups.has(Z));ei(n,oe,Ie=>i(12,p=Ie)),kl(()=>K.group(Z));function se(Ie){if(V){K.value(Z,V),Ie.setAttribute(cs,V);return}A?i(10,V=A.trim().toLowerCase()):Ie.textContent&&i(10,V=Ie.textContent.trim().toLowerCase()),K.value(Z,V),Ie.setAttribute(cs,V)}const pe={"data-cmdk-group-heading":"","aria-hidden":!0,id:ie};return n.$$set=Ie=>{e=re(re({},e),wt(Ie)),i(9,f=qe(e,o)),"heading"in Ie&&i(0,A=Ie.heading),"value"in Ie&&i(10,V=Ie.value),"alwaysRender"in Ie&&i(11,U=Ie.alwaysRender),"asChild"in Ie&&i(1,G=Ie.asChild),"$$scope"in Ie&&i(13,C=Ie.$$scope)},n.$$.update=()=>{n.$$.dirty&5120&&i(3,t={"data-cmdk-group":"",role:"presentation",hidden:p?void 0:!0,"data-value":V}),n.$$.dirty&1&&i(2,r={"data-cmdk-group-items":"",role:"group","aria-labelledby":A?ie:void 0}),n.$$.dirty&8&&i(5,s={action:se,attrs:t}),n.$$.dirty&4&&i(4,l={attrs:r})},[A,G,r,t,l,s,oe,se,pe,f,V,U,p,C,g]}class AA extends lt{constructor(e){super(),ct(this,e,IA,TA,st,{heading:0,value:10,alwaysRender:11,asChild:1})}}function EA(n){return new Promise(e=>setTimeout(e,n))}const PA=n=>({attrs:n&8}),kg=n=>({action:n[5],attrs:n[3]});function MA(n){let e,i,t,r=[n[3],n[6]],s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return{c(){e=Ze("input"),this.h()},l(l){e=Ge(l,"INPUT",{}),this.h()},h(){rt(e,s)},m(l,o){Q(l,e,o),e.autofocus&&e.focus(),n[16](e),vl(e,n[0]),i||(t=[_t(e,"input",n[17]),xi(n[5].call(null,e)),_t(e,"keydown",n[11]),_t(e,"input",n[12]),_t(e,"focus",n[13]),_t(e,"blur",n[14]),_t(e,"change",n[15])],i=!0)},p(l,o){rt(e,s=yt(r,[o&8&&l[3],o&64&&l[6]])),o&1&&e.value!==l[0]&&vl(e,l[0])},i:Ci,o:Ci,d(l){l&&F(e),n[16](null),i=!1,Gi(t)}}}function zA(n){let e;const i=n[10].default,t=Ke(i,n,n[9],kg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&520)&&Je(t,i,r,r[9],e?Qe(i,r[9],s,PA):Ye(r[9]),kg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function DA(n){let e,i,t,r;const s=[zA,MA],l=[];function o(f,p){return f[2]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function LA(n,e,i){const t=["autofocus","value","asChild","el"];let r=qe(e,t),s,{$$slots:l={},$$scope:o}=e;const{ids:f,commandEl:p}=Td(),g=vf(),C=Cn(g,Me=>Me.search),A=Cn(g,Me=>Me.value);let{autofocus:V=void 0}=e,{value:U=Cs(C)}=e,{asChild:G=!1}=e,{el:Z=void 0}=e;const K=Cn([A,p],([Me,Re])=>{if(!jI)return;const Rt=Re==null?void 0:Re.querySelector(`${W0}[${cs}="${Me}"]`);return Rt==null?void 0:Rt.getAttribute("id")});ei(n,K,Me=>i(8,s=Me));function q(Me){g.updateState("search",Me)}function ie(Me){if(V&&EA(10).then(()=>Me.focus()),G)return{destroy:hf(Me,"change",Rt=>{const ti=Rt.currentTarget;g.updateState("search",ti.value)})}}let oe;function se(Me){jt.call(this,n,Me)}function pe(Me){jt.call(this,n,Me)}function Ie(Me){jt.call(this,n,Me)}function Ce(Me){jt.call(this,n,Me)}function je(Me){jt.call(this,n,Me)}function Ve(Me){Dt[Me?"unshift":"push"](()=>{Z=Me,i(1,Z)})}function de(){U=this.value,i(0,U)}return n.$$set=Me=>{e=re(re({},e),wt(Me)),i(6,r=qe(e,t)),"autofocus"in Me&&i(7,V=Me.autofocus),"value"in Me&&i(0,U=Me.value),"asChild"in Me&&i(2,G=Me.asChild),"el"in Me&&i(1,Z=Me.el),"$$scope"in Me&&i(9,o=Me.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&q(U),n.$$.dirty&256&&i(3,oe={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.list,"aria-labelledby":f.label,"aria-activedescendant":s??void 0,id:f.input})},[U,Z,G,oe,K,ie,r,V,s,o,l,se,pe,Ie,Ce,je,Ve,de]}class RA extends lt{constructor(e){super(),ct(this,e,LA,DA,st,{autofocus:7,value:0,asChild:2,el:1})}}const OA=n=>({attrs:n&4}),Cg=n=>({action:n[6],attrs:n[2]}),FA=n=>({attrs:n&4}),Sg=n=>({action:n[6],attrs:n[2]});function Tg(n){let e,i,t,r;const s=[NA,BA],l=[];function o(f,p){return f[0]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function BA(n){let e,i,t,r;const s=n[15].default,l=Ke(s,n,n[14],Cg);let o=[n[2],n[7]],f={};for(let p=0;p<o.length;p+=1)f=re(f,o[p]);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(p){e=Ge(p,"DIV",{});var g=$e(e);l&&l.l(g),g.forEach(F),this.h()},h(){rt(e,f)},m(p,g){Q(p,e,g),l&&l.m(e,null),i=!0,t||(r=xi(n[6].call(null,e)),t=!0)},p(p,g){l&&l.p&&(!i||g&16388)&&Je(l,s,p,p[14],i?Qe(s,p[14],g,OA):Ye(p[14]),Cg),rt(e,f=yt(o,[g&4&&p[2],g&128&&p[7]]))},i(p){i||(z(l,p),i=!0)},o(p){D(l,p),i=!1},d(p){p&&F(e),l&&l.d(p),t=!1,r()}}}function NA(n){let e;const i=n[15].default,t=Ke(i,n,n[14],Sg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&Je(t,i,r,r[14],e?Qe(i,r[14],s,FA):Ye(r[14]),Sg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function VA(n){let e,i,t=(n[3]||n[1])&&Tg(n);return{c(){t&&t.c(),e=He()},l(r){t&&t.l(r),e=He()},m(r,s){t&&t.m(r,s),Q(r,e,s),i=!0},p(r,[s]){r[3]||r[1]?t?(t.p(r,s),s&10&&z(t,1)):(t=Tg(r),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(r){i||(z(t),i=!0)},o(r){D(t),i=!1},d(r){r&&F(e),t&&t.d(r)}}}function jA(n,e,i){let t;const r=["disabled","value","onSelect","alwaysRender","asChild","id"];let s=qe(e,r),l,o,{$$slots:f={},$$scope:p}=e,{disabled:g=!1}=e,{value:C=""}=e,{onSelect:A=void 0}=e,{alwaysRender:V=!1}=e,{asChild:U=!1}=e,{id:G=us()}=e;const Z=JI(),K=Td(),q=vf(),ie=V??(Z==null?void 0:Z.alwaysRender),oe=Cn(q,Ve=>{if(ie||K.filter()===!1||!Ve.search)return!0;const de=Ve.filtered.items.get(G);return Sd(de)?!1:de>0});ei(n,oe,Ve=>i(3,o=Ve));let se=!0;kl(()=>(i(1,se=!1),K.item(G,Z==null?void 0:Z.id)));const pe=Cn(q,Ve=>Ve.value===C);ei(n,pe,Ve=>i(13,l=Ve));function Ie(Ve){!C&&Ve.textContent&&i(8,C=Ve.textContent.trim().toLowerCase()),K.value(G,C),Ve.setAttribute(cs,C);const de=q0(hf(Ve,"pointermove",()=>{g||je()}),hf(Ve,"click",()=>{g||Ce()}));return{destroy(){de()}}}function Ce(){je(),A==null||A(C)}function je(){q.updateState("value",C,!0)}return n.$$set=Ve=>{e=re(re({},e),wt(Ve)),i(7,s=qe(e,r)),"disabled"in Ve&&i(9,g=Ve.disabled),"value"in Ve&&i(8,C=Ve.value),"onSelect"in Ve&&i(10,A=Ve.onSelect),"alwaysRender"in Ve&&i(11,V=Ve.alwaysRender),"asChild"in Ve&&i(0,U=Ve.asChild),"id"in Ve&&i(12,G=Ve.id),"$$scope"in Ve&&i(14,p=Ve.$$scope)},n.$$.update=()=>{n.$$.dirty&13056&&i(2,t={"aria-disabled":g?!0:void 0,"aria-selected":l?!0:void 0,"data-disabled":g?!0:void 0,"data-selected":l?!0:void 0,"data-cmdk-item":"","data-value":C,role:"option",id:G})},[U,se,t,o,oe,pe,Ie,s,C,g,A,V,G,l,p,f]}class UA extends lt{constructor(e){super(),ct(this,e,jA,VA,st,{disabled:9,value:8,onSelect:10,alwaysRender:11,asChild:0,id:12})}}function qA(n){let e;const i=n[3].default,t=Ke(i,n,n[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Je(t,i,r,r[5],e?Qe(i,r[5],s,null):Ye(r[5]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function ZA(n){let e,i,t;const r=[{class:Lt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n[1])},n[2]];function s(o){n[4](o)}let l={$$slots:{default:[qA]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)l=re(l,r[o]);return n[0]!==void 0&&(l.value=n[0]),e=new uA({props:l}),Dt.push(()=>Bi(e,"value",s)),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),t=!0},p(o,[f]){const p=f&6?yt(r,[f&2&&{class:Lt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},f&4&&Ei(o[2])]):{};f&32&&(p.$$scope={dirty:f,ctx:o}),!i&&f&1&&(i=!0,p.value=o[0],Fi(()=>i=!1)),e.$set(p)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function GA(n,e,i){const t=["value","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{value:o=void 0}=e,{class:f=void 0}=e;function p(g){o=g,i(0,o)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(2,r=qe(e,t)),"value"in g&&i(0,o=g.value),"class"in g&&i(1,f=g.class),"$$scope"in g&&i(5,l=g.$$scope)},[o,f,r,s,p,l]}class HA extends lt{constructor(e){super(),ct(this,e,GA,ZA,st,{value:0,class:1})}}function WA(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function XA(n){let e,i;const t=[{class:Lt("py-6 text-center text-sm",n[0])},n[1]];let r={$$slots:{default:[WA]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new wA({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("py-6 text-center text-sm",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function KA(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class JA extends lt{constructor(e){super(),ct(this,e,KA,XA,st,{class:0})}}function YA(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function QA(n){let e,i;const t=[{class:Lt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[YA]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new AA({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function $A(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class eE extends lt{constructor(e){super(),ct(this,e,$A,QA,st,{class:0})}}const tE=n=>({action:n&32,attrs:n&64}),Ig=n=>({action:n[5],attrs:n[6]});function iE(n){let e;const i=n[3].default,t=Ke(i,n,n[4],Ig);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&112)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,tE):Ye(r[4]),Ig)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function nE(n){let e,i;const t=[{asChild:n[0]},{class:Lt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n[1])},n[2]];let r={$$slots:{default:[iE,({action:s,attrs:l})=>({5:s,6:l}),({action:s,attrs:l})=>(s?32:0)|(l?64:0)]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new UA({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&7?yt(t,[l&1&&{asChild:s[0]},l&2&&{class:Lt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1])},l&4&&Ei(s[2])]):{};l&112&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function rE(n,e,i){const t=["asChild","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{asChild:o=!1}=e,{class:f=void 0}=e;return n.$$set=p=>{e=re(re({},e),wt(p)),i(2,r=qe(e,t)),"asChild"in p&&i(0,o=p.asChild),"class"in p&&i(1,f=p.class),"$$scope"in p&&i(4,l=p.$$scope)},[o,f,r,s,l]}class sE extends lt{constructor(e){super(),ct(this,e,rE,nE,st,{asChild:0,class:1})}}function oE(n){let e,i,t,r,s,l;i=new z0({props:{class:"mr-2 h-5 w-5 shrink-0 opacity-50"}});const o=[{class:Lt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n[1])},n[2]];function f(g){n[3](g)}let p={};for(let g=0;g<o.length;g+=1)p=re(p,o[g]);return n[0]!==void 0&&(p.value=n[0]),r=new RA({props:p}),Dt.push(()=>Bi(r,"value",f)),{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),ce(r.$$.fragment),this.h()},l(g){e=Ge(g,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var C=$e(e);ue(i.$$.fragment,C),t=nt(C),ue(r.$$.fragment,C),C.forEach(F),this.h()},h(){gt(e,"class","flex items-center border-b px-2"),gt(e,"data-cmdk-input-wrapper","")},m(g,C){Q(g,e,C),fe(i,e,null),ut(e,t),fe(r,e,null),l=!0},p(g,[C]){const A=C&6?yt(o,[C&2&&{class:Lt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",g[1])},C&4&&Ei(g[2])]):{};!s&&C&1&&(s=!0,A.value=g[0],Fi(()=>s=!1)),r.$set(A)},i(g){l||(z(i.$$.fragment,g),z(r.$$.fragment,g),l=!0)},o(g){D(i.$$.fragment,g),D(r.$$.fragment,g),l=!1},d(g){g&&F(e),he(i),he(r)}}}function aE(n,e,i){const t=["value","class"];let r=qe(e,t),{value:s=""}=e,{class:l=void 0}=e;function o(f){s=f,i(0,s)}return n.$$set=f=>{e=re(re({},e),wt(f)),i(2,r=qe(e,t)),"value"in f&&i(0,s=f.value),"class"in f&&i(1,l=f.class)},[s,l,r,o]}class lE extends lt{constructor(e){super(),ct(this,e,aE,oE,st,{value:0,class:1})}}const cE=n=>({}),Ag=n=>({}),uE=n=>({}),Eg=n=>({}),fE=n=>({}),Pg=n=>({}),hE=n=>({}),Mg=n=>({});function dE(n){let e,i;return e=new M0({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function mE(n){let e,i;return e=new M0({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function pE(n){let e;const i=n[8].icon,t=Ke(i,n,n[7],Eg),r=t||mE();return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t&&t.p&&(!e||l&128)&&Je(t,i,s,s[7],e?Qe(i,s[7],l,uE):Ye(s[7]),Eg)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function zg(n){let e,i;const t=n[8].default,r=Ke(t,n,n[7],null);return{c(){e=Ze("span"),r&&r.c(),this.h()},l(s){e=Ge(s,"SPAN",{class:!0});var l=$e(e);r&&r.l(l),l.forEach(F),this.h()},h(){gt(e,"class","pr-2 group-hover/chip:hidden")},m(s,l){Q(s,e,l),r&&r.m(e,null),i=!0},p(s,l){r&&r.p&&(!i||l&128)&&Je(r,t,s,s[7],i?Qe(t,s[7],l,null):Ye(s[7]),null)},i(s){i||(z(r,s),i=!0)},o(s){D(r,s),i=!1},d(s){s&&F(e),r&&r.d(s)}}}function Dg(n){let e,i;const t=n[8].hover,r=Ke(t,n,n[7],Ag),s=r||_E(n);return{c(){e=Ze("span"),s&&s.c(),this.h()},l(l){e=Ge(l,"SPAN",{class:!0});var o=$e(e);s&&s.l(o),o.forEach(F),this.h()},h(){gt(e,"class","hidden pr-2 group-hover/chip:inline-block")},m(l,o){Q(l,e,o),s&&s.m(e,null),i=!0},p(l,o){r?r.p&&(!i||o&128)&&Je(r,t,l,l[7],i?Qe(t,l[7],o,cE):Ye(l[7]),Ag):s&&s.p&&(!i||o&128)&&s.p(l,i?o:-1)},i(l){i||(z(s,l),i=!0)},o(l){D(s,l),i=!1},d(l){l&&F(e),s&&s.d(l)}}}function _E(n){let e;const i=n[8].default,t=Ke(i,n,n[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,null):Ye(r[7]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function gE(n){let e,i,t,r,s,l,o,f,p,g;const C=n[8].icon,A=Ke(C,n,n[7],Mg),V=A||dE(),U=n[8].hover_icon,G=Ke(U,n,n[7],Pg),Z=G||pE(n);let K=n[6].default&&zg(n),q=(n[6].default||n[6].hover)&&Dg(n),ie=[{class:p=Lt(Lg({variant:n[2]?"none":n[0],size:n[1],className:n[3]}))},{style:n[4]},n[5]],oe={};for(let se=0;se<ie.length;se+=1)oe=re(oe,ie[se]);return{c(){e=Ze("div"),i=Ze("span"),V&&V.c(),r=it(),s=Ze("span"),Z&&Z.c(),o=it(),K&&K.c(),f=it(),q&&q.c(),this.h()},l(se){e=Ge(se,"DIV",{class:!0,style:!0});var pe=$e(e);i=Ge(pe,"SPAN",{class:!0});var Ie=$e(i);V&&V.l(Ie),Ie.forEach(F),r=nt(pe),s=Ge(pe,"SPAN",{class:!0});var Ce=$e(s);Z&&Z.l(Ce),Ce.forEach(F),o=nt(pe),K&&K.l(pe),f=nt(pe),q&&q.l(pe),pe.forEach(F),this.h()},h(){gt(i,"class",t="group-hover/chip:hidden "+(n[6].default&&"pl-2")+" "+(n[6].hover&&"group-hover/chip:pl-2")+" svelte-gwmbn7"),gt(s,"class",l="hidden group-hover/chip:inline-block "+(n[6].default&&"pl-2")+" "+(n[6].hover&&"group-hover/chip:pl-2")+" svelte-gwmbn7"),rt(e,oe),ks(e,"color",n[2]),ks(e,"outline",n[2]&&n[0]==="outline"),ks(e,"solid",n[2]&&n[0]!=="outline"),ks(e,"svelte-gwmbn7",!0)},m(se,pe){Q(se,e,pe),ut(e,i),V&&V.m(i,null),ut(e,r),ut(e,s),Z&&Z.m(s,null),ut(e,o),K&&K.m(e,null),ut(e,f),q&&q.m(e,null),g=!0},p(se,[pe]){A&&A.p&&(!g||pe&128)&&Je(A,C,se,se[7],g?Qe(C,se[7],pe,hE):Ye(se[7]),Mg),(!g||pe&64&&t!==(t="group-hover/chip:hidden "+(se[6].default&&"pl-2")+" "+(se[6].hover&&"group-hover/chip:pl-2")+" svelte-gwmbn7"))&&gt(i,"class",t),G?G.p&&(!g||pe&128)&&Je(G,U,se,se[7],g?Qe(U,se[7],pe,fE):Ye(se[7]),Pg):Z&&Z.p&&(!g||pe&128)&&Z.p(se,g?pe:-1),(!g||pe&64&&l!==(l="hidden group-hover/chip:inline-block "+(se[6].default&&"pl-2")+" "+(se[6].hover&&"group-hover/chip:pl-2")+" svelte-gwmbn7"))&&gt(s,"class",l),se[6].default?K?(K.p(se,pe),pe&64&&z(K,1)):(K=zg(se),K.c(),z(K,1),K.m(e,f)):K&&(Tt(),D(K,1,1,()=>{K=null}),It()),se[6].default||se[6].hover?q?(q.p(se,pe),pe&64&&z(q,1)):(q=Dg(se),q.c(),z(q,1),q.m(e,null)):q&&(Tt(),D(q,1,1,()=>{q=null}),It()),rt(e,oe=yt(ie,[(!g||pe&15&&p!==(p=Lt(Lg({variant:se[2]?"none":se[0],size:se[1],className:se[3]}))))&&{class:p},(!g||pe&16)&&{style:se[4]},pe&32&&se[5]])),ks(e,"color",se[2]),ks(e,"outline",se[2]&&se[0]==="outline"),ks(e,"solid",se[2]&&se[0]!=="outline"),ks(e,"svelte-gwmbn7",!0)},i(se){g||(z(V,se),z(Z,se),z(K),z(q),g=!0)},o(se){D(V,se),D(Z,se),D(K),D(q),g=!1},d(se){se&&F(e),V&&V.d(se),Z&&Z.d(se),K&&K.d(),q&&q.d()}}}function yE(n,e,i){const t=["variant","size","color","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e;const o=md(s);let{variant:f="default"}=e,{size:p="md"}=e,{color:g=void 0}=e,{class:C=""}=e,A="";return n.$$set=V=>{e=re(re({},e),wt(V)),i(5,r=qe(e,t)),"variant"in V&&i(0,f=V.variant),"size"in V&&i(1,p=V.size),"color"in V&&i(2,g=V.color),"class"in V&&i(3,C=V.class),"$$scope"in V&&i(7,l=V.$$scope)},n.$$.update=()=>{if(n.$$.dirty&4&&g){const V=g.hex(),U=g.isDark()?"hsl(var(--primary-foreground) / 1)":"hsl(var(--primary) / 1)",G=g.darken(.2).hex();i(4,A=`--chip-color: ${V}; --chip-text-color: ${U}; --chip-darkened-color: ${G};`)}},[f,p,g,C,A,r,o,l,s]}class wf extends lt{constructor(e){super(),ct(this,e,yE,gE,st,{variant:0,size:1,color:2,class:3})}}const Lg=C0({base:"inline-flex h-fit w-max flex-row items-center justify-center gap-2 rounded-full outline-none outline-offset-0 transition-all",variants:{variant:{none:"",default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:outline-primary/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/90 hover:outline-secondary/90",muted:"bg-muted text-muted-foreground hover:bg-muted/90 hover:outline-muted-foreground/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:outline-destructive/90",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{xs:"h-5 min-w-5 p-0.5 text-sm",sm:"h-6 min-w-6 p-0.5",md:"h-8 min-w-8 p-1 text-lg",lg:"h-10 min-w-10 p-2 text-xl",xl:"h-12 min-w-12 p-3 text-2xl"}},defaultVariants:{variant:"default",size:"md"}});function bE(n){let e;const i=n[3].default,t=Ke(i,n,n[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,null):Ye(r[4]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function vE(n){let e,i;const t=[{delayMs:n[1]},{class:Lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n[0])},n[2]];let r={$$slots:{default:[bE]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new tk({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&7?yt(t,[l&2&&{delayMs:s[1]},l&1&&{class:Lt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s[0])},l&4&&Ei(s[2])]):{};l&16&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function wE(n,e,i){const t=["class","delayMs"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{delayMs:f=void 0}=e;return n.$$set=p=>{e=re(re({},e),wt(p)),i(2,r=qe(e,t)),"class"in p&&i(0,o=p.class),"delayMs"in p&&i(1,f=p.delayMs),"$$scope"in p&&i(4,l=p.$$scope)},[o,f,r,s,l]}class xE extends lt{constructor(e){super(),ct(this,e,wE,vE,st,{class:0,delayMs:1})}}function kE(n){let e,i;const t=[{src:n[1]},{alt:n[2]},{class:Lt("aspect-square h-full w-full",n[0])},n[3]];let r={};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new ak({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&15?yt(t,[l&2&&{src:s[1]},l&4&&{alt:s[2]},l&1&&{class:Lt("aspect-square h-full w-full",s[0])},l&8&&Ei(s[3])]):{};e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function CE(n,e,i){const t=["class","src","alt"];let r=qe(e,t),{class:s=void 0}=e,{src:l=void 0}=e,{alt:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(3,r=qe(e,t)),"class"in f&&i(0,s=f.class),"src"in f&&i(1,l=f.src),"alt"in f&&i(2,o=f.alt)},[s,l,o,r]}class SE extends lt{constructor(e){super(),ct(this,e,CE,kE,st,{class:0,src:1,alt:2})}}function TE(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function IE(n){let e,i;const t=[{class:Lt("flex h-full w-full items-center justify-center rounded-full bg-muted",n[0])},n[1]];let r={$$slots:{default:[TE]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new mk({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("flex h-full w-full items-center justify-center rounded-full bg-muted",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function AE(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class EE extends lt{constructor(e){super(),ct(this,e,AE,IE,st,{class:0})}}const J0=/^[a-z0-9]+(-[a-z0-9]+)*$/,xf=(n,e,i,t="")=>{const r=n.split(":");if(n.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;t=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const o=r.pop(),f=r.pop(),p={provider:r.length>0?r[0]:t,prefix:f,name:o};return e&&!lf(p)?null:p}const s=r[0],l=s.split("-");if(l.length>1){const o={provider:t,prefix:l.shift(),name:l.join("-")};return e&&!lf(o)?null:o}if(i&&t===""){const o={provider:t,prefix:"",name:s};return e&&!lf(o,i)?null:o}return null},lf=(n,e)=>n?!!((e&&n.prefix===""||n.prefix)&&n.name):!1,Y0=Object.freeze({left:0,top:0,width:16,height:16}),df=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),kf=Object.freeze({...Y0,...df}),rd=Object.freeze({...kf,body:"",hidden:!1});function PE(n,e){const i={};!n.hFlip!=!e.hFlip&&(i.hFlip=!0),!n.vFlip!=!e.vFlip&&(i.vFlip=!0);const t=((n.rotate||0)+(e.rotate||0))%4;return t&&(i.rotate=t),i}function Rg(n,e){const i=PE(n,e);for(const t in rd)t in df?t in n&&!(t in i)&&(i[t]=df[t]):t in e?i[t]=e[t]:t in n&&(i[t]=n[t]);return i}function ME(n,e){const i=n.icons,t=n.aliases||Object.create(null),r=Object.create(null);function s(l){if(i[l])return r[l]=[];if(!(l in r)){r[l]=null;const o=t[l]&&t[l].parent,f=o&&s(o);f&&(r[l]=[o].concat(f))}return r[l]}return Object.keys(i).concat(Object.keys(t)).forEach(s),r}function zE(n,e,i){const t=n.icons,r=n.aliases||Object.create(null);let s={};function l(o){s=Rg(t[o]||r[o],s)}return l(e),i.forEach(l),Rg(n,s)}function Q0(n,e){const i=[];if(typeof n!="object"||typeof n.icons!="object")return i;n.not_found instanceof Array&&n.not_found.forEach(r=>{e(r,null),i.push(r)});const t=ME(n);for(const r in t){const s=t[r];s&&(e(r,zE(n,r,s)),i.push(r))}return i}const DE={provider:"",aliases:{},not_found:{},...Y0};function Qh(n,e){for(const i in e)if(i in n&&typeof n[i]!=typeof e[i])return!1;return!0}function $0(n){if(typeof n!="object"||n===null)return null;const e=n;if(typeof e.prefix!="string"||!n.icons||typeof n.icons!="object"||!Qh(n,DE))return null;const i=e.icons;for(const r in i){const s=i[r];if(!r||typeof s.body!="string"||!Qh(s,rd))return null}const t=e.aliases||Object.create(null);for(const r in t){const s=t[r],l=s.parent;if(!r||typeof l!="string"||!i[l]&&!t[l]||!Qh(s,rd))return null}return e}const Og=Object.create(null);function LE(n,e){return{provider:n,prefix:e,icons:Object.create(null),missing:new Set}}function va(n,e){const i=Og[n]||(Og[n]=Object.create(null));return i[e]||(i[e]=LE(n,e))}function Id(n,e){return $0(e)?Q0(e,(i,t)=>{t?n.icons[i]=t:n.missing.add(i)}):[]}function RE(n,e,i){try{if(typeof i.body=="string")return n.icons[e]={...i},!0}catch{}return!1}let Gc=!1;function ey(n){return typeof n=="boolean"&&(Gc=n),Gc}function OE(n){const e=typeof n=="string"?xf(n,!0,Gc):n;if(e){const i=va(e.provider,e.prefix),t=e.name;return i.icons[t]||(i.missing.has(t)?null:void 0)}}function FE(n,e){const i=xf(n,!0,Gc);if(!i)return!1;const t=va(i.provider,i.prefix);return e?RE(t,i.name,e):(t.missing.add(i.name),!0)}function BE(n,e){if(typeof n!="object")return!1;if(typeof e!="string"&&(e=n.provider||""),Gc&&!e&&!n.prefix){let r=!1;return $0(n)&&(n.prefix="",Q0(n,(s,l)=>{FE(s,l)&&(r=!0)})),r}const i=n.prefix;if(!lf({provider:e,prefix:i,name:"a"}))return!1;const t=va(e,i);return!!Id(t,n)}const ty=Object.freeze({width:null,height:null}),iy=Object.freeze({...ty,...df}),NE=/(-?[0-9.]*[0-9]+[0-9.]*)/g,VE=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Fg(n,e,i){if(e===1)return n;if(i=i||100,typeof n=="number")return Math.ceil(n*e*i)/i;if(typeof n!="string")return n;const t=n.split(NE);if(t===null||!t.length)return n;const r=[];let s=t.shift(),l=VE.test(s);for(;;){if(l){const o=parseFloat(s);isNaN(o)?r.push(s):r.push(Math.ceil(o*e*i)/i)}else r.push(s);if(s=t.shift(),s===void 0)return r.join("");l=!l}}function jE(n,e="defs"){let i="";const t=n.indexOf("<"+e);for(;t>=0;){const r=n.indexOf(">",t),s=n.indexOf("</"+e);if(r===-1||s===-1)break;const l=n.indexOf(">",s);if(l===-1)break;i+=n.slice(r+1,s).trim(),n=n.slice(0,t).trim()+n.slice(l+1)}return{defs:i,content:n}}function UE(n,e){return n?"<defs>"+n+"</defs>"+e:e}function qE(n,e,i){const t=jE(n);return UE(t.defs,e+t.content+i)}const ZE=n=>n==="unset"||n==="undefined"||n==="none";function GE(n,e){const i={...kf,...n},t={...iy,...e},r={left:i.left,top:i.top,width:i.width,height:i.height};let s=i.body;[i,t].forEach(G=>{const Z=[],K=G.hFlip,q=G.vFlip;let ie=G.rotate;K?q?ie+=2:(Z.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),Z.push("scale(-1 1)"),r.top=r.left=0):q&&(Z.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),Z.push("scale(1 -1)"),r.top=r.left=0);let oe;switch(ie<0&&(ie-=Math.floor(ie/4)*4),ie=ie%4,ie){case 1:oe=r.height/2+r.top,Z.unshift("rotate(90 "+oe.toString()+" "+oe.toString()+")");break;case 2:Z.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:oe=r.width/2+r.left,Z.unshift("rotate(-90 "+oe.toString()+" "+oe.toString()+")");break}ie%2===1&&(r.left!==r.top&&(oe=r.left,r.left=r.top,r.top=oe),r.width!==r.height&&(oe=r.width,r.width=r.height,r.height=oe)),Z.length&&(s=qE(s,'<g transform="'+Z.join(" ")+'">',"</g>"))});const l=t.width,o=t.height,f=r.width,p=r.height;let g,C;l===null?(C=o===null?"1em":o==="auto"?p:o,g=Fg(C,f/p)):(g=l==="auto"?f:l,C=o===null?Fg(g,p/f):o==="auto"?p:o);const A={},V=(G,Z)=>{ZE(Z)||(A[G]=Z.toString())};V("width",g),V("height",C);const U=[r.left,r.top,f,p];return A.viewBox=U.join(" "),{attributes:A,viewBox:U,body:s}}const HE=/\sid="(\S+)"/g,WE="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let XE=0;function KE(n,e=WE){const i=[];let t;for(;t=HE.exec(n);)i.push(t[1]);if(!i.length)return n;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(s=>{const l=typeof e=="function"?e(s):e+(XE++).toString(),o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");n=n.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+l+r+"$3")}),n=n.replace(new RegExp(r,"g"),""),n}const sd=Object.create(null);function JE(n,e){sd[n]=e}function od(n){return sd[n]||sd[""]}function Ad(n){let e;if(typeof n.resources=="string")e=[n.resources];else if(e=n.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:n.path||"/",maxURL:n.maxURL||500,rotate:n.rotate||750,timeout:n.timeout||5e3,random:n.random===!0,index:n.index||0,dataAfterTimeout:n.dataAfterTimeout!==!1}}const Ed=Object.create(null),jc=["https://api.simplesvg.com","https://api.unisvg.com"],cf=[];for(;jc.length>0;)jc.length===1||Math.random()>.5?cf.push(jc.shift()):cf.push(jc.pop());Ed[""]=Ad({resources:["https://api.iconify.design"].concat(cf)});function YE(n,e){const i=Ad(e);return i===null?!1:(Ed[n]=i,!0)}function Pd(n){return Ed[n]}const QE=()=>{let n;try{if(n=fetch,typeof n=="function")return n}catch{}};let Bg=QE();function $E(n,e){const i=Pd(n);if(!i)return 0;let t;if(!i.maxURL)t=0;else{let r=0;i.resources.forEach(l=>{r=Math.max(r,l.length)});const s=e+".json?icons=";t=i.maxURL-r-i.path.length-s.length}return t}function eP(n){return n===404}const tP=(n,e,i)=>{const t=[],r=$E(n,e),s="icons";let l={type:s,provider:n,prefix:e,icons:[]},o=0;return i.forEach((f,p)=>{o+=f.length+1,o>=r&&p>0&&(t.push(l),l={type:s,provider:n,prefix:e,icons:[]},o=f.length),l.icons.push(f)}),t.push(l),t};function iP(n){if(typeof n=="string"){const e=Pd(n);if(e)return e.path}return"/"}const nP=(n,e,i)=>{if(!Bg){i("abort",424);return}let t=iP(e.provider);switch(e.type){case"icons":{const s=e.prefix,o=e.icons.join(","),f=new URLSearchParams({icons:o});t+=s+".json?"+f.toString();break}case"custom":{const s=e.uri;t+=s.slice(0,1)==="/"?s.slice(1):s;break}default:i("abort",400);return}let r=503;Bg(n+t).then(s=>{const l=s.status;if(l!==200){setTimeout(()=>{i(eP(l)?"abort":"next",l)});return}return r=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{s===404?i("abort",s):i("next",r)});return}setTimeout(()=>{i("success",s)})}).catch(()=>{i("next",r)})},rP={prepare:tP,send:nP};function sP(n){const e={loaded:[],missing:[],pending:[]},i=Object.create(null);n.sort((r,s)=>r.provider!==s.provider?r.provider.localeCompare(s.provider):r.prefix!==s.prefix?r.prefix.localeCompare(s.prefix):r.name.localeCompare(s.name));let t={provider:"",prefix:"",name:""};return n.forEach(r=>{if(t.name===r.name&&t.prefix===r.prefix&&t.provider===r.provider)return;t=r;const s=r.provider,l=r.prefix,o=r.name,f=i[s]||(i[s]=Object.create(null)),p=f[l]||(f[l]=va(s,l));let g;o in p.icons?g=e.loaded:l===""||p.missing.has(o)?g=e.missing:g=e.pending;const C={provider:s,prefix:l,name:o};g.push(C)}),e}function ny(n,e){n.forEach(i=>{const t=i.loaderCallbacks;t&&(i.loaderCallbacks=t.filter(r=>r.id!==e))})}function oP(n){n.pendingCallbacksFlag||(n.pendingCallbacksFlag=!0,setTimeout(()=>{n.pendingCallbacksFlag=!1;const e=n.loaderCallbacks?n.loaderCallbacks.slice(0):[];if(!e.length)return;let i=!1;const t=n.provider,r=n.prefix;e.forEach(s=>{const l=s.icons,o=l.pending.length;l.pending=l.pending.filter(f=>{if(f.prefix!==r)return!0;const p=f.name;if(n.icons[p])l.loaded.push({provider:t,prefix:r,name:p});else if(n.missing.has(p))l.missing.push({provider:t,prefix:r,name:p});else return i=!0,!0;return!1}),l.pending.length!==o&&(i||ny([n],s.id),s.callback(l.loaded.slice(0),l.missing.slice(0),l.pending.slice(0),s.abort))})}))}let aP=0;function lP(n,e,i){const t=aP++,r=ny.bind(null,i,t);if(!e.pending.length)return r;const s={id:t,icons:e,callback:n,abort:r};return i.forEach(l=>{(l.loaderCallbacks||(l.loaderCallbacks=[])).push(s)}),r}function cP(n,e=!0,i=!1){const t=[];return n.forEach(r=>{const s=typeof r=="string"?xf(r,e,i):r;s&&t.push(s)}),t}var uP={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function fP(n,e,i,t){const r=n.resources.length,s=n.random?Math.floor(Math.random()*r):n.index;let l;if(n.random){let pe=n.resources.slice(0);for(l=[];pe.length>1;){const Ie=Math.floor(Math.random()*pe.length);l.push(pe[Ie]),pe=pe.slice(0,Ie).concat(pe.slice(Ie+1))}l=l.concat(pe)}else l=n.resources.slice(s).concat(n.resources.slice(0,s));const o=Date.now();let f="pending",p=0,g,C=null,A=[],V=[];typeof t=="function"&&V.push(t);function U(){C&&(clearTimeout(C),C=null)}function G(){f==="pending"&&(f="aborted"),U(),A.forEach(pe=>{pe.status==="pending"&&(pe.status="aborted")}),A=[]}function Z(pe,Ie){Ie&&(V=[]),typeof pe=="function"&&V.push(pe)}function K(){return{startTime:o,payload:e,status:f,queriesSent:p,queriesPending:A.length,subscribe:Z,abort:G}}function q(){f="failed",V.forEach(pe=>{pe(void 0,g)})}function ie(){A.forEach(pe=>{pe.status==="pending"&&(pe.status="aborted")}),A=[]}function oe(pe,Ie,Ce){const je=Ie!=="success";switch(A=A.filter(Ve=>Ve!==pe),f){case"pending":break;case"failed":if(je||!n.dataAfterTimeout)return;break;default:return}if(Ie==="abort"){g=Ce,q();return}if(je){g=Ce,A.length||(l.length?se():q());return}if(U(),ie(),!n.random){const Ve=n.resources.indexOf(pe.resource);Ve!==-1&&Ve!==n.index&&(n.index=Ve)}f="completed",V.forEach(Ve=>{Ve(Ce)})}function se(){if(f!=="pending")return;U();const pe=l.shift();if(pe===void 0){if(A.length){C=setTimeout(()=>{U(),f==="pending"&&(ie(),q())},n.timeout);return}q();return}const Ie={status:"pending",resource:pe,callback:(Ce,je)=>{oe(Ie,Ce,je)}};A.push(Ie),p++,C=setTimeout(se,n.rotate),i(pe,e,Ie.callback)}return setTimeout(se),K}function ry(n){const e={...uP,...n};let i=[];function t(){i=i.filter(o=>o().status==="pending")}function r(o,f,p){const g=fP(e,o,f,(C,A)=>{t(),p&&p(C,A)});return i.push(g),g}function s(o){return i.find(f=>o(f))||null}return{query:r,find:s,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:t}}function Ng(){}const $h=Object.create(null);function hP(n){if(!$h[n]){const e=Pd(n);if(!e)return;const i=ry(e),t={config:e,redundancy:i};$h[n]=t}return $h[n]}function dP(n,e,i){let t,r;if(typeof n=="string"){const s=od(n);if(!s)return i(void 0,424),Ng;r=s.send;const l=hP(n);l&&(t=l.redundancy)}else{const s=Ad(n);if(s){t=ry(s);const l=n.resources?n.resources[0]:"",o=od(l);o&&(r=o.send)}}return!t||!r?(i(void 0,424),Ng):t.query(e,r,i)().abort}const Vg="iconify2",Hc="iconify",sy=Hc+"-count",jg=Hc+"-version",oy=36e5,mP=168,pP=50;function ad(n,e){try{return n.getItem(e)}catch{}}function Md(n,e,i){try{return n.setItem(e,i),!0}catch{}}function Ug(n,e){try{n.removeItem(e)}catch{}}function ld(n,e){return Md(n,sy,e.toString())}function cd(n){return parseInt(ad(n,sy))||0}const Cf={local:!0,session:!0},ay={local:new Set,session:new Set};let zd=!1;function _P(n){zd=n}let of=typeof window>"u"?{}:window;function ly(n){const e=n+"Storage";try{if(of&&of[e]&&typeof of[e].length=="number")return of[e]}catch{}Cf[n]=!1}function cy(n,e){const i=ly(n);if(!i)return;const t=ad(i,jg);if(t!==Vg){if(t){const o=cd(i);for(let f=0;f<o;f++)Ug(i,Hc+f.toString())}Md(i,jg,Vg),ld(i,0);return}const r=Math.floor(Date.now()/oy)-mP,s=o=>{const f=Hc+o.toString(),p=ad(i,f);if(typeof p=="string"){try{const g=JSON.parse(p);if(typeof g=="object"&&typeof g.cached=="number"&&g.cached>r&&typeof g.provider=="string"&&typeof g.data=="object"&&typeof g.data.prefix=="string"&&e(g,o))return!0}catch{}Ug(i,f)}};let l=cd(i);for(let o=l-1;o>=0;o--)s(o)||(o===l-1?(l--,ld(i,l)):ay[n].add(o))}function uy(){if(!zd){_P(!0);for(const n in Cf)cy(n,e=>{const i=e.data,t=e.provider,r=i.prefix,s=va(t,r);if(!Id(s,i).length)return!1;const l=i.lastModified||-1;return s.lastModifiedCached=s.lastModifiedCached?Math.min(s.lastModifiedCached,l):l,!0})}}function gP(n,e){const i=n.lastModifiedCached;if(i&&i>=e)return i===e;if(n.lastModifiedCached=e,i)for(const t in Cf)cy(t,r=>{const s=r.data;return r.provider!==n.provider||s.prefix!==n.prefix||s.lastModified===e});return!0}function yP(n,e){zd||uy();function i(t){let r;if(!Cf[t]||!(r=ly(t)))return;const s=ay[t];let l;if(s.size)s.delete(l=Array.from(s).shift());else if(l=cd(r),l>=pP||!ld(r,l+1))return;const o={cached:Math.floor(Date.now()/oy),provider:n.provider,data:e};return Md(r,Hc+l.toString(),JSON.stringify(o))}e.lastModified&&!gP(n,e.lastModified)||Object.keys(e.icons).length&&(e.not_found&&(e=Object.assign({},e),delete e.not_found),i("local")||i("session"))}function qg(){}function bP(n){n.iconsLoaderFlag||(n.iconsLoaderFlag=!0,setTimeout(()=>{n.iconsLoaderFlag=!1,oP(n)}))}function vP(n){const e=[],i=[];return n.forEach(t=>{(t.match(J0)?e:i).push(t)}),{valid:e,invalid:i}}function Uc(n,e,i,t){function r(){const s=n.pendingIcons;e.forEach(l=>{s&&s.delete(l),n.icons[l]||n.missing.add(l)})}if(i&&typeof i=="object")try{if(!Id(n,i).length){r();return}t&&yP(n,i)}catch(s){console.error(s)}r(),bP(n)}function Zg(n,e){n instanceof Promise?n.then(i=>{e(i)}).catch(()=>{e(null)}):e(n)}function wP(n,e){n.iconsToLoad?n.iconsToLoad=n.iconsToLoad.concat(e).sort():n.iconsToLoad=e,n.iconsQueueFlag||(n.iconsQueueFlag=!0,setTimeout(()=>{n.iconsQueueFlag=!1;const{provider:i,prefix:t}=n,r=n.iconsToLoad;if(delete n.iconsToLoad,!r||!r.length)return;const s=n.loadIcon;if(n.loadIcons&&(r.length>1||!s)){Zg(n.loadIcons(r,t,i),g=>{Uc(n,r,g,!1)});return}if(s){r.forEach(g=>{const C=s(g,t,i);Zg(C,A=>{const V=A?{prefix:t,icons:{[g]:A}}:null;Uc(n,[g],V,!1)})});return}const{valid:l,invalid:o}=vP(r);if(o.length&&Uc(n,o,null,!1),!l.length)return;const f=t.match(J0)?od(i):null;if(!f){Uc(n,l,null,!1);return}f.prepare(i,t,l).forEach(g=>{dP(i,g,C=>{Uc(n,g.icons,C,!0)})})}))}const xP=(n,e)=>{const i=cP(n,!0,ey()),t=sP(i);if(!t.pending.length){let f=!0;return e&&setTimeout(()=>{f&&e(t.loaded,t.missing,t.pending,qg)}),()=>{f=!1}}const r=Object.create(null),s=[];let l,o;return t.pending.forEach(f=>{const{provider:p,prefix:g}=f;if(g===o&&p===l)return;l=p,o=g,s.push(va(p,g));const C=r[p]||(r[p]=Object.create(null));C[g]||(C[g]=[])}),t.pending.forEach(f=>{const{provider:p,prefix:g,name:C}=f,A=va(p,g),V=A.pendingIcons||(A.pendingIcons=new Set);V.has(C)||(V.add(C),r[p][g].push(C))}),s.forEach(f=>{const p=r[f.provider][f.prefix];p.length&&wP(f,p)}),e?lP(e,t,s):qg};function kP(n,e){const i={...n};for(const t in e){const r=e[t],s=typeof r;t in ty?(r===null||r&&(s==="string"||s==="number"))&&(i[t]=r):s===typeof i[t]&&(i[t]=t==="rotate"?r%4:r)}return i}const CP=/[\s,]+/;function SP(n,e){e.split(CP).forEach(i=>{switch(i.trim()){case"horizontal":n.hFlip=!0;break;case"vertical":n.vFlip=!0;break}})}function TP(n,e=0){const i=n.replace(/^-?[0-9.]*/,"");function t(r){for(;r<0;)r+=4;return r%4}if(i===""){const r=parseInt(n);return isNaN(r)?0:t(r)}else if(i!==n){let r=0;switch(i){case"%":r=25;break;case"deg":r=90}if(r){let s=parseFloat(n.slice(0,n.length-i.length));return isNaN(s)?0:(s=s/r,s%1===0?t(s):0)}}return e}function IP(n,e){let i=n.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const t in e)i+=" "+t+'="'+e[t]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+n+"</svg>"}function AP(n){return n.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function EP(n){return"data:image/svg+xml,"+AP(n)}function PP(n){return'url("'+EP(n)+'")'}const Gg={...iy,inline:!1},MP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},zP={display:"inline-block"},ud={"background-color":"currentColor"},fy={"background-color":"transparent"},Hg={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Wg={"-webkit-mask":ud,mask:ud,background:fy};for(const n in Wg){const e=Wg[n];for(const i in Hg)e[n+"-"+i]=Hg[i]}function DP(n){return n+(n.match(/^[-0-9.]+$/)?"px":"")}function LP(n,e){const i=kP(Gg,e),t=e.mode||"svg",r=t==="svg"?{...MP}:{};n.body.indexOf("xlink:")===-1&&delete r["xmlns:xlink"];let s=typeof e.style=="string"?e.style:"";for(let K in e){const q=e[K];if(q!==void 0)switch(K){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[K]=q===!0||q==="true"||q===1;break;case"flip":typeof q=="string"&&SP(i,q);break;case"color":s=s+(s.length>0&&s.trim().slice(-1)!==";"?";":"")+"color: "+q+"; ";break;case"rotate":typeof q=="string"?i[K]=TP(q):typeof q=="number"&&(i[K]=q);break;case"ariaHidden":case"aria-hidden":q!==!0&&q!=="true"&&delete r["aria-hidden"];break;default:if(K.slice(0,3)==="on:")break;Gg[K]===void 0&&(r[K]=q)}}const l=GE(n,i),o=l.attributes;if(i.inline&&(s="vertical-align: -0.125em; "+s),t==="svg"){Object.assign(r,o),s!==""&&(r.style=s);let K=0,q=e.id;return typeof q=="string"&&(q=q.replace(/-/g,"_")),{svg:!0,attributes:r,body:KE(l.body,q?()=>q+"ID"+K++:"iconifySvelte")}}const{body:f,width:p,height:g}=n,C=t==="mask"||(t==="bg"?!1:f.indexOf("currentColor")!==-1),A=IP(f,{...o,width:p+"",height:g+""}),U={"--svg":PP(A)},G=K=>{const q=o[K];q&&(U[K]=DP(q))};G("width"),G("height"),Object.assign(U,zP,C?ud:fy);let Z="";for(const K in U)Z+=K+": "+U[K]+";";return r.style=Z+s,{svg:!1,attributes:r}}ey(!0);JE("",rP);if(typeof document<"u"&&typeof window<"u"){uy();const n=window;if(n.IconifyPreload!==void 0){const e=n.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(t=>{try{(typeof t!="object"||t===null||t instanceof Array||typeof t.icons!="object"||typeof t.prefix!="string"||!BE(t))&&console.error(i)}catch{console.error(i)}})}if(n.IconifyProviders!==void 0){const e=n.IconifyProviders;if(typeof e=="object"&&e!==null)for(let i in e){const t="IconifyProviders["+i+"] is invalid.";try{const r=e[i];if(typeof r!="object"||!r||r.resources===void 0)continue;YE(i,r)||console.error(t)}catch{console.error(t)}}}}function RP(n,e,i,t,r){function s(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof n=="object"&&n!==null&&typeof n.body=="string")return e.name="",s(),{data:{...kf,...n}};let l;if(typeof n!="string"||(l=xf(n,!1,!0))===null)return s(),null;const o=OE(l);if(!o)return i&&(!e.loading||e.loading.name!==n)&&(s(),e.name="",e.loading={name:n,abort:xP([l],t)}),null;s(),e.name!==n&&(e.name=n,r&&!e.destroyed&&r(n));const f=["iconify"];return l.prefix!==""&&f.push("iconify--"+l.prefix),l.provider!==""&&f.push("iconify--"+l.provider),{data:o,classes:f}}function OP(n,e){return n?LP({...kf,...n},e):null}function Xg(n){let e;function i(s,l){return s[0].svg?BP:FP}let t=i(n),r=t(n);return{c(){r.c(),e=He()},l(s){r.l(s),e=He()},m(s,l){r.m(s,l),Q(s,e,l)},p(s,l){t===(t=i(s))&&r?r.p(s,l):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&F(e),r.d(s)}}}function FP(n){let e,i=[n[0].attributes],t={};for(let r=0;r<i.length;r+=1)t=re(t,i[r]);return{c(){e=Ze("span"),this.h()},l(r){e=Ge(r,"SPAN",{}),$e(e).forEach(F),this.h()},h(){rt(e,t)},m(r,s){Q(r,e,s)},p(r,s){rt(e,t=yt(i,[s&1&&r[0].attributes]))},d(r){r&&F(e)}}}function BP(n){let e,i,t=n[0].body+"",r=[n[0].attributes],s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return{c(){e=bv("svg"),i=new vv(!0),this.h()},l(l){e=wv(l,"svg",{});var o=$e(e);i=xv(o,!0),o.forEach(F),this.h()},h(){i.a=null,xp(e,s)},m(l,o){Q(l,e,o),i.m(t,e)},p(l,o){o&1&&t!==(t=l[0].body+"")&&i.p(t),xp(e,s=yt(r,[o&1&&l[0].attributes]))},d(l){l&&F(e)}}}function NP(n){let e,i=n[0]&&Xg(n);return{c(){i&&i.c(),e=He()},l(t){i&&i.l(t),e=He()},m(t,r){i&&i.m(t,r),Q(t,e,r)},p(t,[r]){t[0]?i?i.p(t,r):(i=Xg(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:Ci,o:Ci,d(t){t&&F(e),i&&i.d(t)}}}function VP(n,e,i){const t={name:"",loading:null,destroyed:!1};let r=!1,s=0,l;const o=p=>{typeof e.onLoad=="function"&&e.onLoad(p),_f()("load",{icon:p})};function f(){i(3,s++,s)}return kl(()=>{i(2,r=!0)}),Fo(()=>{i(1,t.destroyed=!0,t),t.loading&&(t.loading.abort(),i(1,t.loading=null,t))}),n.$$set=p=>{i(6,e=re(re({},e),wt(p)))},n.$$.update=()=>{{const p=!!e.ssr||r,g=RP(e.icon,t,p,f,o);i(0,l=g?OP(g.data,e):null),l&&g.classes&&i(0,l.attributes.class=(typeof e.class=="string"?e.class+" ":"")+g.classes.join(" "),l)}},e=wt(e),[l,t,r,s]}class jP extends lt{constructor(e){super(),ct(this,e,VP,NP,st,{})}}function UP(n){var t;let e,i;return e=new jP({props:{color:(t=n[4])==null?void 0:t.hex(),icon:n[0].name,inline:n[1],width:n[2],height:n[3],class:n[5]}}),{c(){ce(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,s){fe(e,r,s),i=!0},p(r,[s]){var o;const l={};s&16&&(l.color=(o=r[4])==null?void 0:o.hex()),s&1&&(l.icon=r[0].name),s&2&&(l.inline=r[1]),s&4&&(l.width=r[2]),s&8&&(l.height=r[3]),s&32&&(l.class=r[5]),e.$set(l)},i(r){i||(z(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){he(e,r)}}}function qP(n,e,i){let{icon:t}=e,{inline:r=!1}=e,{width:s="1em"}=e,{height:l="1em"}=e,{color:o=void 0}=e,{class:f=""}=e;return n.$$set=p=>{"icon"in p&&i(0,t=p.icon),"inline"in p&&i(1,r=p.inline),"width"in p&&i(2,s=p.width),"height"in p&&i(3,l=p.height),"color"in p&&i(4,o=p.color),"class"in p&&i(5,f=p.class)},[t,r,s,l,o,f]}class Qc extends lt{constructor(e){super(),ct(this,e,qP,UP,st,{icon:0,inline:1,width:2,height:3,color:4,class:5})}}function ZP(n){let e,i;return e=new wf({props:{size:n[1],color:n[2].color??Ro,variant:"outline",class:"my-0.5 "+n[4],$$slots:{icon:[WP]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.size=t[1]),r&4&&(s.color=t[2].color??Ro),r&16&&(s.class="my-0.5 "+t[4]),r&132&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function GP(n){let e,i;return e=new wf({props:{size:n[1],color:n[3].color??Ro,variant:"outline",class:"my-0.5 "+n[4],$$slots:{icon:[XP]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.size=t[1]),r&8&&(s.color=t[3].color??Ro),r&16&&(s.class="my-0.5 "+t[4]),r&136&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function HP(n){let e,i,t,r;const s=[YP,JP,KP],l=[];function o(f,p){return f[0].avatar?0:f[0].icon?1:f[2]?2:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function WP(n){let e,i;return e=new Qc({props:{slot:"icon",icon:n[2]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4&&(s.icon=t[2]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function XP(n){let e,i;return e=new Qc({props:{slot:"icon",icon:n[3]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&8&&(s.icon=t[3]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function KP(n){let e,i;return e=new wf({props:{size:n[1],color:n[2].color??Ro,variant:"default",class:"my-0.5 "+n[4],$$slots:{icon:[QP]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.size=t[1]),r&4&&(s.color=t[2].color??Ro),r&16&&(s.class="my-0.5 "+t[4]),r&132&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function JP(n){let e,i;return e=new wf({props:{size:n[1],color:n[0].icon.color??Ro,variant:"default",class:"my-0.5 "+n[4],$$slots:{icon:[$P]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.size=t[1]),r&1&&(s.color=t[0].icon.color??Ro),r&16&&(s.class="my-0.5 "+t[4]),r&129&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function YP(n){let e,i;return e=new xE({props:{class:"outline-none outline-offset-0 hover:outline-accent-foreground "+n[6]+" "+n[5]+" "+n[4],$$slots:{default:[t3]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&112&&(s.class="outline-none outline-offset-0 hover:outline-accent-foreground "+t[6]+" "+t[5]+" "+t[4]),r&129&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function QP(n){let e,i;return e=new Qc({props:{slot:"icon",icon:n[2]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4&&(s.icon=t[2]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function $P(n){let e,i;return e=new Qc({props:{slot:"icon",icon:n[0].icon}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.icon=t[0].icon),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function e3(n){let e=Ap(n[0].name)+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&1&&e!==(e=Ap(t[0].name)+"")&&Ai(i,e)},d(t){t&&F(i)}}}function t3(n){let e,i,t,r;return e=new SE({props:{alt:n[0].name,src:n[0].avatar.href,class:"rounded-full"}}),t=new EE({props:{$$slots:{default:[e3]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&1&&(o.alt=s[0].name),l&1&&(o.src=s[0].avatar.href),e.$set(o);const f={};l&129&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function i3(n){let e,i,t,r;const s=[HP,GP,ZP],l=[];function o(f,p){return f[0]?0:f[3]?1:f[2]?2:-1}return~(e=o(n))&&(i=l[e]=s[e](n)),{c(){i&&i.c(),t=He()},l(f){i&&i.l(f),t=He()},m(f,p){~e&&l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?~e&&l[e].p(f,p):(i&&(Tt(),D(l[g],1,1,()=>{l[g]=null}),It()),~e?(i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t)):i=null)},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),~e&&l[e].d(f)}}}function n3(n,e,i){let t,r,{item:s=void 0}=e,{size:l="md"}=e,{defaultIcon:o=void 0}=e,{emptyIcon:f=void 0}=e,{class:p=""}=e;return n.$$set=g=>{"item"in g&&i(0,s=g.item),"size"in g&&i(1,l=g.size),"defaultIcon"in g&&i(2,o=g.defaultIcon),"emptyIcon"in g&&i(3,f=g.emptyIcon),"class"in g&&i(4,p=g.class)},n.$$.update=()=>{n.$$.dirty&2&&i(6,t=Wc[l]),n.$$.dirty&2&&i(5,r=Ws[l])},[s,l,o,f,p,r,t]}class Ks extends lt{constructor(e){super(),ct(this,e,n3,i3,st,{item:0,size:1,defaultIcon:2,emptyIcon:3,class:4})}}function r3(n){let e,i;return{c(){e=Ze("p"),i=Ct(n[1]),this.h()},l(t){e=Ge(t,"P",{class:!0});var r=$e(e);i=St(r,n[1]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&2&&Ai(i,t[1])},i:Ci,o:Ci,d(t){t&&F(e)}}}function s3(n){let e,i,t,r,s,l,o=n[0].name+"",f,p,g,C,A,V;i=new Ks({props:{item:n[0],size:"lg"}});function U(q,ie){if(q[0]instanceof td)return u3;if(q[0]instanceof Zv)return c3;if(q[0]instanceof Gv)return l3;if(q[0]instanceof Location)return a3;if(q[0]instanceof S0)return o3}let G=U(n),Z=G&&G(n),K=n[0].description&&Kg(n);return{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),r=Ze("div"),s=Ze("div"),l=Ze("span"),f=Ct(o),p=it(),Z&&Z.c(),C=it(),K&&K.c(),A=He(),this.h()},l(q){e=Ge(q,"DIV",{class:!0});var ie=$e(e);ue(i.$$.fragment,ie),t=nt(ie),r=Ge(ie,"DIV",{class:!0});var oe=$e(r);s=Ge(oe,"DIV",{class:!0});var se=$e(s);l=Ge(se,"SPAN",{class:!0});var pe=$e(l);f=St(pe,o),pe.forEach(F),se.forEach(F),p=nt(oe),Z&&Z.l(oe),oe.forEach(F),ie.forEach(F),C=nt(q),K&&K.l(q),A=He(),this.h()},h(){gt(l,"class","font-semibold"),gt(s,"class","flex w-full flex-row items-center justify-between"),gt(r,"class","flex w-full flex-col justify-between gap-[2px] py-1"),gt(e,"class",g="flex w-max flex-row items-center justify-between gap-4 "+n[2])},m(q,ie){Q(q,e,ie),fe(i,e,null),ut(e,t),ut(e,r),ut(r,s),ut(s,l),ut(l,f),ut(r,p),Z&&Z.m(r,null),Q(q,C,ie),K&&K.m(q,ie),Q(q,A,ie),V=!0},p(q,ie){const oe={};ie&1&&(oe.item=q[0]),i.$set(oe),(!V||ie&1)&&o!==(o=q[0].name+"")&&Ai(f,o),G!==(G=U(q))&&(Z&&Z.d(1),Z=G&&G(q),Z&&(Z.c(),Z.m(r,null))),(!V||ie&4&&g!==(g="flex w-max flex-row items-center justify-between gap-4 "+q[2]))&&gt(e,"class",g),q[0].description?K?K.p(q,ie):(K=Kg(q),K.c(),K.m(A.parentNode,A)):K&&(K.d(1),K=null)},i(q){V||(z(i.$$.fragment,q),V=!0)},o(q){D(i.$$.fragment,q),V=!1},d(q){q&&(F(e),F(C),F(A)),he(i),Z&&Z.d(),K&&K.d(q)}}}function o3(n){let e;return{c(){e=Ct("Shift")},l(i){e=St(i,"Shift")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function a3(n){let e;return{c(){e=Ct("Location")},l(i){e=St(i,"Location")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function l3(n){let e;return{c(){e=Ct("Property")},l(i){e=St(i,"Property")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function c3(n){let e;return{c(){e=Ct("Task")},l(i){e=St(i,"Task")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function u3(n){let e;return{c(){e=Ct("Employee")},l(i){e=St(i,"Employee")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function Kg(n){let e,i=n[0].description+"",t;return{c(){e=Ze("p"),t=Ct(i),this.h()},l(r){e=Ge(r,"P",{class:!0});var s=$e(e);t=St(s,i),s.forEach(F),this.h()},h(){gt(e,"class","max-w-[30ch] text-gray-500")},m(r,s){Q(r,e,s),ut(e,t)},p(r,s){s&1&&i!==(i=r[0].description+"")&&Ai(t,i)},d(r){r&&F(e)}}}function f3(n){let e,i,t,r;const s=[s3,r3],l=[];function o(f,p){return f[0]?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function h3(n,e,i){let{item:t=void 0}=e,{placeholder:r="No item selected"}=e,{class:s=""}=e;return n.$$set=l=>{"item"in l&&i(0,t=l.item),"placeholder"in l&&i(1,r=l.placeholder),"class"in l&&i(2,s=l.class)},[t,r,s]}class hy extends lt{constructor(e){super(),ct(this,e,h3,f3,st,{item:0,placeholder:1,class:2})}}const d3=n=>({}),Jg=n=>({}),m3=n=>({}),Yg=n=>({});function Qg(n,e,i){const t=n.slice();return t[15]=e[i],t}const p3=n=>({}),$g=n=>({}),_3=n=>({}),e1=n=>({});function t1(n,e,i){const t=n.slice();return t[15]=e[i],t}function g3(n){let e;const i=n[14].extraItems,t=Ke(i,n,n[13],Jg),r=t||v3(n);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t?t.p&&(!e||l&8192)&&Je(t,i,s,s[13],e?Qe(i,s[13],l,d3):Ye(s[13]),Jg):r&&r.p&&(!e||l&998)&&r.p(s,e?l:-1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function y3(n){let e,i,t,r,s,l=Zi(n[0].slice(0,n[3])),o=[];for(let C=0;C<l.length;C+=1)o[C]=i1(Qg(n,l,C));const f=C=>D(o[C],1,1,()=>{o[C]=null});let p=n[3]&&n[0].length>n[3]&&n1(n),g=n[12].extraItems&&r1(n);return{c(){e=Ze("div");for(let C=0;C<o.length;C+=1)o[C].c();i=it(),p&&p.c(),t=it(),g&&g.c(),this.h()},l(C){e=Ge(C,"DIV",{class:!0});var A=$e(e);for(let V=0;V<o.length;V+=1)o[V].l(A);i=nt(A),p&&p.l(A),t=nt(A),g&&g.l(A),A.forEach(F),this.h()},h(){gt(e,"class",r="flex flex-row flex-wrap items-center justify-start gap-2 "+n[9])},m(C,A){Q(C,e,A);for(let V=0;V<o.length;V+=1)o[V]&&o[V].m(e,null);ut(e,i),p&&p.m(e,null),ut(e,t),g&&g.m(e,null),s=!0},p(C,A){if(A&2559){l=Zi(C[0].slice(0,C[3]));let V;for(V=0;V<l.length;V+=1){const U=Qg(C,l,V);o[V]?(o[V].p(U,A),z(o[V],1)):(o[V]=i1(U),o[V].c(),z(o[V],1),o[V].m(e,i))}for(Tt(),V=l.length;V<o.length;V+=1)f(V);It()}C[3]&&C[0].length>C[3]?p?p.p(C,A):(p=n1(C),p.c(),p.m(e,t)):p&&(p.d(1),p=null),C[12].extraItems?g?(g.p(C,A),A&4096&&z(g,1)):(g=r1(C),g.c(),z(g,1),g.m(e,null)):g&&(Tt(),D(g,1,1,()=>{g=null}),It()),(!s||A&512&&r!==(r="flex flex-row flex-wrap items-center justify-start gap-2 "+C[9]))&&gt(e,"class",r)},i(C){if(!s){for(let A=0;A<l.length;A+=1)z(o[A]);z(g),s=!0}},o(C){o=o.filter(Boolean);for(let A=0;A<o.length;A+=1)D(o[A]);D(g),s=!1},d(C){C&&F(e),Yn(o,C),p&&p.d(),g&&g.d()}}}function b3(n){let e,i,t,r,s;const l=[x3,w3],o=[];function f(p,g){return p[0].length>0?0:1}return i=f(n),t=o[i]=l[i](n),{c(){e=Ze("div"),t.c(),this.h()},l(p){e=Ge(p,"DIV",{class:!0});var g=$e(e);t.l(g),g.forEach(F),this.h()},h(){gt(e,"class",r="group flex flex-row flex-wrap items-center justify-start "+n[9])},m(p,g){Q(p,e,g),o[i].m(e,null),s=!0},p(p,g){let C=i;i=f(p),i===C?o[i].p(p,g):(Tt(),D(o[C],1,1,()=>{o[C]=null}),It(),t=o[i],t?t.p(p,g):(t=o[i]=l[i](p),t.c()),z(t,1),t.m(e,null)),(!s||g&512&&r!==(r="group flex flex-row flex-wrap items-center justify-start "+p[9]))&&gt(e,"class",r)},i(p){s||(z(t),s=!0)},o(p){D(t),s=!1},d(p){p&&F(e),o[i].d()}}}function v3(n){let e,i;return e=new Sf({props:{variant:n[2],item:void 0,size:n[1],emptyIcon:n[5],placeholder:n[7],group:n[11],onClick:n[6],hoverEffects:!1,class:n[9]+" "+n[8]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4&&(s.variant=t[2]),r&2&&(s.size=t[1]),r&32&&(s.emptyIcon=t[5]),r&128&&(s.placeholder=t[7]),r&64&&(s.onClick=t[6]),r&768&&(s.class=t[9]+" "+t[8]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function i1(n){let e,i;return e=new Sf({props:{variant:n[2],item:n[15],size:n[1],defaultIcon:n[4],emptyIcon:n[5],placeholder:n[7],group:n[11],onClick:n[6],hoverEffects:!1,class:n[8]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4&&(s.variant=t[2]),r&9&&(s.item=t[15]),r&2&&(s.size=t[1]),r&16&&(s.defaultIcon=t[4]),r&32&&(s.emptyIcon=t[5]),r&128&&(s.placeholder=t[7]),r&64&&(s.onClick=t[6]),r&256&&(s.class=t[8]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function n1(n){let e,i,t=n[0].length-n[3]+"",r,s;return{c(){e=Ze("div"),i=Ct("+"),r=Ct(t),this.h()},l(l){e=Ge(l,"DIV",{class:!0});var o=$e(e);i=St(o,"+"),r=St(o,t),o.forEach(F),this.h()},h(){gt(e,"class",s="flex items-center justify-center rounded-full bg-accent text-accent-foreground "+Wc[n[1]]+" "+Ws[n[1]])},m(l,o){Q(l,e,o),ut(e,i),ut(e,r)},p(l,o){o&9&&t!==(t=l[0].length-l[3]+"")&&Ai(r,t),o&2&&s!==(s="flex items-center justify-center rounded-full bg-accent text-accent-foreground "+Wc[l[1]]+" "+Ws[l[1]])&&gt(e,"class",s)},d(l){l&&F(e)}}}function r1(n){let e;const i=n[14].extraItems,t=Ke(i,n,n[13],Yg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8192)&&Je(t,i,r,r[13],e?Qe(i,r[13],s,m3):Ye(r[13]),Yg)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function w3(n){let e;const i=n[14].extraItems,t=Ke(i,n,n[13],$g),r=t||k3(n);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t?t.p&&(!e||l&8192)&&Je(t,i,s,s[13],e?Qe(i,s[13],l,p3):Ye(s[13]),$g):r&&r.p&&(!e||l&482)&&r.p(s,e?l:-1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function x3(n){let e,i,t,r,s=Zi(n[0].slice(0,n[3])),l=[];for(let g=0;g<s.length;g+=1)l[g]=s1(t1(n,s,g));const o=g=>D(l[g],1,1,()=>{l[g]=null});let f=n[3]&&n[0].length>n[3]&&o1(n),p=n[12].extraItems&&a1(n);return{c(){for(let g=0;g<l.length;g+=1)l[g].c();e=it(),f&&f.c(),i=it(),p&&p.c(),t=He()},l(g){for(let C=0;C<l.length;C+=1)l[C].l(g);e=nt(g),f&&f.l(g),i=nt(g),p&&p.l(g),t=He()},m(g,C){for(let A=0;A<l.length;A+=1)l[A]&&l[A].m(g,C);Q(g,e,C),f&&f.m(g,C),Q(g,i,C),p&&p.m(g,C),Q(g,t,C),r=!0},p(g,C){if(C&3579){s=Zi(g[0].slice(0,g[3]));let A;for(A=0;A<s.length;A+=1){const V=t1(g,s,A);l[A]?(l[A].p(V,C),z(l[A],1)):(l[A]=s1(V),l[A].c(),z(l[A],1),l[A].m(e.parentNode,e))}for(Tt(),A=s.length;A<l.length;A+=1)o(A);It()}g[3]&&g[0].length>g[3]?f?f.p(g,C):(f=o1(g),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null),g[12].extraItems?p?(p.p(g,C),C&4096&&z(p,1)):(p=a1(g),p.c(),z(p,1),p.m(t.parentNode,t)):p&&(Tt(),D(p,1,1,()=>{p=null}),It())},i(g){if(!r){for(let C=0;C<s.length;C+=1)z(l[C]);z(p),r=!0}},o(g){l=l.filter(Boolean);for(let C=0;C<l.length;C+=1)D(l[C]);D(p),r=!1},d(g){g&&(F(e),F(i),F(t)),Yn(l,g),f&&f.d(g),p&&p.d(g)}}}function k3(n){let e,i;return e=new Sf({props:{variant:"default",item:void 0,size:n[1],emptyIcon:n[5],placeholder:n[7],group:n[11],onClick:n[6],hoverEffects:!1,class:n[8]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.size=t[1]),r&32&&(s.emptyIcon=t[5]),r&128&&(s.placeholder=t[7]),r&64&&(s.onClick=t[6]),r&256&&(s.class=t[8]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function s1(n){let e,i,t,r;return i=new Sf({props:{variant:"default",item:n[15],size:n[1],defaultIcon:n[4],emptyIcon:n[5],placeholder:n[7],group:n[11],onClick:n[6],hoverEffects:!1,class:n[10][n[1]]+" "+Ws[n[1]]+" "+n[8]}}),{c(){e=Ze("div"),ce(i.$$.fragment),this.h()},l(s){e=Ge(s,"DIV",{class:!0});var l=$e(e);ue(i.$$.fragment,l),l.forEach(F),this.h()},h(){gt(e,"class",t="relative transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+n[10][n[1]])},m(s,l){Q(s,e,l),fe(i,e,null),r=!0},p(s,l){const o={};l&9&&(o.item=s[15]),l&2&&(o.size=s[1]),l&16&&(o.defaultIcon=s[4]),l&32&&(o.emptyIcon=s[5]),l&128&&(o.placeholder=s[7]),l&64&&(o.onClick=s[6]),l&258&&(o.class=s[10][s[1]]+" "+Ws[s[1]]+" "+s[8]),i.$set(o),(!r||l&2&&t!==(t="relative transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+s[10][s[1]]))&&gt(e,"class",t)},i(s){r||(z(i.$$.fragment,s),r=!0)},o(s){D(i.$$.fragment,s),r=!1},d(s){s&&F(e),he(i)}}}function o1(n){let e,i,t,r=n[0].length-n[3]+"",s,l,o;return{c(){e=Ze("div"),i=Ze("div"),t=Ct("+"),s=Ct(r),this.h()},l(f){e=Ge(f,"DIV",{class:!0});var p=$e(e);i=Ge(p,"DIV",{class:!0});var g=$e(i);t=St(g,"+"),s=St(g,r),g.forEach(F),p.forEach(F),this.h()},h(){gt(i,"class",l="absolute left-0 top-0 flex items-center justify-center rounded-full bg-accent text-accent-foreground "+Wc[n[1]]+" "+Ws[n[1]]),gt(e,"class",o="relative h-full transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+n[10][n[1]]+" "+Ws[n[1]])},m(f,p){Q(f,e,p),ut(e,i),ut(i,t),ut(i,s)},p(f,p){p&9&&r!==(r=f[0].length-f[3]+"")&&Ai(s,r),p&2&&l!==(l="absolute left-0 top-0 flex items-center justify-center rounded-full bg-accent text-accent-foreground "+Wc[f[1]]+" "+Ws[f[1]])&&gt(i,"class",l),p&2&&o!==(o="relative h-full transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+f[10][f[1]]+" "+Ws[f[1]])&&gt(e,"class",o)},d(f){f&&F(e)}}}function a1(n){let e,i,t;const r=n[14].extraItems,s=Ke(r,n,n[13],e1);return{c(){e=Ze("div"),s&&s.c(),this.h()},l(l){e=Ge(l,"DIV",{class:!0});var o=$e(e);s&&s.l(o),o.forEach(F),this.h()},h(){gt(e,"class",i="relative transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+n[10][n[1]])},m(l,o){Q(l,e,o),s&&s.m(e,null),t=!0},p(l,o){s&&s.p&&(!t||o&8192)&&Je(s,r,l,l[13],t?Qe(r,l[13],o,_3):Ye(l[13]),e1),(!t||o&2&&i!==(i="relative transition-all hover:z-20 hover:!opacity-100 group-hover:opacity-55 "+l[10][l[1]]))&&gt(e,"class",i)},i(l){t||(z(s,l),t=!0)},o(l){D(s,l),t=!1},d(l){l&&F(e),s&&s.d(l)}}}function C3(n){let e,i,t,r;const s=[b3,y3,g3],l=[];function o(f,p){return f[2]==="compact"?0:f[0].length>0?1:2}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,[p]){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function S3(n,e,i){let{$$slots:t={},$$scope:r}=e;const s=md(t),l={xs:"w-4 hover:w-5",sm:"w-5 hover:w-8",md:"w-7 hover:w-10",lg:"w-9 hover:w-12",xl:"w-12 hover:w-14"},o=Hv();let{items:f=[]}=e,{size:p="md"}=e,{variant:g="default"}=e,{max:C=void 0}=e,{defaultIcon:A=void 0}=e,{emptyIcon:V=void 0}=e,{onClick:U=void 0}=e,{placeholder:G="No items"}=e,{itemClass:Z=""}=e,{class:K=""}=e;return n.$$set=q=>{"items"in q&&i(0,f=q.items),"size"in q&&i(1,p=q.size),"variant"in q&&i(2,g=q.variant),"max"in q&&i(3,C=q.max),"defaultIcon"in q&&i(4,A=q.defaultIcon),"emptyIcon"in q&&i(5,V=q.emptyIcon),"onClick"in q&&i(6,U=q.onClick),"placeholder"in q&&i(7,G=q.placeholder),"itemClass"in q&&i(8,Z=q.itemClass),"class"in q&&i(9,K=q.class),"$$scope"in q&&i(13,r=q.$$scope)},[f,p,g,C,A,V,U,G,Z,K,l,o,s,r,t]}class T3 extends lt{constructor(e){super(),ct(this,e,S3,C3,st,{items:0,size:1,variant:2,max:3,defaultIcon:4,emptyIcon:5,onClick:6,placeholder:7,itemClass:8,class:9})}}const Ws={xs:"h-5 py-0.5",sm:"h-7 py-0.5",md:"h-10 py-1",lg:"h-12 py-1.5",xl:"h-16 py-2"},Wc={xs:"w-5 px-0.5",sm:"w-7 px-0.5",md:"w-10 px-1",lg:"w-12 px-1.5",xl:"w-16 px-2"},Ro=xs("#64748b"),I3=n=>({}),l1=n=>({});function A3(n){let e,i;return e=new Is({props:{class:"w-max rounded-full "+n[11],$$slots:{default:[z3]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2048&&(s.class="w-max rounded-full "+t[11]),r&65691&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function E3(n){let e,i;return e=new Is({props:{asChild:!0,$$slots:{default:[L3,({builder:t})=>({17:t}),({builder:t})=>t?131072:0]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&199835&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function P3(n){let e,i,t,r;const s=[O3,R3],l=[];function o(f,p){return f[10]!==void 0?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function M3(n){let e,i,t,r;const s=[G3,Z3],l=[];function o(f,p){return f[10]!==void 0?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function z3(n){let e,i;return e=new Ks({props:{item:n[0],size:n[1],defaultIcon:n[3],emptyIcon:n[4],class:n[7]?"":"!pointer-events-none"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&2&&(s.size=t[1]),r&8&&(s.defaultIcon=t[3]),r&16&&(s.emptyIcon=t[4]),r&128&&(s.class=t[7]?"":"!pointer-events-none"),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function D3(n){let e,i;return e=new Ks({props:{item:n[0],size:n[1],defaultIcon:n[3],emptyIcon:n[4],class:n[7]?"":"!pointer-events-none"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&2&&(s.size=t[1]),r&8&&(s.defaultIcon=t[3]),r&16&&(s.emptyIcon=t[4]),r&128&&(s.class=t[7]?"":"!pointer-events-none"),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function L3(n){let e,i;return e=new jr({props:{builders:[n[17]],class:"w-max rounded-full "+n[11],$$slots:{default:[D3]},$$scope:{ctx:n}}}),e.$on("click",n[15]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&131072&&(s.builders=[t[17]]),r&2048&&(s.class="w-max rounded-full "+t[11]),r&65691&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function R3(n){let e,i;return e=new Is({props:{class:"flex w-max flex-row items-center justify-center gap-2 rounded-full px-2 py-0.5 decoration-2 transition-all "+(n[7]&&"outline-none hover:bg-accent hover:outline-accent-foreground")+" "+n[11],$$slots:{default:[N3]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2176&&(s.class="flex w-max flex-row items-center justify-center gap-2 rounded-full px-2 py-0.5 decoration-2 transition-all "+(t[7]&&"outline-none hover:bg-accent hover:outline-accent-foreground")+" "+t[11]),r&65595&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function O3(n){let e,i;return e=new Is({props:{asChild:!0,$$slots:{default:[q3,({builder:t})=>({17:t}),({builder:t})=>t?131072:0]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&199867&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function F3(n){let e,i;return{c(){e=Ze("span"),i=Ct(n[5]),this.h()},l(t){e=Ge(t,"SPAN",{class:!0});var r=$e(e);i=St(r,n[5]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&32&&Ai(i,t[5])},d(t){t&&F(e)}}}function B3(n){var r;let e,i=((r=n[0])==null?void 0:r.name)+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&1&&i!==(i=((o=s[0])==null?void 0:o.name)+"")&&Ai(t,i)},d(s){s&&F(e)}}}function N3(n){let e,i,t,r;e=new Ks({props:{item:n[0],size:n[1],defaultIcon:n[3],emptyIcon:n[4],class:"!pointer-events-none"}});function s(f,p){var g;return(g=f[0])!=null&&g.name?B3:F3}let l=s(n),o=l(n);return{c(){ce(e.$$.fragment),i=it(),o.c(),t=He()},l(f){ue(e.$$.fragment,f),i=nt(f),o.l(f),t=He()},m(f,p){fe(e,f,p),Q(f,i,p),o.m(f,p),Q(f,t,p),r=!0},p(f,p){const g={};p&1&&(g.item=f[0]),p&2&&(g.size=f[1]),p&8&&(g.defaultIcon=f[3]),p&16&&(g.emptyIcon=f[4]),e.$set(g),l===(l=s(f))&&o?o.p(f,p):(o.d(1),o=l(f),o&&(o.c(),o.m(t.parentNode,t)))},i(f){r||(z(e.$$.fragment,f),r=!0)},o(f){D(e.$$.fragment,f),r=!1},d(f){f&&(F(i),F(t)),he(e,f),o.d(f)}}}function V3(n){let e,i;return{c(){e=Ze("span"),i=Ct(n[5]),this.h()},l(t){e=Ge(t,"SPAN",{class:!0});var r=$e(e);i=St(r,n[5]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&32&&Ai(i,t[5])},d(t){t&&F(e)}}}function j3(n){var r;let e,i=((r=n[0])==null?void 0:r.name)+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&1&&i!==(i=((o=s[0])==null?void 0:o.name)+"")&&Ai(t,i)},d(s){s&&F(e)}}}function U3(n){let e,i,t,r;e=new Ks({props:{item:n[0],size:n[1],defaultIcon:n[3],emptyIcon:n[4],class:"!pointer-events-none"}});function s(f,p){var g;return(g=f[0])!=null&&g.name?j3:V3}let l=s(n),o=l(n);return{c(){ce(e.$$.fragment),i=it(),o.c(),t=He()},l(f){ue(e.$$.fragment,f),i=nt(f),o.l(f),t=He()},m(f,p){fe(e,f,p),Q(f,i,p),o.m(f,p),Q(f,t,p),r=!0},p(f,p){const g={};p&1&&(g.item=f[0]),p&2&&(g.size=f[1]),p&8&&(g.defaultIcon=f[3]),p&16&&(g.emptyIcon=f[4]),e.$set(g),l===(l=s(f))&&o?o.p(f,p):(o.d(1),o=l(f),o&&(o.c(),o.m(t.parentNode,t)))},i(f){r||(z(e.$$.fragment,f),r=!0)},o(f){D(e.$$.fragment,f),r=!1},d(f){f&&(F(i),F(t)),he(e,f),o.d(f)}}}function q3(n){let e,i;return e=new jr({props:{builders:[n[17]],class:"flex w-max flex-row items-center justify-center gap-2 rounded-full px-2 py-0.5 decoration-2 transition-all "+(n[7]?"outline-none hover:bg-accent hover:outline-accent-foreground":"")+" "+n[11],$$slots:{default:[U3]},$$scope:{ctx:n}}}),e.$on("click",n[14]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&131072&&(s.builders=[t[17]]),r&2176&&(s.class="flex w-max flex-row items-center justify-center gap-2 rounded-full px-2 py-0.5 decoration-2 transition-all "+(t[7]?"outline-none hover:bg-accent hover:outline-accent-foreground":"")+" "+t[11]),r&65595&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Z3(n){let e,i;return e=new Is({props:{class:"w-max "+n[11],$$slots:{default:[X3]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2048&&(s.class="w-max "+t[11]),r&65697&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function G3(n){let e,i;return e=new Is({props:{asChild:!0,$$slots:{default:[Q3,({builder:t})=>({17:t}),({builder:t})=>t?131072:0]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&199713&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function H3(n){let e,i;return{c(){e=Ze("span"),i=Ct(n[5]),this.h()},l(t){e=Ge(t,"SPAN",{class:!0});var r=$e(e);i=St(r,n[5]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&32&&Ai(i,t[5])},d(t){t&&F(e)}}}function W3(n){var r;let e,i=((r=n[0])==null?void 0:r.name)+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&1&&i!==(i=((o=s[0])==null?void 0:o.name)+"")&&Ai(t,i)},d(s){s&&F(e)}}}function X3(n){let e,i;function t(l,o){var f;return(f=l[0])!=null&&f.name?W3:H3}let r=t(n),s=r(n);return{c(){e=Ze("span"),s.c(),this.h()},l(l){e=Ge(l,"SPAN",{class:!0});var o=$e(e);s.l(o),o.forEach(F),this.h()},h(){gt(e,"class",i="decoration-2 "+(n[7]&&"hover:underline"))},m(l,o){Q(l,e,o),s.m(e,null)},p(l,o){r===(r=t(l))&&s?s.p(l,o):(s.d(1),s=r(l),s&&(s.c(),s.m(e,null))),o&128&&i!==(i="decoration-2 "+(l[7]&&"hover:underline"))&&gt(e,"class",i)},d(l){l&&F(e),s.d()}}}function K3(n){let e,i;return{c(){e=Ze("span"),i=Ct(n[5]),this.h()},l(t){e=Ge(t,"SPAN",{class:!0});var r=$e(e);i=St(r,n[5]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&32&&Ai(i,t[5])},d(t){t&&F(e)}}}function J3(n){var r;let e,i=((r=n[0])==null?void 0:r.name)+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&1&&i!==(i=((o=s[0])==null?void 0:o.name)+"")&&Ai(t,i)},d(s){s&&F(e)}}}function Y3(n){let e;function i(s,l){var o;return(o=s[0])!=null&&o.name?J3:K3}let t=i(n),r=t(n);return{c(){r.c(),e=He()},l(s){r.l(s),e=He()},m(s,l){r.m(s,l),Q(s,e,l)},p(s,l){t===(t=i(s))&&r?r.p(s,l):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&F(e),r.d(s)}}}function Q3(n){let e,i;return e=new jr({props:{builders:[n[17]],variant:"link",class:n[11],$$slots:{default:[Y3]},$$scope:{ctx:n}}}),e.$on("click",n[13]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&131072&&(s.builders=[t[17]]),r&2048&&(s.class=t[11]),r&65569&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function c1(n){let e,i;return e=new Jc({props:{side:n[9],$$slots:{default:[e4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&512&&(s.side=t[9]),r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function $3(n){let e,i;return e=new hy({props:{item:n[0]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function e4(n){let e;const i=n[12].tooltip,t=Ke(i,n,n[16],l1),r=t||$3(n);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t?t.p&&(!e||l&65536)&&Je(t,i,s,s[16],e?Qe(i,s[16],l,I3):Ye(s[16]),l1):r&&r.p&&(!e||l&1)&&r.p(s,e?l:-1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function t4(n){let e,i,t,r,s;const l=[M3,P3,E3,A3],o=[];function f(g,C){return g[2]==="text"?0:g[2]==="full"?1:g[10]!==void 0?2:3}e=f(n),i=o[e]=l[e](n);let p=n[8]&&c1(n);return{c(){i.c(),t=it(),p&&p.c(),r=He()},l(g){i.l(g),t=nt(g),p&&p.l(g),r=He()},m(g,C){o[e].m(g,C),Q(g,t,C),p&&p.m(g,C),Q(g,r,C),s=!0},p(g,C){let A=e;e=f(g),e===A?o[e].p(g,C):(Tt(),D(o[A],1,1,()=>{o[A]=null}),It(),i=o[e],i?i.p(g,C):(i=o[e]=l[e](g),i.c()),z(i,1),i.m(t.parentNode,t)),g[8]?p?(p.p(g,C),C&256&&z(p,1)):(p=c1(g),p.c(),z(p,1),p.m(r.parentNode,r)):p&&(Tt(),D(p,1,1,()=>{p=null}),It())},i(g){s||(z(i),z(p),s=!0)},o(g){D(i),D(p),s=!1},d(g){g&&(F(t),F(r)),o[e].d(g),p&&p.d(g)}}}function i4(n){let e,i;return e=new Yc({props:{openDelay:100,closeDelay:100,group:n[6],$$slots:{default:[t4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&64&&(s.group=t[6]),r&69567&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function n4(n,e,i){let{$$slots:t={},$$scope:r}=e,{item:s=void 0}=e,{size:l="md"}=e,{variant:o="default"}=e,{defaultIcon:f=void 0}=e,{emptyIcon:p=void 0}=e,{placeholder:g="Not Selected"}=e,{group:C=void 0}=e,{hoverEffects:A=!0}=e,{showTooltip:V=!0}=e,{tooltipSide:U=void 0}=e,{onClick:G=void 0}=e,{class:Z=""}=e;const K=()=>G(s),q=()=>G(s),ie=()=>G(s);return n.$$set=oe=>{"item"in oe&&i(0,s=oe.item),"size"in oe&&i(1,l=oe.size),"variant"in oe&&i(2,o=oe.variant),"defaultIcon"in oe&&i(3,f=oe.defaultIcon),"emptyIcon"in oe&&i(4,p=oe.emptyIcon),"placeholder"in oe&&i(5,g=oe.placeholder),"group"in oe&&i(6,C=oe.group),"hoverEffects"in oe&&i(7,A=oe.hoverEffects),"showTooltip"in oe&&i(8,V=oe.showTooltip),"tooltipSide"in oe&&i(9,U=oe.tooltipSide),"onClick"in oe&&i(10,G=oe.onClick),"class"in oe&&i(11,Z=oe.class),"$$scope"in oe&&i(16,r=oe.$$scope)},[s,l,o,f,p,g,C,A,V,U,G,Z,t,K,q,ie,r]}class Sf extends lt{constructor(e){super(),ct(this,e,n4,i4,st,{item:0,size:1,variant:2,defaultIcon:3,emptyIcon:4,placeholder:5,group:6,hoverEffects:7,showTooltip:8,tooltipSide:9,onClick:10,class:11})}}function r4(n){let e,i;return e=new vd({props:{class:"h-4 w-4"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function s4(n){let e=(n[2]||n[1])+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&6&&e!==(e=(t[2]||t[1])+"")&&Ai(i,e)},d(t){t&&F(i)}}}function o4(n){let e,i,t,r;i=new iT({props:{$$slots:{default:[r4]},$$scope:{ctx:n}}});const s=n[5].default,l=Ke(s,n,n[12],null),o=l||s4(n);return{c(){e=Ze("span"),ce(i.$$.fragment),t=it(),o&&o.c(),this.h()},l(f){e=Ge(f,"SPAN",{class:!0});var p=$e(e);ue(i.$$.fragment,p),p.forEach(F),t=nt(f),o&&o.l(f),this.h()},h(){gt(e,"class","absolute left-2 flex h-3.5 w-3.5 items-center justify-center")},m(f,p){Q(f,e,p),fe(i,e,null),Q(f,t,p),o&&o.m(f,p),r=!0},p(f,p){const g={};p&4096&&(g.$$scope={dirty:p,ctx:f}),i.$set(g),l?l.p&&(!r||p&4096)&&Je(l,s,f,f[12],r?Qe(s,f[12],p,null):Ye(f[12]),null):o&&o.p&&(!r||p&6)&&o.p(f,r?p:-1)},i(f){r||(z(i.$$.fragment,f),z(o,f),r=!0)},o(f){D(i.$$.fragment,f),D(o,f),r=!1},d(f){f&&(F(e),F(t)),he(i),o&&o.d(f)}}}function a4(n){let e,i;const t=[{value:n[1]},{disabled:n[3]},{label:n[2]},{class:Lt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:opacity-50",n[0])},n[4]];let r={$$slots:{default:[o4]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new KS({props:r}),e.$on("click",n[6]),e.$on("keydown",n[7]),e.$on("focusin",n[8]),e.$on("focusout",n[9]),e.$on("pointerleave",n[10]),e.$on("pointermove",n[11]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&31?yt(t,[l&2&&{value:s[1]},l&8&&{disabled:s[3]},l&4&&{label:s[2]},l&1&&{class:Lt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:opacity-50",s[0])},l&16&&Ei(s[4])]):{};l&4102&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function l4(n,e,i){const t=["class","value","label","disabled"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{value:f}=e,{label:p=void 0}=e,{disabled:g=void 0}=e;function C(K){jt.call(this,n,K)}function A(K){jt.call(this,n,K)}function V(K){jt.call(this,n,K)}function U(K){jt.call(this,n,K)}function G(K){jt.call(this,n,K)}function Z(K){jt.call(this,n,K)}return n.$$set=K=>{e=re(re({},e),wt(K)),i(4,r=qe(e,t)),"class"in K&&i(0,o=K.class),"value"in K&&i(1,f=K.value),"label"in K&&i(2,p=K.label),"disabled"in K&&i(3,g=K.disabled),"$$scope"in K&&i(12,l=K.$$scope)},[o,f,p,g,r,s,C,A,V,U,G,Z,l]}class Oo extends lt{constructor(e){super(),ct(this,e,l4,a4,st,{class:0,value:1,label:2,disabled:3})}}function c4(n){let e,i;const t=n[7].default,r=Ke(t,n,n[9],null);return{c(){e=Ze("div"),r&&r.c(),this.h()},l(s){e=Ge(s,"DIV",{class:!0});var l=$e(e);r&&r.l(l),l.forEach(F),this.h()},h(){gt(e,"class","w-full p-1")},m(s,l){Q(s,e,l),r&&r.m(e,null),i=!0},p(s,l){r&&r.p&&(!i||l&512)&&Je(r,t,s,s[9],i?Qe(t,s[9],l,null):Ye(s[9]),null)},i(s){i||(z(r,s),i=!0)},o(s){D(r,s),i=!1},d(s){s&&F(e),r&&r.d(s)}}}function u4(n){let e,i;const t=[{inTransition:n[1]},{inTransitionConfig:n[2]},{outTransition:n[3]},{outTransitionConfig:n[4]},{sideOffset:n[0]},{class:Lt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md outline-none",n[5])},n[6]];let r={$$slots:{default:[c4]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new jS({props:r}),e.$on("keydown",n[8]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&127?yt(t,[l&2&&{inTransition:s[1]},l&4&&{inTransitionConfig:s[2]},l&8&&{outTransition:s[3]},l&16&&{outTransitionConfig:s[4]},l&1&&{sideOffset:s[0]},l&32&&{class:Lt("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md outline-none",s[5])},l&64&&Ei(s[6])]):{};l&512&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function f4(n,e,i){const t=["sideOffset","inTransition","inTransitionConfig","outTransition","outTransitionConfig","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{sideOffset:o=4}=e,{inTransition:f=gd}=e,{inTransitionConfig:p=void 0}=e,{outTransition:g=x2}=e,{outTransitionConfig:C={start:.95,opacity:0,duration:50}}=e,{class:A=void 0}=e;function V(U){jt.call(this,n,U)}return n.$$set=U=>{e=re(re({},e),wt(U)),i(6,r=qe(e,t)),"sideOffset"in U&&i(0,o=U.sideOffset),"inTransition"in U&&i(1,f=U.inTransition),"inTransitionConfig"in U&&i(2,p=U.inTransitionConfig),"outTransition"in U&&i(3,g=U.outTransition),"outTransitionConfig"in U&&i(4,C=U.outTransitionConfig),"class"in U&&i(5,A=U.class),"$$scope"in U&&i(9,l=U.$$scope)},[o,f,p,g,C,A,r,s,V,l]}class Tl extends lt{constructor(e){super(),ct(this,e,f4,u4,st,{sideOffset:0,inTransition:1,inTransitionConfig:2,outTransition:3,outTransitionConfig:4,class:5})}}const h4=n=>({builder:n&64}),u1=n=>({builder:n[6]});function d4(n){let e,i,t,r;const s=n[2].default,l=Ke(s,n,n[5],u1);return t=new wd({props:{class:"h-4 w-4 opacity-50"}}),{c(){l&&l.c(),e=it(),i=Ze("div"),ce(t.$$.fragment)},l(o){l&&l.l(o),e=nt(o),i=Ge(o,"DIV",{});var f=$e(i);ue(t.$$.fragment,f),f.forEach(F)},m(o,f){l&&l.m(o,f),Q(o,e,f),Q(o,i,f),fe(t,i,null),r=!0},p(o,f){l&&l.p&&(!r||f&96)&&Je(l,s,o,o[5],r?Qe(s,o[5],f,h4):Ye(o[5]),u1)},i(o){r||(z(l,o),z(t.$$.fragment,o),r=!0)},o(o){D(l,o),D(t.$$.fragment,o),r=!1},d(o){o&&(F(e),F(i)),l&&l.d(o),he(t)}}}function m4(n){let e,i;const t=[{class:Lt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid]:border-destructive [&>span]:line-clamp-1 data-[placeholder]:[&>span]:text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[d4,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new cT({props:r}),e.$on("click",n[3]),e.$on("keydown",n[4]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid]:border-destructive [&>span]:line-clamp-1 data-[placeholder]:[&>span]:text-muted-foreground",s[0])},l&2&&Ei(s[1])]):{};l&96&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function p4(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(5,l=g.$$scope)},[o,r,s,f,p,l]}class Il extends lt{constructor(e){super(),ct(this,e,p4,m4,st,{class:0})}}const xl=TS,Al=pT;function f1(n,e,i){const t=n.slice();return t[0]=e[i].value,t[9]=e[i].label,t}function h1(n,e,i){const t=n.slice();return t[0]=e[i].value,t[9]=e[i].label,t}function _4(n){let e,i;return e=new Al({props:{placeholder:"Select month"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function g4(n){let e=n[9]+"",i,t;return{c(){i=Ct(e),t=it()},l(r){i=St(r,e),t=nt(r)},m(r,s){Q(r,i,s),Q(r,t,s)},p:Ci,d(r){r&&(F(i),F(t))}}}function d1(n){let e,i;return e=new Oo({props:{value:n[0],label:n[9],$$slots:{default:[g4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function y4(n){let e,i,t=Zi(n[4]),r=[];for(let l=0;l<t.length;l+=1)r[l]=d1(h1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&16){t=Zi(l[4]);let f;for(f=0;f<t.length;f+=1){const p=h1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=d1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function b4(n){let e,i,t,r;return e=new Il({props:{"aria-label":"Select month",class:"w-[60%]",$$slots:{default:[_4]},$$scope:{ctx:n}}}),t=new Tl({props:{class:"max-h-[200px] overflow-y-auto",$$slots:{default:[y4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&16384&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&16384&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function v4(n){let e,i;return e=new Al({props:{placeholder:"Select year"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function w4(n){let e=n[9]+"",i,t;return{c(){i=Ct(e),t=it()},l(r){i=St(r,e),t=nt(r)},m(r,s){Q(r,i,s),Q(r,t,s)},p:Ci,d(r){r&&(F(i),F(t))}}}function m1(n){let e,i;return e=new Oo({props:{value:n[0],label:n[9],$$slots:{default:[w4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function x4(n){let e,i,t=Zi(n[5]),r=[];for(let l=0;l<t.length;l+=1)r[l]=m1(f1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&32){t=Zi(l[5]);let f;for(f=0;f<t.length;f+=1){const p=f1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=m1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function k4(n){let e,i,t,r;return e=new Il({props:{"aria-label":"Select year",class:"w-[40%]",$$slots:{default:[v4]},$$scope:{ctx:n}}}),t=new Tl({props:{class:"max-h-[200px] overflow-y-auto",$$slots:{default:[x4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&16384&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&16384&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function C4(n){let e,i,t,r;return e=new xl({props:{selected:n[2],items:n[4],onSelectedChange:n[6],$$slots:{default:[b4]},$$scope:{ctx:n}}}),t=new xl({props:{selected:n[3],items:n[5],onSelectedChange:n[7],$$slots:{default:[k4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&4&&(o.selected=s[2]),l&1&&(o.onSelectedChange=s[6]),l&16384&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&8&&(f.selected=s[3]),l&1&&(f.onSelectedChange=s[7]),l&16384&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function S4(n){let e,i;return e=new my({props:{class:"flex w-full items-center justify-between gap-2 "+n[1],$$slots:{default:[C4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&2&&(s.class="flex w-full items-center justify-between gap-2 "+t[1]),r&16397&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function T4(n,e,i){let t,r,{value:s=Wv(qc())}=e;const l=["January","February","March","April","May","June","July","August","September","October","November","December"].map((A,V)=>({value:V+1,label:A})),o=new T0("en-US",{month:"long"}),f=Array.from({length:100},(A,V)=>({label:String(new Date().getFullYear()-V),value:new Date().getFullYear()-V}));let{class:p=void 0}=e;const g=A=>{!A||!s||A.value!==(s==null?void 0:s.month)&&i(0,s=s.set({month:A.value}))},C=A=>{!A||!s||A.value!==(s==null?void 0:s.year)&&i(0,s=s.set({year:A.value}))};return n.$$set=A=>{"value"in A&&i(0,s=A.value),"class"in A&&i(1,p=A.class)},n.$$.update=()=>{n.$$.dirty&1&&i(3,t=s?{value:s.year,label:String(s.year)}:void 0),n.$$.dirty&1&&i(2,r=s?{value:s.month,label:o.format(s.toDate(qc()))}:void 0)},[s,p,r,t,l,f,g,C]}class I4 extends lt{constructor(e){super(),ct(this,e,T4,S4,st,{value:0,class:1})}}function p1(n,e,i){const t=n.slice();return t[12]=e[i],t}function _1(n,e,i){const t=n.slice();return t[15]=e[i],t}function g1(n,e,i){const t=n.slice();return t[18]=e[i],t}function y1(n,e,i){const t=n.slice();return t[21]=e[i],t}function A4(n){let e,i,t,r,s,l;return e=new jM({}),t=new my({}),s=new RM({}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment),r=it(),ce(s.$$.fragment)},l(o){ue(e.$$.fragment,o),i=nt(o),ue(t.$$.fragment,o),r=nt(o),ue(s.$$.fragment,o)},m(o,f){fe(e,o,f),Q(o,i,f),fe(t,o,f),Q(o,r,f),fe(s,o,f),l=!0},p:Ci,i(o){l||(z(e.$$.fragment,o),z(t.$$.fragment,o),z(s.$$.fragment,o),l=!0)},o(o){D(e.$$.fragment,o),D(t.$$.fragment,o),D(s.$$.fragment,o),l=!1},d(o){o&&(F(i),F(r)),he(e,o),he(t,o),he(s,o)}}}function E4(n){let e,i,t;function r(l){n[6](l)}let s={};return n[0]!==void 0&&(s.value=n[0]),e=new I4({props:s}),Dt.push(()=>Bi(e,"value",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&1&&(i=!0,f.value=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function P4(n){let e,i,t,r;const s=[E4,A4],l=[];function o(f,p){return f[3]==="dropdowns"?0:1}return e=o(n),i=l[e]=s[e](n),{c(){i.c(),t=He()},l(f){i.l(f),t=He()},m(f,p){l[e].m(f,p),Q(f,t,p),r=!0},p(f,p){let g=e;e=o(f),e===g?l[e].p(f,p):(Tt(),D(l[g],1,1,()=>{l[g]=null}),It(),i=l[e],i?i.p(f,p):(i=l[e]=s[e](f),i.c()),z(i,1),i.m(t.parentNode,t))},i(f){r||(z(i),r=!0)},o(f){D(i),r=!1},d(f){f&&F(t),l[e].d(f)}}}function M4(n){let e=n[21].slice(0,2)+"",i,t;return{c(){i=Ct(e),t=it()},l(r){i=St(r,e),t=nt(r)},m(r,s){Q(r,i,s),Q(r,t,s)},p(r,s){s&2048&&e!==(e=r[21].slice(0,2)+"")&&Ai(i,e)},d(r){r&&(F(i),F(t))}}}function b1(n){let e,i;return e=new EM({props:{$$slots:{default:[M4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16779264&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function z4(n){let e,i,t=Zi(n[11]),r=[];for(let l=0;l<t.length;l+=1)r[l]=b1(y1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&2048){t=Zi(l[11]);let f;for(f=0;f<t.length;f+=1){const p=y1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=b1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function D4(n){let e,i;return e=new dy({props:{class:"flex",$$slots:{default:[z4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16779264&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function L4(n){let e,i;return e=new Q4({props:{date:n[18],month:n[12].value}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1024&&(s.date=t[18]),r&1024&&(s.month=t[12].value),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function v1(n){let e,i;return e=new H4({props:{date:n[18],$$slots:{default:[L4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1024&&(s.date=t[18]),r&16778240&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function R4(n){let e,i,t=Zi(n[15]),r=[];for(let l=0;l<t.length;l+=1)r[l]=v1(g1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=it()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=nt(l)},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&1024){t=Zi(l[15]);let f;for(f=0;f<t.length;f+=1){const p=g1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=v1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function w1(n){let e,i;return e=new dy({props:{class:"mt-2 w-full",$$slots:{default:[R4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16778240&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function O4(n){let e,i,t=Zi(n[12].weeks),r=[];for(let l=0;l<t.length;l+=1)r[l]=w1(_1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&1024){t=Zi(l[12].weeks);let f;for(f=0;f<t.length;f+=1){const p=_1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=w1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function F4(n){let e,i,t,r,s;return e=new SM({props:{$$slots:{default:[D4]},$$scope:{ctx:n}}}),t=new wM({props:{$$slots:{default:[O4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment),r=it()},l(l){ue(e.$$.fragment,l),i=nt(l),ue(t.$$.fragment,l),r=nt(l)},m(l,o){fe(e,l,o),Q(l,i,o),fe(t,l,o),Q(l,r,o),s=!0},p(l,o){const f={};o&16779264&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const p={};o&16778240&&(p.$$scope={dirty:o,ctx:l}),t.$set(p)},i(l){s||(z(e.$$.fragment,l),z(t.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),D(t.$$.fragment,l),s=!1},d(l){l&&(F(i),F(r)),he(e,l),he(t,l)}}}function x1(n){let e,i;return e=new iM({props:{$$slots:{default:[F4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16780288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function B4(n){let e,i,t=Zi(n[10]),r=[];for(let l=0;l<t.length;l+=1)r[l]=x1(p1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o&3072){t=Zi(l[10]);let f;for(f=0;f<t.length;f+=1){const p=p1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=x1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function N4(n){let e,i,t,r;return e=new oM({props:{$$slots:{default:[P4]},$$scope:{ctx:n}}}),t=new cM({props:{$$slots:{default:[B4]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&16777225&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&16780288&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function V4(n){let e,i,t,r;const s=[{weekdayFormat:n[2]},{class:Lt("p-3 disabled:pointer-events-none disabled:cursor-not-allowed",n[4])},n[5]];function l(p){n[7](p)}function o(p){n[8](p)}let f={$$slots:{default:[N4,({months:p,weekdays:g})=>({10:p,11:g}),({months:p,weekdays:g})=>(p?1024:0)|(g?2048:0)]},$$scope:{ctx:n}};for(let p=0;p<s.length;p+=1)f=re(f,s[p]);return n[0]!==void 0&&(f.value=n[0]),n[1]!==void 0&&(f.placeholder=n[1]),e=new xk({props:f}),Dt.push(()=>Bi(e,"value",l)),Dt.push(()=>Bi(e,"placeholder",o)),e.$on("keydown",n[9]),{c(){ce(e.$$.fragment)},l(p){ue(e.$$.fragment,p)},m(p,g){fe(e,p,g),r=!0},p(p,[g]){const C=g&52?yt(s,[g&4&&{weekdayFormat:p[2]},g&16&&{class:Lt("p-3 disabled:pointer-events-none disabled:cursor-not-allowed",p[4])},g&32&&Ei(p[5])]):{};g&16780297&&(C.$$scope={dirty:g,ctx:p}),!i&&g&1&&(i=!0,C.value=p[0],Fi(()=>i=!1)),!t&&g&2&&(t=!0,C.placeholder=p[1],Fi(()=>t=!1)),e.$set(C)},i(p){r||(z(e.$$.fragment,p),r=!0)},o(p){D(e.$$.fragment,p),r=!1},d(p){he(e,p)}}}function j4(n,e,i){const t=["value","placeholder","weekdayFormat","variant","class"];let r=qe(e,t),{value:s=void 0}=e,{placeholder:l=void 0}=e,{weekdayFormat:o="short"}=e,{variant:f="dropdowns"}=e,{class:p=void 0}=e;function g(U){s=U,i(0,s)}function C(U){s=U,i(0,s)}function A(U){l=U,i(1,l)}function V(U){jt.call(this,n,U)}return n.$$set=U=>{e=re(re({},e),wt(U)),i(5,r=qe(e,t)),"value"in U&&i(0,s=U.value),"placeholder"in U&&i(1,l=U.placeholder),"weekdayFormat"in U&&i(2,o=U.weekdayFormat),"variant"in U&&i(3,f=U.variant),"class"in U&&i(4,p=U.class)},[s,l,o,f,p,r,g,C,A,V]}class U4 extends lt{constructor(e){super(),ct(this,e,j4,V4,st,{value:0,placeholder:1,weekdayFormat:2,variant:3,class:4})}}function q4(n){let e;const i=n[3].default,t=Ke(i,n,n[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,null):Ye(r[4]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Z4(n){let e,i;const t=[{date:n[0]},{class:Lt("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-month])]:bg-accent/50",n[1])},n[2]];let r={$$slots:{default:[q4]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Yk({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&7?yt(t,[l&1&&{date:s[0]},l&2&&{class:Lt("relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-month])]:bg-accent/50",s[1])},l&4&&Ei(s[2])]):{};l&16&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function G4(n,e,i){const t=["date","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{date:o}=e,{class:f=void 0}=e;return n.$$set=p=>{e=re(re({},e),wt(p)),i(2,r=qe(e,t)),"date"in p&&i(0,o=p.date),"class"in p&&i(1,f=p.class),"$$scope"in p&&i(4,l=p.$$scope)},[o,f,r,s,l]}class H4 extends lt{constructor(e){super(),ct(this,e,G4,Z4,st,{date:0,class:1})}}const W4=n=>({selected:n&128,disabled:n&256,unavailable:n&512,builder:n&1024}),k1=n=>({selected:n[7],disabled:n[8],unavailable:n[9],builder:n[10]});function X4(n){let e=n[0].day+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&1&&e!==(e=t[0].day+"")&&Ai(i,e)},d(t){t&&F(i)}}}function K4(n){let e;const i=n[4].default,t=Ke(i,n,n[6],k1),r=t||X4(n);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t?t.p&&(!e||l&1984)&&Je(t,i,s,s[6],e?Qe(i,s[6],l,W4):Ye(s[6]),k1):r&&r.p&&(!e||l&1)&&r.p(s,e?l:-1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function J4(n){let e,i;const t=[{date:n[0]},{month:n[1]},{class:Lt(Ts({variant:"ghost"}),"h-9 w-9 p-0 font-normal ","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-month]:pointer-events-none data-[outside-month]:text-muted-foreground data-[outside-month]:opacity-50 [&[data-outside-month][data-selected]]:bg-accent/50 [&[data-outside-month][data-selected]]:text-muted-foreground [&[data-outside-month][data-selected]]:opacity-30",n[2])},n[3]];let r={$$slots:{default:[K4,({selected:s,disabled:l,unavailable:o,builder:f})=>({7:s,8:l,9:o,10:f}),({selected:s,disabled:l,unavailable:o,builder:f})=>(s?128:0)|(l?256:0)|(o?512:0)|(f?1024:0)]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Pk({props:r}),e.$on("click",n[5]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&15?yt(t,[l&1&&{date:s[0]},l&2&&{month:s[1]},l&4&&{class:Lt(Ts({variant:"ghost"}),"h-9 w-9 p-0 font-normal ","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-month]:pointer-events-none data-[outside-month]:text-muted-foreground data-[outside-month]:opacity-50 [&[data-outside-month][data-selected]]:bg-accent/50 [&[data-outside-month][data-selected]]:text-muted-foreground [&[data-outside-month][data-selected]]:opacity-30",s[2])},l&8&&Ei(s[3])]):{};l&1985&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function Y4(n,e,i){const t=["date","month","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{date:o}=e,{month:f}=e,{class:p=void 0}=e;function g(C){jt.call(this,n,C)}return n.$$set=C=>{e=re(re({},e),wt(C)),i(3,r=qe(e,t)),"date"in C&&i(0,o=C.date),"month"in C&&i(1,f=C.month),"class"in C&&i(2,p=C.class),"$$scope"in C&&i(6,l=C.$$scope)},[o,f,p,r,s,g,l]}class Q4 extends lt{constructor(e){super(),ct(this,e,Y4,J4,st,{date:0,month:1,class:2})}}function $4(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function eM(n){let e,i;const t=[{class:Lt("w-full border-collapse space-y-1",n[0])},n[1]];let r={$$slots:{default:[$4]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Fk({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("w-full border-collapse space-y-1",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function tM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class iM extends lt{constructor(e){super(),ct(this,e,tM,eM,st,{class:0})}}function nM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function rM(n){let e,i;const t=[{class:Lt("relative flex w-full items-center justify-between pt-1",n[0])},n[1]];let r={$$slots:{default:[nM]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new SC({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("relative flex w-full items-center justify-between pt-1",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function sM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class oM extends lt{constructor(e){super(),ct(this,e,sM,rM,st,{class:0})}}function aM(n){let e,i,t;const r=n[3].default,s=Ke(r,n,n[2],null);let l=[{class:i=Lt("mt-4 flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0",n[0])},n[1]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("div"),s&&s.c(),this.h()},l(f){e=Ge(f,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),s&&s.m(e,null),t=!0},p(f,[p]){s&&s.p&&(!t||p&4)&&Je(s,r,f,f[2],t?Qe(r,f[2],p,null):Ye(f[2]),null),rt(e,o=yt(l,[(!t||p&1&&i!==(i=Lt("mt-4 flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0",f[0])))&&{class:i},p&2&&f[1]]))},i(f){t||(z(s,f),t=!0)},o(f){D(s,f),t=!1},d(f){f&&F(e),s&&s.d(f)}}}function lM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(2,l=f.$$scope)},[o,r,l,s]}class cM extends lt{constructor(e){super(),ct(this,e,lM,aM,st,{class:0})}}function uM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function fM(n){let e,i;const t=[{class:Lt("flex",n[0])},n[1]];let r={$$slots:{default:[uM]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new yC({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("flex",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function hM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class dy extends lt{constructor(e){super(),ct(this,e,hM,fM,st,{class:0})}}const dM=n=>({headingValue:n&16}),C1=n=>({headingValue:n[4]});function mM(n){let e=n[4]+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&16&&e!==(e=t[4]+"")&&Ai(i,e)},d(t){t&&F(i)}}}function pM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],C1),r=t||mM(n);return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t?t.p&&(!e||l&24)&&Je(t,i,s,s[3],e?Qe(i,s[3],l,dM):Ye(s[3]),C1):r&&r.p&&(!e||l&16)&&r.p(s,e?l:-1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function _M(n){let e,i;const t=[{class:Lt("text-sm font-medium",n[0])},n[1]];let r={$$slots:{default:[pM,({headingValue:s})=>({4:s}),({headingValue:s})=>s?16:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new DC({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("text-sm font-medium",s[0])},l&2&&Ei(s[1])]):{};l&24&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function gM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class my extends lt{constructor(e){super(),ct(this,e,gM,_M,st,{class:0})}}function yM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function bM(n){let e,i;const t=[{class:Lt(n[0])},n[1]];let r={$$slots:{default:[yM]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Zk({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function vM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class wM extends lt{constructor(e){super(),ct(this,e,vM,bM,st,{class:0})}}function xM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function kM(n){let e,i;const t=[{class:Lt(n[0])},n[1]];let r={$$slots:{default:[xM]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new rC({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function CM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class SM extends lt{constructor(e){super(),ct(this,e,CM,kM,st,{class:0})}}function TM(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function IM(n){let e,i;const t=[{class:Lt("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[TM]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new fC({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("w-9 rounded-md text-[0.8rem] font-normal text-muted-foreground",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function AM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class EM extends lt{constructor(e){super(),ct(this,e,AM,IM,st,{class:0})}}const PM=n=>({builder:n&32}),S1=n=>({builder:n[5]});function MM(n){let e,i;return e=new k2({props:{class:"h-4 w-4"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function zM(n){let e;const i=n[2].default,t=Ke(i,n,n[4],S1),r=t||MM();return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t&&t.p&&(!e||l&48)&&Je(t,i,s,s[4],e?Qe(i,s[4],l,PM):Ye(s[4]),S1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function DM(n){let e,i;const t=[{class:Lt(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",n[0])},n[1]];let r={$$slots:{default:[zM,({builder:s})=>({5:s}),({builder:s})=>s?32:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new VC({props:r}),e.$on("click",n[3]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s[0])},l&2&&Ei(s[1])]):{};l&48&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function LM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(p){jt.call(this,n,p)}return n.$$set=p=>{e=re(re({},e),wt(p)),i(1,r=qe(e,t)),"class"in p&&i(0,o=p.class),"$$scope"in p&&i(4,l=p.$$scope)},[o,r,s,f,l]}class RM extends lt{constructor(e){super(),ct(this,e,LM,DM,st,{class:0})}}const OM=n=>({builder:n&32}),T1=n=>({builder:n[5]});function FM(n){let e,i;return e=new C2({props:{class:"h-4 w-4"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function BM(n){let e;const i=n[2].default,t=Ke(i,n,n[4],T1),r=t||FM();return{c(){r&&r.c()},l(s){r&&r.l(s)},m(s,l){r&&r.m(s,l),e=!0},p(s,l){t&&t.p&&(!e||l&48)&&Je(t,i,s,s[4],e?Qe(i,s[4],l,OM):Ye(s[4]),T1)},i(s){e||(z(r,s),e=!0)},o(s){D(r,s),e=!1},d(s){r&&r.d(s)}}}function NM(n){let e,i;const t=[{class:Lt(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",n[0])},n[1]];let r={$$slots:{default:[BM,({builder:s})=>({5:s}),({builder:s})=>s?32:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new WC({props:r}),e.$on("click",n[3]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s[0])},l&2&&Ei(s[1])]):{};l&48&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function VM(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(p){jt.call(this,n,p)}return n.$$set=p=>{e=re(re({},e),wt(p)),i(1,r=qe(e,t)),"class"in p&&i(0,o=p.class),"$$scope"in p&&i(4,l=p.$$scope)},[o,r,s,f,l]}class jM extends lt{constructor(e){super(),ct(this,e,VM,NM,st,{class:0})}}function UM(n){let e,i,t=(n[0]?n[7].format(n[0].toDate(qc())):n[1])+"",r,s;return e=new S2({props:{class:"mr-2 h-4 w-4"}}),{c(){ce(e.$$.fragment),i=it(),r=Ct(t)},l(l){ue(e.$$.fragment,l),i=nt(l),r=St(l,t)},m(l,o){fe(e,l,o),Q(l,i,o),Q(l,r,o),s=!0},p(l,o){(!s||o&3)&&t!==(t=(l[0]?l[7].format(l[0].toDate(qc())):l[1])+"")&&Ai(r,t)},i(l){s||(z(e.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),s=!1},d(l){l&&(F(i),F(r)),he(e,l)}}}function qM(n){let e,i;return e=new jr({props:{"aria-expanded":n[6],id:n[2],disabled:n[5],variant:"outline",class:Lt("w-[280px] justify-start text-left font-normal",!n[0]&&"text-muted-foreground",n[3]),builders:[n[13]],$$slots:{default:[UM]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&64&&(s["aria-expanded"]=t[6]),r&4&&(s.id=t[2]),r&32&&(s.disabled=t[5]),r&9&&(s.class=Lt("w-[280px] justify-start text-left font-normal",!t[0]&&"text-muted-foreground",t[3])),r&8192&&(s.builders=[t[13]]),r&16387&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function ZM(n){let e,i,t;function r(l){n[11](l)}let s={initialFocus:!0,onValueChange:n[4],disabled:n[5],minValue:n[9],maxValue:n[10],weekStartsOn:n[8]};return n[0]!==void 0&&(s.value=n[0]),e=new U4({props:s}),Dt.push(()=>Bi(e,"value",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};o&16&&(f.onValueChange=l[4]),o&32&&(f.disabled=l[5]),!i&&o&1&&(i=!0,f.value=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function GM(n){let e,i,t,r;return e=new Kc({props:{asChild:!0,disabled:n[5],$$slots:{default:[qM,({builder:s})=>({13:s}),({builder:s})=>s?8192:0]},$$scope:{ctx:n}}}),t=new yf({props:{class:"w-auto p-0",$$slots:{default:[ZM]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&32&&(o.disabled=s[5]),l&24687&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&16433&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function HM(n){let e,i,t;function r(l){n[12](l)}let s={openFocus:!0,$$slots:{default:[GM]},$$scope:{ctx:n}};return n[6]!==void 0&&(s.open=n[6]),e=new gf({props:s}),Dt.push(()=>Bi(e,"open",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,[o]){const f={};o&16511&&(f.$$scope={dirty:o,ctx:l}),!i&&o&64&&(i=!0,f.open=l[6],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function WM(n,e,i){const t=new T0(navigator.language||"en-GB",{dateStyle:"long"}),r=Xv(navigator.language||"en-GB");let{value:s=void 0}=e,l,o,{placeholder:f="Select a date"}=e,{id:p=void 0}=e,{class:g=""}=e,C=!1,{onChange:A=()=>{}}=e,{disabled:V=!1}=e;function U(Z){s=Z,i(0,s)}function G(Z){C=Z,i(6,C)}return n.$$set=Z=>{"value"in Z&&i(0,s=Z.value),"placeholder"in Z&&i(1,f=Z.placeholder),"id"in Z&&i(2,p=Z.id),"class"in Z&&i(3,g=Z.class),"onChange"in Z&&i(4,A=Z.onChange),"disabled"in Z&&i(5,V=Z.disabled)},[s,f,p,g,A,V,C,t,r,l,o,U,G]}class Dd extends lt{constructor(e){super(),ct(this,e,WM,HM,st,{value:0,placeholder:1,id:2,class:3,onChange:4,disabled:5})}}const mf={xs:"h-6 gap-1",sm:"h-9 gap-2",md:"h-11 gap-2",lg:"h-13 gap-2",xl:"h-16 gap-2"},XM=yn.fromString("lucide:plus"),Tf=yn.fromString("lucide:circle-help"),KM=yn.fromString("lucide:x");function I1(n){let e,i;return e=new Ks({props:{item:n[0],defaultIcon:n[4],size:n[3],class:"!pointer-events-none"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&16&&(s.defaultIcon=t[4]),r&8&&(s.size=t[3]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function A1(n){var r;let e,i=(((r=n[0])==null?void 0:r.name)||n[5])+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&33&&i!==(i=(((o=s[0])==null?void 0:o.name)||s[5])+"")&&Ai(t,i)},d(s){s&&F(e)}}}function JM(n){let e,i,t,r,s=n[1]&&I1(n),l=n[2]&&A1(n);return t=new vd({props:{class:"ml-auto "+(n[7](n[0])?"":"text-transparent")}}),{c(){s&&s.c(),e=it(),l&&l.c(),i=it(),ce(t.$$.fragment)},l(o){s&&s.l(o),e=nt(o),l&&l.l(o),i=nt(o),ue(t.$$.fragment,o)},m(o,f){s&&s.m(o,f),Q(o,e,f),l&&l.m(o,f),Q(o,i,f),fe(t,o,f),r=!0},p(o,f){o[1]?s?(s.p(o,f),f&2&&z(s,1)):(s=I1(o),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(Tt(),D(s,1,1,()=>{s=null}),It()),o[2]?l?l.p(o,f):(l=A1(o),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null);const p={};f&129&&(p.class="ml-auto "+(o[7](o[0])?"":"text-transparent")),t.$set(p)},i(o){r||(z(s),z(t.$$.fragment,o),r=!0)},o(o){D(s),D(t.$$.fragment,o),r=!1},d(o){o&&(F(e),F(i)),s&&s.d(o),l&&l.d(o),he(t,o)}}}function YM(n){let e,i;return e=new sE({props:{class:"flex flex-row items-center justify-start gap-2 "+n[6],onSelect:n[8],value:n[0]?`${n[0].name} (${n[0].uuid})`:"",$$slots:{default:[JM]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&64&&(s.class="flex flex-row items-center justify-start gap-2 "+t[6]),r&256&&(s.onSelect=t[8]),r&1&&(s.value=t[0]?`${t[0].name} (${t[0].uuid})`:""),r&703&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function QM(n,e,i){let{option:t=void 0}=e,{showImage:r=!0}=e,{showName:s=!0}=e,{size:l="md"}=e,{placeholderIcon:o=Tf}=e,{placeholderText:f="Not Selected"}=e,{className:p=""}=e,{isChecked:g}=e,{onSelect:C=()=>{}}=e;return n.$$set=A=>{"option"in A&&i(0,t=A.option),"showImage"in A&&i(1,r=A.showImage),"showName"in A&&i(2,s=A.showName),"size"in A&&i(3,l=A.size),"placeholderIcon"in A&&i(4,o=A.placeholderIcon),"placeholderText"in A&&i(5,f=A.placeholderText),"className"in A&&i(6,p=A.className),"isChecked"in A&&i(7,g=A.isChecked),"onSelect"in A&&i(8,C=A.onSelect)},[t,r,s,l,o,f,p,g,C]}class py extends lt{constructor(e){super(),ct(this,e,QM,YM,st,{option:0,showImage:1,showName:2,size:3,placeholderIcon:4,placeholderText:5,className:6,isChecked:7,onSelect:8})}}function E1(n,e,i){const t=n.slice();return t[20]=e[i],t}function $M(n){let e;return{c(){e=Ct("No items found")},l(i){e=St(i,"No items found")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function P1(n){let e,i;function t(){return n[15](n[20],n[19])}const r=[{option:n[20],size:n[1],placeholderIcon:n[2],isChecked:n[6],onSelect:t}];let s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return e=new py({props:s}),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),i=!0},p(l,o){n=l;const f=o&526182?yt(r,[{option:n[20],size:n[1],placeholderIcon:n[2],isChecked:n[6],onSelect:t}]):{};e.$set(f)},i(l){i||(z(e.$$.fragment,l),i=!0)},o(l){D(e.$$.fragment,l),i=!1},d(l){he(e,l)}}}function M1(n){let e,i;function t(){return n[16](n[19])}const r=[{option:void 0,size:n[1],placeholderIcon:n[3],isChecked:n[6],onSelect:t}];let s={};for(let l=0;l<r.length;l+=1)s=re(s,r[l]);return e=new py({props:s}),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),i=!0},p(l,o){n=l;const f=o&525418?yt(r,[{option:void 0,size:n[1],placeholderIcon:n[3],isChecked:n[6],onSelect:t}]):{};e.$set(f)},i(l){i||(z(e.$$.fragment,l),i=!0)},o(l){D(e.$$.fragment,l),i=!1},d(l){he(e,l)}}}function e5(n){let e,i,t,r=Zi(n[9]),s=[];for(let f=0;f<r.length;f+=1)s[f]=P1(E1(n,r,f));const l=f=>D(s[f],1,1,()=>{s[f]=null});let o=n[4]&&M1(n);return{c(){for(let f=0;f<s.length;f+=1)s[f].c();e=it(),o&&o.c(),i=He()},l(f){for(let p=0;p<s.length;p+=1)s[p].l(f);e=nt(f),o&&o.l(f),i=He()},m(f,p){for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(f,p);Q(f,e,p),o&&o.m(f,p),Q(f,i,p),t=!0},p(f,p){if(p&526182){r=Zi(f[9]);let g;for(g=0;g<r.length;g+=1){const C=E1(f,r,g);s[g]?(s[g].p(C,p),z(s[g],1)):(s[g]=P1(C),s[g].c(),z(s[g],1),s[g].m(e.parentNode,e))}for(Tt(),g=r.length;g<s.length;g+=1)l(g);It()}f[4]?o?(o.p(f,p),p&16&&z(o,1)):(o=M1(f),o.c(),z(o,1),o.m(i.parentNode,i)):o&&(Tt(),D(o,1,1,()=>{o=null}),It())},i(f){if(!t){for(let p=0;p<r.length;p+=1)z(s[p]);z(o),t=!0}},o(f){s=s.filter(Boolean);for(let p=0;p<s.length;p+=1)D(s[p]);D(o),t=!1},d(f){f&&(F(e),F(i)),Yn(s,f),o&&o.d(f)}}}function t5(n){let e,i,t,r,s,l;return e=new lE({props:{placeholder:"Search"}}),t=new JA({props:{$$slots:{default:[$M]},$$scope:{ctx:n}}}),s=new eE({props:{class:"max-h-[250px] overflow-y-scroll",$$slots:{default:[e5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment),r=it(),ce(s.$$.fragment)},l(o){ue(e.$$.fragment,o),i=nt(o),ue(t.$$.fragment,o),r=nt(o),ue(s.$$.fragment,o)},m(o,f){fe(e,o,f),Q(o,i,f),fe(t,o,f),Q(o,r,f),fe(s,o,f),l=!0},p(o,f){const p={};f&262144&&(p.$$scope={dirty:f,ctx:o}),t.$set(p);const g={};f&787326&&(g.$$scope={dirty:f,ctx:o}),s.$set(g)},i(o){l||(z(e.$$.fragment,o),z(t.$$.fragment,o),z(s.$$.fragment,o),l=!0)},o(o){D(e.$$.fragment,o),D(t.$$.fragment,o),D(s.$$.fragment,o),l=!1},d(o){o&&(F(i),F(r)),he(e,o),he(t,o),he(s,o)}}}function i5(n){let e,i;return e=new HA({props:{$$slots:{default:[t5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&787326&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function n5(n){let e,i,t;const r=n[14].default,s=Ke(r,n,n[18],null);return i=new yf({props:{class:"w-[250px] p-0 "+n[7],$$slots:{default:[i5]},$$scope:{ctx:n}}}),{c(){s&&s.c(),e=it(),ce(i.$$.fragment)},l(l){s&&s.l(l),e=nt(l),ue(i.$$.fragment,l)},m(l,o){s&&s.m(l,o),Q(l,e,o),fe(i,l,o),t=!0},p(l,o){s&&s.p&&(!t||o&262144)&&Je(s,r,l,l[18],t?Qe(r,l[18],o,null):Ye(l[18]),null);const f={};o&128&&(f.class="w-[250px] p-0 "+l[7]),o&787326&&(f.$$scope={dirty:o,ctx:l}),i.$set(f)},i(l){t||(z(s,l),z(i.$$.fragment,l),t=!0)},o(l){D(s,l),D(i.$$.fragment,l),t=!1},d(l){l&&F(e),s&&s.d(l),he(i,l)}}}function r5(n){let e,i,t;function r(l){n[17](l)}let s={$$slots:{default:[n5,({ids:l})=>({19:l}),({ids:l})=>l?524288:0]},$$scope:{ctx:n}};return n[0]!==void 0&&(s.open=n[0]),e=new gf({props:s}),Dt.push(()=>Bi(e,"open",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,[o]){const f={};o&787454&&(f.$$scope={dirty:o,ctx:l}),!i&&o&1&&(i=!0,f.open=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function s5(n,e,i){let t,{$$slots:r={},$$scope:s}=e,{open:l=!1}=e,{options:o=[]}=e,{size:f="md"}=e,{placeholderIcon:p=Tf}=e,{clearIcon:g=KM}=e,{allowUnselect:C=!0}=e,{optionsCmp:A=()=>0}=e,{optionsFilter:V=()=>!0}=e,{onSelect:U=()=>{}}=e,{isChecked:G}=e,{className:Z=""}=e,{closeOnSelect:K=!0}=e;function q(pe){i(0,l=!1),Ss().then(()=>{var Ie;(Ie=document.getElementById(pe))==null||Ie.focus()})}const ie=(pe,Ie)=>{U(pe),K&&q(Ie.trigger)},oe=pe=>{U(void 0),q(pe.trigger)};function se(pe){l=pe,i(0,l)}return n.$$set=pe=>{"open"in pe&&i(0,l=pe.open),"options"in pe&&i(11,o=pe.options),"size"in pe&&i(1,f=pe.size),"placeholderIcon"in pe&&i(2,p=pe.placeholderIcon),"clearIcon"in pe&&i(3,g=pe.clearIcon),"allowUnselect"in pe&&i(4,C=pe.allowUnselect),"optionsCmp"in pe&&i(12,A=pe.optionsCmp),"optionsFilter"in pe&&i(13,V=pe.optionsFilter),"onSelect"in pe&&i(5,U=pe.onSelect),"isChecked"in pe&&i(6,G=pe.isChecked),"className"in pe&&i(7,Z=pe.className),"closeOnSelect"in pe&&i(8,K=pe.closeOnSelect),"$$scope"in pe&&i(18,s=pe.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&i(9,t=o.filter(V).sort(A))},[l,f,p,g,C,U,G,Z,K,t,q,o,A,V,r,ie,oe,se,s]}class _y extends lt{constructor(e){super(),ct(this,e,s5,r5,st,{open:0,options:11,size:1,placeholderIcon:2,clearIcon:3,allowUnselect:4,optionsCmp:12,optionsFilter:13,onSelect:5,isChecked:6,className:7,closeOnSelect:8})}}function z1(n){let e,i;return e=new Ks({props:{item:n[0],class:"!pointer-events-none",size:n[5],emptyIcon:n[6],defaultIcon:n[6]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&32&&(s.size=t[5]),r&64&&(s.emptyIcon=t[6]),r&64&&(s.defaultIcon=t[6]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function D1(n){let e;function i(s,l){var o;return(o=s[0])!=null&&o.name?a5:o5}let t=i(n),r=t(n);return{c(){r.c(),e=He()},l(s){r.l(s),e=He()},m(s,l){r.m(s,l),Q(s,e,l)},p(s,l){t===(t=i(s))&&r?r.p(s,l):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&F(e),r.d(s)}}}function o5(n){let e,i;return{c(){e=Ze("span"),i=Ct(n[7]),this.h()},l(t){e=Ge(t,"SPAN",{class:!0});var r=$e(e);i=St(r,n[7]),r.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r),ut(e,i)},p(t,r){r&128&&Ai(i,t[7])},d(t){t&&F(e)}}}function a5(n){var r;let e,i=((r=n[0])==null?void 0:r.name)+"",t;return{c(){e=Ze("span"),t=Ct(i)},l(s){e=Ge(s,"SPAN",{});var l=$e(e);t=St(l,i),l.forEach(F)},m(s,l){Q(s,e,l),ut(e,t)},p(s,l){var o;l&1&&i!==(i=((o=s[0])==null?void 0:o.name)+"")&&Ai(t,i)},d(s){s&&F(e)}}}function L1(n){let e,i;return e=new wd({props:{class:"text-muted-foreground transition-all group-hover/selector:text-foreground "+(n[1]?"rotate-180":"")}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&2&&(s.class="text-muted-foreground transition-all group-hover/selector:text-foreground "+(t[1]?"rotate-180":"")),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function l5(n){let e,i,t,r,s=n[14]&&z1(n),l=n[13]&&D1(n),o=n[15]&&L1(n);return{c(){s&&s.c(),e=it(),l&&l.c(),i=it(),o&&o.c(),t=He()},l(f){s&&s.l(f),e=nt(f),l&&l.l(f),i=nt(f),o&&o.l(f),t=He()},m(f,p){s&&s.m(f,p),Q(f,e,p),l&&l.m(f,p),Q(f,i,p),o&&o.m(f,p),Q(f,t,p),r=!0},p(f,p){f[14]?s?(s.p(f,p),p&16384&&z(s,1)):(s=z1(f),s.c(),z(s,1),s.m(e.parentNode,e)):s&&(Tt(),D(s,1,1,()=>{s=null}),It()),f[13]?l?l.p(f,p):(l=D1(f),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),f[15]?o?(o.p(f,p),p&32768&&z(o,1)):(o=L1(f),o.c(),z(o,1),o.m(t.parentNode,t)):o&&(Tt(),D(o,1,1,()=>{o=null}),It())},i(f){r||(z(s),z(o),r=!0)},o(f){D(s),D(o),r=!1},d(f){f&&(F(e),F(i),F(t)),s&&s.d(f),l&&l.d(f),o&&o.d(f)}}}function c5(n){let e,i;return e=new jr({props:{id:n[9],"aria-expanded":n[1],builders:[n[21]],class:"group/selector !h-max !w-max "+mf[n[5]]+" overflow-visible rounded-full font-normal outline-none transition-all hover:outline-accent-foreground "+(n[4]==="full"?"px-1.5 py-1":"p-0.5")+" "+(n[4]==="compact"&&"aspect-square !p-0")+" "+(n[1]&&"outline-accent-foreground")+" "+n[12],role:"combobox",variant:n[3],$$slots:{default:[l5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&512&&(s.id=t[9]),r&2&&(s["aria-expanded"]=t[1]),r&2097152&&(s.builders=[t[21]]),r&4146&&(s.class="group/selector !h-max !w-max "+mf[t[5]]+" overflow-visible rounded-full font-normal outline-none transition-all hover:outline-accent-foreground "+(t[4]==="full"?"px-1.5 py-1":"p-0.5")+" "+(t[4]==="compact"&&"aspect-square !p-0")+" "+(t[1]&&"outline-accent-foreground")+" "+t[12]),r&8&&(s.variant=t[3]),r&4251875&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function u5(n){let e,i;return e=new Kc({props:{asChild:!0,$$slots:{default:[c5,({builder:t})=>({21:t}),({builder:t})=>t?2097152:0]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&6353659&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function f5(n){let e,i;return e=new hy({props:{item:n[0]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function h5(n){let e,i,t,r;return e=new Is({props:{class:"w-max",$$slots:{default:[u5]},$$scope:{ctx:n}}}),t=new Jc({props:{$$slots:{default:[f5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&4256507&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&4194305&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function d5(n){let e,i;return e=new Yc({props:{$$slots:{default:[h5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&4256507&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function m5(n){let e,i,t;const r=[{options:n[2],size:n[5],placeholderIcon:n[6],allowUnselect:n[8],optionsCmp:n[10],optionsFilter:n[11],onSelect:n[16],isChecked:n[17]}];function s(o){n[20](o)}let l={$$slots:{default:[d5]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)l=re(l,r[o]);return n[1]!==void 0&&(l.open=n[1]),e=new _y({props:l}),Dt.push(()=>Bi(e,"open",s)),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),t=!0},p(o,[f]){const p=f&200036?yt(r,[{options:o[2],size:o[5],placeholderIcon:o[6],allowUnselect:o[8],optionsCmp:o[10],optionsFilter:o[11],onSelect:o[16],isChecked:o[17]}]):{};f&4256507&&(p.$$scope={dirty:f,ctx:o}),!i&&f&2&&(i=!0,p.open=o[1],Fi(()=>i=!1)),e.$set(p)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function p5(n,e,i){let t,r,s,l,o,{value:f=void 0}=e,{options:p=[]}=e,{colors:g="ghost"}=e,{variant:C="default"}=e,{size:A="md"}=e,{placeholderIcon:V=Tf}=e,{placeholderText:U="Select"}=e,{allowUnselect:G=!0}=e,{id:Z=void 0}=e,{transition:K=(Ce,je)=>je}=e,{optionsCmp:q=()=>0}=e,{optionsFilter:ie=()=>!0}=e,{onSelected:oe=()=>{}}=e,{open:se=!1}=e,{class:pe=""}=e;function Ie(Ce){se=Ce,i(1,se)}return n.$$set=Ce=>{"value"in Ce&&i(0,f=Ce.value),"options"in Ce&&i(2,p=Ce.options),"colors"in Ce&&i(3,g=Ce.colors),"variant"in Ce&&i(4,C=Ce.variant),"size"in Ce&&i(5,A=Ce.size),"placeholderIcon"in Ce&&i(6,V=Ce.placeholderIcon),"placeholderText"in Ce&&i(7,U=Ce.placeholderText),"allowUnselect"in Ce&&i(8,G=Ce.allowUnselect),"id"in Ce&&i(9,Z=Ce.id),"transition"in Ce&&i(18,K=Ce.transition),"optionsCmp"in Ce&&i(10,q=Ce.optionsCmp),"optionsFilter"in Ce&&i(11,ie=Ce.optionsFilter),"onSelected"in Ce&&i(19,oe=Ce.onSelected),"open"in Ce&&i(1,se=Ce.open),"class"in Ce&&i(12,pe=Ce.class)},n.$$.update=()=>{n.$$.dirty&786433&&i(16,r=Ce=>{i(0,f=K(f,Ce)),oe(f)}),n.$$.dirty&1&&i(17,t=Ce=>Ce===f),n.$$.dirty&16&&i(15,s=C!=="compact"),n.$$.dirty&16&&i(14,l=C!=="text"),n.$$.dirty&16&&i(13,o=["text","full"].includes(C))},[f,se,p,g,C,A,V,U,G,Z,q,ie,pe,o,l,s,r,t,K,oe,Ie]}class Ld extends lt{constructor(e){super(),ct(this,e,p5,m5,st,{value:0,options:2,colors:3,variant:4,size:5,placeholderIcon:6,placeholderText:7,allowUnselect:8,id:9,transition:18,optionsCmp:10,optionsFilter:11,onSelected:19,open:1,class:12})}}function _5(n){let e,i,t,r;return e=new T3({props:{variant:n[2],items:n[0],placeholder:n[6],emptyIcon:n[4],defaultIcon:n[5],class:"pr-0"}}),t=new wd({props:{class:"text-muted-foreground transition-all group-hover/selector:text-foreground "+(n[11]&&"rotate-180")+" "+(n[2]==="compact"&&"ml-5")}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&4&&(o.variant=s[2]),l&1&&(o.items=s[0]),l&64&&(o.placeholder=s[6]),l&16&&(o.emptyIcon=s[4]),l&32&&(o.defaultIcon=s[5]),e.$set(o);const f={};l&2052&&(f.class="text-muted-foreground transition-all group-hover/selector:text-foreground "+(s[11]&&"rotate-180")+" "+(s[2]==="compact"&&"ml-5")),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function g5(n){let e,i;return e=new jr({props:{id:n[7],"aria-expanded":n[11],builders:[n[17]],class:"group/selector !h-max w-max py-0.5 pl-0 pr-2 font-normal "+mf[n[3]]+" overflow-visible rounded-full outline-none transition-all hover:outline-accent-foreground "+(n[11]&&"outline-accent-foreground"),role:"combobox",variant:"ghost",$$slots:{default:[_5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&128&&(s.id=t[7]),r&2048&&(s["aria-expanded"]=t[11]),r&131072&&(s.builders=[t[17]]),r&2056&&(s.class="group/selector !h-max w-max py-0.5 pl-0 pr-2 font-normal "+mf[t[3]]+" overflow-visible rounded-full outline-none transition-all hover:outline-accent-foreground "+(t[11]&&"outline-accent-foreground")),r&264309&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function y5(n){let e,i;return e=new Kc({props:{asChild:!0,$$slots:{default:[g5,({builder:t})=>({17:t}),({builder:t})=>t?131072:0]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&395517&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function b5(n){let e,i,t;const r=[{options:n[1],size:n[3],placeholderIcon:n[5],allowUnselect:!1,optionsCmp:n[8],optionsFilter:n[9],onSelect:n[12],isChecked:n[13],className:n[10],closeOnSelect:!1}];function s(o){n[16](o)}let l={$$slots:{default:[y5]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)l=re(l,r[o]);return n[11]!==void 0&&(l.open=n[11]),e=new _y({props:l}),Dt.push(()=>Bi(e,"open",s)),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),t=!0},p(o,[f]){const p=f&14122?yt(r,[{options:o[1],size:o[3],placeholderIcon:o[5],allowUnselect:!1,optionsCmp:o[8],optionsFilter:o[9],onSelect:o[12],isChecked:o[13],className:o[10],closeOnSelect:!1}]):{};f&264445&&(p.$$scope={dirty:f,ctx:o}),!i&&f&2048&&(i=!0,p.open=o[11],Fi(()=>i=!1)),e.$set(p)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function v5(n,e,i){let t,r,{value:s=[]}=e,{options:l=[]}=e,{variant:o="default"}=e,{size:f="md"}=e,{plusIcon:p=XM}=e,{placeholderIcon:g=Tf}=e,{placeholderText:C="Select"}=e,{id:A=void 0}=e,{optionsCmp:V=()=>0}=e,{valuesCmp:U=(oe,se)=>oe.name.localeCompare(se.name)}=e,{onChanged:G=()=>{}}=e,{optionsFilter:Z=()=>!0}=e,{class:K=""}=e,q=!1;function ie(oe){q=oe,i(11,q)}return n.$$set=oe=>{"value"in oe&&i(0,s=oe.value),"options"in oe&&i(1,l=oe.options),"variant"in oe&&i(2,o=oe.variant),"size"in oe&&i(3,f=oe.size),"plusIcon"in oe&&i(4,p=oe.plusIcon),"placeholderIcon"in oe&&i(5,g=oe.placeholderIcon),"placeholderText"in oe&&i(6,C=oe.placeholderText),"id"in oe&&i(7,A=oe.id),"optionsCmp"in oe&&i(8,V=oe.optionsCmp),"valuesCmp"in oe&&i(14,U=oe.valuesCmp),"onChanged"in oe&&i(15,G=oe.onChanged),"optionsFilter"in oe&&i(9,Z=oe.optionsFilter),"class"in oe&&i(10,K=oe.class)},n.$$.update=()=>{n.$$.dirty&49153&&i(12,r=oe=>{oe&&Dp(s,oe)?i(0,s=id(s,oe)):oe&&i(0,s=[...s,oe]),s.sort(U),G(s)}),n.$$.dirty&1&&i(13,t=oe=>oe?Dp(s,oe):!1)},[s,l,o,f,p,g,C,A,V,Z,K,q,r,t,U,G,ie]}class w5 extends lt{constructor(e){super(),ct(this,e,v5,b5,st,{value:0,options:1,variant:2,size:3,plusIcon:4,placeholderIcon:5,placeholderText:6,id:7,optionsCmp:8,valuesCmp:14,onChanged:15,optionsFilter:9,class:10})}}function x5(n){const e=n.slice(),i=e[0].get(e[1])||"";return e[7]=i,e}function k5(n){const e=n.slice(),i=e[0].get(e[1])||[];return e[7]=i,e}function C5(n){const e=n.slice(),i=e[0].get(e[1])||void 0;return e[7]=i,e}function S5(n){let e,i="No property selected";return{c(){e=Ze("span"),e.textContent=i,this.h()},l(t){e=Ge(t,"SPAN",{class:!0,"data-svelte-h":!0}),ts(e)!=="svelte-1xsszvl"&&(e.textContent=i),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r)},p:Ci,i:Ci,o:Ci,d(t){t&&F(e)}}}function T5(n){let e,i,t,r;const s=[P5,E5,A5,I5],l=[];function o(p,g){return p[1]instanceof Kv?0:p[1]instanceof Jv?1:p[1]instanceof Yv?2:3}function f(p,g){return g===0?C5(p):g===1?k5(p):g===2?x5(p):p}return e=o(n),i=l[e]=s[e](f(n,e)),{c(){i.c(),t=He()},l(p){i.l(p),t=He()},m(p,g){l[e].m(p,g),Q(p,t,g),r=!0},p(p,g){let C=e;e=o(p),e===C?l[e].p(f(p,e),g):(Tt(),D(l[C],1,1,()=>{l[C]=null}),It(),i=l[e],i?i.p(f(p,e),g):(i=l[e]=s[e](f(p,e)),i.c()),z(i,1),i.m(t.parentNode,t))},i(p){r||(z(i),r=!0)},o(p){D(i),r=!1},d(p){p&&F(t),l[e].d(p)}}}function I5(n){let e,i="Unsupported property type";return{c(){e=Ze("span"),e.textContent=i,this.h()},l(t){e=Ge(t,"SPAN",{class:!0,"data-svelte-h":!0}),ts(e)!=="svelte-1c7cang"&&(e.textContent=i),this.h()},h(){gt(e,"class","text-muted-foreground")},m(t,r){Q(t,e,r)},p:Ci,i:Ci,o:Ci,d(t){t&&F(e)}}}function A5(n){let e,i;return e=new Cl({props:{value:n[7]}}),e.$on("change",n[6]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&3&&(s.value=t[7]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function E5(n){var s,l;let e,i;const t=[{variant:"full"},{value:n[7]},{options:n[1].options},{onChanged:n[5]},{placeholderIcon:(s=n[1].icon)==null?void 0:s.with({color:null})},{plusIcon:(l=n[1].icon)==null?void 0:l.with({color:null})},n[3]];let r={};for(let o=0;o<t.length;o+=1)r=re(r,t[o]);return e=new w5({props:r}),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),i=!0},p(o,f){var g,C;const p=f&11?yt(t,[t[0],f&3&&{value:o[7]},f&2&&{options:o[1].options},f&3&&{onChanged:o[5]},f&2&&{placeholderIcon:(g=o[1].icon)==null?void 0:g.with({color:null})},f&2&&{plusIcon:(C=o[1].icon)==null?void 0:C.with({color:null})},f&8&&Ei(o[3])]):{};e.$set(p)},i(o){i||(z(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){he(e,o)}}}function P5(n){var s;let e,i;const t=[{variant:"full"},{value:n[7]},{options:n[1].options},{onSelected:n[4]},{placeholderIcon:(s=n[1].icon)==null?void 0:s.with({color:null})},n[3]];let r={};for(let l=0;l<t.length;l+=1)r=re(r,t[l]);return e=new Ld({props:r}),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),i=!0},p(l,o){var p;const f=o&11?yt(t,[t[0],o&3&&{value:l[7]},o&2&&{options:l[1].options},o&3&&{onSelected:l[4]},o&2&&{placeholderIcon:(p=l[1].icon)==null?void 0:p.with({color:null})},o&8&&Ei(l[3])]):{};e.$set(f)},i(l){i||(z(e.$$.fragment,l),i=!0)},o(l){D(e.$$.fragment,l),i=!1},d(l){he(e,l)}}}function M5(n){let e,i,t,r,s;const l=[T5,S5],o=[];function f(p,g){return g&3&&(e=null),e==null&&(e=!!p[0].has(p[1])),e?0:1}return i=f(n,-1),t=o[i]=l[i](n),{c(){t.c(),r=He()},l(p){t.l(p),r=He()},m(p,g){o[i].m(p,g),Q(p,r,g),s=!0},p(p,[g]){let C=i;i=f(p,g),i===C?o[i].p(p,g):(Tt(),D(o[C],1,1,()=>{o[C]=null}),It(),t=o[i],t?t.p(p,g):(t=o[i]=l[i](p),t.c()),z(t,1),t.m(r.parentNode,r))},i(p){s||(z(t),s=!0)},o(p){D(t),s=!1},d(p){p&&F(r),o[i].d(p)}}}function z5(n,e,i){const t=["properties","property"];let r=qe(e,t),{properties:s}=e,{property:l}=e;function o(C,A){var V;s.put(C,(V=A.target)==null?void 0:V.value)}const f=C=>{console.log("--SELECTOR: Putting value",C),s.put(l,C)},p=C=>s.put(l,C),g=C=>o(l,C);return n.$$set=C=>{e=re(re({},e),wt(C)),i(3,r=qe(e,t)),"properties"in C&&i(0,s=C.properties),"property"in C&&i(1,l=C.property)},[s,l,o,r,f,p,g]}class D5 extends lt{constructor(e){super(),ct(this,e,z5,M5,st,{properties:0,property:1})}}function R1(n,e,i){const t=n.slice();return t[1]=e[i],t}function O1(n){let e,i,t=n[1].name+"",r,s,l,o,f;return l=new D5({props:{properties:n[0],property:n[1]}}),{c(){e=Ze("div"),i=Ze("span"),r=Ct(t),s=it(),ce(l.$$.fragment),o=it(),this.h()},l(p){e=Ge(p,"DIV",{class:!0});var g=$e(e);i=Ge(g,"SPAN",{class:!0});var C=$e(i);r=St(C,t),C.forEach(F),s=nt(g),ue(l.$$.fragment,g),o=nt(g),g.forEach(F),this.h()},h(){gt(i,"class","font-semibold"),gt(e,"class","flex flex-col gap-1.5")},m(p,g){Q(p,e,g),ut(e,i),ut(i,r),ut(e,s),fe(l,e,null),ut(e,o),f=!0},p(p,g){(!f||g&1)&&t!==(t=p[1].name+"")&&Ai(r,t);const C={};g&1&&(C.properties=p[0]),g&1&&(C.property=p[1]),l.$set(C)},i(p){f||(z(l.$$.fragment,p),f=!0)},o(p){D(l.$$.fragment,p),f=!1},d(p){p&&F(e),he(l)}}}function L5(n){let e,i,t=Zi(n[0].keys),r=[];for(let l=0;l<t.length;l+=1)r[l]=O1(R1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,[o]){if(o&1){t=Zi(l[0].keys);let f;for(f=0;f<t.length;f+=1){const p=R1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=O1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function R5(n,e,i){let{properties:t}=e;return n.$$set=r=>{"properties"in r&&i(0,t=r.properties)},[t]}class O5 extends lt{constructor(e){super(),ct(this,e,R5,L5,st,{properties:0})}}function F1(n,e,i){const t=n.slice();return t[11]=e[i][0],t[12]=e[i][1],t}function F5(n){let e,i;function t(){return n[7](n[11])}return e=new jr({props:{class:"h-6 w-6 rounded-full p-0 outline-offset-2 transition-all hover:drop-shadow-lg focus:drop-shadow-lg",style:`background-color: ${n[11]}; color: ${n[11]}; outline: 2px solid ${n[0]===n[11]?n[11]:"transparent"};`,builders:[n[15]]}}),e.$on("click",t),{c(){ce(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,s){fe(e,r,s),i=!0},p(r,s){n=r;const l={};s&3&&(l.style=`background-color: ${n[11]}; color: ${n[11]}; outline: 2px solid ${n[0]===n[11]?n[11]:"transparent"};`),s&32768&&(l.builders=[n[15]]),e.$set(l)},i(r){i||(z(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){he(e,r)}}}function B5(n){let e=n[12]+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&2&&e!==(e=t[12]+"")&&Ai(i,e)},d(t){t&&F(i)}}}function N5(n){let e,i,t,r;return e=new Is({props:{asChild:!0,$$slots:{default:[F5,({builder:s})=>({15:s}),({builder:s})=>s?32768:0]},$$scope:{ctx:n}}}),t=new Jc({props:{$$slots:{default:[B5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&98315&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&65538&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function B1(n){let e,i;return e=new Yc({props:{openDelay:50,$$slots:{default:[N5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&65547&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function V5(n){let e,i,t,r,s,l,o;return r=new $2({props:{class:"absolute left-0 top-0 h-6 w-6 p-1 text-accent-foreground",color:n[6]}}),{c(){e=Ze("div"),i=Ze("input"),t=it(),ce(r.$$.fragment),this.h()},l(f){e=Ge(f,"DIV",{class:!0,style:!0});var p=$e(e);i=Ge(p,"INPUT",{class:!0,type:!0,style:!0}),t=nt(p),ue(r.$$.fragment,p),p.forEach(F),this.h()},h(){gt(i,"class","absolute left-0 top-0 z-10 h-8 w-8 rounded-full p-0"),gt(i,"type","color"),uf(i,"opacity","0%"),gt(e,"class","relative h-6 w-6 rounded-full bg-muted text-accent-foreground transition-all hover:drop-shadow-lg"),gt(e,"style",n[5])},m(f,p){Q(f,e,p),ut(e,i),vl(i,n[4]),ut(e,t),fe(r,e,null),s=!0,l||(o=[_t(i,"input",n[8]),_t(i,"input",n[9])],l=!0)},p(f,p){p&16&&vl(i,f[4]);const g={};p&64&&(g.color=f[6]),r.$set(g),(!s||p&32)&&gt(e,"style",f[5])},i(f){s||(z(r.$$.fragment,f),s=!0)},o(f){D(r.$$.fragment,f),s=!1},d(f){f&&F(e),he(r),l=!1,Gi(o)}}}function j5(n){let e;return{c(){e=Ct("Custom colour")},l(i){e=St(i,"Custom colour")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function U5(n){let e,i,t,r;return e=new Is({props:{$$slots:{default:[V5]},$$scope:{ctx:n}}}),t=new Jc({props:{$$slots:{default:[j5]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&65657&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&65536&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function q5(n){let e,i,t,r,s,l=Zi(n[1]),o=[];for(let p=0;p<l.length;p+=1)o[p]=B1(F1(n,l,p));const f=p=>D(o[p],1,1,()=>{o[p]=null});return t=new Yc({props:{$$slots:{default:[U5]},$$scope:{ctx:n}}}),{c(){e=Ze("div");for(let p=0;p<o.length;p+=1)o[p].c();i=it(),ce(t.$$.fragment),this.h()},l(p){e=Ge(p,"DIV",{class:!0});var g=$e(e);for(let C=0;C<o.length;C+=1)o[C].l(g);i=nt(g),ue(t.$$.fragment,g),g.forEach(F),this.h()},h(){gt(e,"class",r="flex flex-row flex-wrap gap-2 "+n[2])},m(p,g){Q(p,e,g);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(e,null);ut(e,i),fe(t,e,null),s=!0},p(p,[g]){if(g&32779){l=Zi(p[1]);let A;for(A=0;A<l.length;A+=1){const V=F1(p,l,A);o[A]?(o[A].p(V,g),z(o[A],1)):(o[A]=B1(V),o[A].c(),z(o[A],1),o[A].m(e,i))}for(Tt(),A=l.length;A<o.length;A+=1)f(A);It()}const C={};g&65657&&(C.$$scope={dirty:g,ctx:p}),t.$set(C),(!s||g&4&&r!==(r="flex flex-row flex-wrap gap-2 "+p[2]))&&gt(e,"class",r)},i(p){if(!s){for(let g=0;g<l.length;g+=1)z(o[g]);z(t.$$.fragment,p),s=!0}},o(p){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)D(o[g]);D(t.$$.fragment,p),s=!1},d(p){p&&F(e),Yn(o,p),he(t)}}}function Z5(n,e,i){const t=[[new xs("#ef4444"),"Red"],[new xs("#f97316"),"Orange"],[new xs("#eab308"),"Yellow"],[new xs("#22c55e"),"Green"],[new xs("#14b8a6"),"Teal"],[new xs("#3b82f6"),"Blue"],[new xs("#8b5cf6"),"Indigo"],[new xs("#52525b"),"Gray"]];let{options:r=t}=e,{color:s=void 0}=e,l,{class:o=""}=e,{onSelect:f=()=>{}}=e,p,g;const C=U=>{i(0,s=U),f(s)};function A(){l=this.value,i(4,l)}const V=()=>{i(0,s=new xs(l)),f(s)};return n.$$set=U=>{"options"in U&&i(1,r=U.options),"color"in U&&i(0,s=U.color),"class"in U&&i(2,o=U.class),"onSelect"in U&&i(3,f=U.onSelect)},n.$$.update=()=>{n.$$.dirty&3&&(s&&!r.some(([U,G])=>U.hex()===(s==null?void 0:s.hex()))?(i(5,p=`background-color: ${s}; outline: 2px solid ${s}; outline-offset: 2px`),i(6,g=s.isDark()?"white":"black")):(i(5,p=""),i(6,g="currentColor")))},[s,r,o,f,l,p,g,C,A,V]}class G5 extends lt{constructor(e){super(),ct(this,e,Z5,q5,st,{options:1,color:0,class:2,onSelect:3})}}function H5(n){let e,i;const t=[{class:Lt("shrink-0 bg-border",n[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n[0])},{orientation:n[1]},{decorative:n[2]},n[3]];let r={};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new yS({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&15?yt(t,[l&3&&{class:Lt("shrink-0 bg-border",s[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s[0])},l&2&&{orientation:s[1]},l&4&&{decorative:s[2]},l&8&&Ei(s[3])]):{};e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function W5(n,e,i){const t=["class","orientation","decorative"];let r=qe(e,t),{class:s=void 0}=e,{orientation:l="horizontal"}=e,{decorative:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(3,r=qe(e,t)),"class"in f&&i(0,s=f.class),"orientation"in f&&i(1,l=f.orientation),"decorative"in f&&i(2,o=f.decorative)},[s,l,o,r]}class fd extends lt{constructor(e){super(),ct(this,e,W5,H5,st,{class:0,orientation:1,decorative:2})}}function N1(n,e,i){const t=n.slice();return t[12]=e[i],t}function X5(n){let e;return{c(){e=Ct("Close")},l(i){e=St(i,"Close")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function K5(n){let e,i,t=Zi(n[5]),r=[];for(let l=0;l<t.length;l+=1)r[l]=V1(N1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){e=Ze("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=Ge(l,"DIV",{class:!0});var o=$e(e);for(let f=0;f<r.length;f+=1)r[f].l(o);o.forEach(F),this.h()},h(){gt(e,"class","flex max-h-[300px] w-full flex-row flex-wrap overflow-y-scroll p-2")},m(l,o){Q(l,e,o);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);i=!0},p(l,o){if(o&32811){t=Zi(l[5]);let f;for(f=0;f<t.length;f+=1){const p=N1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=V1(p),r[f].c(),z(r[f],1),r[f].m(e,null))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function J5(n){let e,i="No icons found";return{c(){e=Ze("div"),e.textContent=i,this.h()},l(t){e=Ge(t,"DIV",{class:!0,"data-svelte-h":!0}),ts(e)!=="svelte-119kdog"&&(e.textContent=i),this.h()},h(){gt(e,"class","flex h-20 w-full flex-row items-center justify-center text-muted-foreground")},m(t,r){Q(t,e,r)},p:Ci,i:Ci,o:Ci,d(t){t&&F(e)}}}function Y5(n){let e,i,t;return i=new G2({props:{class:"animate-spin"}}),{c(){e=Ze("div"),ce(i.$$.fragment),this.h()},l(r){e=Ge(r,"DIV",{class:!0});var s=$e(e);ue(i.$$.fragment,s),s.forEach(F),this.h()},h(){gt(e,"class","flex h-20 w-full flex-row items-center justify-center")},m(r,s){Q(r,e,s),fe(i,e,null),t=!0},p:Ci,i(r){t||(z(i.$$.fragment,r),t=!0)},o(r){D(i.$$.fragment,r),t=!1},d(r){r&&F(e),he(i)}}}function Q5(n){var t;let e,i;return e=new Qc({props:{class:"text-primary transition-all",icon:n[12],color:(t=n[0])==null?void 0:t.color}}),{c(){ce(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,s){fe(e,r,s),i=!0},p(r,s){var o;const l={};s&32&&(l.icon=r[12]),s&1&&(l.color=(o=r[0])==null?void 0:o.color),e.$set(l)},i(r){i||(z(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){he(e,r)}}}function $5(n){let e,i;function t(){return n[9](n[12])}return e=new jr({props:{builders:[n[15]],size:"icon",variant:"ghost",class:"text-xl",$$slots:{default:[Q5]},$$scope:{ctx:n}}}),e.$on("click",t),{c(){ce(e.$$.fragment)},l(r){ue(e.$$.fragment,r)},m(r,s){fe(e,r,s),i=!0},p(r,s){n=r;const l={};s&32768&&(l.builders=[n[15]]),s&65569&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(r){i||(z(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){he(e,r)}}}function ez(n){let e=Ep(n[12].icon.name)+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r&32&&e!==(e=Ep(t[12].icon.name)+"")&&Ai(i,e)},d(t){t&&F(i)}}}function tz(n){let e,i,t,r,s;return e=new Is({props:{asChild:!0,$$slots:{default:[$5,({builder:l})=>({15:l}),({builder:l})=>l?32768:0]},$$scope:{ctx:n}}}),t=new Jc({props:{$$slots:{default:[ez]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment),r=it()},l(l){ue(e.$$.fragment,l),i=nt(l),ue(t.$$.fragment,l),r=nt(l)},m(l,o){fe(e,l,o),Q(l,i,o),fe(t,l,o),Q(l,r,o),s=!0},p(l,o){const f={};o&98347&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const p={};o&65568&&(p.$$scope={dirty:o,ctx:l}),t.$set(p)},i(l){s||(z(e.$$.fragment,l),z(t.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),D(t.$$.fragment,l),s=!1},d(l){l&&(F(i),F(r)),he(e,l),he(t,l)}}}function V1(n){let e,i;return e=new Yc({props:{openDelay:50,closeDelay:50,group:"icon-picker",$$slots:{default:[tz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&65579&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function iz(n){let e,i,t,r,s,l,o,f,p,g,C,A,V,U,G;i=new jr({props:{class:"h-0 w-0 opacity-0",variant:"ghost","aria-label":"Close icon picker popup",$$slots:{default:[X5]},$$scope:{ctx:n}}}),i.$on("click",function(){x0(n[1])&&n[1].apply(this,arguments)}),r=new G5({props:{class:"mb-4 mt-2 justify-center",color:n[3],onSelect:n[8]}}),l=new fd({props:{orientation:"horizontal"}}),f=new N0({props:{class:"!rounded-none !border-none !shadow-none",onInput:n[7]}}),g=new fd({props:{orientation:"horizontal"}});const Z=[Y5,J5,K5],K=[];function q(ie,oe){return ie[4]?0:ie[5].length===0?1:2}return A=q(n),V=K[A]=Z[A](n),{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),ce(r.$$.fragment),s=it(),ce(l.$$.fragment),o=it(),ce(f.$$.fragment),p=it(),ce(g.$$.fragment),C=it(),V.c(),this.h()},l(ie){e=Ge(ie,"DIV",{class:!0});var oe=$e(e);ue(i.$$.fragment,oe),t=nt(oe),ue(r.$$.fragment,oe),s=nt(oe),ue(l.$$.fragment,oe),o=nt(oe),ue(f.$$.fragment,oe),p=nt(oe),ue(g.$$.fragment,oe),C=nt(oe),V.l(oe),oe.forEach(F),this.h()},h(){gt(e,"class",U="flex flex-col "+n[2])},m(ie,oe){Q(ie,e,oe),fe(i,e,null),ut(e,t),fe(r,e,null),ut(e,s),fe(l,e,null),ut(e,o),fe(f,e,null),ut(e,p),fe(g,e,null),ut(e,C),K[A].m(e,null),G=!0},p(ie,[oe]){n=ie;const se={};oe&65536&&(se.$$scope={dirty:oe,ctx:n}),i.$set(se);const pe={};oe&8&&(pe.color=n[3]),r.$set(pe);let Ie=A;A=q(n),A===Ie?K[A].p(n,oe):(Tt(),D(K[Ie],1,1,()=>{K[Ie]=null}),It(),V=K[A],V?V.p(n,oe):(V=K[A]=Z[A](n),V.c()),z(V,1),V.m(e,null)),(!G||oe&4&&U!==(U="flex flex-col "+n[2]))&&gt(e,"class",U)},i(ie){G||(z(i.$$.fragment,ie),z(r.$$.fragment,ie),z(l.$$.fragment,ie),z(f.$$.fragment,ie),z(g.$$.fragment,ie),z(V),G=!0)},o(ie){D(i.$$.fragment,ie),D(r.$$.fragment,ie),D(l.$$.fragment,ie),D(f.$$.fragment,ie),D(g.$$.fragment,ie),D(V),G=!1},d(ie){ie&&F(e),he(i),he(r),he(l),he(f),he(g),K[A].d()}}}const nz=64,rz="mdi";function sz(n,e,i){let t;const r=[yn.fromString("mdi:doctor"),yn.fromString("mdi:translate"),yn.fromString("mdi:account"),yn.fromString("mdi:sign-language"),yn.fromString("mdi:wheelchair"),yn.fromString("mdi:laptop"),yn.fromString("mdi:car"),yn.fromString("mdi:airplane"),yn.fromString("mdi:home"),yn.fromString("mdi:food"),yn.fromString("mdi:atom"),yn.fromString("mdi:lightbulb"),yn.fromString("mdi:heart"),yn.fromString("mdi:briefcase"),yn.fromString("mdi:book"),yn.fromString("mdi:camera"),yn.fromString("mdi:briefcase")];let{icon:s=void 0}=e,{onClose:l=()=>{}}=e,{class:o=""}=e,f=s==null?void 0:s.color,p=!1,g=cn(r);ei(n,g,G=>i(5,t=G));async function C(G){i(4,p=!0);try{const K=await(await fetch(`https://api.iconify.design/search?query=${G}&prefix=${rz}&limit=${nz}`)).json();g.set(K.icons.map(q=>yn.fromString(q)))}catch(Z){console.error("Error fetching icon list",Z),g.set([])}finally{i(4,p=!1)}}async function A(G){if(G===""){g.set(r);return}await C(G)}function V(G){i(3,f=G),i(0,s=s==null?void 0:s.with({color:f}))}const U=G=>{i(0,s=G.with({color:f})),l()};return n.$$set=G=>{"icon"in G&&i(0,s=G.icon),"onClose"in G&&i(1,l=G.onClose),"class"in G&&i(2,o=G.class)},[s,l,o,f,p,t,g,A,V,U]}class oz extends lt{constructor(e){super(),ct(this,e,sz,iz,st,{icon:0,onClose:1,class:2})}}function az(n){let e,i;return e=new Ks({props:{item:n[0],size:n[1],defaultIcon:n[4]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&2&&(s.size=t[1]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function lz(n){let e,i;return e=new jr({props:{"aria-expanded":n[3],builders:[n[10]],class:"aspect-square h-fit w-fit rounded-full !bg-transparent p-0 !outline-none",role:"combobox",variant:"ghost",$$slots:{default:[az]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&8&&(s["aria-expanded"]=t[3]),r&1024&&(s.builders=[t[10]]),r&2051&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function cz(n){let e,i="File upload is not supported yet.",t,r,s,l;function o(){return n[6](n[9])}function f(g){n[7](g)}let p={onClose:o};return n[0].icon!==void 0&&(p.icon=n[0].icon),r=new oz({props:p}),Dt.push(()=>Bi(r,"icon",f)),{c(){e=Ze("div"),e.textContent=i,t=it(),ce(r.$$.fragment),this.h()},l(g){e=Ge(g,"DIV",{class:!0,"data-svelte-h":!0}),ts(e)!=="svelte-12h1yj6"&&(e.textContent=i),t=nt(g),ue(r.$$.fragment,g),this.h()},h(){gt(e,"class","rounded bg-destructive p-3 text-destructive-foreground")},m(g,C){Q(g,e,C),Q(g,t,C),fe(r,g,C),l=!0},p(g,C){n=g;const A={};C&512&&(A.onClose=o),!s&&C&1&&(s=!0,A.icon=n[0].icon,Fi(()=>s=!1)),r.$set(A)},i(g){l||(z(r.$$.fragment,g),l=!0)},o(g){D(r.$$.fragment,g),l=!1},d(g){g&&(F(e),F(t)),he(r,g)}}}function uz(n){let e,i,t,r;return e=new Kc({props:{asChild:!0,class:n[2],$$slots:{default:[lz,({builder:s})=>({10:s}),({builder:s})=>s?1024:0]},$$scope:{ctx:n}}}),t=new yf({props:{class:"w-80 p-1",$$slots:{default:[cz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&4&&(o.class=s[2]),l&3083&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&2561&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function fz(n){let e,i,t;function r(l){n[8](l)}let s={$$slots:{default:[uz,({ids:l})=>({9:l}),({ids:l})=>l?512:0]},$$scope:{ctx:n}};return n[3]!==void 0&&(s.open=n[3]),e=new gf({props:s}),Dt.push(()=>Bi(e,"open",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,[o]){const f={};o&2575&&(f.$$scope={dirty:o,ctx:l}),!i&&o&8&&(i=!0,f.open=l[3],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function hz(n,e,i){const t=yn.fromString("lucide:image-plus");let{item:r}=e,{size:s="md"}=e,{class:l=""}=e,o=!1;function f(A){i(3,o=!1),Ss().then(()=>{var V;(V=document.getElementById(A))==null||V.focus()})}const p=A=>f(A.trigger);function g(A){n.$$.not_equal(r.icon,A)&&(r.icon=A,i(0,r))}function C(A){o=A,i(3,o)}return n.$$set=A=>{"item"in A&&i(0,r=A.item),"size"in A&&i(1,s=A.size),"class"in A&&i(2,l=A.class)},[r,s,l,o,t,f,p,g,C]}class dz extends lt{constructor(e){super(),ct(this,e,hz,fz,st,{item:0,size:1,class:2})}}function mz(n){let e,i,t,r,s=[{class:i=Lt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n[1])},{readOnly:n[2]},n[3]],l={};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return{c(){e=Ze("textarea"),this.h()},l(o){e=Ge(o,"TEXTAREA",{class:!0}),$e(e).forEach(F),this.h()},h(){rt(e,l)},m(o,f){Q(o,e,f),e.autofocus&&e.focus(),vl(e,n[0]),t||(r=[_t(e,"input",n[16]),_t(e,"blur",n[4]),_t(e,"change",n[5]),_t(e,"click",n[6]),_t(e,"focus",n[7]),_t(e,"keydown",n[8]),_t(e,"keypress",n[9]),_t(e,"keyup",n[10]),_t(e,"mouseover",n[11]),_t(e,"mouseenter",n[12]),_t(e,"mouseleave",n[13]),_t(e,"paste",n[14]),_t(e,"input",n[15])],t=!0)},p(o,[f]){rt(e,l=yt(s,[f&2&&i!==(i=Lt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:i},f&4&&{readOnly:o[2]},f&8&&o[3]])),f&1&&vl(e,o[0])},i:Ci,o:Ci,d(o){o&&F(e),t=!1,Gi(r)}}}function pz(n,e,i){const t=["class","value","readonly"];let r=qe(e,t),{class:s=void 0}=e,{value:l=void 0}=e,{readonly:o=void 0}=e;function f(se){jt.call(this,n,se)}function p(se){jt.call(this,n,se)}function g(se){jt.call(this,n,se)}function C(se){jt.call(this,n,se)}function A(se){jt.call(this,n,se)}function V(se){jt.call(this,n,se)}function U(se){jt.call(this,n,se)}function G(se){jt.call(this,n,se)}function Z(se){jt.call(this,n,se)}function K(se){jt.call(this,n,se)}function q(se){jt.call(this,n,se)}function ie(se){jt.call(this,n,se)}function oe(){l=this.value,i(0,l)}return n.$$set=se=>{e=re(re({},e),wt(se)),i(3,r=qe(e,t)),"class"in se&&i(1,s=se.class),"value"in se&&i(0,l=se.value),"readonly"in se&&i(2,o=se.readonly)},[l,s,o,r,f,p,g,C,A,V,U,G,Z,K,q,ie,oe]}class _z extends lt{constructor(e){super(),ct(this,e,pz,mz,st,{class:1,value:0,readonly:2})}}function gz(n){let e;return{c(){e=Ct("Name")},l(i){e=St(i,"Name")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function yz(n){let e;return{c(){e=Ct("Description")},l(i){e=St(i,"Description")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function bz(n){let e,i,t,r,s,l,o,f,p,g,C,A,V,U,G,Z,K,q;function ie(je){n[2](je)}let oe={size:"xl"};n[0]!==void 0&&(oe.item=n[0]),i=new dz({props:oe}),Dt.push(()=>Bi(i,"item",ie)),o=new Sr({props:{class:"font-semibold",for:"name",$$slots:{default:[gz]},$$scope:{ctx:n}}});function se(je){n[3](je)}let pe={id:"name",placeholder:"Name",type:"text"};n[0].name!==void 0&&(pe.value=n[0].name),p=new Cl({props:pe}),Dt.push(()=>Bi(p,"value",se)),U=new Sr({props:{class:"font-semibold",for:"description",$$slots:{default:[yz]},$$scope:{ctx:n}}});function Ie(je){n[4](je)}let Ce={id:"description",placeholder:"Enter an optional description"};return n[0].description!==void 0&&(Ce.value=n[0].description),Z=new _z({props:Ce}),Dt.push(()=>Bi(Z,"value",Ie)),{c(){e=Ze("div"),ce(i.$$.fragment),r=it(),s=Ze("div"),l=Ze("div"),ce(o.$$.fragment),f=it(),ce(p.$$.fragment),A=it(),V=Ze("div"),ce(U.$$.fragment),G=it(),ce(Z.$$.fragment),this.h()},l(je){e=Ge(je,"DIV",{class:!0});var Ve=$e(e);ue(i.$$.fragment,Ve),r=nt(Ve),s=Ge(Ve,"DIV",{class:!0});var de=$e(s);l=Ge(de,"DIV",{class:!0});var Me=$e(l);ue(o.$$.fragment,Me),f=nt(Me),ue(p.$$.fragment,Me),Me.forEach(F),de.forEach(F),Ve.forEach(F),A=nt(je),V=Ge(je,"DIV",{class:!0});var Re=$e(V);ue(U.$$.fragment,Re),G=nt(Re),ue(Z.$$.fragment,Re),Re.forEach(F),this.h()},h(){gt(l,"class","flex w-full flex-col gap-1.5"),gt(s,"class","flex h-full w-full flex-col gap-2"),gt(e,"class",C="flex w-full flex-row items-center justify-between gap-8 "+n[1]),gt(V,"class","flex w-full flex-col gap-1.5")},m(je,Ve){Q(je,e,Ve),fe(i,e,null),ut(e,r),ut(e,s),ut(s,l),fe(o,l,null),ut(l,f),fe(p,l,null),Q(je,A,Ve),Q(je,V,Ve),fe(U,V,null),ut(V,G),fe(Z,V,null),q=!0},p(je,[Ve]){const de={};!t&&Ve&1&&(t=!0,de.item=je[0],Fi(()=>t=!1)),i.$set(de);const Me={};Ve&32&&(Me.$$scope={dirty:Ve,ctx:je}),o.$set(Me);const Re={};!g&&Ve&1&&(g=!0,Re.value=je[0].name,Fi(()=>g=!1)),p.$set(Re),(!q||Ve&2&&C!==(C="flex w-full flex-row items-center justify-between gap-8 "+je[1]))&&gt(e,"class",C);const Rt={};Ve&32&&(Rt.$$scope={dirty:Ve,ctx:je}),U.$set(Rt);const ti={};!K&&Ve&1&&(K=!0,ti.value=je[0].description,Fi(()=>K=!1)),Z.$set(ti)},i(je){q||(z(i.$$.fragment,je),z(o.$$.fragment,je),z(p.$$.fragment,je),z(U.$$.fragment,je),z(Z.$$.fragment,je),q=!0)},o(je){D(i.$$.fragment,je),D(o.$$.fragment,je),D(p.$$.fragment,je),D(U.$$.fragment,je),D(Z.$$.fragment,je),q=!1},d(je){je&&(F(e),F(A),F(V)),he(i),he(o),he(p),he(U),he(Z)}}}function vz(n,e,i){let{item:t}=e,{class:r=""}=e;function s(f){t=f,i(0,t)}function l(f){n.$$.not_equal(t.name,f)&&(t.name=f,i(0,t))}function o(f){n.$$.not_equal(t.description,f)&&(t.description=f,i(0,t))}return n.$$set=f=>{"item"in f&&i(0,t=f.item),"class"in f&&i(1,r=f.class)},[t,r,s,l,o]}class wz extends lt{constructor(e){super(),ct(this,e,vz,bz,st,{item:0,class:1})}}const j1=C0({base:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});function xz(n){let e;const i=n[6].default,t=Ke(i,n,n[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,null):Ye(r[7]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function kz(n){let e,i;const t=[{class:Lt(j1({variant:n[4].variant||n[1],size:n[4].size||n[2]}),n[0])},{value:n[3]},n[5]];let r={$$slots:{default:[xz]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new MT({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&63?yt(t,[l&23&&{class:Lt(j1({variant:s[4].variant||s[1],size:s[4].size||s[2]}),s[0])},l&8&&{value:s[3]},l&32&&Ei(s[5])]):{};l&128&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function Cz(n,e,i){const t=["class","variant","size","value"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{variant:f="default"}=e,{size:p="default"}=e,{value:g}=e;const C=zz();return n.$$set=A=>{e=re(re({},e),wt(A)),i(5,r=qe(e,t)),"class"in A&&i(0,o=A.class),"variant"in A&&i(1,f=A.variant),"size"in A&&i(2,p=A.size),"value"in A&&i(3,g=A.value),"$$scope"in A&&i(7,l=A.$$scope)},[o,f,p,g,C,r,s,l]}class Sz extends lt{constructor(e){super(),ct(this,e,Cz,kz,st,{class:0,variant:1,size:2,value:3})}}const Tz=n=>({builder:n&256}),U1=n=>({builder:n[8]});function Iz(n){let e;const i=n[5].default,t=Ke(i,n,n[7],U1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&384)&&Je(t,i,r,r[7],e?Qe(i,r[7],s,Tz):Ye(r[7]),U1)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function Az(n){let e,i,t;const r=[{class:Lt("flex items-center justify-center gap-1",n[1])},n[2]];function s(o){n[6](o)}let l={$$slots:{default:[Iz,({builder:o})=>({8:o}),({builder:o})=>o?256:0]},$$scope:{ctx:n}};for(let o=0;o<r.length;o+=1)l=re(l,r[o]);return n[0]!==void 0&&(l.value=n[0]),e=new CT({props:l}),Dt.push(()=>Bi(e,"value",s)),{c(){ce(e.$$.fragment)},l(o){ue(e.$$.fragment,o)},m(o,f){fe(e,o,f),t=!0},p(o,[f]){const p=f&6?yt(r,[f&2&&{class:Lt("flex items-center justify-center gap-1",o[1])},f&4&&Ei(o[2])]):{};f&384&&(p.$$scope={dirty:f,ctx:o}),!i&&f&1&&(i=!0,p.value=o[0],Fi(()=>i=!1)),e.$set(p)},i(o){t||(z(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function Ez(n,e,i){const t=["class","variant","size","value"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{variant:f="default"}=e,{size:p="default"}=e,{value:g=void 0}=e;Mz({variant:f,size:p});function C(A){g=A,i(0,g)}return n.$$set=A=>{e=re(re({},e),wt(A)),i(2,r=qe(e,t)),"class"in A&&i(1,o=A.class),"variant"in A&&i(3,f=A.variant),"size"in A&&i(4,p=A.size),"value"in A&&i(0,g=A.value),"$$scope"in A&&i(7,l=A.$$scope)},[g,o,r,f,p,s,C,l]}class Pz extends lt{constructor(e){super(),ct(this,e,Ez,Az,st,{class:1,variant:3,size:4,value:0})}}function Mz(n){Tr("toggleGroup",n)}function zz(){return Ir("toggleGroup")}function Dz(n){let e,i;return e=new Cl({props:{id:n[1],class:"w-max "+n[2],type:"time",value:Pp(n[0])}}),e.$on("input",n[3]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&2&&(s.id=t[1]),r&4&&(s.class="w-max "+t[2]),r&1&&(s.value=Pp(t[0])),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Lz(n,e,i){let{value:t=void 0}=e,{onChange:r=()=>{}}=e,{id:s=void 0}=e,{class:l=""}=e;function o(f){const p=f.target;console.log("Setting time:",p.value);const[g,C]=p.value.split(":").map(Number);t instanceof Qv||t instanceof $v?i(0,t=t.set({hour:g,minute:C})):t instanceof Date?i(0,t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),g,C)):t instanceof e2?i(0,t=t.set({hour:g,minute:C})):i(0,t={hours:g,minutes:C}),r(t)}return n.$$set=f=>{"value"in f&&i(0,t=f.value),"onChange"in f&&i(4,r=f.onChange),"id"in f&&i(1,s=f.id),"class"in f&&i(2,l=f.class)},[t,s,l,o,r]}class pf extends lt{constructor(e){super(),ct(this,e,Lz,Dz,st,{value:0,onChange:4,id:1,class:2})}}function q1(n,e,i){const t=n.slice();return t[25]=e[i][0],t[26]=e[i][1],t}function Z1(n,e,i){const t=n.slice();return t[29]=e[i],t}function G1(n,e,i){const t=n.slice();return t[32]=e[i],t}function Rz(n){let e;return{c(){e=Ct("Starts on")},l(i){e=St(i,"Starts on")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function Oz(n){let e;return{c(){e=Ct("Occurs")},l(i){e=St(i,"Occurs")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function Fz(n){let e,i;return e=new Al({props:{placeholder:"Frequency"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Bz(n){let e=n[16](n[32],n[0].interval)+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p(t,r){r[0]&1&&e!==(e=t[16](t[32],t[0].interval)+"")&&Ai(i,e)},d(t){t&&F(i)}}}function H1(n){let e,i;return e=new Oo({props:{value:n[32],$$slots:{default:[Bz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r[0]&1|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Nz(n){let e,i,t=Zi(n[10].keys()),r=[];for(let l=0;l<t.length;l+=1)r[l]=H1(G1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o[0]&66561){t=Zi(l[10].keys());let f;for(f=0;f<t.length;f+=1){const p=G1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=H1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function Vz(n){let e,i,t,r;return e=new Il({props:{id:"frequency",class:"w-40",$$slots:{default:[Fz]},$$scope:{ctx:n}}}),t=new Tl({props:{$$slots:{default:[Nz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l[1]&16&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l[0]&1|l[1]&16&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function jz(n){let e;return{c(){e=Ct("On")},l(i){e=St(i,"On")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function Uz(n){let e=n[29].toString()+"",i,t;return{c(){i=Ct(e),t=it()},l(r){i=St(r,e),t=nt(r)},m(r,s){Q(r,i,s),Q(r,t,s)},p:Ci,d(r){r&&(F(i),F(t))}}}function W1(n){let e,i;return e=new Sz({props:{value:n[29].toString(),$$slots:{default:[Uz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function qz(n){let e,i,t=Zi(n[9]),r=[];for(let l=0;l<t.length;l+=1)r[l]=W1(Z1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o[0]&512){t=Zi(l[9]);let f;for(f=0;f<t.length;f+=1){const p=Z1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=W1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function Zz(n){let e;return{c(){e=Ct("Ends")},l(i){e=St(i,"Ends")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function Gz(n){let e,i;return e=new Al({}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Hz(n){let e=n[26]+"",i;return{c(){i=Ct(e)},l(t){i=St(t,e)},m(t,r){Q(t,i,r)},p:Ci,d(t){t&&F(i)}}}function X1(n){let e,i;return e=new Oo({props:{value:n[25],$$slots:{default:[Hz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function Wz(n){let e,i,t=Zi(n[11].entries()),r=[];for(let l=0;l<t.length;l+=1)r[l]=X1(q1(n,t,l));const s=l=>D(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=He()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=He()},m(l,o){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(l,o);Q(l,e,o),i=!0},p(l,o){if(o[0]&2048){t=Zi(l[11].entries());let f;for(f=0;f<t.length;f+=1){const p=q1(l,t,f);r[f]?(r[f].p(p,o),z(r[f],1)):(r[f]=X1(p),r[f].c(),z(r[f],1),r[f].m(e.parentNode,e))}for(Tt(),f=t.length;f<r.length;f+=1)s(f);It()}},i(l){if(!i){for(let o=0;o<t.length;o+=1)z(r[o]);i=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)D(r[o]);i=!1},d(l){l&&F(e),Yn(r,l)}}}function Xz(n){let e,i,t,r;return e=new Il({props:{class:"w-24",$$slots:{default:[Gz]},$$scope:{ctx:n}}}),t=new Tl({props:{$$slots:{default:[Wz]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l[1]&16&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l[1]&16&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function Kz(n){let e,i,t,r,s=hd("occurrence",n[0].count)+"",l,o;function f(g){n[22](g)}let p={class:"w-20",type:"number",min:1};return n[3]!==void 0&&(p.value=n[3]),e=new Cl({props:p}),Dt.push(()=>Bi(e,"value",f)),e.$on("change",n[23]),{c(){ce(e.$$.fragment),t=it(),r=Ze("span"),l=Ct(s)},l(g){ue(e.$$.fragment,g),t=nt(g),r=Ge(g,"SPAN",{});var C=$e(r);l=St(C,s),C.forEach(F)},m(g,C){fe(e,g,C),Q(g,t,C),Q(g,r,C),ut(r,l),o=!0},p(g,C){const A={};!i&&C[0]&8&&(i=!0,A.value=g[3],Fi(()=>i=!1)),e.$set(A),(!o||C[0]&1)&&s!==(s=hd("occurrence",g[0].count)+"")&&Ai(l,s)},i(g){o||(z(e.$$.fragment,g),o=!0)},o(g){D(e.$$.fragment,g),o=!1},d(g){g&&(F(t),F(r)),he(e,g)}}}function Jz(n){let e,i,t;function r(l){n[21](l)}let s={class:"w-56",id:"until",onChange:n[20]};return n[2]!==void 0&&(s.value=n[2]),e=new Dd({props:s}),Dt.push(()=>Bi(e,"value",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};o[0]&8&&(f.onChange=l[20]),!i&&o[0]&4&&(i=!0,f.value=l[2],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function Yz(n){let e,i,t,r,s,l,o,f,p,g,C,A,V,U="Every",G,Z,K,q,ie,oe,se,pe,Ie,Ce,je,Ve,de,Me,Re,Rt,ti,Jt,We,Le,pt,xt,At=n[4].toText()+"",di,Yt;i=new Sr({props:{for:"dtstart",class:"font-semibold",$$slots:{default:[Rz]},$$scope:{ctx:n}}}),s=new Dd({props:{class:"w-52",value:n[5],onChange:n[14]}}),o=new pf({props:{value:n[5],onChange:n[14]}}),g=new Sr({props:{for:"occurs",class:"font-semibold",$$slots:{default:[Oz]},$$scope:{ctx:n}}});function li(ft){n[18](ft)}let vt={class:"w-20",type:"number",min:1};n[0].interval!==void 0&&(vt.value=n[0].interval),Z=new Cl({props:vt}),Dt.push(()=>Bi(Z,"value",li)),ie=new xl({props:{selected:n[8],onSelectedChange:n[12],required:!0,$$slots:{default:[Vz]},$$scope:{ctx:n}}}),pe=new Sr({props:{for:"byweekday",class:"font-semibold",$$slots:{default:[jz]},$$scope:{ctx:n}}}),Ce=new Pz({props:{class:"justify-start",id:"byweekday",type:"multiple",value:n[6],onValueChange:n[13],$$slots:{default:[qz]},$$scope:{ctx:n}}}),de=new Sr({props:{for:"occurs",class:"font-semibold",$$slots:{default:[Zz]},$$scope:{ctx:n}}}),Rt=new xl({props:{selected:n[7],onSelectedChange:n[19],$$slots:{default:[Xz]},$$scope:{ctx:n}}});const fi=[Jz,Kz],ai=[];function Ot(ft,xe){return ft[1]==="until"?0:ft[1]==="count"?1:-1}return~(Jt=Ot(n))&&(We=ai[Jt]=fi[Jt](n)),{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),r=Ze("div"),ce(s.$$.fragment),l=Ct(`
    at
    `),ce(o.$$.fragment),f=it(),p=Ze("div"),ce(g.$$.fragment),C=it(),A=Ze("div"),V=Ze("span"),V.textContent=U,G=it(),ce(Z.$$.fragment),q=it(),ce(ie.$$.fragment),oe=it(),se=Ze("div"),ce(pe.$$.fragment),Ie=it(),ce(Ce.$$.fragment),je=it(),Ve=Ze("div"),ce(de.$$.fragment),Me=it(),Re=Ze("div"),ce(Rt.$$.fragment),ti=it(),We&&We.c(),Le=it(),pt=Ze("p"),xt=Ct("Occurs "),di=Ct(At),this.h()},l(ft){e=Ge(ft,"DIV",{class:!0});var xe=$e(e);ue(i.$$.fragment,xe),t=nt(xe),r=Ge(xe,"DIV",{class:!0,id:!0});var Ni=$e(r);ue(s.$$.fragment,Ni),l=St(Ni,`
    at
    `),ue(o.$$.fragment,Ni),Ni.forEach(F),xe.forEach(F),f=nt(ft),p=Ge(ft,"DIV",{class:!0});var dt=$e(p);ue(g.$$.fragment,dt),C=nt(dt),A=Ge(dt,"DIV",{class:!0,id:!0});var Mt=$e(A);V=Ge(Mt,"SPAN",{"data-svelte-h":!0}),ts(V)!=="svelte-5tw12r"&&(V.textContent=U),G=nt(Mt),ue(Z.$$.fragment,Mt),q=nt(Mt),ue(ie.$$.fragment,Mt),Mt.forEach(F),dt.forEach(F),oe=nt(ft),se=Ge(ft,"DIV",{class:!0});var ri=$e(se);ue(pe.$$.fragment,ri),Ie=nt(ri),ue(Ce.$$.fragment,ri),ri.forEach(F),je=nt(ft),Ve=Ge(ft,"DIV",{class:!0});var Ti=$e(Ve);ue(de.$$.fragment,Ti),Me=nt(Ti),Re=Ge(Ti,"DIV",{class:!0,id:!0});var Fe=$e(Re);ue(Rt.$$.fragment,Fe),ti=nt(Fe),We&&We.l(Fe),Fe.forEach(F),Ti.forEach(F),Le=nt(ft),pt=Ge(ft,"P",{class:!0});var ot=$e(pt);xt=St(ot,"Occurs "),di=St(ot,At),ot.forEach(F),this.h()},h(){gt(r,"class","flex flex-row items-center gap-2"),gt(r,"id","dtstart"),gt(e,"class","flex w-full flex-col gap-1.5"),gt(A,"class","flex flex-row items-center gap-2"),gt(A,"id","occurs"),gt(p,"class","flex w-full flex-col gap-1.5"),gt(se,"class","flex w-full flex-col gap-1.5"),gt(Re,"class","flex flex-row items-center gap-2"),gt(Re,"id","occurs"),gt(Ve,"class","flex w-full flex-col gap-1.5"),gt(pt,"class","text-muted-foreground")},m(ft,xe){Q(ft,e,xe),fe(i,e,null),ut(e,t),ut(e,r),fe(s,r,null),ut(r,l),fe(o,r,null),Q(ft,f,xe),Q(ft,p,xe),fe(g,p,null),ut(p,C),ut(p,A),ut(A,V),ut(A,G),fe(Z,A,null),ut(A,q),fe(ie,A,null),Q(ft,oe,xe),Q(ft,se,xe),fe(pe,se,null),ut(se,Ie),fe(Ce,se,null),Q(ft,je,xe),Q(ft,Ve,xe),fe(de,Ve,null),ut(Ve,Me),ut(Ve,Re),fe(Rt,Re,null),ut(Re,ti),~Jt&&ai[Jt].m(Re,null),Q(ft,Le,xe),Q(ft,pt,xe),ut(pt,xt),ut(pt,di),Yt=!0},p(ft,xe){const Ni={};xe[1]&16&&(Ni.$$scope={dirty:xe,ctx:ft}),i.$set(Ni);const dt={};xe[0]&32&&(dt.value=ft[5]),s.$set(dt);const Mt={};xe[0]&32&&(Mt.value=ft[5]),o.$set(Mt);const ri={};xe[1]&16&&(ri.$$scope={dirty:xe,ctx:ft}),g.$set(ri);const Ti={};!K&&xe[0]&1&&(K=!0,Ti.value=ft[0].interval,Fi(()=>K=!1)),Z.$set(Ti);const Fe={};xe[0]&256&&(Fe.selected=ft[8]),xe[0]&1|xe[1]&16&&(Fe.$$scope={dirty:xe,ctx:ft}),ie.$set(Fe);const ot={};xe[1]&16&&(ot.$$scope={dirty:xe,ctx:ft}),pe.$set(ot);const hn={};xe[0]&64&&(hn.value=ft[6]),xe[1]&16&&(hn.$$scope={dirty:xe,ctx:ft}),Ce.$set(hn);const Ne={};xe[1]&16&&(Ne.$$scope={dirty:xe,ctx:ft}),de.$set(Ne);const Wt={};xe[0]&128&&(Wt.selected=ft[7]),xe[0]&12&&(Wt.onSelectedChange=ft[19]),xe[1]&16&&(Wt.$$scope={dirty:xe,ctx:ft}),Rt.$set(Wt);let pi=Jt;Jt=Ot(ft),Jt===pi?~Jt&&ai[Jt].p(ft,xe):(We&&(Tt(),D(ai[pi],1,1,()=>{ai[pi]=null}),It()),~Jt?(We=ai[Jt],We?We.p(ft,xe):(We=ai[Jt]=fi[Jt](ft),We.c()),z(We,1),We.m(Re,null)):We=null),(!Yt||xe[0]&16)&&At!==(At=ft[4].toText()+"")&&Ai(di,At)},i(ft){Yt||(z(i.$$.fragment,ft),z(s.$$.fragment,ft),z(o.$$.fragment,ft),z(g.$$.fragment,ft),z(Z.$$.fragment,ft),z(ie.$$.fragment,ft),z(pe.$$.fragment,ft),z(Ce.$$.fragment,ft),z(de.$$.fragment,ft),z(Rt.$$.fragment,ft),z(We),Yt=!0)},o(ft){D(i.$$.fragment,ft),D(s.$$.fragment,ft),D(o.$$.fragment,ft),D(g.$$.fragment,ft),D(Z.$$.fragment,ft),D(ie.$$.fragment,ft),D(pe.$$.fragment,ft),D(Ce.$$.fragment,ft),D(de.$$.fragment,ft),D(Rt.$$.fragment,ft),D(We),Yt=!1},d(ft){ft&&(F(e),F(f),F(p),F(oe),F(se),F(je),F(Ve),F(Le),F(pt)),he(i),he(s),he(o),he(g),he(Z),he(ie),he(pe),he(Ce),he(de),he(Rt),~Jt&&ai[Jt].d()}}}function hd(n,e){return(typeof e=="string"?parseInt(e):e)===1?n:`${n}s`}function Qz(n,e,i){let t,r,s,l,o;const f=[_r.MO,_r.TU,_r.WE,_r.TH,_r.FR,_r.SA,_r.SU],p=new Map([[_r.DAILY,"day"],[_r.WEEKLY,"week"],[_r.MONTHLY,"month"]]),g=new Map([["until","On"],["count","After"],["infinite","Never"]]);let{recurrence:C}=e,{onChange:A=()=>{}}=e,V,U=C.until||void 0,G=C.count||1,Z=C.count?"count":C.until?"until":"infinite";function K(Me){if(Me){const Re=Me.value;if(!Re)return;Re===_r.DAILY&&C.byweekday&&C.byweekday.length!==7?(V=C.byweekday,i(0,C.byweekday=void 0,C)):Re!==_r.DAILY&&V&&(i(0,C.byweekday=V,C),V=void 0),i(0,C.freq=Re,C),A(C)}}function q(Me){if(!Me)return;C.freq===_r.DAILY&&i(0,C={...C,freq:_r.WEEKLY,interval:1});const Re=f.filter(Rt=>Me.includes(Rt.toString()));i(0,C.byweekday=Re,C),A(C)}function ie(Me){Me&&(C.dtstart?i(0,C.dtstart=C.dtstart.set(Me),C):i(0,C.dtstart=i2(Me,qc()),C),A(C))}function oe(Me,Re,Rt){Me&&(i(1,Z=Me),Me==="infinite"?(i(0,C.until=void 0,C),i(0,C.count=void 0,C)):Me==="until"?(i(0,C.until=Re,C),i(0,C.count=void 0,C)):Me==="count"&&(i(0,C.count=Rt,C),i(0,C.until=void 0,C)),A(C))}function se(Me,Re){return Me?hd(p.get(Me)||"",Re):""}function pe(Me){n.$$.not_equal(C.interval,Me)&&(C.interval=Me,i(0,C))}const Ie=Me=>oe(Me==null?void 0:Me.value,U,G),Ce=Me=>oe("until",Me,G);function je(Me){U=Me,i(2,U)}function Ve(Me){G=Me,i(3,G)}const de=()=>oe("count",U,G);return n.$$set=Me=>{"recurrence"in Me&&i(0,C=Me.recurrence),"onChange"in Me&&i(17,A=Me.onChange)},n.$$.update=()=>{n.$$.dirty[0]&1&&i(8,t={value:C.freq,label:se(C.freq,C.interval)}),n.$$.dirty[0]&2&&i(7,r={value:Z,label:g.get(Z)||"Never"}),n.$$.dirty[0]&1&&i(6,s=(C.byweekday||f).map(Me=>Me.toString())),n.$$.dirty[0]&1&&i(5,l=C.dtstart),n.$$.dirty[0]&1&&i(4,o=new _r(t2(C)))},[C,Z,U,G,o,l,s,r,t,f,p,g,K,q,ie,oe,se,A,pe,Ie,Ce,je,Ve,de]}class gy extends lt{constructor(e){super(),ct(this,e,Qz,Yz,st,{recurrence:0,onChange:17},null,[-1,-1])}}function $z(n){let e,i;return e=new Al({props:{placeholder:"Select an assignment type"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function eD(n){let e;return{c(){e=Ct("Day Off")},l(i){e=St(i,"Day Off")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function tD(n){let e;return{c(){e=Ct("Shift")},l(i){e=St(i,"Shift")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function iD(n){let e,i,t,r;return e=new Oo({props:{value:"DAY_OFF",$$slots:{default:[eD]},$$scope:{ctx:n}}}),t=new Oo({props:{value:"SHIFT",$$slots:{default:[tD]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&8192&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&8192&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function nD(n){let e,i,t,r;return e=new Il({props:{class:"max-w-48",$$slots:{default:[$z]},$$scope:{ctx:n}}}),t=new Tl({props:{$$slots:{default:[iD]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&8192&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&8192&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function K1(n){let e,i,t="Shift",r,s,l,o;function f(g){n[10](g)}let p={options:n[3],allowUnselect:!1,variant:"full"};return n[0].shift!==void 0&&(p.value=n[0].shift),s=new Ld({props:p}),Dt.push(()=>Bi(s,"value",f)),{c(){e=Ze("div"),i=Ze("span"),i.textContent=t,r=it(),ce(s.$$.fragment),this.h()},l(g){e=Ge(g,"DIV",{class:!0});var C=$e(e);i=Ge(C,"SPAN",{class:!0,"data-svelte-h":!0}),ts(i)!=="svelte-9b7bxe"&&(i.textContent=t),r=nt(C),ue(s.$$.fragment,C),C.forEach(F),this.h()},h(){gt(i,"class","text-sm font-semibold"),gt(e,"class","flex w-full flex-col gap-1.5")},m(g,C){Q(g,e,C),ut(e,i),ut(e,r),fe(s,e,null),o=!0},p(g,C){const A={};C&8&&(A.options=g[3]),!l&&C&1&&(l=!0,A.value=g[0].shift,Fi(()=>l=!1)),s.$set(A)},i(g){o||(z(s.$$.fragment,g),o=!0)},o(g){D(s.$$.fragment,g),o=!1},d(g){g&&F(e),he(s)}}}function rD(n){let e;return{c(){e=Ct('"Hard" assignment')},l(i){e=St(i,'"Hard" assignment')},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function sD(n){let e,i=n[1].name+"",t,r,s=n[1].name.toLowerCase().endsWith("shift")?"":"Shift",l;return{c(){e=Ct("would prefer to work "),t=Ct(i),r=it(),l=Ct(s)},l(o){e=St(o,"would prefer to work "),t=St(o,i),r=nt(o),l=St(o,s)},m(o,f){Q(o,e,f),Q(o,t,f),Q(o,r,f),Q(o,l,f)},p(o,f){f&2&&i!==(i=o[1].name+"")&&Ai(t,i),f&2&&s!==(s=o[1].name.toLowerCase().endsWith("shift")?"":"Shift")&&Ai(l,s)},d(o){o&&(F(e),F(t),F(r),F(l))}}}function oD(n){let e;return{c(){e=Ct("would prefer to take a day off")},l(i){e=St(i,"would prefer to take a day off")},m(i,t){Q(i,e,t)},p:Ci,d(i){i&&F(e)}}}function aD(n){let e;function i(s,l){if(s[0].params.type==="DAY_OFF")return cD;if(s[1])return lD}let t=i(n),r=t&&t(n);return{c(){r&&r.c(),e=He()},l(s){r&&r.l(s),e=He()},m(s,l){r&&r.m(s,l),Q(s,e,l)},p(s,l){t===(t=i(s))&&r?r.p(s,l):(r&&r.d(1),r=t&&t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&F(e),r&&r.d(s)}}}function lD(n){let e,i=n[1].name+"",t,r,s=n[1].name.toLowerCase().endsWith("shift")?"":"Shift",l;return{c(){e=Ct("must be assigned to "),t=Ct(i),r=it(),l=Ct(s)},l(o){e=St(o,"must be assigned to "),t=St(o,i),r=nt(o),l=St(o,s)},m(o,f){Q(o,e,f),Q(o,t,f),Q(o,r,f),Q(o,l,f)},p(o,f){f&2&&i!==(i=o[1].name+"")&&Ai(t,i),f&2&&s!==(s=o[1].name.toLowerCase().endsWith("shift")?"":"Shift")&&Ai(l,s)},d(o){o&&(F(e),F(t),F(r),F(l))}}}function cD(n){let e;return{c(){e=Ct("cannot work")},l(i){e=St(i,"cannot work")},m(i,t){Q(i,e,t)},p:Ci,d(i){i&&F(e)}}}function uD(n){var ai;let e,i,t,r,s="Assignment Type",l,o,f,p,g,C="Person",A,V,U,G,Z,K,q,ie,oe,se,pe,Ie,Ce=((ai=n[0].person)==null?void 0:ai.name)+"",je,Ve,de,Me,Re,Rt,ti,Jt,We,Le;o=new xl({props:{selected:J1(n[0]),onSelectedChange:n[4],$$slots:{default:[nD]},$$scope:{ctx:n}}});function pt(Ot){n[9](Ot)}let xt={options:n[2],allowUnselect:!1,variant:"full"};n[0].person!==void 0&&(xt.value=n[0].person),V=new Ld({props:xt}),Dt.push(()=>Bi(V,"value",pt));let At=n[0].params.type==="SHIFT"&&K1(n);ie=new V0({props:{id:"preference",checked:n[0].params.preference==="required",onCheckedChange:n[11]}}),se=new Sr({props:{for:"preference",class:"text-sm font-semibold leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",$$slots:{default:[rD]},$$scope:{ctx:n}}});function di(Ot,ft){if(Ot[0].params.preference==="required")return aD;if(Ot[0].params.type==="DAY_OFF")return oD;if(Ot[1])return sD}let Yt=di(n),li=Yt&&Yt(n);Re=new fd({props:{orientation:"vertical"}});function vt(Ot){n[12](Ot)}let fi={};return n[0].pattern.recurrenceOptions!==void 0&&(fi.recurrence=n[0].pattern.recurrenceOptions),Jt=new gy({props:fi}),Dt.push(()=>Bi(Jt,"recurrence",vt)),{c(){e=Ze("div"),i=Ze("div"),t=Ze("div"),r=Ze("span"),r.textContent=s,l=it(),ce(o.$$.fragment),f=it(),p=Ze("div"),g=Ze("span"),g.textContent=C,A=it(),ce(V.$$.fragment),G=it(),At&&At.c(),Z=it(),K=Ze("div"),q=Ze("div"),ce(ie.$$.fragment),oe=it(),ce(se.$$.fragment),pe=it(),Ie=Ze("p"),je=Ct(Ce),Ve=it(),li&&li.c(),de=Ct(`
        on these dates`),Me=it(),ce(Re.$$.fragment),Rt=it(),ti=Ze("div"),ce(Jt.$$.fragment),this.h()},l(Ot){e=Ge(Ot,"DIV",{class:!0});var ft=$e(e);i=Ge(ft,"DIV",{class:!0});var xe=$e(i);t=Ge(xe,"DIV",{class:!0});var Ni=$e(t);r=Ge(Ni,"SPAN",{class:!0,"data-svelte-h":!0}),ts(r)!=="svelte-aj5wkn"&&(r.textContent=s),l=nt(Ni),ue(o.$$.fragment,Ni),Ni.forEach(F),f=nt(xe),p=Ge(xe,"DIV",{class:!0});var dt=$e(p);g=Ge(dt,"SPAN",{class:!0,"data-svelte-h":!0}),ts(g)!=="svelte-x8aomr"&&(g.textContent=C),A=nt(dt),ue(V.$$.fragment,dt),dt.forEach(F),G=nt(xe),At&&At.l(xe),Z=nt(xe),K=Ge(xe,"DIV",{class:!0});var Mt=$e(K);q=Ge(Mt,"DIV",{class:!0});var ri=$e(q);ue(ie.$$.fragment,ri),oe=nt(ri),ue(se.$$.fragment,ri),ri.forEach(F),pe=nt(Mt),Ie=Ge(Mt,"P",{class:!0});var Ti=$e(Ie);je=St(Ti,Ce),Ve=nt(Ti),li&&li.l(Ti),de=St(Ti,`
        on these dates`),Ti.forEach(F),Mt.forEach(F),xe.forEach(F),Me=nt(ft),ue(Re.$$.fragment,ft),Rt=nt(ft),ti=Ge(ft,"DIV",{class:!0,style:!0});var Fe=$e(ti);ue(Jt.$$.fragment,Fe),Fe.forEach(F),ft.forEach(F),this.h()},h(){gt(r,"class","text-sm font-semibold"),gt(t,"class","flex w-full flex-col gap-1.5"),gt(g,"class","text-sm font-semibold"),gt(p,"class","flex w-full flex-col gap-1.5"),gt(q,"class","flex w-full space-x-2"),gt(Ie,"class","text-sm text-muted-foreground"),gt(K,"class","flex w-full flex-col gap-1.5"),gt(i,"class","flex flex-col gap-5"),gt(ti,"class","flex flex-col gap-6"),uf(ti,"padding-top","0.29rem"),gt(e,"class","gap- flex w-full flex-row gap-8")},m(Ot,ft){Q(Ot,e,ft),ut(e,i),ut(i,t),ut(t,r),ut(t,l),fe(o,t,null),ut(i,f),ut(i,p),ut(p,g),ut(p,A),fe(V,p,null),ut(i,G),At&&At.m(i,null),ut(i,Z),ut(i,K),ut(K,q),fe(ie,q,null),ut(q,oe),fe(se,q,null),ut(K,pe),ut(K,Ie),ut(Ie,je),ut(Ie,Ve),li&&li.m(Ie,null),ut(Ie,de),ut(e,Me),fe(Re,e,null),ut(e,Rt),ut(e,ti),fe(Jt,ti,null),Le=!0},p(Ot,[ft]){var Ti;const xe={};ft&1&&(xe.selected=J1(Ot[0])),ft&8192&&(xe.$$scope={dirty:ft,ctx:Ot}),o.$set(xe);const Ni={};ft&4&&(Ni.options=Ot[2]),!U&&ft&1&&(U=!0,Ni.value=Ot[0].person,Fi(()=>U=!1)),V.$set(Ni),Ot[0].params.type==="SHIFT"?At?(At.p(Ot,ft),ft&1&&z(At,1)):(At=K1(Ot),At.c(),z(At,1),At.m(i,Z)):At&&(Tt(),D(At,1,1,()=>{At=null}),It());const dt={};ft&1&&(dt.checked=Ot[0].params.preference==="required"),ft&1&&(dt.onCheckedChange=Ot[11]),ie.$set(dt);const Mt={};ft&8192&&(Mt.$$scope={dirty:ft,ctx:Ot}),se.$set(Mt),(!Le||ft&1)&&Ce!==(Ce=((Ti=Ot[0].person)==null?void 0:Ti.name)+"")&&Ai(je,Ce),Yt===(Yt=di(Ot))&&li?li.p(Ot,ft):(li&&li.d(1),li=Yt&&Yt(Ot),li&&(li.c(),li.m(Ie,de)));const ri={};!We&&ft&1&&(We=!0,ri.recurrence=Ot[0].pattern.recurrenceOptions,Fi(()=>We=!1)),Jt.$set(ri)},i(Ot){Le||(z(o.$$.fragment,Ot),z(V.$$.fragment,Ot),z(At),z(ie.$$.fragment,Ot),z(se.$$.fragment,Ot),z(Re.$$.fragment,Ot),z(Jt.$$.fragment,Ot),Le=!0)},o(Ot){D(o.$$.fragment,Ot),D(V.$$.fragment,Ot),D(At),D(ie.$$.fragment,Ot),D(se.$$.fragment,Ot),D(Re.$$.fragment,Ot),D(Jt.$$.fragment,Ot),Le=!1},d(Ot){Ot&&F(e),he(o),he(V),At&&At.d(),he(ie),he(se),li&&li.d(),he(Re),he(Jt)}}}function J1(n){switch(n.params.type){case"DAY_OFF":return{value:"DAY_OFF",label:"Day Off"};case"SHIFT":return{value:"SHIFT",label:"Shift"}}}function fD(n,e,i){let t,r,s,l,{item:o}=e;function f(Z){if(Z)switch(Z.value){case"DAY_OFF":i(0,o.params.type="DAY_OFF",o);break;case"SHIFT":i(0,o.params.type="SHIFT",o);break}}const p=o.state.people;ei(n,p,Z=>i(2,s=Z));const g=o.state.shifts;ei(n,g,Z=>i(3,l=Z));const C=o.state._shifts;ei(n,C,Z=>i(8,r=Z));function A(Z){n.$$.not_equal(o.person,Z)&&(o.person=Z,i(0,o))}function V(Z){n.$$.not_equal(o.shift,Z)&&(o.shift=Z,i(0,o))}const U=Z=>i(0,o.params.preference=Z?"required":"preferred",o);function G(Z){n.$$.not_equal(o.pattern.recurrenceOptions,Z)&&(o.pattern.recurrenceOptions=Z,i(0,o))}return n.$$set=Z=>{"item"in Z&&i(0,o=Z.item)},n.$$.update=()=>{n.$$.dirty&257&&i(1,t=o.params.shift?r.get(n2(o.params.shift)):void 0)},[o,t,s,l,f,p,g,C,r,A,V,U,G]}class hD extends lt{constructor(e){super(),ct(this,e,fD,uD,st,{item:0})}}const Rd=Symbol.for("svelte-maplibre");function El(){return Ir(Rd)}function dD(n){let e=new WeakMap;return i=>{var l;let t=e.get(i.originalEvent);if(t!==void 0)return t;let s=(l=i.target.queryRenderedFeatures(i.point).find(o=>{var f;return(f=n.get(o.layer.id))==null?void 0:f.interactive}))==null?void 0:l.layer.id;return e.set(i.originalEvent,s),s}}function mD(){let n=new Map;return Tr(Rd,{map:cn(null),source:zo(null),layer:zo(null),popupTarget:zo(null),cluster:cn(),loadedImages:cn(new Set),minzoom:cn(0),maxzoom:cn(24),layerEvent:cn(null),layerInfo:n,eventTopMost:dD(n),markerClickManager:new yD})}function Y1(n){return{subscribe:n.subscribe}}function pD({key:n,setPopupTarget:e=!1,setCluster:i=!1,setMouseEvent:t=!1}){let r=El(),s=cn(null),l=Y1(s),o={...r,[n]:Y1(s)};if(e&&(o.popupTarget=l),t){let f=cn(null);o.layerEvent=f,r.layerEvent=f}return i&&(o.cluster=cn()),Tr(Rd,o),{...r,self:s}}function _D(){return pD({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function gD(n){return"layerType"in n&&n.layerType==="deckgl"}class yD{constructor(){vp(this,"_handlers",new Set)}add(e){this._handlers.add(e)}remove(e){this._handlers.delete(e)}handleClick(e){for(const i of this._handlers)i(e)}}var yy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(n,e){(function(i,t){n.exports=t()})(r2,function(){var i={},t={};function r(l,o,f){if(t[l]=f,l==="index"){var p="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",g={};return t.shared(g),t.index(i,g),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),i}}r("shared",["exports"],function(l){function o(u,c,h,m){return new(h||(h=Promise))(function(b,x){function k(M){try{I(m.next(M))}catch(L){x(L)}}function S(M){try{I(m.throw(M))}catch(L){x(L)}}function I(M){var L;M.done?b(M.value):(L=M.value,L instanceof h?L:new h(function(O){O(L)})).then(k,S)}I((m=m.apply(u,c||[])).next())})}function f(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}typeof SuppressedError=="function"&&SuppressedError;var p=g;function g(u,c){this.x=u,this.y=c}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,c){return this.clone()._rotateAround(u,c)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var c=u.x-this.x,h=u.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,c){return Math.atan2(this.x*c-this.y*u,this.x*u+this.y*c)},_matMult:function(u){var c=u[2]*this.x+u[3]*this.y;return this.x=u[0]*this.x+u[1]*this.y,this.y=c,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var c=Math.cos(u),h=Math.sin(u),m=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=m,this},_rotateAround:function(u,c){var h=Math.cos(u),m=Math.sin(u),b=c.y+m*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-m*(this.y-c.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(u){return u instanceof g?u:Array.isArray(u)?new g(u[0],u[1]):u};var C=f(p),A=V;function V(u,c,h,m){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=h,this.p2y=m}V.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var h=u,m=0;m<8;m++){var b=this.sampleCurveX(h)-u;if(Math.abs(b)<c)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=b/x}var k=0,S=1;for(h=u,m=0;m<20&&(b=this.sampleCurveX(h),!(Math.abs(b-u)<c));m++)u>b?k=h:S=h,h=.5*(S-k)+k;return h},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}};var U=f(A);let G,Z;function K(){return G==null&&(G=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),G}function q(){if(Z==null&&(Z=!1,K())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let m=0;m<5*5;m++){const b=4*m;c.fillStyle=`rgb(${b},${b+1},${b+2})`,c.fillRect(m%5,Math.floor(m/5),1,1)}const h=c.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){Z=!0;break}}}return Z||!1}function ie(u,c,h,m){const b=new U(u,c,h,m);return x=>b.solve(x)}const oe=ie(.25,.1,.25,1);function se(u,c,h){return Math.min(h,Math.max(c,u))}function pe(u,c,h){const m=h-c,b=((u-c)%m+m)%m+c;return b===c?h:b}function Ie(u,...c){for(const h of c)for(const m in h)u[m]=h[m];return u}let Ce=1;function je(u,c,h){const m={};for(const b in u)m[b]=c.call(this,u[b],b,u);return m}function Ve(u,c,h){const m={};for(const b in u)c.call(this,u[b],b,u)&&(m[b]=u[b]);return m}function de(u){return Array.isArray(u)?u.map(de):typeof u=="object"&&u?je(u,de):u}const Me={};function Re(u){Me[u]||(typeof console<"u"&&console.warn(u),Me[u]=!0)}function Rt(u,c,h){return(h.y-u.y)*(c.x-u.x)>(c.y-u.y)*(h.x-u.x)}function ti(u){return typeof WorkerGlobalScope<"u"&&u!==void 0&&u instanceof WorkerGlobalScope}let Jt=null;function We(u){return typeof ImageBitmap<"u"&&u instanceof ImageBitmap}const Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function pt(u,c,h,m,b){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(u,{timestamp:0});try{const k=x==null?void 0:x.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const S=k.startsWith("BGR"),I=new Uint8ClampedArray(m*b*4);if(yield x.copyTo(I,function(M,L,O,j,X){const Y=4*Math.max(-L,0),$=(Math.max(0,O)-O)*j*4+Y,le=4*j,ye=Math.max(0,L),Be=Math.max(0,O);return{rect:{x:ye,y:Be,width:Math.min(M.width,L+j)-ye,height:Math.min(M.height,O+X)-Be},layout:[{offset:$,stride:le}]}}(u,c,h,m,b)),S)for(let M=0;M<I.length;M+=4){const L=I[M];I[M]=I[M+2],I[M+2]=L}return I}finally{x.close()}})}let xt,At;const di="AbortError";function Yt(){return new Error(di)}const li={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function vt(u){return li.REGISTERED_PROTOCOLS[u.substring(0,u.indexOf("://"))]}const fi="global-dispatcher";class ai extends Error{constructor(c,h,m,b){super(`AJAXError: ${h} (${c}): ${m}`),this.status=c,this.statusText=h,this.url=m,this.body=b}}const Ot=()=>ti(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ft=function(u,c){if(/:\/\//.test(u.url)&&!/^https?:|^file:/.test(u.url)){const m=vt(u.url);if(m)return m(u,c);if(ti(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,targetMapId:fi},c)}if(!(/^file:/.test(h=u.url)||/^file:/.test(Ot())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,b){return o(this,void 0,void 0,function*(){const x=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ot(),signal:b.signal});m.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");const k=yield fetch(x);if(!k.ok){const M=yield k.blob();throw new ai(k.status,k.statusText,m.url,M)}let S;S=m.type==="arrayBuffer"||m.type==="image"?k.arrayBuffer():m.type==="json"?k.json():k.text();const I=yield S;if(b.signal.aborted)throw Yt();return{data:I,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}})}(u,c);if(ti(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:u,mustQueue:!0,targetMapId:fi},c)}var h;return function(m,b){return new Promise((x,k)=>{var S;const I=new XMLHttpRequest;I.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(I.responseType="arraybuffer");for(const M in m.headers)I.setRequestHeader(M,m.headers[M]);m.type==="json"&&(I.responseType="text",!((S=m.headers)===null||S===void 0)&&S.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=m.credentials==="include",I.onerror=()=>{k(new Error(I.statusText))},I.onload=()=>{if(!b.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let M=I.response;if(m.type==="json")try{M=JSON.parse(I.response)}catch(L){return void k(L)}x({data:M,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const M=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});k(new ai(I.status,I.statusText,m.url,M))}},b.signal.addEventListener("abort",()=>{I.abort(),k(Yt())}),I.send(m.body)})}(u,c)};function xe(u){if(!u||u.indexOf("://")<=0||u.indexOf("data:image/")===0||u.indexOf("blob:")===0)return!0;const c=new URL(u),h=window.location;return c.protocol===h.protocol&&c.host===h.host}function Ni(u,c,h){h[u]&&h[u].indexOf(c)!==-1||(h[u]=h[u]||[],h[u].push(c))}function dt(u,c,h){if(h&&h[u]){const m=h[u].indexOf(c);m!==-1&&h[u].splice(m,1)}}class Mt{constructor(c,h={}){Ie(this,h),this.type=c}}class ri extends Mt{constructor(c,h={}){super("error",Ie({error:c},h))}}class Ti{on(c,h){return this._listeners=this._listeners||{},Ni(c,h,this._listeners),this}off(c,h){return dt(c,h,this._listeners),dt(c,h,this._oneTimeListeners),this}once(c,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Ni(c,h,this._oneTimeListeners),this):new Promise(m=>this.once(c,m))}fire(c,h){typeof c=="string"&&(c=new Mt(c,h||{}));const m=c.type;if(this.listens(m)){c.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const S of b)S.call(this,c);const x=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const S of x)dt(m,S,this._oneTimeListeners),S.call(this,c);const k=this._eventedParent;k&&(Ie(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(c))}else c instanceof ri&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,h){return this._eventedParent=c,this._eventedParentData=h,this}}var Fe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ot=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hn(u,c){const h={};for(const m in u)m!=="ref"&&(h[m]=u[m]);return ot.forEach(m=>{m in c&&(h[m]=c[m])}),h}function Ne(u,c){if(Array.isArray(u)){if(!Array.isArray(c)||u.length!==c.length)return!1;for(let h=0;h<u.length;h++)if(!Ne(u[h],c[h]))return!1;return!0}if(typeof u=="object"&&u!==null&&c!==null){if(typeof c!="object"||Object.keys(u).length!==Object.keys(c).length)return!1;for(const h in u)if(!Ne(u[h],c[h]))return!1;return!0}return u===c}function Wt(u,c){u.push(c)}function pi(u,c,h){Wt(h,{command:"addSource",args:[u,c[u]]})}function ln(u,c,h){Wt(c,{command:"removeSource",args:[u]}),h[u]=!0}function xn(u,c,h,m){ln(u,h,m),pi(u,c,h)}function ar(u,c,h){let m;for(m in u[h])if(Object.prototype.hasOwnProperty.call(u[h],m)&&m!=="data"&&!Ne(u[h][m],c[h][m]))return!1;for(m in c[h])if(Object.prototype.hasOwnProperty.call(c[h],m)&&m!=="data"&&!Ne(u[h][m],c[h][m]))return!1;return!0}function Dn(u,c,h,m,b,x){u=u||{},c=c||{};for(const k in u)Object.prototype.hasOwnProperty.call(u,k)&&(Ne(u[k],c[k])||h.push({command:x,args:[m,k,c[k],b]}));for(const k in c)Object.prototype.hasOwnProperty.call(c,k)&&!Object.prototype.hasOwnProperty.call(u,k)&&(Ne(u[k],c[k])||h.push({command:x,args:[m,k,c[k],b]}))}function Sn(u){return u.id}function qr(u,c){return u[c.id]=c,u}class Ae{constructor(c,h,m,b){this.message=(c?`${c}: `:"")+m,b&&(this.identifier=b),h!=null&&h.__line__&&(this.line=h.__line__)}}function Zr(u,...c){for(const h of c)for(const m in h)u[m]=h[m];return u}class qn extends Error{constructor(c,h){super(h),this.message=h,this.key=c}}class Gr{constructor(c,h=[]){this.parent=c,this.bindings={};for(const[m,b]of h)this.bindings[m]=b}concat(c){return new Gr(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const hs={kind:"null"},Ft={kind:"number"},Si={kind:"string"},mi={kind:"boolean"},Qn={kind:"color"},Ar={kind:"object"},bi={kind:"value"},Hr={kind:"collator"},ns={kind:"formatted"},ds={kind:"padding"},Wr={kind:"resolvedImage"},ge={kind:"variableAnchorOffsetCollection"};function W(u,c){return{kind:"array",itemType:u,N:c}}function H(u){if(u.kind==="array"){const c=H(u.itemType);return typeof u.N=="number"?`array<${c}, ${u.N}>`:u.itemType.kind==="value"?"array":`array<${c}>`}return u.kind}const te=[hs,Ft,Si,mi,Qn,ns,Ar,W(bi),ds,Wr,ge];function me(u,c){if(c.kind==="error")return null;if(u.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!me(u.itemType,c.itemType))&&(typeof u.N!="number"||u.N===c.N))return null}else{if(u.kind===c.kind)return null;if(u.kind==="value"){for(const h of te)if(!me(h,c))return null}}return`Expected ${H(u)} but found ${H(c)} instead.`}function Te(u,c){return c.some(h=>h.kind===u.kind)}function Pe(u,c){return c.some(h=>h==="null"?u===null:h==="array"?Array.isArray(u):h==="object"?u&&!Array.isArray(u)&&typeof u=="object":h===typeof u)}function Oe(u,c){return u.kind==="array"&&c.kind==="array"?u.itemType.kind===c.itemType.kind&&typeof u.N=="number":u.kind===c.kind}const we=.96422,tt=.82521,mt=4/29,Xe=6/29,Et=3*Xe*Xe,oi=Xe*Xe*Xe,ci=Math.PI/180,Ri=180/Math.PI;function vi(u){return(u%=360)<0&&(u+=360),u}function Oi([u,c,h,m]){let b,x;const k=bn((.2225045*(u=Mi(u))+.7168786*(c=Mi(c))+.0606169*(h=Mi(h)))/1);u===c&&c===h?b=x=k:(b=bn((.4360747*u+.3850649*c+.1430804*h)/we),x=bn((.0139322*u+.0971045*c+.7141733*h)/tt));const S=116*k-16;return[S<0?0:S,500*(b-k),200*(k-x),m]}function Mi(u){return u<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function bn(u){return u>oi?Math.pow(u,1/3):u/Et+mt}function un([u,c,h,m]){let b=(u+16)/116,x=isNaN(c)?b:b+c/500,k=isNaN(h)?b:b-h/200;return b=1*Hi(b),x=we*Hi(x),k=tt*Hi(k),[Ii(3.1338561*x-1.6168667*b-.4906146*k),Ii(-.9787684*x+1.9161415*b+.033454*k),Ii(.0719453*x-.2289914*b+1.4052427*k),m]}function Ii(u){return(u=u<=.00304?12.92*u:1.055*Math.pow(u,1/2.4)-.055)<0?0:u>1?1:u}function Hi(u){return u>Xe?u*u*u:Et*(u-mt)}function an(u){return parseInt(u.padEnd(2,u),16)/255}function Tn(u,c){return Pn(c?u/100:u,0,1)}function Pn(u,c,h){return Math.min(Math.max(c,u),h)}function Zn(u){return!u.some(Number.isNaN)}const Js={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Wi{constructor(c,h,m,b=1,x=!0){this.r=c,this.g=h,this.b=m,this.a=b,x||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[c,h,m,b]))}static parse(c){if(c instanceof Wi)return c;if(typeof c!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const b=Js[m];if(b){const[k,S,I]=b;return[k/255,S/255,I/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const k=m.length<6?1:2;let S=1;return[an(m.slice(S,S+=k)),an(m.slice(S,S+=k)),an(m.slice(S,S+=k)),an(m.slice(S,S+k)||"ff")]}if(m.startsWith("rgb")){const k=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[S,I,M,L,O,j,X,Y,$,le,ye,Be]=k,Se=[L||" ",X||" ",le].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const De=[M,j,$].join(""),et=De==="%%%"?100:De===""?255:0;if(et){const bt=[Pn(+I/et,0,1),Pn(+O/et,0,1),Pn(+Y/et,0,1),ye?Tn(+ye,Be):1];if(Zn(bt))return bt}}return}}const x=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[k,S,I,M,L,O,j,X,Y]=x,$=[I||" ",L||" ",j].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){const le=[+S,Pn(+M,0,100),Pn(+O,0,100),X?Tn(+X,Y):1];if(Zn(le))return function([ye,Be,Se,De]){function et(bt){const Zt=(bt+ye/30)%12,ui=Be*Math.min(Se,1-Se);return Se-ui*Math.max(-1,Math.min(Zt-3,9-Zt,1))}return ye=vi(ye),Be/=100,Se/=100,[et(0),et(8),et(4),De]}(le)}}}(c);return h?new Wi(...h,!1):void 0}get rgb(){const{r:c,g:h,b:m,a:b}=this,x=b||1/0;return this.overwriteGetter("rgb",[c/x,h/x,m/x,b])}get hcl(){return this.overwriteGetter("hcl",function(c){const[h,m,b,x]=Oi(c),k=Math.sqrt(m*m+b*b);return[Math.round(1e4*k)?vi(Math.atan2(b,m)*Ri):NaN,k,h,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Oi(this.rgb))}overwriteGetter(c,h){return Object.defineProperty(this,c,{value:h}),h}toString(){const[c,h,m,b]=this.rgb;return`rgba(${[c,h,m].map(x=>Math.round(255*x)).join(",")},${b})`}}Wi.black=new Wi(0,0,0,1),Wi.white=new Wi(1,1,1,1),Wi.transparent=new Wi(0,0,0,0),Wi.red=new Wi(1,0,0,1);class Pl{constructor(c,h,m){this.sensitivity=c?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,h){return this.collator.compare(c,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ml{constructor(c,h,m,b,x){this.text=c,this.image=h,this.scale=m,this.fontStack=b,this.textColor=x}}class lr{constructor(c){this.sections=c}static fromString(c){return new lr([new Ml(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof lr?c:lr.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class cr{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof cr)return c;if(typeof c=="number")return new cr([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const h of c)if(typeof h!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new cr(c)}}toString(){return JSON.stringify(this.values)}}const Af=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class gr{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof gr)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let h=0;h<c.length;h+=2){const m=c[h],b=c[h+1];if(typeof m!="string"||!Af.has(m)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new gr(c)}}toString(){return JSON.stringify(this.values)}}class ur{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new ur({name:c,available:!1}):null}}function Ys(u,c,h,m){return typeof u=="number"&&u>=0&&u<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[u,c,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[u,c,h,m]:[u,c,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function As(u){if(u===null||typeof u=="string"||typeof u=="boolean"||typeof u=="number"||u instanceof Wi||u instanceof Pl||u instanceof lr||u instanceof cr||u instanceof gr||u instanceof ur)return!0;if(Array.isArray(u)){for(const c of u)if(!As(c))return!1;return!0}if(typeof u=="object"){for(const c in u)if(!As(u[c]))return!1;return!0}return!1}function vn(u){if(u===null)return hs;if(typeof u=="string")return Si;if(typeof u=="boolean")return mi;if(typeof u=="number")return Ft;if(u instanceof Wi)return Qn;if(u instanceof Pl)return Hr;if(u instanceof lr)return ns;if(u instanceof cr)return ds;if(u instanceof gr)return ge;if(u instanceof ur)return Wr;if(Array.isArray(u)){const c=u.length;let h;for(const m of u){const b=vn(m);if(h){if(h===b)continue;h=bi;break}h=b}return W(h||bi,c)}return Ar}function Uo(u){const c=typeof u;return u===null?"":c==="string"||c==="number"||c==="boolean"?String(u):u instanceof Wi||u instanceof lr||u instanceof cr||u instanceof gr||u instanceof ur?u.toString():JSON.stringify(u)}class Er{constructor(c,h){this.type=c,this.value=h}static parse(c,h){if(c.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!As(c[1]))return h.error("invalid value");const m=c[1];let b=vn(m);const x=h.expectedType;return b.kind!=="array"||b.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(b=x),new Er(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _n{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const ka={string:Si,number:Ft,boolean:mi,object:Ar};class Pr{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");let m,b=1;const x=c[0];if(x==="array"){let S,I;if(c.length>2){const M=c[1];if(typeof M!="string"||!(M in ka)||M==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);S=ka[M],b++}else S=bi;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return h.error('The length argument to "array" must be a positive integer literal',2);I=c[2],b++}m=W(S,I)}else{if(!ka[x])throw new Error(`Types doesn't contain name = ${x}`);m=ka[x]}const k=[];for(;b<c.length;b++){const S=h.parse(c[b],b,bi);if(!S)return null;k.push(S)}return new Pr(m,k)}evaluate(c){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(c);if(!me(this.type,vn(m)))return m;if(h===this.args.length-1)throw new _n(`Expected value to be of type ${H(this.type)}, but found ${H(vn(m))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const zl={"to-boolean":mi,"to-color":Qn,"to-number":Ft,"to-string":Si};class Mr{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const m=c[0];if(!zl[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&c.length!==2)return h.error("Expected one argument.");const b=zl[m],x=[];for(let k=1;k<c.length;k++){const S=h.parse(c[k],k,bi);if(!S)return null;x.push(S)}return new Mr(b,x)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let h,m;for(const b of this.args){if(h=b.evaluate(c),m=null,h instanceof Wi)return h;if(typeof h=="string"){const x=c.parseColor(h);if(x)return x}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Ys(h[0],h[1],h[2],h[3]),!m))return new Wi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new _n(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(c);const b=cr.parse(h);if(b)return b}throw new _n(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(c);const b=gr.parse(h);if(b)return b}throw new _n(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(c),h===null)return 0;const b=Number(h);if(!isNaN(b))return b}throw new _n(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return lr.fromString(Uo(this.args[0].evaluate(c)));case"resolvedImage":return ur.fromString(Uo(this.args[0].evaluate(c)));default:return Uo(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Ef=["Unknown","Point","LineString","Polygon"];class Ca{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ef[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let h=this._parseColorCache[c];return h||(h=this._parseColorCache[c]=Wi.parse(c)),h}}class Es{constructor(c,h,m=[],b,x=new Gr,k=[]){this.registry=c,this.path=m,this.key=m.map(S=>`[${S}]`).join(""),this.scope=x,this.errors=k,this.expectedType=b,this._isConstant=h}parse(c,h,m,b,x={}){return h?this.concat(h,m,b)._parse(c,x):this._parse(c,x)}_parse(c,h){function m(b,x,k){return k==="assert"?new Pr(x,[b]):k==="coerce"?new Mr(x,[b]):b}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=c[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[b];if(x){let k=x.parse(c,this);if(!k)return null;if(this.expectedType){const S=this.expectedType,I=k.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||I.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(S.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(S,I))return null}else k=m(k,S,h.typeAnnotation||"coerce");else k=m(k,S,h.typeAnnotation||"coerce");else k=m(k,S,h.typeAnnotation||"coerce");else k=m(k,S,h.typeAnnotation||"assert")}if(!(k instanceof Er)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const S=new Ca;try{k=new Er(k.type,k.evaluate(S))}catch(I){return this.error(I.message),null}}return k}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,h,m){const b=typeof c=="number"?this.path.concat(c):this.path,x=m?this.scope.concat(m):this.scope;return new Es(this.registry,this._isConstant,b,h||null,x,this.errors)}error(c,...h){const m=`${this.key}${h.map(b=>`[${b}]`).join("")}`;this.errors.push(new qn(m,c))}checkSubtype(c,h){const m=me(c,h);return m&&this.error(m),m}}class ms{constructor(c,h){this.type=h.type,this.bindings=[].concat(c),this.result=h}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const h of this.bindings)c(h[1]);c(this.result)}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const m=[];for(let x=1;x<c.length-1;x+=2){const k=c[x];if(typeof k!="string")return h.error(`Expected string, but found ${typeof k} instead.`,x);if(/[^a-zA-Z0-9_]/.test(k))return h.error("Variable names must contain only alphanumeric characters or '_'.",x);const S=h.parse(c[x+1],x+1);if(!S)return null;m.push([k,S])}const b=h.parse(c[c.length-1],c.length-1,h.expectedType,m);return b?new ms(m,b):null}outputDefined(){return this.result.outputDefined()}}class Ui{constructor(c,h){this.type=h.type,this.name=c,this.boundExpression=h}static parse(c,h){if(c.length!==2||typeof c[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=c[1];return h.scope.has(m)?new Ui(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class Dl{constructor(c,h,m){this.type=c,this.index=h,this.input=m}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,Ft),b=h.parse(c[2],2,W(h.expectedType||bi));return m&&b?new Dl(b.type.itemType,m,b):null}evaluate(c){const h=this.index.evaluate(c),m=this.input.evaluate(c);if(h<0)throw new _n(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new _n(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new _n(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Ll{constructor(c,h){this.type=mi,this.needle=c,this.haystack=h}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,bi),b=h.parse(c[2],2,bi);return m&&b?Te(m.type,[mi,Si,Ft,hs,bi])?new Ll(m,b):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`):null}evaluate(c){const h=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!m)return!1;if(!Pe(h,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${H(vn(h))} instead.`);if(!Pe(m,["string","array"]))throw new _n(`Expected second argument to be of type array or string, but found ${H(vn(m))} instead.`);return m.indexOf(h)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Qs{constructor(c,h,m){this.type=Ft,this.needle=c,this.haystack=h,this.fromIndex=m}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,bi),b=h.parse(c[2],2,bi);if(!m||!b)return null;if(!Te(m.type,[mi,Si,Ft,hs,bi]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(m.type)} instead`);if(c.length===4){const x=h.parse(c[3],3,Ft);return x?new Qs(m,b,x):null}return new Qs(m,b)}evaluate(c){const h=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!Pe(h,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${H(vn(h))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(c)),Pe(m,["string"])){const x=m.indexOf(h,b);return x===-1?-1:[...m.slice(0,x)].length}if(Pe(m,["array"]))return m.indexOf(h,b);throw new _n(`Expected second argument to be of type array or string, but found ${H(vn(m))} instead.`)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Rl{constructor(c,h,m,b,x,k){this.inputType=c,this.type=h,this.input=m,this.cases=b,this.outputs=x,this.otherwise=k}static parse(c,h){if(c.length<5)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return h.error("Expected an even number of arguments.");let m,b;h.expectedType&&h.expectedType.kind!=="value"&&(b=h.expectedType);const x={},k=[];for(let M=2;M<c.length-1;M+=2){let L=c[M];const O=c[M+1];Array.isArray(L)||(L=[L]);const j=h.concat(M);if(L.length===0)return j.error("Expected at least one branch label.");for(const Y of L){if(typeof Y!="number"&&typeof Y!="string")return j.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return j.error("Numeric branch labels must be integer values.");if(m){if(j.checkSubtype(m,vn(Y)))return null}else m=vn(Y);if(x[String(Y)]!==void 0)return j.error("Branch labels must be unique.");x[String(Y)]=k.length}const X=h.parse(O,M,b);if(!X)return null;b=b||X.type,k.push(X)}const S=h.parse(c[1],1,bi);if(!S)return null;const I=h.parse(c[c.length-1],c.length-1,b);return I?S.type.kind!=="value"&&h.concat(1).checkSubtype(m,S.type)?null:new Rl(m,b,S,x,k,I):null}evaluate(c){const h=this.input.evaluate(c);return(vn(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Sa{constructor(c,h,m){this.type=c,this.branches=h,this.otherwise=m}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const b=[];for(let k=1;k<c.length-1;k+=2){const S=h.parse(c[k],k,mi);if(!S)return null;const I=h.parse(c[k+1],k+1,m);if(!I)return null;b.push([S,I]),m=m||I.type}const x=h.parse(c[c.length-1],c.length-1,m);if(!x)return null;if(!m)throw new Error("Can't infer output type");return new Sa(m,b,x)}evaluate(c){for(const[h,m]of this.branches)if(h.evaluate(c))return m.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[h,m]of this.branches)c(h),c(m);c(this.otherwise)}outputDefined(){return this.branches.every(([c,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class qo{constructor(c,h,m,b){this.type=c,this.input=h,this.beginIndex=m,this.endIndex=b}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,bi),b=h.parse(c[2],2,Ft);if(!m||!b)return null;if(!Te(m.type,[W(bi),Si,bi]))return h.error(`Expected first argument to be of type array or string, but found ${H(m.type)} instead`);if(c.length===4){const x=h.parse(c[3],3,Ft);return x?new qo(m.type,m,b,x):null}return new qo(m.type,m,b)}evaluate(c){const h=this.input.evaluate(c),m=this.beginIndex.evaluate(c);let b;if(this.endIndex&&(b=this.endIndex.evaluate(c)),Pe(h,["string"]))return[...h].slice(m,b).join("");if(Pe(h,["array"]))return h.slice(m,b);throw new _n(`Expected first argument to be of type array or string, but found ${H(vn(h))} instead.`)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Ta(u,c){const h=u.length-1;let m,b,x=0,k=h,S=0;for(;x<=k;)if(S=Math.floor((x+k)/2),m=u[S],b=u[S+1],m<=c){if(S===h||c<b)return S;x=S+1}else{if(!(m>c))throw new _n("Input is not a number.");k=S-1}return 0}class $s{constructor(c,h,m){this.type=c,this.input=h,this.labels=[],this.outputs=[];for(const[b,x]of m)this.labels.push(b),this.outputs.push(x)}static parse(c,h){if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(c[1],1,Ft);if(!m)return null;const b=[];let x=null;h.expectedType&&h.expectedType.kind!=="value"&&(x=h.expectedType);for(let k=1;k<c.length;k+=2){const S=k===1?-1/0:c[k],I=c[k+1],M=k,L=k+1;if(typeof S!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(b.length&&b[b.length-1][0]>=S)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const O=h.parse(I,L,x);if(!O)return null;x=x||O.type,b.push([S,O])}return new $s(x,m,b)}evaluate(c){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(c);const b=this.input.evaluate(c);if(b<=h[0])return m[0].evaluate(c);const x=h.length;return b>=h[x-1]?m[x-1].evaluate(c):m[Ta(h,b)].evaluate(c)}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function eu(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Pf=tu;function tu(u,c,h,m){this.cx=3*u,this.bx=3*(h-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=c,this.p2x=h,this.p2y=m}tu.prototype={sampleCurveX:function(u){return((this.ax*u+this.bx)*u+this.cx)*u},sampleCurveY:function(u){return((this.ay*u+this.by)*u+this.cy)*u},sampleCurveDerivativeX:function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},solveCurveX:function(u,c){if(c===void 0&&(c=1e-6),u<0)return 0;if(u>1)return 1;for(var h=u,m=0;m<8;m++){var b=this.sampleCurveX(h)-u;if(Math.abs(b)<c)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=b/x}var k=0,S=1;for(h=u,m=0;m<20&&(b=this.sampleCurveX(h),!(Math.abs(b-u)<c));m++)u>b?k=h:S=h,h=.5*(S-k)+k;return h},solve:function(u,c){return this.sampleCurveY(this.solveCurveX(u,c))}};var Mf=eu(Pf);function Ps(u,c,h){return u+h*(c-u)}function Zo(u,c,h){return u.map((m,b)=>Ps(m,c[b],h))}const $n={number:Ps,color:function(u,c,h,m="rgb"){switch(m){case"rgb":{const[b,x,k,S]=Zo(u.rgb,c.rgb,h);return new Wi(b,x,k,S,!1)}case"hcl":{const[b,x,k,S]=u.hcl,[I,M,L,O]=c.hcl;let j,X;if(isNaN(b)||isNaN(I))isNaN(b)?isNaN(I)?j=NaN:(j=I,k!==1&&k!==0||(X=M)):(j=b,L!==1&&L!==0||(X=x));else{let Be=I-b;I>b&&Be>180?Be-=360:I<b&&b-I>180&&(Be+=360),j=b+h*Be}const[Y,$,le,ye]=function([Be,Se,De,et]){return Be=isNaN(Be)?0:Be*ci,un([De,Math.cos(Be)*Se,Math.sin(Be)*Se,et])}([j,X??Ps(x,M,h),Ps(k,L,h),Ps(S,O,h)]);return new Wi(Y,$,le,ye,!1)}case"lab":{const[b,x,k,S]=un(Zo(u.lab,c.lab,h));return new Wi(b,x,k,S,!1)}}},array:Zo,padding:function(u,c,h){return new cr(Zo(u.values,c.values,h))},variableAnchorOffsetCollection:function(u,c,h){const m=u.values,b=c.values;if(m.length!==b.length)throw new _n(`Cannot interpolate values of different length. from: ${u.toString()}, to: ${c.toString()}`);const x=[];for(let k=0;k<m.length;k+=2){if(m[k]!==b[k])throw new _n(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${m[k]}, to[${k}]: ${b[k]}`);x.push(m[k]);const[S,I]=m[k+1],[M,L]=b[k+1];x.push([Ps(S,M,h),Ps(I,L,h)])}return new gr(x)}};class er{constructor(c,h,m,b,x){this.type=c,this.operator=h,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[k,S]of x)this.labels.push(k),this.outputs.push(S)}static interpolationFactor(c,h,m,b){let x=0;if(c.name==="exponential")x=Ia(h,c.base,m,b);else if(c.name==="linear")x=Ia(h,1,m,b);else if(c.name==="cubic-bezier"){const k=c.controlPoints;x=new Mf(k[0],k[1],k[2],k[3]).solve(Ia(h,1,m,b))}return x}static parse(c,h){let[m,b,x,...k]=c;if(!Array.isArray(b)||b.length===0)return h.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const M=b[1];if(typeof M!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:M}}else{if(b[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const M=b.slice(1);if(M.length!==4||M.some(L=>typeof L!="number"||L<0||L>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:M}}}if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(x=h.parse(x,2,Ft),!x)return null;const S=[];let I=null;m==="interpolate-hcl"||m==="interpolate-lab"?I=Qn:h.expectedType&&h.expectedType.kind!=="value"&&(I=h.expectedType);for(let M=0;M<k.length;M+=2){const L=k[M],O=k[M+1],j=M+3,X=M+4;if(typeof L!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(S.length&&S[S.length-1][0]>=L)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const Y=h.parse(O,X,I);if(!Y)return null;I=I||Y.type,S.push([L,Y])}return Oe(I,Ft)||Oe(I,Qn)||Oe(I,ds)||Oe(I,ge)||Oe(I,W(Ft))?new er(I,m,b,x,S):h.error(`Type ${H(I)} is not interpolatable.`)}evaluate(c){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(c);const b=this.input.evaluate(c);if(b<=h[0])return m[0].evaluate(c);const x=h.length;if(b>=h[x-1])return m[x-1].evaluate(c);const k=Ta(h,b),S=er.interpolationFactor(this.interpolation,b,h[k],h[k+1]),I=m[k].evaluate(c),M=m[k+1].evaluate(c);switch(this.operator){case"interpolate":return $n[this.type.kind](I,M,S);case"interpolate-hcl":return $n.color(I,M,S,"hcl");case"interpolate-lab":return $n.color(I,M,S,"lab")}}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Ia(u,c,h,m){const b=m-h,x=u-h;return b===0?0:c===1?x/b:(Math.pow(c,x)-1)/(Math.pow(c,b)-1)}class Aa{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expectected at least one argument.");let m=null;const b=h.expectedType;b&&b.kind!=="value"&&(m=b);const x=[];for(const S of c.slice(1)){const I=h.parse(S,1+x.length,m,void 0,{typeAnnotation:"omit"});if(!I)return null;m=m||I.type,x.push(I)}if(!m)throw new Error("No output type");const k=b&&x.some(S=>me(b,S.type));return new Aa(k?bi:m,x)}evaluate(c){let h,m=null,b=0;for(const x of this.args)if(b++,m=x.evaluate(c),m&&m instanceof ur&&!m.available&&(h||(h=m.name),m=null,b===this.args.length&&(m=h)),m!==null)break;return m}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}function Ea(u,c){return u==="=="||u==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function iu(u,c,h,m){return m.compare(c,h)===0}function eo(u,c,h){const m=u!=="=="&&u!=="!=";return class by{constructor(x,k,S){this.type=mi,this.lhs=x,this.rhs=k,this.collator=S,this.hasUntypedArgument=x.type.kind==="value"||k.type.kind==="value"}static parse(x,k){if(x.length!==3&&x.length!==4)return k.error("Expected two or three arguments.");const S=x[0];let I=k.parse(x[1],1,bi);if(!I)return null;if(!Ea(S,I.type))return k.concat(1).error(`"${S}" comparisons are not supported for type '${H(I.type)}'.`);let M=k.parse(x[2],2,bi);if(!M)return null;if(!Ea(S,M.type))return k.concat(2).error(`"${S}" comparisons are not supported for type '${H(M.type)}'.`);if(I.type.kind!==M.type.kind&&I.type.kind!=="value"&&M.type.kind!=="value")return k.error(`Cannot compare types '${H(I.type)}' and '${H(M.type)}'.`);m&&(I.type.kind==="value"&&M.type.kind!=="value"?I=new Pr(M.type,[I]):I.type.kind!=="value"&&M.type.kind==="value"&&(M=new Pr(I.type,[M])));let L=null;if(x.length===4){if(I.type.kind!=="string"&&M.type.kind!=="string"&&I.type.kind!=="value"&&M.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(L=k.parse(x[3],3,Hr),!L)return null}return new by(I,M,L)}evaluate(x){const k=this.lhs.evaluate(x),S=this.rhs.evaluate(x);if(m&&this.hasUntypedArgument){const I=vn(k),M=vn(S);if(I.kind!==M.kind||I.kind!=="string"&&I.kind!=="number")throw new _n(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${I.kind}, ${M.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const I=vn(k),M=vn(S);if(I.kind!=="string"||M.kind!=="string")return c(x,k,S)}return this.collator?h(x,k,S,this.collator.evaluate(x)):c(x,k,S)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const zf=eo("==",function(u,c,h){return c===h},iu),nu=eo("!=",function(u,c,h){return c!==h},function(u,c,h,m){return!iu(0,c,h,m)}),ru=eo("<",function(u,c,h){return c<h},function(u,c,h,m){return m.compare(c,h)<0}),Df=eo(">",function(u,c,h){return c>h},function(u,c,h,m){return m.compare(c,h)>0}),Lf=eo("<=",function(u,c,h){return c<=h},function(u,c,h,m){return m.compare(c,h)<=0}),su=eo(">=",function(u,c,h){return c>=h},function(u,c,h,m){return m.compare(c,h)>=0});class Go{constructor(c,h,m){this.type=Hr,this.locale=m,this.caseSensitive=c,this.diacriticSensitive=h}static parse(c,h){if(c.length!==2)return h.error("Expected one argument.");const m=c[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const b=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,mi);if(!b)return null;const x=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,mi);if(!x)return null;let k=null;return m.locale&&(k=h.parse(m.locale,1,Si),!k)?null:new Go(b,x,k)}evaluate(c){return new Pl(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}class Ol{constructor(c,h,m,b,x){this.type=Si,this.number=c,this.locale=h,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=x}static parse(c,h){if(c.length!==3)return h.error("Expected two arguments.");const m=h.parse(c[1],1,Ft);if(!m)return null;const b=c[2];if(typeof b!="object"||Array.isArray(b))return h.error("NumberFormat options argument must be an object.");let x=null;if(b.locale&&(x=h.parse(b.locale,1,Si),!x))return null;let k=null;if(b.currency&&(k=h.parse(b.currency,1,Si),!k))return null;let S=null;if(b["min-fraction-digits"]&&(S=h.parse(b["min-fraction-digits"],1,Ft),!S))return null;let I=null;return b["max-fraction-digits"]&&(I=h.parse(b["max-fraction-digits"],1,Ft),!I)?null:new Ol(m,x,k,S,I)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class Pa{constructor(c){this.type=ns,this.sections=c}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const m=c[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const b=[];let x=!1;for(let k=1;k<=c.length-1;++k){const S=c[k];if(x&&typeof S=="object"&&!Array.isArray(S)){x=!1;let I=null;if(S["font-scale"]&&(I=h.parse(S["font-scale"],1,Ft),!I))return null;let M=null;if(S["text-font"]&&(M=h.parse(S["text-font"],1,W(Si)),!M))return null;let L=null;if(S["text-color"]&&(L=h.parse(S["text-color"],1,Qn),!L))return null;const O=b[b.length-1];O.scale=I,O.font=M,O.textColor=L}else{const I=h.parse(c[k],1,bi);if(!I)return null;const M=I.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,b.push({content:I,scale:null,font:null,textColor:null})}}return new Pa(b)}evaluate(c){return new lr(this.sections.map(h=>{const m=h.content.evaluate(c);return vn(m)===Wr?new Ml("",m,null,null,null):new Ml(Uo(m),null,h.scale?h.scale.evaluate(c):null,h.font?h.font.evaluate(c).join(","):null,h.textColor?h.textColor.evaluate(c):null)}))}eachChild(c){for(const h of this.sections)c(h.content),h.scale&&c(h.scale),h.font&&c(h.font),h.textColor&&c(h.textColor)}outputDefined(){return!1}}class Fl{constructor(c){this.type=Wr,this.input=c}static parse(c,h){if(c.length!==2)return h.error("Expected two arguments.");const m=h.parse(c[1],1,Si);return m?new Fl(m):h.error("No image name provided.")}evaluate(c){const h=this.input.evaluate(c),m=ur.fromString(h);return m&&c.availableImages&&(m.available=c.availableImages.indexOf(h)>-1),m}eachChild(c){c(this.input)}outputDefined(){return!1}}class Bl{constructor(c){this.type=Ft,this.input=c}static parse(c,h){if(c.length!==2)return h.error(`Expected 1 argument, but found ${c.length-1} instead.`);const m=h.parse(c[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${H(m.type)} instead.`):new Bl(m):null}evaluate(c){const h=this.input.evaluate(c);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new _n(`Expected value to be of type string or array, but found ${H(vn(h))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Xr=8192;function Rf(u,c){const h=(180+u[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u[1]*Math.PI/360)))/360,b=Math.pow(2,c.z);return[Math.round(h*b*Xr),Math.round(m*b*Xr)]}function Nl(u,c){const h=Math.pow(2,c.z);return[(b=(u[0]/Xr+c.x)/h,360*b-180),(m=(u[1]/Xr+c.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,b}function Ms(u,c){u[0]=Math.min(u[0],c[0]),u[1]=Math.min(u[1],c[1]),u[2]=Math.max(u[2],c[0]),u[3]=Math.max(u[3],c[1])}function ps(u,c){return!(u[0]<=c[0]||u[2]>=c[2]||u[1]<=c[1]||u[3]>=c[3])}function qi(u,c,h){const m=u[0]-c[0],b=u[1]-c[1],x=u[0]-h[0],k=u[1]-h[1];return m*k-x*b==0&&m*x<=0&&b*k<=0}function Ma(u,c,h,m){return(b=[m[0]-h[0],m[1]-h[1]])[0]*(x=[c[0]-u[0],c[1]-u[1]])[1]-b[1]*x[0]!=0&&!(!au(u,c,h,m)||!au(h,m,u,c));var b,x}function Of(u,c,h){for(const m of h)for(let b=0;b<m.length-1;++b)if(Ma(u,c,m[b],m[b+1]))return!0;return!1}function to(u,c,h=!1){let m=!1;for(const S of c)for(let I=0;I<S.length-1;I++){if(qi(u,S[I],S[I+1]))return h;(x=S[I])[1]>(b=u)[1]!=(k=S[I+1])[1]>b[1]&&b[0]<(k[0]-x[0])*(b[1]-x[1])/(k[1]-x[1])+x[0]&&(m=!m)}var b,x,k;return m}function Ff(u,c){for(const h of c)if(to(u,h))return!0;return!1}function ou(u,c){for(const h of u)if(!to(h,c))return!1;for(let h=0;h<u.length-1;++h)if(Of(u[h],u[h+1],c))return!1;return!0}function Bf(u,c){for(const h of c)if(ou(u,h))return!0;return!1}function au(u,c,h,m){const b=m[0]-h[0],x=m[1]-h[1],k=(u[0]-h[0])*x-b*(u[1]-h[1]),S=(c[0]-h[0])*x-b*(c[1]-h[1]);return k>0&&S<0||k<0&&S>0}function Vl(u,c,h){const m=[];for(let b=0;b<u.length;b++){const x=[];for(let k=0;k<u[b].length;k++){const S=Rf(u[b][k],h);Ms(c,S),x.push(S)}m.push(x)}return m}function lu(u,c,h){const m=[];for(let b=0;b<u.length;b++){const x=Vl(u[b],c,h);m.push(x)}return m}function cu(u,c,h,m){if(u[0]<h[0]||u[0]>h[2]){const b=.5*m;let x=u[0]-h[0]>b?-m:h[0]-u[0]>b?m:0;x===0&&(x=u[0]-h[2]>b?-m:h[2]-u[0]>b?m:0),u[0]+=x}Ms(c,u)}function uu(u,c,h,m){const b=Math.pow(2,m.z)*Xr,x=[m.x*Xr,m.y*Xr],k=[];for(const S of u)for(const I of S){const M=[I.x+x[0],I.y+x[1]];cu(M,c,h,b),k.push(M)}return k}function fu(u,c,h,m){const b=Math.pow(2,m.z)*Xr,x=[m.x*Xr,m.y*Xr],k=[];for(const I of u){const M=[];for(const L of I){const O=[L.x+x[0],L.y+x[1]];Ms(c,O),M.push(O)}k.push(M)}if(c[2]-c[0]<=b/2){(S=c)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const I of k)for(const M of I)cu(M,c,h,b)}var S;return k}class zs{constructor(c,h){this.type=mi,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(As(c[1])){const m=c[1];if(m.type==="FeatureCollection"){const b=[];for(const x of m.features){const{type:k,coordinates:S}=x.geometry;k==="Polygon"&&b.push(S),k==="MultiPolygon"&&b.push(...S)}if(b.length)return new zs(m,{type:"MultiPolygon",coordinates:b})}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new zs(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new zs(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(m.type==="Polygon"){const S=Vl(m.coordinates,x,k),I=uu(h.geometry(),b,x,k);if(!ps(b,x))return!1;for(const M of I)if(!to(M,S))return!1}if(m.type==="MultiPolygon"){const S=lu(m.coordinates,x,k),I=uu(h.geometry(),b,x,k);if(!ps(b,x))return!1;for(const M of I)if(!Ff(M,S))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(m.type==="Polygon"){const S=Vl(m.coordinates,x,k),I=fu(h.geometry(),b,x,k);if(!ps(b,x))return!1;for(const M of I)if(!ou(M,S))return!1}if(m.type==="MultiPolygon"){const S=lu(m.coordinates,x,k),I=fu(h.geometry(),b,x,k);if(!ps(b,x))return!1;for(const M of I)if(!Bf(M,S))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let hu=class{constructor(u=[],c=(h,m)=>h<m?-1:h>m?1:0){if(this.data=u,this.length=this.data.length,this.compare=c,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(u){this.data.push(u),this._up(this.length++)}pop(){if(this.length===0)return;const u=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),u}peek(){return this.data[0]}_up(u){const{data:c,compare:h}=this,m=c[u];for(;u>0;){const b=u-1>>1,x=c[b];if(h(m,x)>=0)break;c[u]=x,u=b}c[u]=m}_down(u){const{data:c,compare:h}=this,m=this.length>>1,b=c[u];for(;u<m;){let x=1+(u<<1);const k=x+1;if(k<this.length&&h(c[k],c[x])<0&&(x=k),h(c[x],b)>=0)break;c[u]=c[x],u=x}c[u]=b}};function Nf(u,c,h,m,b){du(u,c,h,m||u.length-1,b||Vf)}function du(u,c,h,m,b){for(;m>h;){if(m-h>600){var x=m-h+1,k=c-h+1,S=Math.log(x),I=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*I*(x-I)/x)*(k-x/2<0?-1:1);du(u,c,Math.max(h,Math.floor(c-k*I/x+M)),Math.min(m,Math.floor(c+(x-k)*I/x+M)),b)}var L=u[c],O=h,j=m;for(Ho(u,h,c),b(u[m],L)>0&&Ho(u,h,m);O<j;){for(Ho(u,O,j),O++,j--;b(u[O],L)<0;)O++;for(;b(u[j],L)>0;)j--}b(u[h],L)===0?Ho(u,h,j):Ho(u,++j,m),j<=c&&(h=j+1),c<=j&&(m=j-1)}}function Ho(u,c,h){var m=u[c];u[c]=u[h],u[h]=m}function Vf(u,c){return u<c?-1:u>c?1:0}function za(u,c){if(u.length<=1)return[u];const h=[];let m,b;for(const x of u){const k=Uf(x);k!==0&&(x.area=Math.abs(k),b===void 0&&(b=k<0),b===k<0?(m&&h.push(m),m=[x]):m.push(x))}if(m&&h.push(m),c>1)for(let x=0;x<h.length;x++)h[x].length<=c||(Nf(h[x],c,1,h[x].length-1,jf),h[x]=h[x].slice(0,c));return h}function jf(u,c){return c.area-u.area}function Uf(u){let c=0;for(let h,m,b=0,x=u.length,k=x-1;b<x;k=b++)h=u[b],m=u[k],c+=(m.x-h.x)*(h.y+m.y);return c}const mu=1/298.257223563,pu=mu*(2-mu),_u=Math.PI/180;class jl{constructor(c){const h=6378.137*_u*1e3,m=Math.cos(c*_u),b=1/(1-pu*(1-m*m)),x=Math.sqrt(b);this.kx=h*x*m,this.ky=h*x*b*(1-pu)}distance(c,h){const m=this.wrap(c[0]-h[0])*this.kx,b=(c[1]-h[1])*this.ky;return Math.sqrt(m*m+b*b)}pointOnLine(c,h){let m,b,x,k,S=1/0;for(let I=0;I<c.length-1;I++){let M=c[I][0],L=c[I][1],O=this.wrap(c[I+1][0]-M)*this.kx,j=(c[I+1][1]-L)*this.ky,X=0;O===0&&j===0||(X=(this.wrap(h[0]-M)*this.kx*O+(h[1]-L)*this.ky*j)/(O*O+j*j),X>1?(M=c[I+1][0],L=c[I+1][1]):X>0&&(M+=O/this.kx*X,L+=j/this.ky*X)),O=this.wrap(h[0]-M)*this.kx,j=(h[1]-L)*this.ky;const Y=O*O+j*j;Y<S&&(S=Y,m=M,b=L,x=I,k=X)}return{point:[m,b],index:x,t:Math.max(0,Math.min(1,k))}}wrap(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}}function gu(u,c){return c[0]-u[0]}function Da(u){return u[1]-u[0]+1}function rs(u,c){return u[1]>=u[0]&&u[1]<c}function Ul(u,c){if(u[0]>u[1])return[null,null];const h=Da(u);if(c){if(h===2)return[u,null];const b=Math.floor(h/2);return[[u[0],u[0]+b],[u[0]+b,u[1]]]}if(h===1)return[u,null];const m=Math.floor(h/2)-1;return[[u[0],u[0]+m],[u[0]+m+1,u[1]]]}function ql(u,c){if(!rs(c,u.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let m=c[0];m<=c[1];++m)Ms(h,u[m]);return h}function Zl(u){const c=[1/0,1/0,-1/0,-1/0];for(const h of u)for(const m of h)Ms(c,m);return c}function La(u){return u[0]!==-1/0&&u[1]!==-1/0&&u[2]!==1/0&&u[3]!==1/0}function Gl(u,c,h){if(!La(u)||!La(c))return NaN;let m=0,b=0;return u[2]<c[0]&&(m=c[0]-u[2]),u[0]>c[2]&&(m=u[0]-c[2]),u[1]>c[3]&&(b=u[1]-c[3]),u[3]<c[1]&&(b=c[1]-u[3]),h.distance([0,0],[m,b])}function Ds(u,c,h){const m=h.pointOnLine(c,u);return h.distance(u,m.point)}function Hl(u,c,h,m,b){const x=Math.min(Ds(u,[h,m],b),Ds(c,[h,m],b)),k=Math.min(Ds(h,[u,c],b),Ds(m,[u,c],b));return Math.min(x,k)}function qf(u,c,h,m,b){if(!rs(c,u.length)||!rs(m,h.length))return 1/0;let x=1/0;for(let k=c[0];k<c[1];++k){const S=u[k],I=u[k+1];for(let M=m[0];M<m[1];++M){const L=h[M],O=h[M+1];if(Ma(S,I,L,O))return 0;x=Math.min(x,Hl(S,I,L,O,b))}}return x}function dn(u,c,h,m,b){if(!rs(c,u.length)||!rs(m,h.length))return NaN;let x=1/0;for(let k=c[0];k<=c[1];++k)for(let S=m[0];S<=m[1];++S)if(x=Math.min(x,b.distance(u[k],h[S])),x===0)return x;return x}function Zf(u,c,h){if(to(u,c,!0))return 0;let m=1/0;for(const b of c){const x=b[0],k=b[b.length-1];if(x!==k&&(m=Math.min(m,Ds(u,[k,x],h)),m===0))return m;const S=h.pointOnLine(b,u);if(m=Math.min(m,h.distance(u,S.point)),m===0)return m}return m}function Pi(u,c,h,m){if(!rs(c,u.length))return NaN;for(let x=c[0];x<=c[1];++x)if(to(u[x],h,!0))return 0;let b=1/0;for(let x=c[0];x<c[1];++x){const k=u[x],S=u[x+1];for(const I of h)for(let M=0,L=I.length,O=L-1;M<L;O=M++){const j=I[O],X=I[M];if(Ma(k,S,j,X))return 0;b=Math.min(b,Hl(k,S,j,X,m))}}return b}function Ra(u,c){for(const h of u)for(const m of h)if(to(m,c,!0))return!0;return!1}function $i(u,c,h,m=1/0){const b=Zl(u),x=Zl(c);if(m!==1/0&&Gl(b,x,h)>=m)return m;if(ps(b,x)){if(Ra(u,c))return 0}else if(Ra(c,u))return 0;let k=1/0;for(const S of u)for(let I=0,M=S.length,L=M-1;I<M;L=I++){const O=S[L],j=S[I];for(const X of c)for(let Y=0,$=X.length,le=$-1;Y<$;le=Y++){const ye=X[le],Be=X[Y];if(Ma(O,j,ye,Be))return 0;k=Math.min(k,Hl(O,j,ye,Be,h))}}return k}function Xi(u,c,h,m,b,x){if(!x)return;const k=Gl(ql(m,x),b,h);k<c&&u.push([k,x,[0,0]])}function Ls(u,c,h,m,b,x,k){if(!x||!k)return;const S=Gl(ql(m,x),ql(b,k),h);S<c&&u.push([S,x,k])}function Wo(u,c,h,m,b=1/0){let x=Math.min(m.distance(u[0],h[0][0]),b);if(x===0)return x;const k=new hu([[0,[0,u.length-1],[0,0]]],gu),S=Zl(h);for(;k.length>0;){const I=k.pop();if(I[0]>=x)continue;const M=I[1],L=c?50:100;if(Da(M)<=L){if(!rs(M,u.length))return NaN;if(c){const O=Pi(u,M,h,m);if(isNaN(O)||O===0)return O;x=Math.min(x,O)}else for(let O=M[0];O<=M[1];++O){const j=Zf(u[O],h,m);if(x=Math.min(x,j),x===0)return 0}}else{const O=Ul(M,c);Xi(k,x,m,u,S,O[0]),Xi(k,x,m,u,S,O[1])}}return x}function Xo(u,c,h,m,b,x=1/0){let k=Math.min(x,b.distance(u[0],h[0]));if(k===0)return k;const S=new hu([[0,[0,u.length-1],[0,h.length-1]]],gu);for(;S.length>0;){const I=S.pop();if(I[0]>=k)continue;const M=I[1],L=I[2],O=c?50:100,j=m?50:100;if(Da(M)<=O&&Da(L)<=j){if(!rs(M,u.length)&&rs(L,h.length))return NaN;let X;if(c&&m)X=qf(u,M,h,L,b),k=Math.min(k,X);else if(c&&!m){const Y=u.slice(M[0],M[1]+1);for(let $=L[0];$<=L[1];++$)if(X=Ds(h[$],Y,b),k=Math.min(k,X),k===0)return k}else if(!c&&m){const Y=h.slice(L[0],L[1]+1);for(let $=M[0];$<=M[1];++$)if(X=Ds(u[$],Y,b),k=Math.min(k,X),k===0)return k}else X=dn(u,M,h,L,b),k=Math.min(k,X)}else{const X=Ul(M,c),Y=Ul(L,m);Ls(S,k,b,u,h,X[0],Y[0]),Ls(S,k,b,u,h,X[0],Y[1]),Ls(S,k,b,u,h,X[1],Y[0]),Ls(S,k,b,u,h,X[1],Y[1])}}return k}function Wl(u){return u.type==="MultiPolygon"?u.coordinates.map(c=>({type:"Polygon",coordinates:c})):u.type==="MultiLineString"?u.coordinates.map(c=>({type:"LineString",coordinates:c})):u.type==="MultiPoint"?u.coordinates.map(c=>({type:"Point",coordinates:c})):[u]}class Rs{constructor(c,h){this.type=Ft,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${c.length-1} instead.`);if(As(c[1])){const m=c[1];if(m.type==="FeatureCollection")return new Rs(m,m.features.map(b=>Wl(b.geometry)).flat());if(m.type==="Feature")return new Rs(m,Wl(m.geometry));if("type"in m&&"coordinates"in m)return new Rs(m,Wl(m))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(h,m){const b=h.geometry(),x=b.flat().map(I=>Nl([I.x,I.y],h.canonical));if(b.length===0)return NaN;const k=new jl(x[0][1]);let S=1/0;for(const I of m){switch(I.type){case"Point":S=Math.min(S,Xo(x,!1,[I.coordinates],!1,k,S));break;case"LineString":S=Math.min(S,Xo(x,!1,I.coordinates,!0,k,S));break;case"Polygon":S=Math.min(S,Wo(x,!1,I.coordinates,k,S))}if(S===0)return S}return S}(c,this.geometries);if(c.geometryType()==="LineString")return function(h,m){const b=h.geometry(),x=b.flat().map(I=>Nl([I.x,I.y],h.canonical));if(b.length===0)return NaN;const k=new jl(x[0][1]);let S=1/0;for(const I of m){switch(I.type){case"Point":S=Math.min(S,Xo(x,!0,[I.coordinates],!1,k,S));break;case"LineString":S=Math.min(S,Xo(x,!0,I.coordinates,!0,k,S));break;case"Polygon":S=Math.min(S,Wo(x,!0,I.coordinates,k,S))}if(S===0)return S}return S}(c,this.geometries);if(c.geometryType()==="Polygon")return function(h,m){const b=h.geometry();if(b.length===0||b[0].length===0)return NaN;const x=za(b,0).map(I=>I.map(M=>M.map(L=>Nl([L.x,L.y],h.canonical)))),k=new jl(x[0][0][0][1]);let S=1/0;for(const I of m)for(const M of x){switch(I.type){case"Point":S=Math.min(S,Wo([I.coordinates],!1,M,k,S));break;case"LineString":S=Math.min(S,Wo(I.coordinates,!0,M,k,S));break;case"Polygon":S=Math.min(S,$i(M,I.coordinates,k,S))}if(S===0)return S}return S}(c,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const io={"==":zf,"!=":nu,">":Df,"<":ru,">=":su,"<=":Lf,array:Pr,at:Dl,boolean:Pr,case:Sa,coalesce:Aa,collator:Go,format:Pa,image:Fl,in:Ll,"index-of":Qs,interpolate:er,"interpolate-hcl":er,"interpolate-lab":er,length:Bl,let:ms,literal:Er,match:Rl,number:Pr,"number-format":Ol,object:Pr,slice:qo,step:$s,string:Pr,"to-boolean":Mr,"to-color":Mr,"to-number":Mr,"to-string":Mr,var:Ui,within:zs,distance:Rs};class yr{constructor(c,h,m,b){this.name=c,this.type=h,this._evaluate=m,this.args=b}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,h){const m=c[0],b=yr.definitions[m];if(!b)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(b)?b[0]:b.type,k=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,S=k.filter(([M])=>!Array.isArray(M)||M.length===c.length-1);let I=null;for(const[M,L]of S){I=new Es(h.registry,Ko,h.path,null,h.scope);const O=[];let j=!1;for(let X=1;X<c.length;X++){const Y=c[X],$=Array.isArray(M)?M[X-1]:M.type,le=I.parse(Y,1+O.length,$);if(!le){j=!0;break}O.push(le)}if(!j)if(Array.isArray(M)&&M.length!==O.length)I.error(`Expected ${M.length} arguments, but found ${O.length} instead.`);else{for(let X=0;X<O.length;X++){const Y=Array.isArray(M)?M[X]:M.type,$=O[X];I.concat(X+1).checkSubtype(Y,$.type)}if(I.errors.length===0)return new yr(m,x,L,O)}}if(S.length===1)h.errors.push(...I.errors);else{const M=(S.length?S:k).map(([O])=>{return j=O,Array.isArray(j)?`(${j.map(H).join(", ")})`:`(${H(j.type)}...)`;var j}).join(" | "),L=[];for(let O=1;O<c.length;O++){const j=h.parse(c[O],1+L.length);if(!j)return null;L.push(H(j.type))}h.error(`Expected arguments of type ${M}, but found (${L.join(", ")}) instead.`)}return null}static register(c,h){yr.definitions=h;for(const m in h)c[m]=yr}}function Xl(u,[c,h,m,b]){c=c.evaluate(u),h=h.evaluate(u),m=m.evaluate(u);const x=b?b.evaluate(u):1,k=Ys(c,h,m,x);if(k)throw new _n(k);return new Wi(c/255,h/255,m/255,x,!1)}function Kl(u,c){return u in c}function Jl(u,c){const h=c[u];return h===void 0?null:h}function Os(u){return{type:u}}function Ko(u){if(u instanceof Ui)return Ko(u.boundExpression);if(u instanceof yr&&u.name==="error"||u instanceof Go||u instanceof zs||u instanceof Rs)return!1;const c=u instanceof Mr||u instanceof Pr;let h=!0;return u.eachChild(m=>{h=c?h&&Ko(m):h&&m instanceof Er}),!!h&&Jo(u)&&Yo(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Jo(u){if(u instanceof yr&&(u.name==="get"&&u.args.length===1||u.name==="feature-state"||u.name==="has"&&u.args.length===1||u.name==="properties"||u.name==="geometry-type"||u.name==="id"||/^filter-/.test(u.name))||u instanceof zs||u instanceof Rs)return!1;let c=!0;return u.eachChild(h=>{c&&!Jo(h)&&(c=!1)}),c}function no(u){if(u instanceof yr&&u.name==="feature-state")return!1;let c=!0;return u.eachChild(h=>{c&&!no(h)&&(c=!1)}),c}function Yo(u,c){if(u instanceof yr&&c.indexOf(u.name)>=0)return!1;let h=!0;return u.eachChild(m=>{h&&!Yo(m,c)&&(h=!1)}),h}function Oa(u){return{result:"success",value:u}}function ro(u){return{result:"error",value:u}}function so(u){return u["property-type"]==="data-driven"||u["property-type"]==="cross-faded-data-driven"}function yu(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}function Yl(u){return!!u.expression&&u.expression.interpolated}function Vi(u){return u instanceof Number?"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":u===null?"null":typeof u}function Fa(u){return typeof u=="object"&&u!==null&&!Array.isArray(u)}function Gf(u){return u}function bu(u,c){const h=c.type==="color",m=u.stops&&typeof u.stops[0][0]=="object",b=m||!(m||u.property!==void 0),x=u.type||(Yl(c)?"exponential":"interval");if(h||c.type==="padding"){const L=h?Wi.parse:cr.parse;(u=Zr({},u)).stops&&(u.stops=u.stops.map(O=>[O[0],L(O[1])])),u.default=L(u.default?u.default:c.default)}if(u.colorSpace&&(k=u.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${u.colorSpace}"`);var k;let S,I,M;if(x==="exponential")S=wu;else if(x==="interval")S=Ba;else if(x==="categorical"){S=vu,I=Object.create(null);for(const L of u.stops)I[L[0]]=L[1];M=typeof u.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);S=xu}if(m){const L={},O=[];for(let Y=0;Y<u.stops.length;Y++){const $=u.stops[Y],le=$[0].zoom;L[le]===void 0&&(L[le]={zoom:le,type:u.type,property:u.property,default:u.default,stops:[]},O.push(le)),L[le].stops.push([$[0].value,$[1]])}const j=[];for(const Y of O)j.push([L[Y].zoom,bu(L[Y],c)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:er.interpolationFactor.bind(void 0,X),zoomStops:j.map(Y=>Y[0]),evaluate:({zoom:Y},$)=>wu({stops:j,base:u.base},c,Y).evaluate(Y,$)}}if(b){const L=x==="exponential"?{name:"exponential",base:u.base!==void 0?u.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:er.interpolationFactor.bind(void 0,L),zoomStops:u.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(u,c,O,I,M)}}return{kind:"source",evaluate(L,O){const j=O&&O.properties?O.properties[u.property]:void 0;return j===void 0?oo(u.default,c.default):S(u,c,j,I,M)}}}function oo(u,c,h){return u!==void 0?u:c!==void 0?c:h!==void 0?h:void 0}function vu(u,c,h,m,b){return oo(typeof h===b?m[h]:void 0,u.default,c.default)}function Ba(u,c,h){if(Vi(h)!=="number")return oo(u.default,c.default);const m=u.stops.length;if(m===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[m-1][0])return u.stops[m-1][1];const b=Ta(u.stops.map(x=>x[0]),h);return u.stops[b][1]}function wu(u,c,h){const m=u.base!==void 0?u.base:1;if(Vi(h)!=="number")return oo(u.default,c.default);const b=u.stops.length;if(b===1||h<=u.stops[0][0])return u.stops[0][1];if(h>=u.stops[b-1][0])return u.stops[b-1][1];const x=Ta(u.stops.map(L=>L[0]),h),k=function(L,O,j,X){const Y=X-j,$=L-j;return Y===0?0:O===1?$/Y:(Math.pow(O,$)-1)/(Math.pow(O,Y)-1)}(h,m,u.stops[x][0],u.stops[x+1][0]),S=u.stops[x][1],I=u.stops[x+1][1],M=$n[c.type]||Gf;return typeof S.evaluate=="function"?{evaluate(...L){const O=S.evaluate.apply(void 0,L),j=I.evaluate.apply(void 0,L);if(O!==void 0&&j!==void 0)return M(O,j,k,u.colorSpace)}}:M(S,I,k,u.colorSpace)}function xu(u,c,h){switch(c.type){case"color":h=Wi.parse(h);break;case"formatted":h=lr.fromString(h.toString());break;case"resolvedImage":h=ur.fromString(h.toString());break;case"padding":h=cr.parse(h);break;default:Vi(h)===c.type||c.type==="enum"&&c.values[h]||(h=void 0)}return oo(h,u.default,c.default)}yr.register(io,{error:[{kind:"error"},[Si],(u,[c])=>{throw new _n(c.evaluate(u))}],typeof:[Si,[bi],(u,[c])=>H(vn(c.evaluate(u)))],"to-rgba":[W(Ft,4),[Qn],(u,[c])=>{const[h,m,b,x]=c.evaluate(u).rgb;return[255*h,255*m,255*b,x]}],rgb:[Qn,[Ft,Ft,Ft],Xl],rgba:[Qn,[Ft,Ft,Ft,Ft],Xl],has:{type:mi,overloads:[[[Si],(u,[c])=>Kl(c.evaluate(u),u.properties())],[[Si,Ar],(u,[c,h])=>Kl(c.evaluate(u),h.evaluate(u))]]},get:{type:bi,overloads:[[[Si],(u,[c])=>Jl(c.evaluate(u),u.properties())],[[Si,Ar],(u,[c,h])=>Jl(c.evaluate(u),h.evaluate(u))]]},"feature-state":[bi,[Si],(u,[c])=>Jl(c.evaluate(u),u.featureState||{})],properties:[Ar,[],u=>u.properties()],"geometry-type":[Si,[],u=>u.geometryType()],id:[bi,[],u=>u.id()],zoom:[Ft,[],u=>u.globals.zoom],"heatmap-density":[Ft,[],u=>u.globals.heatmapDensity||0],"line-progress":[Ft,[],u=>u.globals.lineProgress||0],accumulated:[bi,[],u=>u.globals.accumulated===void 0?null:u.globals.accumulated],"+":[Ft,Os(Ft),(u,c)=>{let h=0;for(const m of c)h+=m.evaluate(u);return h}],"*":[Ft,Os(Ft),(u,c)=>{let h=1;for(const m of c)h*=m.evaluate(u);return h}],"-":{type:Ft,overloads:[[[Ft,Ft],(u,[c,h])=>c.evaluate(u)-h.evaluate(u)],[[Ft],(u,[c])=>-c.evaluate(u)]]},"/":[Ft,[Ft,Ft],(u,[c,h])=>c.evaluate(u)/h.evaluate(u)],"%":[Ft,[Ft,Ft],(u,[c,h])=>c.evaluate(u)%h.evaluate(u)],ln2:[Ft,[],()=>Math.LN2],pi:[Ft,[],()=>Math.PI],e:[Ft,[],()=>Math.E],"^":[Ft,[Ft,Ft],(u,[c,h])=>Math.pow(c.evaluate(u),h.evaluate(u))],sqrt:[Ft,[Ft],(u,[c])=>Math.sqrt(c.evaluate(u))],log10:[Ft,[Ft],(u,[c])=>Math.log(c.evaluate(u))/Math.LN10],ln:[Ft,[Ft],(u,[c])=>Math.log(c.evaluate(u))],log2:[Ft,[Ft],(u,[c])=>Math.log(c.evaluate(u))/Math.LN2],sin:[Ft,[Ft],(u,[c])=>Math.sin(c.evaluate(u))],cos:[Ft,[Ft],(u,[c])=>Math.cos(c.evaluate(u))],tan:[Ft,[Ft],(u,[c])=>Math.tan(c.evaluate(u))],asin:[Ft,[Ft],(u,[c])=>Math.asin(c.evaluate(u))],acos:[Ft,[Ft],(u,[c])=>Math.acos(c.evaluate(u))],atan:[Ft,[Ft],(u,[c])=>Math.atan(c.evaluate(u))],min:[Ft,Os(Ft),(u,c)=>Math.min(...c.map(h=>h.evaluate(u)))],max:[Ft,Os(Ft),(u,c)=>Math.max(...c.map(h=>h.evaluate(u)))],abs:[Ft,[Ft],(u,[c])=>Math.abs(c.evaluate(u))],round:[Ft,[Ft],(u,[c])=>{const h=c.evaluate(u);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ft,[Ft],(u,[c])=>Math.floor(c.evaluate(u))],ceil:[Ft,[Ft],(u,[c])=>Math.ceil(c.evaluate(u))],"filter-==":[mi,[Si,bi],(u,[c,h])=>u.properties()[c.value]===h.value],"filter-id-==":[mi,[bi],(u,[c])=>u.id()===c.value],"filter-type-==":[mi,[Si],(u,[c])=>u.geometryType()===c.value],"filter-<":[mi,[Si,bi],(u,[c,h])=>{const m=u.properties()[c.value],b=h.value;return typeof m==typeof b&&m<b}],"filter-id-<":[mi,[bi],(u,[c])=>{const h=u.id(),m=c.value;return typeof h==typeof m&&h<m}],"filter->":[mi,[Si,bi],(u,[c,h])=>{const m=u.properties()[c.value],b=h.value;return typeof m==typeof b&&m>b}],"filter-id->":[mi,[bi],(u,[c])=>{const h=u.id(),m=c.value;return typeof h==typeof m&&h>m}],"filter-<=":[mi,[Si,bi],(u,[c,h])=>{const m=u.properties()[c.value],b=h.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[mi,[bi],(u,[c])=>{const h=u.id(),m=c.value;return typeof h==typeof m&&h<=m}],"filter->=":[mi,[Si,bi],(u,[c,h])=>{const m=u.properties()[c.value],b=h.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[mi,[bi],(u,[c])=>{const h=u.id(),m=c.value;return typeof h==typeof m&&h>=m}],"filter-has":[mi,[bi],(u,[c])=>c.value in u.properties()],"filter-has-id":[mi,[],u=>u.id()!==null&&u.id()!==void 0],"filter-type-in":[mi,[W(Si)],(u,[c])=>c.value.indexOf(u.geometryType())>=0],"filter-id-in":[mi,[W(bi)],(u,[c])=>c.value.indexOf(u.id())>=0],"filter-in-small":[mi,[Si,W(bi)],(u,[c,h])=>h.value.indexOf(u.properties()[c.value])>=0],"filter-in-large":[mi,[Si,W(bi)],(u,[c,h])=>function(m,b,x,k){for(;x<=k;){const S=x+k>>1;if(b[S]===m)return!0;b[S]>m?k=S-1:x=S+1}return!1}(u.properties()[c.value],h.value,0,h.value.length-1)],all:{type:mi,overloads:[[[mi,mi],(u,[c,h])=>c.evaluate(u)&&h.evaluate(u)],[Os(mi),(u,c)=>{for(const h of c)if(!h.evaluate(u))return!1;return!0}]]},any:{type:mi,overloads:[[[mi,mi],(u,[c,h])=>c.evaluate(u)||h.evaluate(u)],[Os(mi),(u,c)=>{for(const h of c)if(h.evaluate(u))return!0;return!1}]]},"!":[mi,[mi],(u,[c])=>!c.evaluate(u)],"is-supported-script":[mi,[Si],(u,[c])=>{const h=u.globals&&u.globals.isSupportedScript;return!h||h(c.evaluate(u))}],upcase:[Si,[Si],(u,[c])=>c.evaluate(u).toUpperCase()],downcase:[Si,[Si],(u,[c])=>c.evaluate(u).toLowerCase()],concat:[Si,Os(bi),(u,c)=>c.map(h=>Uo(h.evaluate(u))).join("")],"resolved-locale":[Si,[Hr],(u,[c])=>c.evaluate(u).resolvedLocale()]});class Na{constructor(c,h){var m;this.expression=c,this._warningHistory={},this._evaluator=new Ca,this._defaultValue=h?(m=h).type==="color"&&Fa(m.default)?new Wi(0,0,0,0):m.type==="color"?Wi.parse(m.default)||null:m.type==="padding"?cr.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?gr.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(c,h,m,b,x,k){return this._evaluator.globals=c,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(c,h,m,b,x,k){this._evaluator.globals=c,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=k||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new _n(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Va(u){return Array.isArray(u)&&u.length>0&&typeof u[0]=="string"&&u[0]in io}function ao(u,c){const h=new Es(io,Ko,[],c?function(b){const x={color:Qn,string:Si,number:Ft,enum:Si,boolean:mi,formatted:ns,padding:ds,resolvedImage:Wr,variableAnchorOffsetCollection:ge};return b.type==="array"?W(x[b.value]||bi,b.length):x[b.type]}(c):void 0),m=h.parse(u,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Oa(new Na(m,c)):ro(h.errors)}class lo{constructor(c,h){this.kind=c,this._styleExpression=h,this.isStateDependent=c!=="constant"&&!no(h.expression)}evaluateWithoutErrorHandling(c,h,m,b,x,k){return this._styleExpression.evaluateWithoutErrorHandling(c,h,m,b,x,k)}evaluate(c,h,m,b,x,k){return this._styleExpression.evaluate(c,h,m,b,x,k)}}class co{constructor(c,h,m,b){this.kind=c,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=c!=="camera"&&!no(h.expression),this.interpolationType=b}evaluateWithoutErrorHandling(c,h,m,b,x,k){return this._styleExpression.evaluateWithoutErrorHandling(c,h,m,b,x,k)}evaluate(c,h,m,b,x,k){return this._styleExpression.evaluate(c,h,m,b,x,k)}interpolationFactor(c,h,m){return this.interpolationType?er.interpolationFactor(this.interpolationType,c,h,m):0}}function Ql(u,c){const h=ao(u,c);if(h.result==="error")return h;const m=h.value.expression,b=Jo(m);if(!b&&!so(c))return ro([new qn("","data expressions not supported")]);const x=Yo(m,["zoom"]);if(!x&&!yu(c))return ro([new qn("","zoom expressions not supported")]);const k=Qo(m);return k||x?k instanceof qn?ro([k]):k instanceof er&&!Yl(c)?ro([new qn("",'"interpolate" expressions cannot be used with this property')]):Oa(k?new co(b?"camera":"composite",h.value,k.labels,k instanceof er?k.interpolation:void 0):new lo(b?"constant":"source",h.value)):ro([new qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class uo{constructor(c,h){this._parameters=c,this._specification=h,Zr(this,bu(this._parameters,this._specification))}static deserialize(c){return new uo(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Qo(u){let c=null;if(u instanceof ms)c=Qo(u.result);else if(u instanceof Aa){for(const h of u.args)if(c=Qo(h),c)break}else(u instanceof $s||u instanceof er)&&u.input instanceof yr&&u.input.name==="zoom"&&(c=u);return c instanceof qn||u.eachChild(h=>{const m=Qo(h);m instanceof qn?c=m:!c&&m?c=new qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&m&&c!==m&&(c=new qn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function ja(u){if(u===!0||u===!1)return!0;if(!Array.isArray(u)||u.length===0)return!1;switch(u[0]){case"has":return u.length>=2&&u[1]!=="$id"&&u[1]!=="$type";case"in":return u.length>=3&&(typeof u[1]!="string"||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return u.length!==3||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const c of u.slice(1))if(!ja(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Ua={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $l(u){if(u==null)return{filter:()=>!0,needGeometry:!1};ja(u)||(u=qa(u));const c=ao(u,Ua);if(c.result==="error")throw new Error(c.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,b)=>c.value.evaluate(h,m,{},b),needGeometry:ku(u)}}function Hf(u,c){return u<c?-1:u>c?1:0}function ku(u){if(!Array.isArray(u))return!1;if(u[0]==="within"||u[0]==="distance")return!0;for(let c=1;c<u.length;c++)if(ku(u[c]))return!0;return!1}function qa(u){if(!u)return!0;const c=u[0];return u.length<=1?c!=="any":c==="=="?ec(u[1],u[2],"=="):c==="!="?Ln(ec(u[1],u[2],"==")):c==="<"||c===">"||c==="<="||c===">="?ec(u[1],u[2],c):c==="any"?(h=u.slice(1),["any"].concat(h.map(qa))):c==="all"?["all"].concat(u.slice(1).map(qa)):c==="none"?["all"].concat(u.slice(1).map(qa).map(Ln)):c==="in"?$o(u[1],u.slice(2)):c==="!in"?Ln($o(u[1],u.slice(2))):c==="has"?ea(u[1]):c!=="!has"||Ln(ea(u[1]));var h}function ec(u,c,h){switch(u){case"$type":return[`filter-type-${h}`,c];case"$id":return[`filter-id-${h}`,c];default:return[`filter-${h}`,u,c]}}function $o(u,c){if(c.length===0)return!1;switch(u){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(h=>typeof h!=typeof c[0])?["filter-in-large",u,["literal",c.sort(Hf)]]:["filter-in-small",u,["literal",c]]}}function ea(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function Ln(u){return["!",u]}function Fs(u){const c=typeof u;if(c==="number"||c==="boolean"||c==="string"||u==null)return JSON.stringify(u);if(Array.isArray(u)){let b="[";for(const x of u)b+=`${Fs(x)},`;return`${b}]`}const h=Object.keys(u).sort();let m="{";for(let b=0;b<h.length;b++)m+=`${JSON.stringify(h[b])}:${Fs(u[h[b]])},`;return`${m}}`}function Cu(u){let c="";for(const h of ot)c+=`/${Fs(u[h])}`;return c}function Su(u){const c=u.value;return c?[new Ae(u.key,c,"constants have been deprecated as of v8")]:[]}function mn(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function zr(u){if(Array.isArray(u))return u.map(zr);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const c={};for(const h in u)c[h]=zr(u[h]);return c}return mn(u)}function fr(u){const c=u.key,h=u.value,m=u.valueSpec||{},b=u.objectElementValidators||{},x=u.style,k=u.styleSpec,S=u.validateSpec;let I=[];const M=Vi(h);if(M!=="object")return[new Ae(c,h,`object expected, ${M} found`)];for(const L in h){const O=L.split(".")[0],j=m[O]||m["*"];let X;if(b[O])X=b[O];else if(m[O])X=S;else if(b["*"])X=b["*"];else{if(!m["*"]){I.push(new Ae(c,h[L],`unknown property "${L}"`));continue}X=S}I=I.concat(X({key:(c&&`${c}.`)+L,value:h[L],valueSpec:j,style:x,styleSpec:k,object:h,objectKey:L,validateSpec:S},h))}for(const L in m)b[L]||m[L].required&&m[L].default===void 0&&h[L]===void 0&&I.push(new Ae(c,h,`missing required property "${L}"`));return I}function ta(u){const c=u.value,h=u.valueSpec,m=u.style,b=u.styleSpec,x=u.key,k=u.arrayElementValidator||u.validateSpec;if(Vi(c)!=="array")return[new Ae(x,c,`array expected, ${Vi(c)} found`)];if(h.length&&c.length!==h.length)return[new Ae(x,c,`array length ${h.length} expected, length ${c.length} found`)];if(h["min-length"]&&c.length<h["min-length"])return[new Ae(x,c,`array length at least ${h["min-length"]} expected, length ${c.length} found`)];let S={type:h.value,values:h.values};b.$version<7&&(S.function=h.function),Vi(h.value)==="object"&&(S=h.value);let I=[];for(let M=0;M<c.length;M++)I=I.concat(k({array:c,arrayIndex:M,value:c[M],valueSpec:S,validateSpec:u.validateSpec,style:m,styleSpec:b,key:`${x}[${M}]`}));return I}function tc(u){const c=u.key,h=u.value,m=u.valueSpec;let b=Vi(h);return b==="number"&&h!=h&&(b="NaN"),b!=="number"?[new Ae(c,h,`number expected, ${b} found`)]:"minimum"in m&&h<m.minimum?[new Ae(c,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new Ae(c,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function Za(u){const c=u.valueSpec,h=mn(u.value.type);let m,b,x,k={};const S=h!=="categorical"&&u.value.property===void 0,I=!S,M=Vi(u.value.stops)==="array"&&Vi(u.value.stops[0])==="array"&&Vi(u.value.stops[0][0])==="object",L=fr({key:u.key,value:u.value,valueSpec:u.styleSpec.function,validateSpec:u.validateSpec,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(X){if(h==="identity")return[new Ae(X.key,X.value,'identity function may not have a "stops" property')];let Y=[];const $=X.value;return Y=Y.concat(ta({key:X.key,value:$,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:O})),Vi($)==="array"&&$.length===0&&Y.push(new Ae(X.key,$,"array must have at least one stop")),Y},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:c,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return h==="identity"&&S&&L.push(new Ae(u.key,u.value,'missing required property "property"')),h==="identity"||u.value.stops||L.push(new Ae(u.key,u.value,'missing required property "stops"')),h==="exponential"&&u.valueSpec.expression&&!Yl(u.valueSpec)&&L.push(new Ae(u.key,u.value,"exponential functions not supported")),u.styleSpec.$version>=8&&(I&&!so(u.valueSpec)?L.push(new Ae(u.key,u.value,"property functions not supported")):S&&!yu(u.valueSpec)&&L.push(new Ae(u.key,u.value,"zoom functions not supported"))),h!=="categorical"&&!M||u.value.property!==void 0||L.push(new Ae(u.key,u.value,'"property" property is required')),L;function O(X){let Y=[];const $=X.value,le=X.key;if(Vi($)!=="array")return[new Ae(le,$,`array expected, ${Vi($)} found`)];if($.length!==2)return[new Ae(le,$,`array length 2 expected, length ${$.length} found`)];if(M){if(Vi($[0])!=="object")return[new Ae(le,$,`object expected, ${Vi($[0])} found`)];if($[0].zoom===void 0)return[new Ae(le,$,"object stop key must have zoom")];if($[0].value===void 0)return[new Ae(le,$,"object stop key must have value")];if(x&&x>mn($[0].zoom))return[new Ae(le,$[0].zoom,"stop zoom values must appear in ascending order")];mn($[0].zoom)!==x&&(x=mn($[0].zoom),b=void 0,k={}),Y=Y.concat(fr({key:`${le}[0]`,value:$[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:tc,value:j}}))}else Y=Y.concat(j({key:`${le}[0]`,value:$[0],valueSpec:{},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},$));return Va(zr($[1]))?Y.concat([new Ae(`${le}[1]`,$[1],"expressions are not allowed in function stops.")]):Y.concat(X.validateSpec({key:`${le}[1]`,value:$[1],valueSpec:c,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function j(X,Y){const $=Vi(X.value),le=mn(X.value),ye=X.value!==null?X.value:Y;if(m){if($!==m)return[new Ae(X.key,ye,`${$} stop domain type must match previous stop domain type ${m}`)]}else m=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new Ae(X.key,ye,"stop domain value must be a number, string, or boolean")];if($!=="number"&&h!=="categorical"){let Be=`number expected, ${$} found`;return so(c)&&h===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ae(X.key,ye,Be)]}return h!=="categorical"||$!=="number"||isFinite(le)&&Math.floor(le)===le?h!=="categorical"&&$==="number"&&b!==void 0&&le<b?[new Ae(X.key,ye,"stop domain values must appear in ascending order")]:(b=le,h==="categorical"&&le in k?[new Ae(X.key,ye,"stop domain values must be unique")]:(k[le]=!0,[])):[new Ae(X.key,ye,`integer expected, found ${le}`)]}}function fo(u){const c=(u.expressionContext==="property"?Ql:ao)(zr(u.value),u.valueSpec);if(c.result==="error")return c.value.map(m=>new Ae(`${u.key}${m.key}`,u.value,m.message));const h=c.value.expression||c.value._styleExpression.expression;if(u.expressionContext==="property"&&u.propertyKey==="text-font"&&!h.outputDefined())return[new Ae(u.key,u.value,`Invalid data expression for "${u.propertyKey}". Output values must be contained as literals within the expression.`)];if(u.expressionContext==="property"&&u.propertyType==="layout"&&!no(h))return[new Ae(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if(u.expressionContext==="filter"&&!no(h))return[new Ae(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&u.expressionContext.indexOf("cluster")===0){if(!Yo(h,["zoom","feature-state"]))return[new Ae(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(u.expressionContext==="cluster-initial"&&!Jo(h))return[new Ae(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ss(u){const c=u.key,h=u.value,m=u.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(mn(h))===-1&&b.push(new Ae(c,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(mn(h))===-1&&b.push(new Ae(c,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),b}function ic(u){return ja(zr(u.value))?fo(Zr({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ga(u)}function Ga(u){const c=u.value,h=u.key;if(Vi(c)!=="array")return[new Ae(h,c,`array expected, ${Vi(c)} found`)];const m=u.styleSpec;let b,x=[];if(c.length<1)return[new Ae(h,c,"filter array must have at least 1 element")];switch(x=x.concat(ss({key:`${h}[0]`,value:c[0],valueSpec:m.filter_operator,style:u.style,styleSpec:u.styleSpec})),mn(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&mn(c[1])==="$type"&&x.push(new Ae(h,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&x.push(new Ae(h,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(b=Vi(c[1]),b!=="string"&&x.push(new Ae(`${h}[1]`,c[1],`string expected, ${b} found`)));for(let k=2;k<c.length;k++)b=Vi(c[k]),mn(c[1])==="$type"?x=x.concat(ss({key:`${h}[${k}]`,value:c[k],valueSpec:m.geometry_type,style:u.style,styleSpec:u.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&x.push(new Ae(`${h}[${k}]`,c[k],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let k=1;k<c.length;k++)x=x.concat(Ga({key:`${h}[${k}]`,value:c[k],style:u.style,styleSpec:u.styleSpec}));break;case"has":case"!has":b=Vi(c[1]),c.length!==2?x.push(new Ae(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):b!=="string"&&x.push(new Ae(`${h}[1]`,c[1],`string expected, ${b} found`))}return x}function nc(u,c){const h=u.key,m=u.validateSpec,b=u.style,x=u.styleSpec,k=u.value,S=u.objectKey,I=x[`${c}_${u.layerType}`];if(!I)return[];const M=S.match(/^(.*)-transition$/);if(c==="paint"&&M&&I[M[1]]&&I[M[1]].transition)return m({key:h,value:k,valueSpec:x.transition,style:b,styleSpec:x});const L=u.valueSpec||I[S];if(!L)return[new Ae(h,k,`unknown property "${S}"`)];let O;if(Vi(k)==="string"&&so(L)&&!L.tokens&&(O=/^{([^}]+)}$/.exec(k)))return[new Ae(h,k,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];const j=[];return u.layerType==="symbol"&&(S==="text-field"&&b&&!b.glyphs&&j.push(new Ae(h,k,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Fa(zr(k))&&mn(k.type)==="identity"&&j.push(new Ae(h,k,'"text-font" does not support identity functions'))),j.concat(m({key:u.key,value:k,valueSpec:L,style:b,styleSpec:x,expressionContext:"property",propertyType:c,propertyKey:S}))}function Ha(u){return nc(u,"paint")}function rc(u){return nc(u,"layout")}function sc(u){let c=[];const h=u.value,m=u.key,b=u.style,x=u.styleSpec;h.type||h.ref||c.push(new Ae(m,h,'either "type" or "ref" is required'));let k=mn(h.type);const S=mn(h.ref);if(h.id){const I=mn(h.id);for(let M=0;M<u.arrayIndex;M++){const L=b.layers[M];mn(L.id)===I&&c.push(new Ae(m,h.id,`duplicate layer id "${h.id}", previously used at line ${L.id.__line__}`))}}if("ref"in h){let I;["type","source","source-layer","filter","layout"].forEach(M=>{M in h&&c.push(new Ae(m,h[M],`"${M}" is prohibited for ref layers`))}),b.layers.forEach(M=>{mn(M.id)===S&&(I=M)}),I?I.ref?c.push(new Ae(m,h.ref,"ref cannot reference another ref layer")):k=mn(I.type):c.push(new Ae(m,h.ref,`ref layer "${S}" not found`))}else if(k!=="background")if(h.source){const I=b.sources&&b.sources[h.source],M=I&&mn(I.type);I?M==="vector"&&k==="raster"?c.push(new Ae(m,h.source,`layer "${h.id}" requires a raster source`)):M!=="raster-dem"&&k==="hillshade"?c.push(new Ae(m,h.source,`layer "${h.id}" requires a raster-dem source`)):M==="raster"&&k!=="raster"?c.push(new Ae(m,h.source,`layer "${h.id}" requires a vector source`)):M!=="vector"||h["source-layer"]?M==="raster-dem"&&k!=="hillshade"?c.push(new Ae(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!h.paint||!h.paint["line-gradient"]||M==="geojson"&&I.lineMetrics||c.push(new Ae(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Ae(m,h,`layer "${h.id}" must specify a "source-layer"`)):c.push(new Ae(m,h.source,`source "${h.source}" not found`))}else c.push(new Ae(m,h,'missing required property "source"'));return c=c.concat(fr({key:m,value:h,valueSpec:x.layer,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,objectElementValidators:{"*":()=>[],type:()=>u.validateSpec({key:`${m}.type`,value:h.type,valueSpec:x.layer.type,style:u.style,styleSpec:u.styleSpec,validateSpec:u.validateSpec,object:h,objectKey:"type"}),filter:ic,layout:I=>fr({layer:h,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":M=>rc(Zr({layerType:k},M))}}),paint:I=>fr({layer:h,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":M=>Ha(Zr({layerType:k},M))}})}})),c}function Bs(u){const c=u.value,h=u.key,m=Vi(c);return m!=="string"?[new Ae(h,c,`string expected, ${m} found`)]:[]}const Wa={promoteId:function({key:u,value:c}){if(Vi(c)==="string")return Bs({key:u,value:c});{const h=[];for(const m in c)h.push(...Bs({key:`${u}.${m}`,value:c[m]}));return h}}};function ia(u){const c=u.value,h=u.key,m=u.styleSpec,b=u.style,x=u.validateSpec;if(!c.type)return[new Ae(h,c,'"type" is required')];const k=mn(c.type);let S;switch(k){case"vector":case"raster":return S=fr({key:h,value:c,valueSpec:m[`source_${k.replace("-","_")}`],style:u.style,styleSpec:m,objectElementValidators:Wa,validateSpec:x}),S;case"raster-dem":return S=function(I){var M;const L=(M=I.sourceName)!==null&&M!==void 0?M:"",O=I.value,j=I.styleSpec,X=j.source_raster_dem,Y=I.style;let $=[];const le=Vi(O);if(O===void 0)return $;if(le!=="object")return $.push(new Ae("source_raster_dem",O,`object expected, ${le} found`)),$;const ye=mn(O.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],Se=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const De in O)!ye&&Be.includes(De)?$.push(new Ae(De,O[De],`In "${L}": "${De}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):X[De]?$=$.concat(I.validateSpec({key:De,value:O[De],valueSpec:X[De],validateSpec:I.validateSpec,style:Y,styleSpec:j})):$.push(new Ae(De,O[De],`unknown property "${De}"`));return $}({sourceName:h,value:c,style:u.style,styleSpec:m,validateSpec:x}),S;case"geojson":if(S=fr({key:h,value:c,valueSpec:m.source_geojson,style:b,styleSpec:m,validateSpec:x,objectElementValidators:Wa}),c.cluster)for(const I in c.clusterProperties){const[M,L]=c.clusterProperties[I],O=typeof M=="string"?[M,["accumulated"],["get",I]]:M;S.push(...fo({key:`${h}.${I}.map`,value:L,validateSpec:x,expressionContext:"cluster-map"})),S.push(...fo({key:`${h}.${I}.reduce`,value:O,validateSpec:x,expressionContext:"cluster-reduce"}))}return S;case"video":return fr({key:h,value:c,valueSpec:m.source_video,style:b,validateSpec:x,styleSpec:m});case"image":return fr({key:h,value:c,valueSpec:m.source_image,style:b,validateSpec:x,styleSpec:m});case"canvas":return[new Ae(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ss({key:`${h}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,validateSpec:x,styleSpec:m})}}function oc(u){const c=u.value,h=u.styleSpec,m=h.light,b=u.style;let x=[];const k=Vi(c);if(c===void 0)return x;if(k!=="object")return x=x.concat([new Ae("light",c,`object expected, ${k} found`)]),x;for(const S in c){const I=S.match(/^(.*)-transition$/);x=x.concat(I&&m[I[1]]&&m[I[1]].transition?u.validateSpec({key:S,value:c[S],valueSpec:h.transition,validateSpec:u.validateSpec,style:b,styleSpec:h}):m[S]?u.validateSpec({key:S,value:c[S],valueSpec:m[S],validateSpec:u.validateSpec,style:b,styleSpec:h}):[new Ae(S,c[S],`unknown property "${S}"`)])}return x}function ac(u){const c=u.value,h=u.styleSpec,m=h.sky,b=u.style,x=Vi(c);if(c===void 0)return[];if(x!=="object")return[new Ae("sky",c,`object expected, ${x} found`)];let k=[];for(const S in c)k=k.concat(m[S]?u.validateSpec({key:S,value:c[S],valueSpec:m[S],style:b,styleSpec:h}):[new Ae(S,c[S],`unknown property "${S}"`)]);return k}function lc(u){const c=u.value,h=u.styleSpec,m=h.terrain,b=u.style;let x=[];const k=Vi(c);if(c===void 0)return x;if(k!=="object")return x=x.concat([new Ae("terrain",c,`object expected, ${k} found`)]),x;for(const S in c)x=x.concat(m[S]?u.validateSpec({key:S,value:c[S],valueSpec:m[S],validateSpec:u.validateSpec,style:b,styleSpec:h}):[new Ae(S,c[S],`unknown property "${S}"`)]);return x}function cc(u){let c=[];const h=u.value,m=u.key;if(Array.isArray(h)){const b=[],x=[];for(const k in h)h[k].id&&b.includes(h[k].id)&&c.push(new Ae(m,h,`all the sprites' ids must be unique, but ${h[k].id} is duplicated`)),b.push(h[k].id),h[k].url&&x.includes(h[k].url)&&c.push(new Ae(m,h,`all the sprites' URLs must be unique, but ${h[k].url} is duplicated`)),x.push(h[k].url),c=c.concat(fr({key:`${m}[${k}]`,value:h[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:u.validateSpec}));return c}return Bs({key:m,value:h})}const Xa={"*":()=>[],array:ta,boolean:function(u){const c=u.value,h=u.key,m=Vi(c);return m!=="boolean"?[new Ae(h,c,`boolean expected, ${m} found`)]:[]},number:tc,color:function(u){const c=u.key,h=u.value,m=Vi(h);return m!=="string"?[new Ae(c,h,`color expected, ${m} found`)]:Wi.parse(String(h))?[]:[new Ae(c,h,`color expected, "${h}" found`)]},constants:Su,enum:ss,filter:ic,function:Za,layer:sc,object:fr,source:ia,light:oc,sky:ac,terrain:lc,projection:function(u){const c=u.value,h=u.styleSpec,m=h.projection,b=u.style,x=Vi(c);if(c===void 0)return[];if(x!=="object")return[new Ae("projection",c,`object expected, ${x} found`)];let k=[];for(const S in c)k=k.concat(m[S]?u.validateSpec({key:S,value:c[S],valueSpec:m[S],style:b,styleSpec:h}):[new Ae(S,c[S],`unknown property "${S}"`)]);return k},string:Bs,formatted:function(u){return Bs(u).length===0?[]:fo(u)},resolvedImage:function(u){return Bs(u).length===0?[]:fo(u)},padding:function(u){const c=u.key,h=u.value;if(Vi(h)==="array"){if(h.length<1||h.length>4)return[new Ae(c,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let b=[];for(let x=0;x<h.length;x++)b=b.concat(u.validateSpec({key:`${c}[${x}]`,value:h[x],validateSpec:u.validateSpec,valueSpec:m}));return b}return tc({key:c,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(u){const c=u.key,h=u.value,m=Vi(h),b=u.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new Ae(c,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let k=0;k<h.length;k+=2)x=x.concat(ss({key:`${c}[${k}]`,value:h[k],valueSpec:b.layout_symbol["text-anchor"]})),x=x.concat(ta({key:`${c}[${k+1}]`,value:h[k+1],valueSpec:{length:2,value:"number"},validateSpec:u.validateSpec,style:u.style,styleSpec:b}));return x},sprite:cc};function ho(u){const c=u.value,h=u.valueSpec,m=u.styleSpec;return u.validateSpec=ho,h.expression&&Fa(mn(c))?Za(u):h.expression&&Va(zr(c))?fo(u):h.type&&Xa[h.type]?Xa[h.type](u):fr(Zr({},u,{valueSpec:h.type?m[h.type]:h}))}function Tu(u){const c=u.value,h=u.key,m=Bs(u);return m.length||(c.indexOf("{fontstack}")===-1&&m.push(new Ae(h,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&m.push(new Ae(h,c,'"glyphs" url must include a "{range}" token'))),m}function br(u,c=Fe){let h=[];return h=h.concat(ho({key:"",value:u,valueSpec:c.$root,styleSpec:c,style:u,validateSpec:ho,objectElementValidators:{glyphs:Tu,"*":()=>[]}})),u.constants&&(h=h.concat(Su({key:"constants",value:u.constants,style:u,styleSpec:c,validateSpec:ho}))),uc(h)}function Kr(u){return function(c){return u({...c,validateSpec:ho})}}function uc(u){return[].concat(u).sort((c,h)=>c.line-h.line)}function Dr(u){return function(...c){return uc(u.apply(this,c))}}br.source=Dr(Kr(ia)),br.sprite=Dr(Kr(cc)),br.glyphs=Dr(Kr(Tu)),br.light=Dr(Kr(oc)),br.sky=Dr(Kr(ac)),br.terrain=Dr(Kr(lc)),br.layer=Dr(Kr(sc)),br.filter=Dr(Kr(ic)),br.paintProperty=Dr(Kr(Ha)),br.layoutProperty=Dr(Kr(rc));const Ns=br,Wf=Ns.light,Xf=Ns.sky,Iu=Ns.paintProperty,Au=Ns.layoutProperty;function fc(u,c){let h=!1;if(c&&c.length)for(const m of c)u.fire(new ri(new Error(m.message))),h=!0;return h}class mo{constructor(c,h,m){const b=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const k=new Int32Array(this.arrayBuffer);c=k[0],this.d=(h=k[1])+2*(m=k[2]);for(let I=0;I<this.d*this.d;I++){const M=k[3+I],L=k[3+I+1];b.push(M===L?null:k.subarray(M,L))}const S=k[3+b.length+1];this.keys=k.subarray(k[3+b.length],S),this.bboxes=k.subarray(S),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let k=0;k<this.d*this.d;k++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=c,this.padding=m,this.scale=h/c,this.uid=0;const x=m/h*c;this.min=-x,this.max=c+x}insert(c,h,m,b,x){this._forEachCell(h,m,b,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,h,m,b,x,k){this.cells[x].push(k)}query(c,h,m,b,x){const k=this.min,S=this.max;if(c<=k&&h<=k&&S<=m&&S<=b&&!x)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(c,h,m,b,this._queryCell,I,{},x),I}}_queryCell(c,h,m,b,x,k,S,I){const M=this.cells[x];if(M!==null){const L=this.keys,O=this.bboxes;for(let j=0;j<M.length;j++){const X=M[j];if(S[X]===void 0){const Y=4*X;(I?I(O[Y+0],O[Y+1],O[Y+2],O[Y+3]):c<=O[Y+2]&&h<=O[Y+3]&&m>=O[Y+0]&&b>=O[Y+1])?(S[X]=!0,k.push(L[X])):S[X]=!1}}}}_forEachCell(c,h,m,b,x,k,S,I){const M=this._convertToCellCoord(c),L=this._convertToCellCoord(h),O=this._convertToCellCoord(m),j=this._convertToCellCoord(b);for(let X=M;X<=O;X++)for(let Y=L;Y<=j;Y++){const $=this.d*Y+X;if((!I||I(this._convertFromCellCoord(X),this._convertFromCellCoord(Y),this._convertFromCellCoord(X+1),this._convertFromCellCoord(Y+1)))&&x.call(this,c,h,m,b,$,k,S,I))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,h=3+this.cells.length+1+1;let m=0;for(let k=0;k<this.cells.length;k++)m+=this.cells[k].length;const b=new Int32Array(h+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let x=h;for(let k=0;k<c.length;k++){const S=c[k];b[3+k]=x,b.set(S,x),x+=S.length}return b[3+c.length]=x,b.set(this.keys,x),x+=this.keys.length,b[3+c.length+1]=x,b.set(this.bboxes,x),x+=this.bboxes.length,b.buffer}static serialize(c,h){const m=c.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(c){return new mo(c.buffer)}}const vr={};function Xt(u,c,h={}){if(vr[u])throw new Error(`${u} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:u,writeable:!1}),vr[u]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}Xt("Object",Object),Xt("TransferableGridIndex",mo),Xt("Color",Wi),Xt("Error",Error),Xt("AJAXError",ai),Xt("ResolvedImage",ur),Xt("StylePropertyFunction",uo),Xt("StyleExpression",Na,{omit:["_evaluator"]}),Xt("ZoomDependentExpression",co),Xt("ZoomConstantExpression",lo),Xt("CompoundExpression",yr,{omit:["_evaluate"]});for(const u in io)io[u]._classRegistryKey||Xt(`Expression_${u}`,io[u]);function Ka(u){return u&&typeof ArrayBuffer<"u"&&(u instanceof ArrayBuffer||u.constructor&&u.constructor.name==="ArrayBuffer")}function hc(u){return u.$name||u.constructor._classRegistryKey}function Eu(u){return!function(c){if(c===null||typeof c!="object")return!1;const h=hc(c);return!(!h||h==="Object")}(u)&&(u==null||typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u instanceof Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp||u instanceof Blob||u instanceof Error||Ka(u)||We(u)||ArrayBuffer.isView(u)||u instanceof ImageData)}function po(u,c){if(Eu(u))return(Ka(u)||We(u))&&c&&c.push(u),ArrayBuffer.isView(u)&&c&&c.push(u.buffer),u instanceof ImageData&&c&&c.push(u.data.buffer),u;if(Array.isArray(u)){const x=[];for(const k of u)x.push(po(k,c));return x}if(typeof u!="object")throw new Error("can't serialize object of type "+typeof u);const h=hc(u);if(!h)throw new Error(`can't serialize object of unregistered class ${u.constructor.name}`);if(!vr[h])throw new Error(`${h} is not registered.`);const{klass:m}=vr[h],b=m.serialize?m.serialize(u,c):{};if(m.serialize){if(c&&b===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in u){if(!u.hasOwnProperty(x)||vr[h].omit.indexOf(x)>=0)continue;const k=u[x];b[x]=vr[h].shallow.indexOf(x)>=0?k:po(k,c)}u instanceof Error&&(b.message=u.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(b.$name=h),b}function _o(u){if(Eu(u))return u;if(Array.isArray(u))return u.map(_o);if(typeof u!="object")throw new Error("can't deserialize object of type "+typeof u);const c=hc(u)||"Object";if(!vr[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:h}=vr[c];if(!h)throw new Error(`can't deserialize unregistered class ${c}`);if(h.deserialize)return h.deserialize(u);const m=Object.create(h.prototype);for(const b of Object.keys(u)){if(b==="$name")continue;const x=u[b];m[b]=vr[c].shallow.indexOf(b)>=0?x:_o(x)}return m}class dc{constructor(){this.first=!0}update(c,h){const m=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=m,!0))}}const Di={"Latin-1 Supplement":u=>u>=128&&u<=255,"Hangul Jamo":u=>u>=4352&&u<=4607,Khmer:u=>u>=6016&&u<=6143,"General Punctuation":u=>u>=8192&&u<=8303,"Letterlike Symbols":u=>u>=8448&&u<=8527,"Number Forms":u=>u>=8528&&u<=8591,"Miscellaneous Technical":u=>u>=8960&&u<=9215,"Control Pictures":u=>u>=9216&&u<=9279,"Optical Character Recognition":u=>u>=9280&&u<=9311,"Enclosed Alphanumerics":u=>u>=9312&&u<=9471,"Geometric Shapes":u=>u>=9632&&u<=9727,"Miscellaneous Symbols":u=>u>=9728&&u<=9983,"Miscellaneous Symbols and Arrows":u=>u>=11008&&u<=11263,"Ideographic Description Characters":u=>u>=12272&&u<=12287,"CJK Symbols and Punctuation":u=>u>=12288&&u<=12351,Katakana:u=>u>=12448&&u<=12543,Kanbun:u=>u>=12688&&u<=12703,"CJK Strokes":u=>u>=12736&&u<=12783,"Enclosed CJK Letters and Months":u=>u>=12800&&u<=13055,"CJK Compatibility":u=>u>=13056&&u<=13311,"Yijing Hexagram Symbols":u=>u>=19904&&u<=19967,"Private Use Area":u=>u>=57344&&u<=63743,"Vertical Forms":u=>u>=65040&&u<=65055,"CJK Compatibility Forms":u=>u>=65072&&u<=65103,"Small Form Variants":u=>u>=65104&&u<=65135,"Halfwidth and Fullwidth Forms":u=>u>=65280&&u<=65519};function mc(u){for(const c of u)if(_c(c.charCodeAt(0)))return!0;return!1}function Kf(u){for(const c of u)if(!go(c.charCodeAt(0)))return!1;return!0}function pc(u){const c=u.map(h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}}).filter(h=>h);return new RegExp(c.join("|"),"u")}const Jf=pc(["Arab","Dupl","Mong","Ougr","Syrc"]);function go(u){return!Jf.test(String.fromCodePoint(u))}const Pu=pc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function _c(u){return!(u!==746&&u!==747&&(u<4352||!(Di["CJK Compatibility Forms"](u)&&!(u>=65097&&u<=65103)||Di["CJK Compatibility"](u)||Di["CJK Strokes"](u)||!(!Di["CJK Symbols and Punctuation"](u)||u>=12296&&u<=12305||u>=12308&&u<=12319||u===12336)||Di["Enclosed CJK Letters and Months"](u)||Di["Ideographic Description Characters"](u)||Di.Kanbun(u)||Di.Katakana(u)&&u!==12540||!(!Di["Halfwidth and Fullwidth Forms"](u)||u===65288||u===65289||u===65293||u>=65306&&u<=65310||u===65339||u===65341||u===65343||u>=65371&&u<=65503||u===65507||u>=65512&&u<=65519)||!(!Di["Small Form Variants"](u)||u>=65112&&u<=65118||u>=65123&&u<=65126)||Di["Vertical Forms"](u)||Di["Yijing Hexagram Symbols"](u)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(u))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(u))||Pu.test(String.fromCodePoint(u)))))}function Mu(u){return!(_c(u)||function(c){return!!(Di["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Di["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Di["Letterlike Symbols"](c)||Di["Number Forms"](c)||Di["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Di["Control Pictures"](c)&&c!==9251||Di["Optical Character Recognition"](c)||Di["Enclosed Alphanumerics"](c)||Di["Geometric Shapes"](c)||Di["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Di["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Di["CJK Symbols and Punctuation"](c)||Di.Katakana(c)||Di["Private Use Area"](c)||Di["CJK Compatibility Forms"](c)||Di["Small Form Variants"](c)||Di["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(u))}const Yf=pc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function gc(u){return Yf.test(String.fromCodePoint(u))}function Qf(u,c){return!(!c&&gc(u)||u>=2304&&u<=3583||u>=3840&&u<=4255||Di.Khmer(u))}function $f(u){for(const c of u)if(gc(c.charCodeAt(0)))return!0;return!1}const hr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(u){this.pluginStatus=u.pluginStatus,this.pluginURL=u.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(u){this.applyArabicShaping=u.applyArabicShaping,this.processBidirectionalText=u.processBidirectionalText,this.processStyledBidirectionalText=u.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class tn{constructor(c,h){this.zoom=c,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dc,this.transition={})}isSupportedScript(c){return function(h,m){for(const b of h)if(!Qf(b.charCodeAt(0),m))return!1;return!0}(c,hr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,h=c-Math.floor(c),m=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class yo{constructor(c,h){this.property=c,this.value=h,this.expression=function(m,b){if(Fa(m))return new uo(m,b);if(Va(m)){const x=Ql(m,b);if(x.result==="error")throw new Error(x.value.map(k=>`${k.key}: ${k.message}`).join(", "));return x.value}{let x=m;return b.type==="color"&&typeof m=="string"?x=Wi.parse(m):b.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(x=gr.parse(m)):x=cr.parse(m),{kind:"constant",evaluate:()=>x}}}(h===void 0?c.specification.default:h,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,h,m){return this.property.possiblyEvaluate(this,c,h,m)}}class Ja{constructor(c){this.property=c,this.value=new yo(c,void 0)}transitioned(c,h){return new zu(this.property,this.value,h,Ie({},c.transition,this.transition),c.now)}untransitioned(){return new zu(this.property,this.value,null,{},0)}}class Ya{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return de(this._values[c].value.value)}setValue(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Ja(this._values[c].property)),this._values[c].value=new yo(this._values[c].property,h===null?void 0:de(h))}getTransition(c){return de(this._values[c].transition)}setTransition(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Ja(this._values[c].property)),this._values[c].transition=de(h)||void 0}serialize(){const c={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(c[h]=m);const b=this.getTransition(h);b!==void 0&&(c[`${h}-transition`]=b)}return c}transitioned(c,h){const m=new na(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(c,h._values[b]);return m}untransitioned(){const c=new na(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].untransitioned();return c}}class zu{constructor(c,h,m,b,x){this.property=c,this.value=h,this.begin=x+b.delay||0,this.end=this.begin+b.duration||0,c.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(c,h,m){const b=c.now||0,x=this.value.possiblyEvaluate(c,h,m),k=this.prior;if(k){if(b>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(b<this.begin)return k.possiblyEvaluate(c,h,m);{const S=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(c,h,m),x,function(I){if(I<=0)return 0;if(I>=1)return 1;const M=I*I,L=M*I;return 4*(I<.5?L:3*(I-M)+L-.75)}(S))}}return x}}class na{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,h,m){const b=new sa(this._properties);for(const x of Object.keys(this._values))b._values[x]=this._values[x].possiblyEvaluate(c,h,m);return b}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class ra{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return de(this._values[c].value)}setValue(c,h){this._values[c]=new yo(this._values[c].property,h===null?void 0:de(h))}serialize(){const c={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(c[h]=m)}return c}possiblyEvaluate(c,h,m){const b=new sa(this._properties);for(const x of Object.keys(this._values))b._values[x]=this._values[x].possiblyEvaluate(c,h,m);return b}}class Jr{constructor(c,h,m){this.property=c,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,h,m,b){return this.property.evaluate(this.value,this.parameters,c,h,m,b)}}class sa{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class Qt{constructor(c){this.specification=c}possiblyEvaluate(c,h){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(h)}interpolate(c,h,m){const b=$n[this.specification.type];return b?b(c,h,m):c}}class hi{constructor(c,h){this.specification=c,this.overrides=h}possiblyEvaluate(c,h,m,b){return new Jr(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(h,null,{},m,b)}:c.expression,h)}interpolate(c,h,m){if(c.value.kind!=="constant"||h.value.kind!=="constant")return c;if(c.value.value===void 0||h.value.value===void 0)return new Jr(this,{kind:"constant",value:void 0},c.parameters);const b=$n[this.specification.type];if(b){const x=b(c.value.value,h.value.value,m);return new Jr(this,{kind:"constant",value:x},c.parameters)}return c}evaluate(c,h,m,b,x,k){return c.kind==="constant"?c.value:c.evaluate(h,m,b,x,k)}}class Qa extends hi{possiblyEvaluate(c,h,m,b){if(c.value===void 0)return new Jr(this,{kind:"constant",value:void 0},h);if(c.expression.kind==="constant"){const x=c.expression.evaluate(h,null,{},m,b),k=c.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,S=this._calculate(k,k,k,h);return new Jr(this,{kind:"constant",value:S},h)}if(c.expression.kind==="camera"){const x=this._calculate(c.expression.evaluate({zoom:h.zoom-1}),c.expression.evaluate({zoom:h.zoom}),c.expression.evaluate({zoom:h.zoom+1}),h);return new Jr(this,{kind:"constant",value:x},h)}return new Jr(this,c.expression,h)}evaluate(c,h,m,b,x,k){if(c.kind==="source"){const S=c.evaluate(h,m,b,x,k);return this._calculate(S,S,S,h)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(h.zoom)-1},m,b),c.evaluate({zoom:Math.floor(h.zoom)},m,b),c.evaluate({zoom:Math.floor(h.zoom)+1},m,b),h):c.value}_calculate(c,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:m,to:h}}interpolate(c){return c}}class $a{constructor(c){this.specification=c}possiblyEvaluate(c,h,m,b){if(c.value!==void 0){if(c.expression.kind==="constant"){const x=c.expression.evaluate(h,null,{},m,b);return this._calculate(x,x,x,h)}return this._calculate(c.expression.evaluate(new tn(Math.floor(h.zoom-1),h)),c.expression.evaluate(new tn(Math.floor(h.zoom),h)),c.expression.evaluate(new tn(Math.floor(h.zoom+1),h)),h)}}_calculate(c,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:m,to:h}}interpolate(c){return c}}class yc{constructor(c){this.specification=c}possiblyEvaluate(c,h,m,b){return!!c.expression.evaluate(h,null,{},m,b)}interpolate(){return!1}}class w{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in c){const m=c[h];m.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new yo(m,void 0),x=this.defaultTransitionablePropertyValues[h]=new Ja(m);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate({})}}}Xt("DataDrivenProperty",hi),Xt("DataConstantProperty",Qt),Xt("CrossFadedDataDrivenProperty",Qa),Xt("CrossFadedProperty",$a),Xt("ColorRampProperty",yc);const a="-transition";class d extends Ti{constructor(c,h){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),h.layout&&(this._unevaluatedLayout=new ra(h.layout)),h.paint)){this._transitionablePaint=new Ya(h.paint);for(const m in c.paint)this.setPaintProperty(m,c.paint[m],{validate:!1});for(const m in c.layout)this.setLayoutProperty(m,c.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sa(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,h,m={}){h!=null&&this._validate(Au,`layers.${this.id}.layout.${c}`,c,h,m)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,h):this.visibility=h)}getPaintProperty(c){return c.endsWith(a)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,h,m={}){if(h!=null&&this._validate(Iu,`layers.${this.id}.paint.${c}`,c,h,m))return!1;if(c.endsWith(a))return this._transitionablePaint.setTransition(c.slice(0,-11),h||void 0),!1;{const b=this._transitionablePaint._values[c],x=b.property.specification["property-type"]==="cross-faded-data-driven",k=b.value.isDataDriven(),S=b.value;this._transitionablePaint.setValue(c,h),this._handleSpecialPaintPropertyUpdate(c);const I=this._transitionablePaint._values[c].value;return I.isDataDriven()||k||x||this._handleOverridablePaintPropertyUpdate(c,S,I)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,h,m){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,h){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,h)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),Ve(c,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(c,h,m,b,x={}){return(!x||x.validate!==!1)&&fc(this,c.call(Ns,{key:h,layerType:this.type,objectKey:m,value:b,styleSpec:Fe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const h=this.paint.get(c);if(h instanceof Jr&&so(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const _={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(c,h){this._structArray=c,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class v{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,h){return c._trim(),h&&(c.isTransferred=!0,h.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const h=Object.create(this.prototype);return h.arrayBuffer=c.arrayBuffer,h.length=c.length,h.capacity=c.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function T(u,c=1){let h=0,m=0;return{members:u.map(b=>{const x=_[b.type].BYTES_PER_ELEMENT,k=h=E(h,Math.max(c,x)),S=b.components||1;return m=Math.max(m,x),h+=x*S,{name:b.name,type:b.type,components:S,offset:k}}),size:E(h,Math.max(m,c)),alignment:c}}function E(u,c){return Math.ceil(u/c)*c}class P extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const b=2*c;return this.int16[b+0]=h,this.int16[b+1]=m,c}}P.prototype.bytesPerElement=4,Xt("StructArrayLayout2i4",P);class R extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,m)}emplace(c,h,m,b){const x=3*c;return this.int16[x+0]=h,this.int16[x+1]=m,this.int16[x+2]=b,c}}R.prototype.bytesPerElement=6,Xt("StructArrayLayout3i6",R);class B extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b){const x=this.length;return this.resize(x+1),this.emplace(x,c,h,m,b)}emplace(c,h,m,b,x){const k=4*c;return this.int16[k+0]=h,this.int16[k+1]=m,this.int16[k+2]=b,this.int16[k+3]=x,c}}B.prototype.bytesPerElement=8,Xt("StructArrayLayout4i8",B);class N extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,m,b,x,k)}emplace(c,h,m,b,x,k,S){const I=6*c;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=b,this.int16[I+3]=x,this.int16[I+4]=k,this.int16[I+5]=S,c}}N.prototype.bytesPerElement=12,Xt("StructArrayLayout2i4i12",N);class J extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,m,b,x,k)}emplace(c,h,m,b,x,k,S){const I=4*c,M=8*c;return this.int16[I+0]=h,this.int16[I+1]=m,this.uint8[M+4]=b,this.uint8[M+5]=x,this.uint8[M+6]=k,this.uint8[M+7]=S,c}}J.prototype.bytesPerElement=8,Xt("StructArrayLayout2i4ub8",J);class ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const b=2*c;return this.float32[b+0]=h,this.float32[b+1]=m,c}}ee.prototype.bytesPerElement=8,Xt("StructArrayLayout2f8",ee);class ne extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k,S,I,M,L){const O=this.length;return this.resize(O+1),this.emplace(O,c,h,m,b,x,k,S,I,M,L)}emplace(c,h,m,b,x,k,S,I,M,L,O){const j=10*c;return this.uint16[j+0]=h,this.uint16[j+1]=m,this.uint16[j+2]=b,this.uint16[j+3]=x,this.uint16[j+4]=k,this.uint16[j+5]=S,this.uint16[j+6]=I,this.uint16[j+7]=M,this.uint16[j+8]=L,this.uint16[j+9]=O,c}}ne.prototype.bytesPerElement=20,Xt("StructArrayLayout10ui20",ne);class _e extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k,S,I,M,L,O,j){const X=this.length;return this.resize(X+1),this.emplace(X,c,h,m,b,x,k,S,I,M,L,O,j)}emplace(c,h,m,b,x,k,S,I,M,L,O,j,X){const Y=12*c;return this.int16[Y+0]=h,this.int16[Y+1]=m,this.int16[Y+2]=b,this.int16[Y+3]=x,this.uint16[Y+4]=k,this.uint16[Y+5]=S,this.uint16[Y+6]=I,this.uint16[Y+7]=M,this.int16[Y+8]=L,this.int16[Y+9]=O,this.int16[Y+10]=j,this.int16[Y+11]=X,c}}_e.prototype.bytesPerElement=24,Xt("StructArrayLayout4i4ui4i24",_e);class be extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,m)}emplace(c,h,m,b){const x=3*c;return this.float32[x+0]=h,this.float32[x+1]=m,this.float32[x+2]=b,c}}be.prototype.bytesPerElement=12,Xt("StructArrayLayout3f12",be);class ve extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint32[1*c+0]=h,c}}ve.prototype.bytesPerElement=4,Xt("StructArrayLayout1ul4",ve);class ke extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k,S,I,M){const L=this.length;return this.resize(L+1),this.emplace(L,c,h,m,b,x,k,S,I,M)}emplace(c,h,m,b,x,k,S,I,M,L){const O=10*c,j=5*c;return this.int16[O+0]=h,this.int16[O+1]=m,this.int16[O+2]=b,this.int16[O+3]=x,this.int16[O+4]=k,this.int16[O+5]=S,this.uint32[j+3]=I,this.uint16[O+8]=M,this.uint16[O+9]=L,c}}ke.prototype.bytesPerElement=20,Xt("StructArrayLayout6i1ul2ui20",ke);class ae extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,m,b,x,k)}emplace(c,h,m,b,x,k,S){const I=6*c;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=b,this.int16[I+3]=x,this.int16[I+4]=k,this.int16[I+5]=S,c}}ae.prototype.bytesPerElement=12,Xt("StructArrayLayout2i2i2i12",ae);class Ee extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x){const k=this.length;return this.resize(k+1),this.emplace(k,c,h,m,b,x)}emplace(c,h,m,b,x,k){const S=4*c,I=8*c;return this.float32[S+0]=h,this.float32[S+1]=m,this.float32[S+2]=b,this.int16[I+6]=x,this.int16[I+7]=k,c}}Ee.prototype.bytesPerElement=16,Xt("StructArrayLayout2f1f2i16",Ee);class ze extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k){const S=this.length;return this.resize(S+1),this.emplace(S,c,h,m,b,x,k)}emplace(c,h,m,b,x,k,S){const I=16*c,M=4*c,L=8*c;return this.uint8[I+0]=h,this.uint8[I+1]=m,this.float32[M+1]=b,this.float32[M+2]=x,this.int16[L+6]=k,this.int16[L+7]=S,c}}ze.prototype.bytesPerElement=16,Xt("StructArrayLayout2ub2f2i16",ze);class Ue extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,m)}emplace(c,h,m,b){const x=3*c;return this.uint16[x+0]=h,this.uint16[x+1]=m,this.uint16[x+2]=b,c}}Ue.prototype.bytesPerElement=6,Xt("StructArrayLayout3ui6",Ue);class ht extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye){const Be=this.length;return this.resize(Be+1),this.emplace(Be,c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye)}emplace(c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye,Be){const Se=24*c,De=12*c,et=48*c;return this.int16[Se+0]=h,this.int16[Se+1]=m,this.uint16[Se+2]=b,this.uint16[Se+3]=x,this.uint32[De+2]=k,this.uint32[De+3]=S,this.uint32[De+4]=I,this.uint16[Se+10]=M,this.uint16[Se+11]=L,this.uint16[Se+12]=O,this.float32[De+7]=j,this.float32[De+8]=X,this.uint8[et+36]=Y,this.uint8[et+37]=$,this.uint8[et+38]=le,this.uint32[De+10]=ye,this.int16[Se+22]=Be,c}}ht.prototype.bytesPerElement=48,Xt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ht);class kt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye,Be,Se,De,et,bt,Zt,ui,Ut,Nt,ni,Kt){const Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye,Be,Se,De,et,bt,Zt,ui,Ut,Nt,ni,Kt)}emplace(c,h,m,b,x,k,S,I,M,L,O,j,X,Y,$,le,ye,Be,Se,De,et,bt,Zt,ui,Ut,Nt,ni,Kt,Ht){const at=32*c,si=16*c;return this.int16[at+0]=h,this.int16[at+1]=m,this.int16[at+2]=b,this.int16[at+3]=x,this.int16[at+4]=k,this.int16[at+5]=S,this.int16[at+6]=I,this.int16[at+7]=M,this.uint16[at+8]=L,this.uint16[at+9]=O,this.uint16[at+10]=j,this.uint16[at+11]=X,this.uint16[at+12]=Y,this.uint16[at+13]=$,this.uint16[at+14]=le,this.uint16[at+15]=ye,this.uint16[at+16]=Be,this.uint16[at+17]=Se,this.uint16[at+18]=De,this.uint16[at+19]=et,this.uint16[at+20]=bt,this.uint16[at+21]=Zt,this.uint16[at+22]=ui,this.uint32[si+12]=Ut,this.float32[si+13]=Nt,this.float32[si+14]=ni,this.uint16[at+30]=Kt,this.uint16[at+31]=Ht,c}}kt.prototype.bytesPerElement=64,Xt("StructArrayLayout8i15ui1ul2f2ui64",kt);class Vt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.float32[1*c+0]=h,c}}Vt.prototype.bytesPerElement=4,Xt("StructArrayLayout1f4",Vt);class Gt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,m)}emplace(c,h,m,b){const x=3*c;return this.uint16[6*c+0]=h,this.float32[x+1]=m,this.float32[x+2]=b,c}}Gt.prototype.bytesPerElement=12,Xt("StructArrayLayout1ui2f12",Gt);class zt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,c,h,m)}emplace(c,h,m,b){const x=4*c;return this.uint32[2*c+0]=h,this.uint16[x+2]=m,this.uint16[x+3]=b,c}}zt.prototype.bytesPerElement=8,Xt("StructArrayLayout1ul2ui8",zt);class Pt extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const b=2*c;return this.uint16[b+0]=h,this.uint16[b+1]=m,c}}Pt.prototype.bytesPerElement=4,Xt("StructArrayLayout2ui4",Pt);class $t extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint16[1*c+0]=h,c}}$t.prototype.bytesPerElement=2,Xt("StructArrayLayout1ui2",$t);class yi extends v{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,b){const x=this.length;return this.resize(x+1),this.emplace(x,c,h,m,b)}emplace(c,h,m,b,x){const k=4*c;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=b,this.float32[k+3]=x,c}}yi.prototype.bytesPerElement=16,Xt("StructArrayLayout4f16",yi);class Bt extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}Bt.prototype.size=20;class qt extends ke{get(c){return new Bt(this,c)}}Xt("CollisionBoxArray",qt);class _i extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}_i.prototype.size=48;class nn extends ht{get(c){return new _i(this,c)}}Xt("PlacedSymbolArray",nn);class ki extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ki.prototype.size=64;class zi extends kt{get(c){return new ki(this,c)}}Xt("SymbolInstanceArray",zi);class rn extends Vt{getoffsetX(c){return this.float32[1*c+0]}}Xt("GlyphOffsetArray",rn);class Rn extends R{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}Xt("SymbolLineVertexArray",Rn);class Lr extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Lr.prototype.size=12;class sn extends Gt{get(c){return new Lr(this,c)}}Xt("TextAnchorOffsetArray",sn);class tr extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}tr.prototype.size=8;class Gn extends zt{get(c){return new tr(this,c)}}Xt("FeatureIndexArray",Gn);class On extends P{}class Hn extends P{}class Yr extends P{}class bo extends N{}class el extends J{}class vo extends ee{}class wr extends ne{}class tl extends _e{}class bc extends be{}class xr extends ve{}class kr extends ae{}class _s extends ze{}class Rr extends Ue{}class Mn extends Pt{}const Fn=T([{name:"a_pos",components:2,type:"Int16"}],4),{members:dr}=Fn;class Li{constructor(c=[]){this.segments=c}prepareSegment(c,h,m,b){let x=this.segments[this.segments.length-1];return c>Li.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!x||x.vertexLength+c>Li.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==b)&&(x={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},b!==void 0&&(x.sortKey=b),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const c of this.segments)for(const h in c.vaos)c.vaos[h].destroy()}static simpleSegment(c,h,m,b){return new Li([{vertexOffset:c,primitiveOffset:h,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function Vs(u,c){return 256*(u=se(Math.floor(u),0,255))+se(Math.floor(c),0,255)}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xt("SegmentVector",Li);const wo=T([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var xo={exports:{}},Du={exports:{}};Du.exports=function(u,c){var h,m,b,x,k,S,I,M;for(m=u.length-(h=3&u.length),b=c,k=3432918353,S=461845907,M=0;M<m;)I=255&u.charCodeAt(M)|(255&u.charCodeAt(++M))<<8|(255&u.charCodeAt(++M))<<16|(255&u.charCodeAt(++M))<<24,++M,b=27492+(65535&(x=5*(65535&(b=(b^=I=(65535&(I=(I=(65535&I)*k+(((I>>>16)*k&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(I=0,h){case 3:I^=(255&u.charCodeAt(M+2))<<16;case 2:I^=(255&u.charCodeAt(M+1))<<8;case 1:b^=I=(65535&(I=(I=(65535&(I^=255&u.charCodeAt(M)))*k+(((I>>>16)*k&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295}return b^=u.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var eh=Du.exports,Lu={exports:{}};Lu.exports=function(u,c){for(var h,m=u.length,b=c^m,x=0;m>=4;)h=1540483477*(65535&(h=255&u.charCodeAt(x)|(255&u.charCodeAt(++x))<<8|(255&u.charCodeAt(++x))<<16|(255&u.charCodeAt(++x))<<24))+((1540483477*(h>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++x;switch(m){case 3:b^=(255&u.charCodeAt(x+2))<<16;case 2:b^=(255&u.charCodeAt(x+1))<<8;case 1:b=1540483477*(65535&(b^=255&u.charCodeAt(x)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var gs=eh,Ru=Lu.exports;xo.exports=gs,xo.exports.murmur3=gs,xo.exports.murmur2=Ru;var il=f(xo.exports);class oa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,h,m,b){this.ids.push(nl(c)),this.positions.push(h,m,b)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=nl(c);let m=0,b=this.ids.length-1;for(;m<b;){const k=m+b>>1;this.ids[k]>=h?b=k:m=k+1}const x=[];for(;this.ids[m]===h;)x.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return x}static serialize(c,h){const m=new Float64Array(c.ids),b=new Uint32Array(c.positions);return rl(m,b,0,m.length-1),h&&h.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(c){const h=new oa;return h.ids=c.ids,h.positions=c.positions,h.indexed=!0,h}}function nl(u){const c=+u;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:il(String(u))}function rl(u,c,h,m){for(;h<m;){const b=u[h+m>>1];let x=h-1,k=m+1;for(;;){do x++;while(u[x]<b);do k--;while(u[k]>b);if(x>=k)break;ko(u,x,k),ko(c,3*x,3*k),ko(c,3*x+1,3*k+1),ko(c,3*x+2,3*k+2)}k-h<m-k?(rl(u,c,h,k),h=k+1):(rl(u,c,k+1,m),m=k)}}function ko(u,c,h){const m=u[c];u[c]=u[h],u[h]=m}Xt("FeaturePositionMap",oa);class aa{constructor(c,h){this.gl=c.gl,this.location=h}}class Ou extends aa{constructor(c,h){super(c,h),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class Fd extends aa{constructor(c,h){super(c,h),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class Bd extends aa{constructor(c,h){super(c,h),this.current=Wi.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const Cy=new Float32Array(16);function th(u){return[Vs(255*u.r,255*u.g),Vs(255*u.b,255*u.a)]}class vc{constructor(c,h,m){this.value=c,this.uniformNames=h.map(b=>`u_${b}`),this.type=m}setUniform(c,h,m){c.set(m.constantOr(this.value))}getBinding(c,h,m){return this.type==="color"?new Bd(c,h):new Ou(c,h)}}class sl{constructor(c,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=c.tlbr}setUniform(c,h,m,b){const x=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&c.set(x)}getBinding(c,h,m){return m.substr(0,9)==="u_pattern"?new Fd(c,h):new Ou(c,h)}}class js{constructor(c,h,m,b){this.expression=c,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(x=>({name:`a_${x}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(c,h,m,b,x){const k=this.paintVertexArray.length,S=this.expression.evaluate(new tn(0),h,{},b,[],x);this.paintVertexArray.resize(c),this._setPaintValue(k,c,S)}updatePaintArray(c,h,m,b){const x=this.expression.evaluate({zoom:0},m,b);this._setPaintValue(c,h,x)}_setPaintValue(c,h,m){if(this.type==="color"){const b=th(m);for(let x=c;x<h;x++)this.paintVertexArray.emplace(x,b[0],b[1])}else{for(let b=c;b<h;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class os{constructor(c,h,m,b,x,k){this.expression=c,this.uniformNames=h.map(S=>`u_${S}_t`),this.type=m,this.useIntegerZoom=b,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new k}populatePaintArray(c,h,m,b,x){const k=this.expression.evaluate(new tn(this.zoom),h,{},b,[],x),S=this.expression.evaluate(new tn(this.zoom+1),h,{},b,[],x),I=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(I,c,k,S)}updatePaintArray(c,h,m,b){const x=this.expression.evaluate({zoom:this.zoom},m,b),k=this.expression.evaluate({zoom:this.zoom+1},m,b);this._setPaintValue(c,h,x,k)}_setPaintValue(c,h,m,b){if(this.type==="color"){const x=th(m),k=th(b);for(let S=c;S<h;S++)this.paintVertexArray.emplace(S,x[0],x[1],k[0],k[1])}else{for(let x=c;x<h;x++)this.paintVertexArray.emplace(x,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,b=se(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);c.set(b)}getBinding(c,h,m){return new Ou(c,h)}}class Co{constructor(c,h,m,b,x,k){this.expression=c,this.type=h,this.useIntegerZoom=m,this.zoom=b,this.layerId=k,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(c,h,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(b,c,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(c,h,m,b,x){this._setPaintValues(c,h,m.patterns&&m.patterns[this.layerId],x)}_setPaintValues(c,h,m,b){if(!b||!m)return;const{min:x,mid:k,max:S}=m,I=b[x],M=b[k],L=b[S];if(I&&M&&L)for(let O=c;O<h;O++)this.zoomInPaintVertexArray.emplace(O,M.tl[0],M.tl[1],M.br[0],M.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],M.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,M.tl[0],M.tl[1],M.br[0],M.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],M.pixelRatio,L.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,wo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,wo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Nd{constructor(c,h,m){this.binders={},this._buffers=[];const b=[];for(const x in c.paint._values){if(!m(x))continue;const k=c.paint.get(x);if(!(k instanceof Jr&&so(k.property.specification)))continue;const S=Sy(x,c.type),I=k.value,M=k.property.specification.type,L=k.property.useIntegerZoom,O=k.property.specification["property-type"],j=O==="cross-faded"||O==="cross-faded-data-driven";if(I.kind==="constant")this.binders[x]=j?new sl(I.value,S):new vc(I.value,S,M),b.push(`/u_${x}`);else if(I.kind==="source"||j){const X=Vd(x,M,"source");this.binders[x]=j?new Co(I,M,L,h,X,c.id):new js(I,S,M,X),b.push(`/a_${x}`)}else{const X=Vd(x,M,"composite");this.binders[x]=new os(I,S,M,L,h,X),b.push(`/z_${x}`)}}this.cacheKey=b.sort().join("")}getMaxValue(c){const h=this.binders[c];return h instanceof js||h instanceof os?h.maxValue:0}populatePaintArrays(c,h,m,b,x){for(const k in this.binders){const S=this.binders[k];(S instanceof js||S instanceof os||S instanceof Co)&&S.populatePaintArray(c,h,m,b,x)}}setConstantPatternPositions(c,h){for(const m in this.binders){const b=this.binders[m];b instanceof sl&&b.setConstantPatternPositions(c,h)}}updatePaintArrays(c,h,m,b,x){let k=!1;for(const S in c){const I=h.getPositions(S);for(const M of I){const L=m.feature(M.index);for(const O in this.binders){const j=this.binders[O];if((j instanceof js||j instanceof os||j instanceof Co)&&j.expression.isStateDependent===!0){const X=b.paint.get(O);j.expression=X.value,j.updatePaintArray(M.start,M.end,L,c[S],x),k=!0}}}}return k}defines(){const c=[];for(const h in this.binders){const m=this.binders[h];(m instanceof vc||m instanceof sl)&&c.push(...m.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return c}getBinderAttributes(){const c=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof js||m instanceof os)for(let b=0;b<m.paintVertexAttributes.length;b++)c.push(m.paintVertexAttributes[b].name);else if(m instanceof Co)for(let b=0;b<wo.members.length;b++)c.push(wo.members[b].name)}return c}getBinderUniforms(){const c=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof vc||m instanceof sl||m instanceof os)for(const b of m.uniformNames)c.push(b)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,h){const m=[];for(const b in this.binders){const x=this.binders[b];if(x instanceof vc||x instanceof sl||x instanceof os){for(const k of x.uniformNames)if(h[k]){const S=x.getBinding(c,h[k],k);m.push({name:k,property:b,binding:S})}}}return m}setUniforms(c,h,m,b){for(const{name:x,property:k,binding:S}of h)this.binders[k].setUniform(S,b,m.get(k),x)}updatePaintBuffers(c){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(c&&m instanceof Co){const b=c.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof js||m instanceof os)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(c){for(const h in this.binders){const m=this.binders[h];(m instanceof js||m instanceof os||m instanceof Co)&&m.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const h=this.binders[c];(h instanceof js||h instanceof os||h instanceof Co)&&h.destroy()}}}class la{constructor(c,h,m=()=>!0){this.programConfigurations={};for(const b of c)this.programConfigurations[b.id]=new Nd(b,h,m);this.needsUpload=!1,this._featureMap=new oa,this._bufferOffset=0}populatePaintArrays(c,h,m,b,x,k){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(c,h,b,x,k);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,h,m,b){for(const x of m)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(c,this._featureMap,h,x,b)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function Sy(u,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[u]||[u.replace(`${c}-`,"").replace(/-/g,"_")]}function Vd(u,c,h){const m={color:{source:ee,composite:yi},number:{source:Vt,composite:ee}},b=function(x){return{"line-pattern":{source:wr,composite:wr},"fill-pattern":{source:wr,composite:wr},"fill-extrusion-pattern":{source:wr,composite:wr}}[x]}(u);return b&&b[h]||m[c][h]}Xt("ConstantBinder",vc),Xt("CrossFadedConstantBinder",sl),Xt("SourceExpressionBinder",js),Xt("CrossFadedCompositeBinder",Co),Xt("CompositeExpressionBinder",os),Xt("ProgramConfiguration",Nd,{omit:["_buffers"]}),Xt("ProgramConfigurationSet",la);const wn=8192,ih=Math.pow(2,14)-1,jd=-ih-1;function ca(u){const c=wn/u.extent,h=u.loadGeometry();for(let m=0;m<h.length;m++){const b=h[m];for(let x=0;x<b.length;x++){const k=b[x],S=Math.round(k.x*c),I=Math.round(k.y*c);k.x=se(S,jd,ih),k.y=se(I,jd,ih),(S<k.x||S>k.x+1||I<k.y||I>k.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ua(u,c){return{type:u.type,id:u.id,properties:u.properties,geometry:c?ca(u):[]}}function Fu(u,c,h,m,b){u.emplaceBack(2*c+(m+1)/2,2*h+(b+1)/2)}class nh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Hn,this.indexArray=new Rr,this.segments=new Li,this.programConfigurations=new la(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){const b=this.layers[0],x=[];let k=null,S=!1;b.type==="circle"&&(k=b.layout.get("circle-sort-key"),S=!k.isConstant());for(const{feature:I,id:M,index:L,sourceLayerIndex:O}of c){const j=this.layers[0]._featureFilter.needGeometry,X=ua(I,j);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),X,m))continue;const Y=S?k.evaluate(X,{},m):void 0,$={id:M,properties:I.properties,type:I.type,sourceLayerIndex:O,index:L,geometry:j?X.geometry:ca(I),patterns:{},sortKey:Y};x.push($)}S&&x.sort((I,M)=>I.sortKey-M.sortKey);for(const I of x){const{geometry:M,index:L,sourceLayerIndex:O}=I,j=c[L].feature;this.addFeature(I,M,L,m),h.featureIndex.insert(j,M,L,O,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,dr),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,h,m,b){for(const x of h)for(const k of x){const S=k.x,I=k.y;if(S<0||S>=wn||I<0||I>=wn)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),L=M.vertexLength;Fu(this.layoutVertexArray,S,I,-1,-1),Fu(this.layoutVertexArray,S,I,1,-1),Fu(this.layoutVertexArray,S,I,1,1),Fu(this.layoutVertexArray,S,I,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,{},b)}}function Ud(u,c){for(let h=0;h<u.length;h++)if(ol(c,u[h]))return!0;for(let h=0;h<c.length;h++)if(ol(u,c[h]))return!0;return!!rh(u,c)}function Ty(u,c,h){return!!ol(u,c)||!!sh(c,u,h)}function qd(u,c){if(u.length===1)return Gd(c,u[0]);for(let h=0;h<c.length;h++){const m=c[h];for(let b=0;b<m.length;b++)if(ol(u,m[b]))return!0}for(let h=0;h<u.length;h++)if(Gd(c,u[h]))return!0;for(let h=0;h<c.length;h++)if(rh(u,c[h]))return!0;return!1}function Iy(u,c,h){if(u.length>1){if(rh(u,c))return!0;for(let m=0;m<c.length;m++)if(sh(c[m],u,h))return!0}for(let m=0;m<u.length;m++)if(sh(u[m],c,h))return!0;return!1}function rh(u,c){if(u.length===0||c.length===0)return!1;for(let h=0;h<u.length-1;h++){const m=u[h],b=u[h+1];for(let x=0;x<c.length-1;x++)if(Ay(m,b,c[x],c[x+1]))return!0}return!1}function Ay(u,c,h,m){return Rt(u,h,m)!==Rt(c,h,m)&&Rt(u,c,h)!==Rt(u,c,m)}function sh(u,c,h){const m=h*h;if(c.length===1)return u.distSqr(c[0])<m;for(let b=1;b<c.length;b++)if(Zd(u,c[b-1],c[b])<m)return!0;return!1}function Zd(u,c,h){const m=c.distSqr(h);if(m===0)return u.distSqr(c);const b=((u.x-c.x)*(h.x-c.x)+(u.y-c.y)*(h.y-c.y))/m;return u.distSqr(b<0?c:b>1?h:h.sub(c)._mult(b)._add(c))}function Gd(u,c){let h,m,b,x=!1;for(let k=0;k<u.length;k++){h=u[k];for(let S=0,I=h.length-1;S<h.length;I=S++)m=h[S],b=h[I],m.y>c.y!=b.y>c.y&&c.x<(b.x-m.x)*(c.y-m.y)/(b.y-m.y)+m.x&&(x=!x)}return x}function ol(u,c){let h=!1;for(let m=0,b=u.length-1;m<u.length;b=m++){const x=u[m],k=u[b];x.y>c.y!=k.y>c.y&&c.x<(k.x-x.x)*(c.y-x.y)/(k.y-x.y)+x.x&&(h=!h)}return h}function Ey(u,c,h){const m=h[0],b=h[2];if(u.x<m.x&&c.x<m.x||u.x>b.x&&c.x>b.x||u.y<m.y&&c.y<m.y||u.y>b.y&&c.y>b.y)return!1;const x=Rt(u,c,h[0]);return x!==Rt(u,c,h[1])||x!==Rt(u,c,h[2])||x!==Rt(u,c,h[3])}function wc(u,c,h){const m=c.paint.get(u).value;return m.kind==="constant"?m.value:h.programConfigurations.get(c.id).getMaxValue(u)}function Bu(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Nu(u,c,h,m,b){if(!c[0]&&!c[1])return u;const x=C.convert(c)._mult(b);h==="viewport"&&x._rotate(-m);const k=[];for(let S=0;S<u.length;S++)k.push(u[S].sub(x));return k}let Hd,Wd;Xt("CircleBucket",nh,{omit:["layers"]});var Py={get paint(){return Wd=Wd||new w({"circle-radius":new hi(Fe.paint_circle["circle-radius"]),"circle-color":new hi(Fe.paint_circle["circle-color"]),"circle-blur":new hi(Fe.paint_circle["circle-blur"]),"circle-opacity":new hi(Fe.paint_circle["circle-opacity"]),"circle-translate":new Qt(Fe.paint_circle["circle-translate"]),"circle-translate-anchor":new Qt(Fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qt(Fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qt(Fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hi(Fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hi(Fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hi(Fe.paint_circle["circle-stroke-opacity"])})},get layout(){return Hd=Hd||new w({"circle-sort-key":new hi(Fe.layout_circle["circle-sort-key"])})}},ir=1e-6,al=typeof Float32Array<"u"?Float32Array:Array;function oh(u){return u[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u}function Xd(u,c,h){var m=c[0],b=c[1],x=c[2],k=c[3],S=c[4],I=c[5],M=c[6],L=c[7],O=c[8],j=c[9],X=c[10],Y=c[11],$=c[12],le=c[13],ye=c[14],Be=c[15],Se=h[0],De=h[1],et=h[2],bt=h[3];return u[0]=Se*m+De*S+et*O+bt*$,u[1]=Se*b+De*I+et*j+bt*le,u[2]=Se*x+De*M+et*X+bt*ye,u[3]=Se*k+De*L+et*Y+bt*Be,u[4]=(Se=h[4])*m+(De=h[5])*S+(et=h[6])*O+(bt=h[7])*$,u[5]=Se*b+De*I+et*j+bt*le,u[6]=Se*x+De*M+et*X+bt*ye,u[7]=Se*k+De*L+et*Y+bt*Be,u[8]=(Se=h[8])*m+(De=h[9])*S+(et=h[10])*O+(bt=h[11])*$,u[9]=Se*b+De*I+et*j+bt*le,u[10]=Se*x+De*M+et*X+bt*ye,u[11]=Se*k+De*L+et*Y+bt*Be,u[12]=(Se=h[12])*m+(De=h[13])*S+(et=h[14])*O+(bt=h[15])*$,u[13]=Se*b+De*I+et*j+bt*le,u[14]=Se*x+De*M+et*X+bt*ye,u[15]=Se*k+De*L+et*Y+bt*Be,u}Math.hypot||(Math.hypot=function(){for(var u=0,c=arguments.length;c--;)u+=arguments[c]*arguments[c];return Math.sqrt(u)});var xc,My=Xd;function Vu(u,c,h){var m=c[0],b=c[1],x=c[2],k=c[3];return u[0]=h[0]*m+h[4]*b+h[8]*x+h[12]*k,u[1]=h[1]*m+h[5]*b+h[9]*x+h[13]*k,u[2]=h[2]*m+h[6]*b+h[10]*x+h[14]*k,u[3]=h[3]*m+h[7]*b+h[11]*x+h[15]*k,u}xc=new al(4),al!=Float32Array&&(xc[0]=0,xc[1]=0,xc[2]=0,xc[3]=0);class zy extends d{constructor(c){super(c,Py)}createBucket(c){return new nh(c)}queryRadius(c){const h=c;return wc("circle-radius",this,h)+wc("circle-stroke-width",this,h)+Bu(this.paint.get("circle-translate"))}queryIntersectsFeature(c,h,m,b,x,k,S,I){const M=Nu(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,S),L=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),O=this.paint.get("circle-pitch-alignment")==="map",j=O?M:function(Y,$){return Y.map(le=>Kd(le,$))}(M,I),X=O?L*S:L;for(const Y of b)for(const $ of Y){const le=O?$:Kd($,I);let ye=X;const Be=Vu([],[$.x,$.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ye*=Be[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ye*=k.cameraToCenterDistance/Be[3]),Ty(j,le,ye))return!0}return!1}}function Kd(u,c){const h=Vu([],[u.x,u.y,0,1],c);return new C(h[0]/h[3],h[1]/h[3])}class Jd extends nh{}let Yd;Xt("HeatmapBucket",Jd,{omit:["layers"]});var Dy={get paint(){return Yd=Yd||new w({"heatmap-radius":new hi(Fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hi(Fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qt(Fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new yc(Fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qt(Fe.paint_heatmap["heatmap-opacity"])})}};function ah(u,{width:c,height:h},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==c*h*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${c*h*m}`)}else b=new Uint8Array(c*h*m);return u.width=c,u.height=h,u.data=b,u}function Qd(u,{width:c,height:h},m){if(c===u.width&&h===u.height)return;const b=ah({},{width:c,height:h},m);lh(u,b,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,c),height:Math.min(u.height,h)},m),u.width=c,u.height=h,u.data=b.data}function lh(u,c,h,m,b,x){if(b.width===0||b.height===0)return c;if(b.width>u.width||b.height>u.height||h.x>u.width-b.width||h.y>u.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>c.width||b.height>c.height||m.x>c.width-b.width||m.y>c.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const k=u.data,S=c.data;if(k===S)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<b.height;I++){const M=((h.y+I)*u.width+h.x)*x,L=((m.y+I)*c.width+m.x)*x;for(let O=0;O<b.width*x;O++)S[L+O]=k[M+O]}return c}class kc{constructor(c,h){ah(this,c,1,h)}resize(c){Qd(this,c,1)}clone(){return new kc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,m,b,x){lh(c,h,m,b,x,1)}}class Or{constructor(c,h){ah(this,c,4,h)}resize(c){Qd(this,c,4)}replace(c,h){h?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Or({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,m,b,x){lh(c,h,m,b,x,4)}}function $d(u){const c={},h=u.resolution||256,m=u.clips?u.clips.length:1,b=u.image||new Or({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const x=(k,S,I)=>{c[u.evaluationKey]=I;const M=u.expression.evaluate(c);b.data[k+S+0]=Math.floor(255*M.r/M.a),b.data[k+S+1]=Math.floor(255*M.g/M.a),b.data[k+S+2]=Math.floor(255*M.b/M.a),b.data[k+S+3]=Math.floor(255*M.a)};if(u.clips)for(let k=0,S=0;k<m;++k,S+=4*h)for(let I=0,M=0;I<h;I++,M+=4){const L=I/(h-1),{start:O,end:j}=u.clips[k];x(S,M,O*(1-L)+j*L)}else for(let k=0,S=0;k<h;k++,S+=4)x(0,S,k/(h-1));return b}Xt("AlphaImage",kc),Xt("RGBAImage",Or);const ch="big-fb";class Ly extends d{createBucket(c){return new Jd(c)}constructor(c){super(c,Dy),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=$d({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ch)&&this.heatmapFbos.delete(ch)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let em;var Ry={get paint(){return em=em||new w({"hillshade-illumination-direction":new Qt(Fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qt(Fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qt(Fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qt(Fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qt(Fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qt(Fe.paint_hillshade["hillshade-accent-color"])})}};class Oy extends d{constructor(c){super(c,Ry)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Fy=T([{name:"a_pos",components:2,type:"Int16"}],4),{members:By}=Fy;function tm(u,c,h=2){const m=c&&c.length,b=m?c[0]*h:u.length;let x=im(u,0,b,h,!0);const k=[];if(!x||x.next===x.prev)return k;let S,I,M;if(m&&(x=function(L,O,j,X){const Y=[];for(let $=0,le=O.length;$<le;$++){const ye=im(L,O[$]*X,$<le-1?O[$+1]*X:L.length,X,!1);ye===ye.next&&(ye.steiner=!0),Y.push(Hy(ye))}Y.sort(qy);for(let $=0;$<Y.length;$++)j=Zy(Y[$],j);return j}(u,c,x,h)),u.length>80*h){S=1/0,I=1/0;let L=-1/0,O=-1/0;for(let j=h;j<b;j+=h){const X=u[j],Y=u[j+1];X<S&&(S=X),Y<I&&(I=Y),X>L&&(L=X),Y>O&&(O=Y)}M=Math.max(L-S,O-I),M=M!==0?32767/M:0}return Cc(x,k,h,S,I,M,0),k}function im(u,c,h,m,b){let x;if(b===function(k,S,I,M){let L=0;for(let O=S,j=I-M;O<I;O+=M)L+=(k[j]-k[O])*(k[O+1]+k[j+1]),j=O;return L}(u,c,h,m)>0)for(let k=c;k<h;k+=m)x=sm(k/m|0,u[k],u[k+1],x);else for(let k=h-m;k>=c;k-=m)x=sm(k/m|0,u[k],u[k+1],x);return x&&ju(x,x.next)&&(Tc(x),x=x.next),x}function fa(u,c){if(!u)return u;c||(c=u);let h,m=u;do if(h=!1,m.steiner||!ju(m,m.next)&&gn(m.prev,m,m.next)!==0)m=m.next;else{if(Tc(m),m=c=m.prev,m===m.next)break;h=!0}while(h||m!==c);return c}function Cc(u,c,h,m,b,x,k){if(!u)return;!k&&x&&function(I,M,L,O){let j=I;do j.z===0&&(j.z=uh(j.x,j.y,M,L,O)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==I);j.prevZ.nextZ=null,j.prevZ=null,function(X){let Y,$=1;do{let le,ye=X;X=null;let Be=null;for(Y=0;ye;){Y++;let Se=ye,De=0;for(let bt=0;bt<$&&(De++,Se=Se.nextZ,Se);bt++);let et=$;for(;De>0||et>0&&Se;)De!==0&&(et===0||!Se||ye.z<=Se.z)?(le=ye,ye=ye.nextZ,De--):(le=Se,Se=Se.nextZ,et--),Be?Be.nextZ=le:X=le,le.prevZ=Be,Be=le;ye=Se}Be.nextZ=null,$*=2}while(Y>1)}(j)}(u,m,b,x);let S=u;for(;u.prev!==u.next;){const I=u.prev,M=u.next;if(x?Vy(u,m,b,x):Ny(u))c.push(I.i,u.i,M.i),Tc(u),u=M.next,S=M.next;else if((u=M)===S){k?k===1?Cc(u=jy(fa(u),c),c,h,m,b,x,2):k===2&&Uy(u,c,h,m,b,x):Cc(fa(u),c,h,m,b,x,1);break}}}function Ny(u){const c=u.prev,h=u,m=u.next;if(gn(c,h,m)>=0)return!1;const b=c.x,x=h.x,k=m.x,S=c.y,I=h.y,M=m.y,L=b<x?b<k?b:k:x<k?x:k,O=S<I?S<M?S:M:I<M?I:M,j=b>x?b>k?b:k:x>k?x:k,X=S>I?S>M?S:M:I>M?I:M;let Y=m.next;for(;Y!==c;){if(Y.x>=L&&Y.x<=j&&Y.y>=O&&Y.y<=X&&ll(b,S,x,I,k,M,Y.x,Y.y)&&gn(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function Vy(u,c,h,m){const b=u.prev,x=u,k=u.next;if(gn(b,x,k)>=0)return!1;const S=b.x,I=x.x,M=k.x,L=b.y,O=x.y,j=k.y,X=S<I?S<M?S:M:I<M?I:M,Y=L<O?L<j?L:j:O<j?O:j,$=S>I?S>M?S:M:I>M?I:M,le=L>O?L>j?L:j:O>j?O:j,ye=uh(X,Y,c,h,m),Be=uh($,le,c,h,m);let Se=u.prevZ,De=u.nextZ;for(;Se&&Se.z>=ye&&De&&De.z<=Be;){if(Se.x>=X&&Se.x<=$&&Se.y>=Y&&Se.y<=le&&Se!==b&&Se!==k&&ll(S,L,I,O,M,j,Se.x,Se.y)&&gn(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,De.x>=X&&De.x<=$&&De.y>=Y&&De.y<=le&&De!==b&&De!==k&&ll(S,L,I,O,M,j,De.x,De.y)&&gn(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;Se&&Se.z>=ye;){if(Se.x>=X&&Se.x<=$&&Se.y>=Y&&Se.y<=le&&Se!==b&&Se!==k&&ll(S,L,I,O,M,j,Se.x,Se.y)&&gn(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;De&&De.z<=Be;){if(De.x>=X&&De.x<=$&&De.y>=Y&&De.y<=le&&De!==b&&De!==k&&ll(S,L,I,O,M,j,De.x,De.y)&&gn(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function jy(u,c){let h=u;do{const m=h.prev,b=h.next.next;!ju(m,b)&&nm(m,h,h.next,b)&&Sc(m,b)&&Sc(b,m)&&(c.push(m.i,h.i,b.i),Tc(h),Tc(h.next),h=u=b),h=h.next}while(h!==u);return fa(h)}function Uy(u,c,h,m,b,x){let k=u;do{let S=k.next.next;for(;S!==k.prev;){if(k.i!==S.i&&Wy(k,S)){let I=rm(k,S);return k=fa(k,k.next),I=fa(I,I.next),Cc(k,c,h,m,b,x,0),void Cc(I,c,h,m,b,x,0)}S=S.next}k=k.next}while(k!==u)}function qy(u,c){return u.x-c.x}function Zy(u,c){const h=function(b,x){let k=x;const S=b.x,I=b.y;let M,L=-1/0;do{if(I<=k.y&&I>=k.next.y&&k.next.y!==k.y){const $=k.x+(I-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if($<=S&&$>L&&(L=$,M=k.x<k.next.x?k:k.next,$===S))return M}k=k.next}while(k!==x);if(!M)return null;const O=M,j=M.x,X=M.y;let Y=1/0;k=M;do{if(S>=k.x&&k.x>=j&&S!==k.x&&ll(I<X?S:L,I,j,X,I<X?L:S,I,k.x,k.y)){const $=Math.abs(I-k.y)/(S-k.x);Sc(k,b)&&($<Y||$===Y&&(k.x>M.x||k.x===M.x&&Gy(M,k)))&&(M=k,Y=$)}k=k.next}while(k!==O);return M}(u,c);if(!h)return c;const m=rm(h,u);return fa(m,m.next),fa(h,h.next)}function Gy(u,c){return gn(u.prev,u,c.prev)<0&&gn(c.next,u,u.next)<0}function uh(u,c,h,m,b){return(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=(u-h)*b|0)|u<<8))|u<<4))|u<<2))|u<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-m)*b|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function Hy(u){let c=u,h=u;do(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next;while(c!==u);return h}function ll(u,c,h,m,b,x,k,S){return(b-k)*(c-S)>=(u-k)*(x-S)&&(u-k)*(m-S)>=(h-k)*(c-S)&&(h-k)*(x-S)>=(b-k)*(m-S)}function Wy(u,c){return u.next.i!==c.i&&u.prev.i!==c.i&&!function(h,m){let b=h;do{if(b.i!==h.i&&b.next.i!==h.i&&b.i!==m.i&&b.next.i!==m.i&&nm(b,b.next,h,m))return!0;b=b.next}while(b!==h);return!1}(u,c)&&(Sc(u,c)&&Sc(c,u)&&function(h,m){let b=h,x=!1;const k=(h.x+m.x)/2,S=(h.y+m.y)/2;do b.y>S!=b.next.y>S&&b.next.y!==b.y&&k<(b.next.x-b.x)*(S-b.y)/(b.next.y-b.y)+b.x&&(x=!x),b=b.next;while(b!==h);return x}(u,c)&&(gn(u.prev,u,c.prev)||gn(u,c.prev,c))||ju(u,c)&&gn(u.prev,u,u.next)>0&&gn(c.prev,c,c.next)>0)}function gn(u,c,h){return(c.y-u.y)*(h.x-c.x)-(c.x-u.x)*(h.y-c.y)}function ju(u,c){return u.x===c.x&&u.y===c.y}function nm(u,c,h,m){const b=qu(gn(u,c,h)),x=qu(gn(u,c,m)),k=qu(gn(h,m,u)),S=qu(gn(h,m,c));return b!==x&&k!==S||!(b!==0||!Uu(u,h,c))||!(x!==0||!Uu(u,m,c))||!(k!==0||!Uu(h,u,m))||!(S!==0||!Uu(h,c,m))}function Uu(u,c,h){return c.x<=Math.max(u.x,h.x)&&c.x>=Math.min(u.x,h.x)&&c.y<=Math.max(u.y,h.y)&&c.y>=Math.min(u.y,h.y)}function qu(u){return u>0?1:u<0?-1:0}function Sc(u,c){return gn(u.prev,u,u.next)<0?gn(u,c,u.next)>=0&&gn(u,u.prev,c)>=0:gn(u,c,u.prev)<0||gn(u,u.next,c)<0}function rm(u,c){const h=fh(u.i,u.x,u.y),m=fh(c.i,c.x,c.y),b=u.next,x=c.prev;return u.next=c,c.prev=u,h.next=b,b.prev=h,m.next=h,h.prev=m,x.next=m,m.prev=x,m}function sm(u,c,h,m){const b=fh(u,c,h);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function Tc(u){u.next.prev=u.prev,u.prev.next=u.next,u.prevZ&&(u.prevZ.nextZ=u.nextZ),u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function fh(u,c,h){return{i:u,x:c,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function hh(u,c,h){const m=h.patternDependencies;let b=!1;for(const x of c){const k=x.paint.get(`${u}-pattern`);k.isConstant()||(b=!0);const S=k.constantOr(null);S&&(b=!0,m[S.to]=!0,m[S.from]=!0)}return b}function dh(u,c,h,m,b){const x=b.patternDependencies;for(const k of c){const S=k.paint.get(`${u}-pattern`).value;if(S.kind!=="constant"){let I=S.evaluate({zoom:m-1},h,{},b.availableImages),M=S.evaluate({zoom:m},h,{},b.availableImages),L=S.evaluate({zoom:m+1},h,{},b.availableImages);I=I&&I.name?I.name:I,M=M&&M.name?M.name:M,L=L&&L.name?L.name:L,x[I]=!0,x[M]=!0,x[L]=!0,h.patterns[k.id]={min:I,mid:M,max:L}}}return h}class mh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yr,this.indexArray=new Rr,this.indexArray2=new Mn,this.programConfigurations=new la(c.layers,c.zoom),this.segments=new Li,this.segments2=new Li,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.hasPattern=hh("fill",this.layers,h);const b=this.layers[0].layout.get("fill-sort-key"),x=!b.isConstant(),k=[];for(const{feature:S,id:I,index:M,sourceLayerIndex:L}of c){const O=this.layers[0]._featureFilter.needGeometry,j=ua(S,O);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),j,m))continue;const X=x?b.evaluate(j,{},m,h.availableImages):void 0,Y={id:I,properties:S.properties,type:S.type,sourceLayerIndex:L,index:M,geometry:O?j.geometry:ca(S),patterns:{},sortKey:X};k.push(Y)}x&&k.sort((S,I)=>S.sortKey-I.sortKey);for(const S of k){const{geometry:I,index:M,sourceLayerIndex:L}=S;if(this.hasPattern){const O=dh("fill",this.layers,S,this.zoom,h);this.patternFeatures.push(O)}else this.addFeature(S,I,M,m,{});h.featureIndex.insert(c[M].feature,I,M,L,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}addFeatures(c,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,By),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,h,m,b,x){for(const k of za(h,500)){let S=0;for(const X of k)S+=X.length;const I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=I.vertexLength,L=[],O=[];for(const X of k){if(X.length===0)continue;X!==k[0]&&O.push(L.length/2);const Y=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),$=Y.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack($+X.length-1,$),L.push(X[0].x),L.push(X[0].y);for(let le=1;le<X.length;le++)this.layoutVertexArray.emplaceBack(X[le].x,X[le].y),this.indexArray2.emplaceBack($+le-1,$+le),L.push(X[le].x),L.push(X[le].y);Y.vertexLength+=X.length,Y.primitiveLength+=X.length}const j=tm(L,O);for(let X=0;X<j.length;X+=3)this.indexArray.emplaceBack(M+j[X],M+j[X+1],M+j[X+2]);I.vertexLength+=S,I.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,x,b)}}let om,am;Xt("FillBucket",mh,{omit:["layers","patternFeatures"]});var Xy={get paint(){return am=am||new w({"fill-antialias":new Qt(Fe.paint_fill["fill-antialias"]),"fill-opacity":new hi(Fe.paint_fill["fill-opacity"]),"fill-color":new hi(Fe.paint_fill["fill-color"]),"fill-outline-color":new hi(Fe.paint_fill["fill-outline-color"]),"fill-translate":new Qt(Fe.paint_fill["fill-translate"]),"fill-translate-anchor":new Qt(Fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qa(Fe.paint_fill["fill-pattern"])})},get layout(){return om=om||new w({"fill-sort-key":new hi(Fe.layout_fill["fill-sort-key"])})}};class Ky extends d{constructor(c){super(c,Xy)}recalculate(c,h){super.recalculate(c,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new mh(c)}queryRadius(){return Bu(this.paint.get("fill-translate"))}queryIntersectsFeature(c,h,m,b,x,k,S){return qd(Nu(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,S),b)}isTileClipped(){return!0}}const Jy=T([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Yy=T([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Qy}=Jy;var So={},$y=p,lm=cl;function cl(u,c,h,m,b){this.properties={},this.extent=h,this.type=0,this._pbf=u,this._geometry=-1,this._keys=m,this._values=b,u.readFields(eb,this,c)}function eb(u,c,h){u==1?c.id=h.readVarint():u==2?function(m,b){for(var x=m.readVarint()+m.pos;m.pos<x;){var k=b._keys[m.readVarint()],S=b._values[m.readVarint()];b.properties[k]=S}}(h,c):u==3?c.type=h.readVarint():u==4&&(c._geometry=h.pos)}function tb(u){for(var c,h,m=0,b=0,x=u.length,k=x-1;b<x;k=b++)m+=((h=u[k]).x-(c=u[b]).x)*(c.y+h.y);return m}cl.types=["Unknown","Point","LineString","Polygon"],cl.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var c,h=u.readVarint()+u.pos,m=1,b=0,x=0,k=0,S=[];u.pos<h;){if(b<=0){var I=u.readVarint();m=7&I,b=I>>3}if(b--,m===1||m===2)x+=u.readSVarint(),k+=u.readSVarint(),m===1&&(c&&S.push(c),c=[]),c.push(new $y(x,k));else{if(m!==7)throw new Error("unknown command "+m);c&&c.push(c[0].clone())}}return c&&S.push(c),S},cl.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var c=u.readVarint()+u.pos,h=1,m=0,b=0,x=0,k=1/0,S=-1/0,I=1/0,M=-1/0;u.pos<c;){if(m<=0){var L=u.readVarint();h=7&L,m=L>>3}if(m--,h===1||h===2)(b+=u.readSVarint())<k&&(k=b),b>S&&(S=b),(x+=u.readSVarint())<I&&(I=x),x>M&&(M=x);else if(h!==7)throw new Error("unknown command "+h)}return[k,I,S,M]},cl.prototype.toGeoJSON=function(u,c,h){var m,b,x=this.extent*Math.pow(2,h),k=this.extent*u,S=this.extent*c,I=this.loadGeometry(),M=cl.types[this.type];function L(X){for(var Y=0;Y<X.length;Y++){var $=X[Y];X[Y]=[360*($.x+k)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+S)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(m=0;m<I.length;m++)O[m]=I[m][0];L(I=O);break;case 2:for(m=0;m<I.length;m++)L(I[m]);break;case 3:for(I=function(X){var Y=X.length;if(Y<=1)return[X];for(var $,le,ye=[],Be=0;Be<Y;Be++){var Se=tb(X[Be]);Se!==0&&(le===void 0&&(le=Se<0),le===Se<0?($&&ye.push($),$=[X[Be]]):$.push(X[Be]))}return $&&ye.push($),ye}(I),m=0;m<I.length;m++)for(b=0;b<I[m].length;b++)L(I[m][b])}I.length===1?I=I[0]:M="Multi"+M;var j={type:"Feature",geometry:{type:M,coordinates:I},properties:this.properties};return"id"in this&&(j.id=this.id),j};var ib=lm,cm=um;function um(u,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=u,this._keys=[],this._values=[],this._features=[],u.readFields(nb,this,c),this.length=this._features.length}function nb(u,c,h){u===15?c.version=h.readVarint():u===1?c.name=h.readString():u===5?c.extent=h.readVarint():u===2?c._features.push(h.pos):u===3?c._keys.push(h.readString()):u===4&&c._values.push(function(m){for(var b=null,x=m.readVarint()+m.pos;m.pos<x;){var k=m.readVarint()>>3;b=k===1?m.readString():k===2?m.readFloat():k===3?m.readDouble():k===4?m.readVarint64():k===5?m.readVarint():k===6?m.readSVarint():k===7?m.readBoolean():null}return b}(h))}um.prototype.feature=function(u){if(u<0||u>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[u];var c=this._pbf.readVarint()+this._pbf.pos;return new ib(this._pbf,c,this.extent,this._keys,this._values)};var rb=cm;function sb(u,c,h){if(u===3){var m=new rb(h,h.readVarint()+h.pos);m.length&&(c[m.name]=m)}}So.VectorTile=function(u,c){this.layers=u.readFields(sb,{},c)},So.VectorTileFeature=lm,So.VectorTileLayer=cm;const ob=So.VectorTileFeature.types,ph=Math.pow(2,13);function Ic(u,c,h,m,b,x,k,S){u.emplaceBack(c,h,2*Math.floor(m*ph)+k,b*ph*2,x*ph*2,Math.round(S))}class _h{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new bo,this.centroidVertexArray=new On,this.indexArray=new Rr,this.programConfigurations=new la(c.layers,c.zoom),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.features=[],this.hasPattern=hh("fill-extrusion",this.layers,h);for(const{feature:b,id:x,index:k,sourceLayerIndex:S}of c){const I=this.layers[0]._featureFilter.needGeometry,M=ua(b,I);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),M,m))continue;const L={id:x,sourceLayerIndex:S,index:k,geometry:I?M.geometry:ca(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(dh("fill-extrusion",this.layers,L,this.zoom,h)):this.addFeature(L,L.geometry,k,m,{}),h.featureIndex.insert(b,L.geometry,k,S,this.index,!0)}}addFeatures(c,h,m){for(const b of this.features){const{geometry:x}=b;this.addFeature(b,x,b.index,h,m)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Qy),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,Yy.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,h,m,b,x){for(const k of za(h,500)){const S={x:0,y:0,vertexCount:0};let I=0;for(const Y of k)I+=Y.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of k){if(Y.length===0||lb(Y))continue;let $=0;for(let le=0;le<Y.length;le++){const ye=Y[le];if(le>=1){const Be=Y[le-1];if(!ab(ye,Be)){M.vertexLength+4>Li.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Se=ye.sub(Be)._perp()._unit(),De=Be.dist(ye);$+De>32768&&($=0),Ic(this.layoutVertexArray,ye.x,ye.y,Se.x,Se.y,0,0,$),Ic(this.layoutVertexArray,ye.x,ye.y,Se.x,Se.y,0,1,$),S.x+=2*ye.x,S.y+=2*ye.y,S.vertexCount+=2,$+=De,Ic(this.layoutVertexArray,Be.x,Be.y,Se.x,Se.y,0,0,$),Ic(this.layoutVertexArray,Be.x,Be.y,Se.x,Se.y,0,1,$),S.x+=2*Be.x,S.y+=2*Be.y,S.vertexCount+=2;const et=M.vertexLength;this.indexArray.emplaceBack(et,et+2,et+1),this.indexArray.emplaceBack(et+1,et+2,et+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+I>Li.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),ob[c.type]!=="Polygon")continue;const L=[],O=[],j=M.vertexLength;for(const Y of k)if(Y.length!==0){Y!==k[0]&&O.push(L.length/2);for(let $=0;$<Y.length;$++){const le=Y[$];Ic(this.layoutVertexArray,le.x,le.y,0,0,1,1,0),S.x+=le.x,S.y+=le.y,S.vertexCount+=1,L.push(le.x),L.push(le.y)}}const X=tm(L,O);for(let Y=0;Y<X.length;Y+=3)this.indexArray.emplaceBack(j+X[Y],j+X[Y+2],j+X[Y+1]);M.primitiveLength+=X.length/3,M.vertexLength+=I;for(let Y=0;Y<S.vertexCount;Y++){const $=Math.floor(S.x/S.vertexCount),le=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack($,le)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,x,b)}}function ab(u,c){return u.x===c.x&&(u.x<0||u.x>wn)||u.y===c.y&&(u.y<0||u.y>wn)}function lb(u){return u.every(c=>c.x<0)||u.every(c=>c.x>wn)||u.every(c=>c.y<0)||u.every(c=>c.y>wn)}let fm;Xt("FillExtrusionBucket",_h,{omit:["layers","features"]});var cb={get paint(){return fm=fm||new w({"fill-extrusion-opacity":new Qt(Fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hi(Fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qt(Fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qt(Fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qa(Fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hi(Fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hi(Fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qt(Fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ub extends d{constructor(c){super(c,cb)}createBucket(c){return new _h(c)}queryRadius(){return Bu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,h,m,b,x,k,S,I){const M=Nu(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,S),L=this.paint.get("fill-extrusion-height").evaluate(h,m),O=this.paint.get("fill-extrusion-base").evaluate(h,m),j=function(Y,$,le,ye){const Be=[];for(const Se of Y){const De=[Se.x,Se.y,0,1];Vu(De,De,$),Be.push(new C(De[0]/De[3],De[1]/De[3]))}return Be}(M,I),X=function(Y,$,le,ye){const Be=[],Se=[],De=ye[8]*$,et=ye[9]*$,bt=ye[10]*$,Zt=ye[11]*$,ui=ye[8]*le,Ut=ye[9]*le,Nt=ye[10]*le,ni=ye[11]*le;for(const Kt of Y){const Ht=[],at=[];for(const si of Kt){const ii=si.x,gi=si.y,Qi=ye[0]*ii+ye[4]*gi+ye[12],Ji=ye[1]*ii+ye[5]*gi+ye[13],In=ye[2]*ii+ye[6]*gi+ye[14],Qr=ye[3]*ii+ye[7]*gi+ye[15],Nn=In+bt,An=Qr+Zt,nr=Qi+ui,rr=Ji+Ut,sr=In+Nt,pn=Qr+ni,En=new C((Qi+De)/An,(Ji+et)/An);En.z=Nn/An,Ht.push(En);const Wn=new C(nr/pn,rr/pn);Wn.z=sr/pn,at.push(Wn)}Be.push(Ht),Se.push(at)}return[Be,Se]}(b,O,L,I);return function(Y,$,le){let ye=1/0;qd(le,$)&&(ye=hm(le,$[0]));for(let Be=0;Be<$.length;Be++){const Se=$[Be],De=Y[Be];for(let et=0;et<Se.length-1;et++){const bt=Se[et],Zt=[bt,Se[et+1],De[et+1],De[et],bt];Ud(le,Zt)&&(ye=Math.min(ye,hm(le,Zt)))}}return ye!==1/0&&ye}(X[0],X[1],j)}}function Ac(u,c){return u.x*c.x+u.y*c.y}function hm(u,c){if(u.length===1){let h=0;const m=c[h++];let b;for(;!b||m.equals(b);)if(b=c[h++],!b)return 1/0;for(;h<c.length;h++){const x=c[h],k=u[0],S=b.sub(m),I=x.sub(m),M=k.sub(m),L=Ac(S,S),O=Ac(S,I),j=Ac(I,I),X=Ac(M,S),Y=Ac(M,I),$=L*j-O*O,le=(j*X-O*Y)/$,ye=(L*Y-O*X)/$,Be=m.z*(1-le-ye)+b.z*le+x.z*ye;if(isFinite(Be))return Be}return 1/0}{let h=1/0;for(const m of c)h=Math.min(h,m.z);return h}}const fb=T([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:hb}=fb,db=T([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mb}=db,pb=So.VectorTileFeature.types,_b=Math.cos(Math.PI/180*37.5),dm=Math.pow(2,14)/.5;class gh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new el,this.layoutVertexArray2=new vo,this.indexArray=new Rr,this.programConfigurations=new la(c.layers,c.zoom),this.segments=new Li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.hasPattern=hh("line",this.layers,h);const b=this.layers[0].layout.get("line-sort-key"),x=!b.isConstant(),k=[];for(const{feature:S,id:I,index:M,sourceLayerIndex:L}of c){const O=this.layers[0]._featureFilter.needGeometry,j=ua(S,O);if(!this.layers[0]._featureFilter.filter(new tn(this.zoom),j,m))continue;const X=x?b.evaluate(j,{},m):void 0,Y={id:I,properties:S.properties,type:S.type,sourceLayerIndex:L,index:M,geometry:O?j.geometry:ca(S),patterns:{},sortKey:X};k.push(Y)}x&&k.sort((S,I)=>S.sortKey-I.sortKey);for(const S of k){const{geometry:I,index:M,sourceLayerIndex:L}=S;if(this.hasPattern){const O=dh("line",this.layers,S,this.zoom,h);this.patternFeatures.push(O)}else this.addFeature(S,I,M,m,{});h.featureIndex.insert(c[M].feature,I,M,L,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}addFeatures(c,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,mb)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,hb),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,h,m,b,x){const k=this.layers[0].layout,S=k.get("line-join").evaluate(c,{}),I=k.get("line-cap"),M=k.get("line-miter-limit"),L=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const O of h)this.addLine(O,c,S,I,M,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,x,b)}addLine(c,h,m,b,x,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<c.length-1;ye++)this.totalDistance+=c[ye].dist(c[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=pb[h.type]==="Polygon";let I=c.length;for(;I>=2&&c[I-1].equals(c[I-2]);)I--;let M=0;for(;M<I-1&&c[M].equals(c[M+1]);)M++;if(I<(S?3:2))return;m==="bevel"&&(x=1.05);const L=this.overscaling<=16?15*wn/(512*this.overscaling):0,O=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let j,X,Y,$,le;this.e1=this.e2=-1,S&&(j=c[I-2],le=c[M].sub(j)._unit()._perp());for(let ye=M;ye<I;ye++){if(Y=ye===I-1?S?c[M+1]:void 0:c[ye+1],Y&&c[ye].equals(Y))continue;le&&($=le),j&&(X=j),j=c[ye],le=Y?Y.sub(j)._unit()._perp():$,$=$||le;let Be=$.add(le);Be.x===0&&Be.y===0||Be._unit();const Se=$.x*le.x+$.y*le.y,De=Be.x*le.x+Be.y*le.y,et=De!==0?1/De:1/0,bt=2*Math.sqrt(2-2*De),Zt=De<_b&&X&&Y,ui=$.x*le.y-$.y*le.x>0;if(Zt&&ye>M){const ni=j.dist(X);if(ni>2*L){const Kt=j.sub(j.sub(X)._mult(L/ni)._round());this.updateDistance(X,Kt),this.addCurrentVertex(Kt,$,0,0,O),X=Kt}}const Ut=X&&Y;let Nt=Ut?m:S?"butt":b;if(Ut&&Nt==="round"&&(et<k?Nt="miter":et<=2&&(Nt="fakeround")),Nt==="miter"&&et>x&&(Nt="bevel"),Nt==="bevel"&&(et>2&&(Nt="flipbevel"),et<x&&(Nt="miter")),X&&this.updateDistance(X,j),Nt==="miter")Be._mult(et),this.addCurrentVertex(j,Be,0,0,O);else if(Nt==="flipbevel"){if(et>100)Be=le.mult(-1);else{const ni=et*$.add(le).mag()/$.sub(le).mag();Be._perp()._mult(ni*(ui?-1:1))}this.addCurrentVertex(j,Be,0,0,O),this.addCurrentVertex(j,Be.mult(-1),0,0,O)}else if(Nt==="bevel"||Nt==="fakeround"){const ni=-Math.sqrt(et*et-1),Kt=ui?ni:0,Ht=ui?0:ni;if(X&&this.addCurrentVertex(j,$,Kt,Ht,O),Nt==="fakeround"){const at=Math.round(180*bt/Math.PI/20);for(let si=1;si<at;si++){let ii=si/at;if(ii!==.5){const Qi=ii-.5;ii+=ii*Qi*(ii-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Qi*Qi+(.848013+Se*(.215638*Se-1.06021)))}const gi=le.sub($)._mult(ii)._add($)._unit()._mult(ui?-1:1);this.addHalfVertex(j,gi.x,gi.y,!1,ui,0,O)}}Y&&this.addCurrentVertex(j,le,-Kt,-Ht,O)}else if(Nt==="butt")this.addCurrentVertex(j,Be,0,0,O);else if(Nt==="square"){const ni=X?1:-1;this.addCurrentVertex(j,Be,ni,ni,O)}else Nt==="round"&&(X&&(this.addCurrentVertex(j,$,0,0,O),this.addCurrentVertex(j,$,1,1,O,!0)),Y&&(this.addCurrentVertex(j,le,-1,-1,O,!0),this.addCurrentVertex(j,le,0,0,O)));if(Zt&&ye<I-1){const ni=j.dist(Y);if(ni>2*L){const Kt=j.add(Y.sub(j)._mult(L/ni)._round());this.updateDistance(j,Kt),this.addCurrentVertex(Kt,le,0,0,O),j=Kt}}}}addCurrentVertex(c,h,m,b,x,k=!1){const S=h.y*b-h.x,I=-h.y-h.x*b;this.addHalfVertex(c,h.x+h.y*m,h.y-h.x*m,k,!1,m,x),this.addHalfVertex(c,S,I,k,!0,-b,x),this.distance>dm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,h,m,b,x,k))}addHalfVertex({x:c,y:h},m,b,x,k,S,I){const M=.5*(this.lineClips?this.scaledDistance*(dm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(x?1:0),(h<<1)+(k?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),I.primitiveLength++),k?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,h){this.distance+=c.dist(h),this.updateScaledDistance()}}let mm,pm;Xt("LineBucket",gh,{omit:["layers","patternFeatures"]});var _m={get paint(){return pm=pm||new w({"line-opacity":new hi(Fe.paint_line["line-opacity"]),"line-color":new hi(Fe.paint_line["line-color"]),"line-translate":new Qt(Fe.paint_line["line-translate"]),"line-translate-anchor":new Qt(Fe.paint_line["line-translate-anchor"]),"line-width":new hi(Fe.paint_line["line-width"]),"line-gap-width":new hi(Fe.paint_line["line-gap-width"]),"line-offset":new hi(Fe.paint_line["line-offset"]),"line-blur":new hi(Fe.paint_line["line-blur"]),"line-dasharray":new $a(Fe.paint_line["line-dasharray"]),"line-pattern":new Qa(Fe.paint_line["line-pattern"]),"line-gradient":new yc(Fe.paint_line["line-gradient"])})},get layout(){return mm=mm||new w({"line-cap":new Qt(Fe.layout_line["line-cap"]),"line-join":new hi(Fe.layout_line["line-join"]),"line-miter-limit":new Qt(Fe.layout_line["line-miter-limit"]),"line-round-limit":new Qt(Fe.layout_line["line-round-limit"]),"line-sort-key":new hi(Fe.layout_line["line-sort-key"])})}};class gb extends hi{possiblyEvaluate(c,h){return h=new tn(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(c,h)}evaluate(c,h,m,b){return h=Ie({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(c,h,m,b)}}let Zu;class yb extends d{constructor(c){super(c,_m),this.gradientVersion=0,Zu||(Zu=new gb(_m.paint.properties["line-width"].specification),Zu.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof $s,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,h){super.recalculate(c,h),this.paint._values["line-floorwidth"]=Zu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new gh(c)}queryRadius(c){const h=c,m=gm(wc("line-width",this,h),wc("line-gap-width",this,h)),b=wc("line-offset",this,h);return m/2+Math.abs(b)+Bu(this.paint.get("line-translate"))}queryIntersectsFeature(c,h,m,b,x,k,S){const I=Nu(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,S),M=S/2*gm(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),L=this.paint.get("line-offset").evaluate(h,m);return L&&(b=function(O,j){const X=[];for(let Y=0;Y<O.length;Y++){const $=O[Y],le=[];for(let ye=0;ye<$.length;ye++){const Be=$[ye-1],Se=$[ye],De=$[ye+1],et=ye===0?new C(0,0):Se.sub(Be)._unit()._perp(),bt=ye===$.length-1?new C(0,0):De.sub(Se)._unit()._perp(),Zt=et._add(bt)._unit(),ui=Zt.x*bt.x+Zt.y*bt.y;ui!==0&&Zt._mult(1/ui),le.push(Zt._mult(j)._add(Se))}X.push(le)}return X}(b,L*S)),function(O,j,X){for(let Y=0;Y<j.length;Y++){const $=j[Y];if(O.length>=3){for(let le=0;le<$.length;le++)if(ol(O,$[le]))return!0}if(Iy(O,$,X))return!0}return!1}(I,b,M)}isTileClipped(){return!0}}function gm(u,c){return c>0?c+2*u:u}const bb=T([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vb=T([{name:"a_projected_pos",components:3,type:"Float32"}],4);T([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wb=T([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);T([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ym=T([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),xb=T([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function kb(u,c,h){return u.sections.forEach(m=>{m.text=function(b,x,k){const S=x.layout.get("text-transform").evaluate(k,{});return S==="uppercase"?b=b.toLocaleUpperCase():S==="lowercase"&&(b=b.toLocaleLowerCase()),hr.applyArabicShaping&&(b=hr.applyArabicShaping(b)),b}(m.text,c,h)}),u}T([{name:"triangle",components:3,type:"Uint16"}]),T([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),T([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),T([{type:"Float32",name:"offsetX"}]),T([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),T([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ec={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var kn=24,bm=Ki,vm=function(u,c,h,m,b){var x,k,S=8*b-m-1,I=(1<<S)-1,M=I>>1,L=-7,O=b-1,j=-1,X=u[c+O];for(O+=j,x=X&(1<<-L)-1,X>>=-L,L+=S;L>0;x=256*x+u[c+O],O+=j,L-=8);for(k=x&(1<<-L)-1,x>>=-L,L+=m;L>0;k=256*k+u[c+O],O+=j,L-=8);if(x===0)x=1-M;else{if(x===I)return k?NaN:1/0*(X?-1:1);k+=Math.pow(2,m),x-=M}return(X?-1:1)*k*Math.pow(2,x-m)},wm=function(u,c,h,m,b,x){var k,S,I,M=8*x-b-1,L=(1<<M)-1,O=L>>1,j=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=0,Y=1,$=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(S=isNaN(c)?1:0,k=L):(k=Math.floor(Math.log(c)/Math.LN2),c*(I=Math.pow(2,-k))<1&&(k--,I*=2),(c+=k+O>=1?j/I:j*Math.pow(2,1-O))*I>=2&&(k++,I/=2),k+O>=L?(S=0,k=L):k+O>=1?(S=(c*I-1)*Math.pow(2,b),k+=O):(S=c*Math.pow(2,O-1)*Math.pow(2,b),k=0));b>=8;u[h+X]=255&S,X+=Y,S/=256,b-=8);for(k=k<<b|S,M+=b;M>0;u[h+X]=255&k,X+=Y,k/=256,M-=8);u[h+X-Y]|=128*$};function Ki(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0),this.pos=0,this.type=0,this.length=this.buf.length}Ki.Varint=0,Ki.Fixed64=1,Ki.Bytes=2,Ki.Fixed32=5;var yh=4294967296,xm=1/yh,km=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Us(u){return u.type===Ki.Bytes?u.readVarint()+u.pos:u.pos+1}function ul(u,c,h){return h?4294967296*c+(u>>>0):4294967296*(c>>>0)+(u>>>0)}function Cm(u,c,h){var m=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(m);for(var b=h.pos-1;b>=u;b--)h.buf[b+m]=h.buf[b]}function Cb(u,c){for(var h=0;h<u.length;h++)c.writeVarint(u[h])}function Sb(u,c){for(var h=0;h<u.length;h++)c.writeSVarint(u[h])}function Tb(u,c){for(var h=0;h<u.length;h++)c.writeFloat(u[h])}function Ib(u,c){for(var h=0;h<u.length;h++)c.writeDouble(u[h])}function Ab(u,c){for(var h=0;h<u.length;h++)c.writeBoolean(u[h])}function Eb(u,c){for(var h=0;h<u.length;h++)c.writeFixed32(u[h])}function Pb(u,c){for(var h=0;h<u.length;h++)c.writeSFixed32(u[h])}function Mb(u,c){for(var h=0;h<u.length;h++)c.writeFixed64(u[h])}function zb(u,c){for(var h=0;h<u.length;h++)c.writeSFixed64(u[h])}function Gu(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+16777216*u[c+3]}function fl(u,c,h){u[h]=c,u[h+1]=c>>>8,u[h+2]=c>>>16,u[h+3]=c>>>24}function Sm(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16)+(u[c+3]<<24)}Ki.prototype={destroy:function(){this.buf=null},readFields:function(u,c,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),b=m>>3,x=this.pos;this.type=7&m,u(b,c,this),this.pos===x&&this.skip(m)}return c},readMessage:function(u,c){return this.readFields(u,c,this.readVarint()+this.pos)},readFixed32:function(){var u=Gu(this.buf,this.pos);return this.pos+=4,u},readSFixed32:function(){var u=Sm(this.buf,this.pos);return this.pos+=4,u},readFixed64:function(){var u=Gu(this.buf,this.pos)+Gu(this.buf,this.pos+4)*yh;return this.pos+=8,u},readSFixed64:function(){var u=Gu(this.buf,this.pos)+Sm(this.buf,this.pos+4)*yh;return this.pos+=8,u},readFloat:function(){var u=vm(this.buf,this.pos,!0,23,4);return this.pos+=4,u},readDouble:function(){var u=vm(this.buf,this.pos,!0,52,8);return this.pos+=8,u},readVarint:function(u){var c,h,m=this.buf;return c=127&(h=m[this.pos++]),h<128?c:(c|=(127&(h=m[this.pos++]))<<7,h<128?c:(c|=(127&(h=m[this.pos++]))<<14,h<128?c:(c|=(127&(h=m[this.pos++]))<<21,h<128?c:function(b,x,k){var S,I,M=k.buf;if(S=(112&(I=M[k.pos++]))>>4,I<128||(S|=(127&(I=M[k.pos++]))<<3,I<128)||(S|=(127&(I=M[k.pos++]))<<10,I<128)||(S|=(127&(I=M[k.pos++]))<<17,I<128)||(S|=(127&(I=M[k.pos++]))<<24,I<128)||(S|=(1&(I=M[k.pos++]))<<31,I<128))return ul(b,S,x);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=m[this.pos]))<<28,u,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return u%2==1?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,c=this.pos;return this.pos=u,u-c>=12&&km?function(h,m,b){return km.decode(h.subarray(m,b))}(this.buf,c,u):function(h,m,b){for(var x="",k=m;k<b;){var S,I,M,L=h[k],O=null,j=L>239?4:L>223?3:L>191?2:1;if(k+j>b)break;j===1?L<128&&(O=L):j===2?(192&(S=h[k+1]))==128&&(O=(31&L)<<6|63&S)<=127&&(O=null):j===3?(I=h[k+2],(192&(S=h[k+1]))==128&&(192&I)==128&&((O=(15&L)<<12|(63&S)<<6|63&I)<=2047||O>=55296&&O<=57343)&&(O=null)):j===4&&(I=h[k+2],M=h[k+3],(192&(S=h[k+1]))==128&&(192&I)==128&&(192&M)==128&&((O=(15&L)<<18|(63&S)<<12|(63&I)<<6|63&M)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,j=1):O>65535&&(O-=65536,x+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),x+=String.fromCharCode(O),k+=j}return x}(this.buf,c,u)},readBytes:function(){var u=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,u);return this.pos=u,c},readPackedVarint:function(u,c){if(this.type!==Ki.Bytes)return u.push(this.readVarint(c));var h=Us(this);for(u=u||[];this.pos<h;)u.push(this.readVarint(c));return u},readPackedSVarint:function(u){if(this.type!==Ki.Bytes)return u.push(this.readSVarint());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Ki.Bytes)return u.push(this.readBoolean());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Ki.Bytes)return u.push(this.readFloat());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Ki.Bytes)return u.push(this.readDouble());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Ki.Bytes)return u.push(this.readFixed32());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Ki.Bytes)return u.push(this.readSFixed32());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Ki.Bytes)return u.push(this.readFixed64());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readFixed64());return u},readPackedSFixed64:function(u){if(this.type!==Ki.Bytes)return u.push(this.readSFixed64());var c=Us(this);for(u=u||[];this.pos<c;)u.push(this.readSFixed64());return u},skip:function(u){var c=7&u;if(c===Ki.Varint)for(;this.buf[this.pos++]>127;);else if(c===Ki.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Ki.Fixed32)this.pos+=4;else{if(c!==Ki.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(u,c){this.writeVarint(u<<3|c)},realloc:function(u){for(var c=this.length||16;c<this.pos+u;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4),fl(this.buf,u,this.pos),this.pos+=4},writeSFixed32:function(u){this.realloc(4),fl(this.buf,u,this.pos),this.pos+=4},writeFixed64:function(u){this.realloc(8),fl(this.buf,-1&u,this.pos),fl(this.buf,Math.floor(u*xm),this.pos+4),this.pos+=8},writeSFixed64:function(u){this.realloc(8),fl(this.buf,-1&u,this.pos),fl(this.buf,Math.floor(u*xm),this.pos+4),this.pos+=8},writeVarint:function(u){(u=+u||0)>268435455||u<0?function(c,h){var m,b;if(c>=0?(m=c%4294967296|0,b=c/4294967296|0):(b=~(-c/4294967296),4294967295^(m=~(-c%4294967296))?m=m+1|0:(m=0,b=b+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(x,k,S){S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,x>>>=7,S.buf[S.pos++]=127&x|128,S.buf[S.pos]=127&(x>>>=7)}(m,0,h),function(x,k){var S=(7&x)<<4;k.buf[k.pos++]|=S|((x>>>=3)?128:0),x&&(k.buf[k.pos++]=127&x|((x>>>=7)?128:0),x&&(k.buf[k.pos++]=127&x|((x>>>=7)?128:0),x&&(k.buf[k.pos++]=127&x|((x>>>=7)?128:0),x&&(k.buf[k.pos++]=127&x|((x>>>=7)?128:0),x&&(k.buf[k.pos++]=127&x)))))}(b,h)}(u,this):(this.realloc(4),this.buf[this.pos++]=127&u|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=127&(u>>>=7)|(u>127?128:0),u<=127||(this.buf[this.pos++]=u>>>7&127))))},writeSVarint:function(u){this.writeVarint(u<0?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u),this.realloc(4*u.length),this.pos++;var c=this.pos;this.pos=function(m,b,x){for(var k,S,I=0;I<b.length;I++){if((k=b.charCodeAt(I))>55295&&k<57344){if(!S){k>56319||I+1===b.length?(m[x++]=239,m[x++]=191,m[x++]=189):S=k;continue}if(k<56320){m[x++]=239,m[x++]=191,m[x++]=189,S=k;continue}k=S-55296<<10|k-56320|65536,S=null}else S&&(m[x++]=239,m[x++]=191,m[x++]=189,S=null);k<128?m[x++]=k:(k<2048?m[x++]=k>>6|192:(k<65536?m[x++]=k>>12|224:(m[x++]=k>>18|240,m[x++]=k>>12&63|128),m[x++]=k>>6&63|128),m[x++]=63&k|128)}return x}(this.buf,u,this.pos);var h=this.pos-c;h>=128&&Cm(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(u){this.realloc(4),wm(this.buf,u,this.pos,!0,23,4),this.pos+=4},writeDouble:function(u){this.realloc(8),wm(this.buf,u,this.pos,!0,52,8),this.pos+=8},writeBytes:function(u){var c=u.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=u[h]},writeRawMessage:function(u,c){this.pos++;var h=this.pos;u(c,this);var m=this.pos-h;m>=128&&Cm(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(u,c,h){this.writeTag(u,Ki.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(u,c){c.length&&this.writeMessage(u,Cb,c)},writePackedSVarint:function(u,c){c.length&&this.writeMessage(u,Sb,c)},writePackedBoolean:function(u,c){c.length&&this.writeMessage(u,Ab,c)},writePackedFloat:function(u,c){c.length&&this.writeMessage(u,Tb,c)},writePackedDouble:function(u,c){c.length&&this.writeMessage(u,Ib,c)},writePackedFixed32:function(u,c){c.length&&this.writeMessage(u,Eb,c)},writePackedSFixed32:function(u,c){c.length&&this.writeMessage(u,Pb,c)},writePackedFixed64:function(u,c){c.length&&this.writeMessage(u,Mb,c)},writePackedSFixed64:function(u,c){c.length&&this.writeMessage(u,zb,c)},writeBytesField:function(u,c){this.writeTag(u,Ki.Bytes),this.writeBytes(c)},writeFixed32Field:function(u,c){this.writeTag(u,Ki.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(u,c){this.writeTag(u,Ki.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(u,c){this.writeTag(u,Ki.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(u,c){this.writeTag(u,Ki.Fixed64),this.writeSFixed64(c)},writeVarintField:function(u,c){this.writeTag(u,Ki.Varint),this.writeVarint(c)},writeSVarintField:function(u,c){this.writeTag(u,Ki.Varint),this.writeSVarint(c)},writeStringField:function(u,c){this.writeTag(u,Ki.Bytes),this.writeString(c)},writeFloatField:function(u,c){this.writeTag(u,Ki.Fixed32),this.writeFloat(c)},writeDoubleField:function(u,c){this.writeTag(u,Ki.Fixed64),this.writeDouble(c)},writeBooleanField:function(u,c){this.writeVarintField(u,!!c)}};var bh=f(bm);const vh=3;function Db(u,c,h){u===1&&h.readMessage(Lb,c)}function Lb(u,c,h){if(u===3){const{id:m,bitmap:b,width:x,height:k,left:S,top:I,advance:M}=h.readMessage(Rb,{});c.push({id:m,bitmap:new kc({width:x+2*vh,height:k+2*vh},b),metrics:{width:x,height:k,left:S,top:I,advance:M}})}}function Rb(u,c,h){u===1?c.id=h.readVarint():u===2?c.bitmap=h.readBytes():u===3?c.width=h.readVarint():u===4?c.height=h.readVarint():u===5?c.left=h.readSVarint():u===6?c.top=h.readSVarint():u===7&&(c.advance=h.readVarint())}const Tm=vh;function Im(u){let c=0,h=0;for(const k of u)c+=k.w*k.h,h=Math.max(h,k.w);u.sort((k,S)=>S.h-k.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}];let b=0,x=0;for(const k of u)for(let S=m.length-1;S>=0;S--){const I=m[S];if(!(k.w>I.w||k.h>I.h)){if(k.x=I.x,k.y=I.y,x=Math.max(x,k.y+k.h),b=Math.max(b,k.x+k.w),k.w===I.w&&k.h===I.h){const M=m.pop();S<m.length&&(m[S]=M)}else k.h===I.h?(I.x+=k.w,I.w-=k.w):k.w===I.w?(I.y+=k.h,I.h-=k.h):(m.push({x:I.x+k.w,y:I.y,w:I.w-k.w,h:k.h}),I.y+=k.h,I.h-=k.h);break}}return{w:b,h:x,fill:c/(b*x)||0}}const mr=1;class wh{constructor(c,{pixelRatio:h,version:m,stretchX:b,stretchY:x,content:k,textFitWidth:S,textFitHeight:I}){this.paddedRect=c,this.pixelRatio=h,this.stretchX=b,this.stretchY=x,this.content=k,this.version=m,this.textFitWidth=S,this.textFitHeight=I}get tl(){return[this.paddedRect.x+mr,this.paddedRect.y+mr]}get br(){return[this.paddedRect.x+this.paddedRect.w-mr,this.paddedRect.y+this.paddedRect.h-mr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mr)/this.pixelRatio,(this.paddedRect.h-2*mr)/this.pixelRatio]}}class Am{constructor(c,h){const m={},b={};this.haveRenderCallbacks=[];const x=[];this.addImages(c,m,x),this.addImages(h,b,x);const{w:k,h:S}=Im(x),I=new Or({width:k||1,height:S||1});for(const M in c){const L=c[M],O=m[M].paddedRect;Or.copy(L.data,I,{x:0,y:0},{x:O.x+mr,y:O.y+mr},L.data)}for(const M in h){const L=h[M],O=b[M].paddedRect,j=O.x+mr,X=O.y+mr,Y=L.data.width,$=L.data.height;Or.copy(L.data,I,{x:0,y:0},{x:j,y:X},L.data),Or.copy(L.data,I,{x:0,y:$-1},{x:j,y:X-1},{width:Y,height:1}),Or.copy(L.data,I,{x:0,y:0},{x:j,y:X+$},{width:Y,height:1}),Or.copy(L.data,I,{x:Y-1,y:0},{x:j-1,y:X},{width:1,height:$}),Or.copy(L.data,I,{x:0,y:0},{x:j+Y,y:X},{width:1,height:$})}this.image=I,this.iconPositions=m,this.patternPositions=b}addImages(c,h,m){for(const b in c){const x=c[b],k={x:0,y:0,w:x.data.width+2*mr,h:x.data.height+2*mr};m.push(k),h[b]=new wh(k,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(c,h){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in c.updatedImages)this.patchUpdatedImage(this.iconPositions[m],c.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],c.getImage(m),h)}patchUpdatedImage(c,h,m){if(!c||!h||c.version===h.version)return;c.version=h.version;const[b,x]=c.tl;m.update(h.data,void 0,{x:b,y:x})}}var To;Xt("ImagePosition",wh),Xt("ImageAtlas",Am),l.ah=void 0,(To=l.ah||(l.ah={}))[To.none=0]="none",To[To.horizontal=1]="horizontal",To[To.vertical=2]="vertical",To[To.horizontalOnly=3]="horizontalOnly";const Pc=-17;class Mc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,h){const m=new Mc;return m.scale=c||1,m.fontStack=h,m}static forImage(c){const h=new Mc;return h.imageName=c,h}}class hl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,h){const m=new hl;for(let b=0;b<c.sections.length;b++){const x=c.sections[b];x.image?m.addImageSection(x):m.addTextSection(x,h)}return m}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let h="";for(let m=0;m<c.length;m++){const b=c.charCodeAt(m+1)||null,x=c.charCodeAt(m-1)||null;h+=b&&Mu(b)&&!Ec[c[m+1]]||x&&Mu(x)&&!Ec[c[m-1]]||!Ec[c[m]]?c[m]:Ec[c[m]]}return h}(this.text)}trim(){let c=0;for(let m=0;m<this.text.length&&Wu[this.text.charCodeAt(m)];m++)c++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=c&&Wu[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(c,h),this.sectionIndex=this.sectionIndex.slice(c,h)}substring(c,h){const m=new hl;return m.text=this.text.substring(c,h),m.sectionIndex=this.sectionIndex.slice(c,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,h)=>Math.max(c,this.sections[h].scale),0)}addTextSection(c,h){this.text+=c.text,this.sections.push(Mc.forText(c.scale,c.fontStack||h));const m=this.sections.length-1;for(let b=0;b<c.text.length;++b)this.sectionIndex.push(m)}addImageSection(c){const h=c.image?c.image.name:"";if(h.length===0)return void Re("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Mc.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Hu(u,c,h,m,b,x,k,S,I,M,L,O,j,X,Y){const $=hl.fromFeature(u,b);let le;O===l.ah.vertical&&$.verticalizePunctuation();const{processBidirectionalText:ye,processStyledBidirectionalText:Be}=hr;if(ye&&$.sections.length===1){le=[];const et=ye($.toString(),xh($,M,x,c,m,X));for(const bt of et){const Zt=new hl;Zt.text=bt,Zt.sections=$.sections;for(let ui=0;ui<bt.length;ui++)Zt.sectionIndex.push(0);le.push(Zt)}}else if(Be){le=[];const et=Be($.text,$.sectionIndex,xh($,M,x,c,m,X));for(const bt of et){const Zt=new hl;Zt.text=bt[0],Zt.sectionIndex=bt[1],Zt.sections=$.sections,le.push(Zt)}}else le=function(et,bt){const Zt=[],ui=et.text;let Ut=0;for(const Nt of bt)Zt.push(et.substring(Ut,Nt)),Ut=Nt;return Ut<ui.length&&Zt.push(et.substring(Ut,ui.length)),Zt}($,xh($,M,x,c,m,X));const Se=[],De={positionedLines:Se,text:$.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(et,bt,Zt,ui,Ut,Nt,ni,Kt,Ht,at,si,ii){let gi=0,Qi=Pc,Ji=0,In=0;const Qr=Kt==="right"?1:Kt==="left"?0:.5;let Nn=0;for(const pn of Ut){pn.trim();const En=pn.getMaxScale(),Wn=(En-1)*kn,Vn={positionedGlyphs:[],lineOffset:0};et.positionedLines[Nn]=Vn;const or=Vn.positionedGlyphs;let jn=0;if(!pn.length()){Qi+=Nt,++Nn;continue}for(let pr=0;pr<pn.length();pr++){const ji=pn.getSection(pr),en=pn.getSectionIndex(pr),on=pn.getCharCode(pr);let Cr=0,fn=null,_l=null,bs=null,vs=kn;const $r=!(Ht===l.ah.horizontal||!si&&!_c(on)||si&&(Wu[on]||(An=on,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(An)))));if(ji.imageName){const Nr=ui[ji.imageName];if(!Nr)continue;bs=ji.imageName,et.iconsInText=et.iconsInText||!0,_l=Nr.paddedRect;const zn=Nr.displaySize;ji.scale=ji.scale*kn/ii,fn={width:zn[0],height:zn[1],left:mr,top:-Tm,advance:$r?zn[1]:zn[0]},Cr=Wn+(kn-zn[1]*ji.scale),vs=fn.advance;const qs=$r?zn[0]*ji.scale-kn*En:zn[1]*ji.scale-kn*En;qs>0&&qs>jn&&(jn=qs)}else{const Nr=Zt[ji.fontStack],zn=Nr&&Nr[on];if(zn&&zn.rect)_l=zn.rect,fn=zn.metrics;else{const qs=bt[ji.fontStack],Fc=qs&&qs[on];if(!Fc)continue;fn=Fc.metrics}Cr=(En-ji.scale)*kn}$r?(et.verticalizable=!0,or.push({glyph:on,imageName:bs,x:gi,y:Qi+Cr,vertical:$r,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:en,metrics:fn,rect:_l}),gi+=vs*ji.scale+at):(or.push({glyph:on,imageName:bs,x:gi,y:Qi+Cr,vertical:$r,scale:ji.scale,fontStack:ji.fontStack,sectionIndex:en,metrics:fn,rect:_l}),gi+=fn.advance*ji.scale+at)}or.length!==0&&(Ji=Math.max(gi-at,Ji),Nb(or,0,or.length-1,Qr,jn)),gi=0;const Br=Nt*En+jn;Vn.lineOffset=Math.max(jn,Wn),Qi+=Br,In=Math.max(Br,In),++Nn}var An;const nr=Qi-Pc,{horizontalAlign:rr,verticalAlign:sr}=kh(ni);(function(pn,En,Wn,Vn,or,jn,Br,pr,ji){const en=(En-Wn)*or;let on=0;on=jn!==Br?-pr*Vn-Pc:(-Vn*ji+.5)*Br;for(const Cr of pn)for(const fn of Cr.positionedGlyphs)fn.x+=en,fn.y+=on})(et.positionedLines,Qr,rr,sr,Ji,In,Nt,nr,Ut.length),et.top+=-sr*nr,et.bottom=et.top+nr,et.left+=-rr*Ji,et.right=et.left+Ji}(De,c,h,m,le,k,S,I,O,M,j,Y),!function(et){for(const bt of et)if(bt.positionedGlyphs.length!==0)return!1;return!0}(Se)&&De}const Wu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ob={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Fb={40:!0};function Em(u,c,h,m,b,x){if(c.imageName){const k=m[c.imageName];return k?k.displaySize[0]*c.scale*kn/x+b:0}{const k=h[c.fontStack],S=k&&k[u];return S?S.metrics.advance*c.scale+b:0}}function Pm(u,c,h,m){const b=Math.pow(u-c,2);return m?u<c?b/2:2*b:b+Math.abs(h)*h}function Bb(u,c,h){let m=0;return u===10&&(m-=1e4),h&&(m+=150),u!==40&&u!==65288||(m+=50),c!==41&&c!==65289||(m+=50),m}function Mm(u,c,h,m,b,x){let k=null,S=Pm(c,h,b,x);for(const I of m){const M=Pm(c-I.x,h,b,x)+I.badness;M<=S&&(k=I,S=M)}return{index:u,x:c,priorBreak:k,badness:S}}function zm(u){return u?zm(u.priorBreak).concat(u.index):[]}function xh(u,c,h,m,b,x){if(!u)return[];const k=[],S=function(O,j,X,Y,$,le){let ye=0;for(let Be=0;Be<O.length();Be++){const Se=O.getSection(Be);ye+=Em(O.getCharCode(Be),Se,Y,$,j,le)}return ye/Math.max(1,Math.ceil(ye/X))}(u,c,h,m,b,x),I=u.text.indexOf("​")>=0;let M=0;for(let O=0;O<u.length();O++){const j=u.getSection(O),X=u.getCharCode(O);if(Wu[X]||(M+=Em(X,j,m,b,c,x)),O<u.length()-1){const Y=!((L=X)<11904)&&(!!Di["CJK Compatibility Forms"](L)||!!Di["CJK Compatibility"](L)||!!Di["CJK Strokes"](L)||!!Di["CJK Symbols and Punctuation"](L)||!!Di["Enclosed CJK Letters and Months"](L)||!!Di["Halfwidth and Fullwidth Forms"](L)||!!Di["Ideographic Description Characters"](L)||!!Di["Vertical Forms"](L)||Pu.test(String.fromCodePoint(L)));(Ob[X]||Y||j.imageName||O!==u.length()-2&&Fb[u.getCharCode(O+1)])&&k.push(Mm(O+1,M,S,k,Bb(X,u.getCharCode(O+1),Y&&I),!1))}}var L;return zm(Mm(u.length(),M,S,k,0,!0))}function kh(u){let c=.5,h=.5;switch(u){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(u){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function Nb(u,c,h,m,b){if(!m&&!b)return;const x=u[h],k=(u[h].x+x.metrics.advance*x.scale)*m;for(let S=c;S<=h;S++)u[S].x-=k,u[S].y+=b}function Vb(u,c,h){const{horizontalAlign:m,verticalAlign:b}=kh(h),x=c[0]-u.displaySize[0]*m,k=c[1]-u.displaySize[1]*b;return{image:u,top:k,bottom:k+u.displaySize[1],left:x,right:x+u.displaySize[0]}}function Dm(u){var c,h;let m=u.left,b=u.top,x=u.right-m,k=u.bottom-b;const S=(c=u.image.textFitWidth)!==null&&c!==void 0?c:"stretchOrShrink",I=(h=u.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",M=(u.image.content[2]-u.image.content[0])/(u.image.content[3]-u.image.content[1]);if(I==="proportional"){if(S==="stretchOnly"&&x/k<M||S==="proportional"){const L=Math.ceil(k*M);m*=L/x,x=L}}else if(S==="proportional"&&I==="stretchOnly"&&M!==0&&x/k>M){const L=Math.ceil(x/M);b*=L/k,k=L}return{x1:m,y1:b,x2:m+x,y2:b+k}}function Lm(u,c,h,m,b,x){const k=u.image;let S;if(k.content){const le=k.content,ye=k.pixelRatio||1;S=[le[0]/ye,le[1]/ye,k.displaySize[0]-le[2]/ye,k.displaySize[1]-le[3]/ye]}const I=c.left*x,M=c.right*x;let L,O,j,X;h==="width"||h==="both"?(X=b[0]+I-m[3],O=b[0]+M+m[1]):(X=b[0]+(I+M-k.displaySize[0])/2,O=X+k.displaySize[0]);const Y=c.top*x,$=c.bottom*x;return h==="height"||h==="both"?(L=b[1]+Y-m[0],j=b[1]+$+m[2]):(L=b[1]+(Y+$-k.displaySize[1])/2,j=L+k.displaySize[1]),{image:k,top:L,right:O,bottom:j,left:X,collisionPadding:S}}const zc=255,ys=128,Io=zc*ys;function Rm(u,c){const{expression:h}=c;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new tn(u+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=h;let x=0;for(;x<m.length&&m[x]<=u;)x++;x=Math.max(0,x-1);let k=x;for(;k<m.length&&m[k]<u+1;)k++;k=Math.min(m.length-1,k);const S=m[x],I=m[k];return h.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:I,interpolationType:b}:{kind:"camera",minZoom:S,maxZoom:I,minSize:h.evaluate(new tn(S)),maxSize:h.evaluate(new tn(I)),interpolationType:b}}}function Ch(u,c,h){let m="never";const b=u.get(c);return b?m=b:u.get(h)&&(m="always"),m}const jb=So.VectorTileFeature.types,Ub=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xu(u,c,h,m,b,x,k,S,I,M,L,O,j){const X=S?Math.min(Io,Math.round(S[0])):0,Y=S?Math.min(Io,Math.round(S[1])):0;u.emplaceBack(c,h,Math.round(32*m),Math.round(32*b),x,k,(X<<1)+(I?1:0),Y,16*M,16*L,256*O,256*j)}function Sh(u,c,h){u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h),u.emplaceBack(c.x,c.y,h)}function qb(u){for(const c of u.sections)if($f(c.text))return!0;return!1}class Th{constructor(c){this.layoutVertexArray=new tl,this.indexArray=new Rr,this.programConfigurations=c,this.segments=new Li,this.dynamicLayoutVertexArray=new bc,this.opacityVertexArray=new xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new nn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,h,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,bb.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,vb.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Ub,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xt("SymbolBuffers",Th);class Ih{constructor(c,h,m){this.layoutVertexArray=new c,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Li,this.collisionVertexArray=new _s}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,wb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xt("CollisionBuffers",Ih);class dl{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(k=>k.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oh([]),this.placementViewportMatrix=oh([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rm(this.zoom,h["text-size"]),this.iconSizeData=Rm(this.zoom,h["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),x=m.get("symbol-z-order");this.canOverlap=Ch(m,"text-overlap","text-allow-overlap")!=="never"||Ch(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(k=>l.ah[k])),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.sourceID=c.sourceID}createArrays(){this.text=new Th(new la(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new Th(new la(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new rn,this.lineVertexArray=new Rn,this.symbolInstances=new zi,this.textAnchorOffsets=new sn}calculateGlyphDependencies(c,h,m,b,x){for(let k=0;k<c.length;k++)if(h[c.charCodeAt(k)]=!0,(m||b)&&x){const S=Ec[c.charAt(k)];S&&(h[S.charCodeAt(0)]=!0)}}populate(c,h,m){const b=this.layers[0],x=b.layout,k=x.get("text-font"),S=x.get("text-field"),I=x.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof lr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),L=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,O=x.get("symbol-sort-key");if(this.features=[],!M&&!L)return;const j=h.iconDependencies,X=h.glyphDependencies,Y=h.availableImages,$=new tn(this.zoom);for(const{feature:le,id:ye,index:Be,sourceLayerIndex:Se}of c){const De=b._featureFilter.needGeometry,et=ua(le,De);if(!b._featureFilter.filter($,et,m))continue;let bt,Zt;if(De||(et.geometry=ca(le)),M){const Ut=b.getValueAndResolveTokens("text-field",et,m,Y),Nt=lr.factory(Ut),ni=this.hasRTLText=this.hasRTLText||qb(Nt);(!ni||hr.getRTLTextPluginStatus()==="unavailable"||ni&&hr.isParsed())&&(bt=kb(Nt,b,et))}if(L){const Ut=b.getValueAndResolveTokens("icon-image",et,m,Y);Zt=Ut instanceof ur?Ut:ur.fromString(Ut)}if(!bt&&!Zt)continue;const ui=this.sortFeaturesByKey?O.evaluate(et,{},m):void 0;if(this.features.push({id:ye,text:bt,icon:Zt,index:Be,sourceLayerIndex:Se,geometry:et.geometry,properties:le.properties,type:jb[le.type],sortKey:ui}),Zt&&(j[Zt.name]=!0),bt){const Ut=k.evaluate(et,{},m).join(","),Nt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ah.vertical)>=0;for(const ni of bt.sections)if(ni.image)j[ni.image.name]=!0;else{const Kt=mc(bt.toString()),Ht=ni.fontStack||Ut,at=X[Ht]=X[Ht]||{};this.calculateGlyphDependencies(ni.text,at,Nt,this.allowVerticalPlacement,Kt)}}}x.get("symbol-placement")==="line"&&(this.features=function(le){const ye={},Be={},Se=[];let De=0;function et(Ut){Se.push(le[Ut]),De++}function bt(Ut,Nt,ni){const Kt=Be[Ut];return delete Be[Ut],Be[Nt]=Kt,Se[Kt].geometry[0].pop(),Se[Kt].geometry[0]=Se[Kt].geometry[0].concat(ni[0]),Kt}function Zt(Ut,Nt,ni){const Kt=ye[Nt];return delete ye[Nt],ye[Ut]=Kt,Se[Kt].geometry[0].shift(),Se[Kt].geometry[0]=ni[0].concat(Se[Kt].geometry[0]),Kt}function ui(Ut,Nt,ni){const Kt=ni?Nt[0][Nt[0].length-1]:Nt[0][0];return`${Ut}:${Kt.x}:${Kt.y}`}for(let Ut=0;Ut<le.length;Ut++){const Nt=le[Ut],ni=Nt.geometry,Kt=Nt.text?Nt.text.toString():null;if(!Kt){et(Ut);continue}const Ht=ui(Kt,ni),at=ui(Kt,ni,!0);if(Ht in Be&&at in ye&&Be[Ht]!==ye[at]){const si=Zt(Ht,at,ni),ii=bt(Ht,at,Se[si].geometry);delete ye[Ht],delete Be[at],Be[ui(Kt,Se[ii].geometry,!0)]=ii,Se[si].geometry=null}else Ht in Be?bt(Ht,at,ni):at in ye?Zt(Ht,at,ni):(et(Ut),ye[Ht]=De-1,Be[at]=De-1)}return Se.filter(Ut=>Ut.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,ye)=>le.sortKey-ye.sortKey)}update(c,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(c,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,h){const m=this.lineVertexArray.length;if(c.segment!==void 0){let b=c.dist(h[c.segment+1]),x=c.dist(h[c.segment]);const k={};for(let S=c.segment+1;S<h.length;S++)k[S]={x:h[S].x,y:h[S].y,tileUnitDistanceFromAnchor:b},S<h.length-1&&(b+=h[S+1].dist(h[S]));for(let S=c.segment||0;S>=0;S--)k[S]={x:h[S].x,y:h[S].y,tileUnitDistanceFromAnchor:x},S>0&&(x+=h[S-1].dist(h[S]));for(let S=0;S<h.length;S++){const I=k[S];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(c,h,m,b,x,k,S,I,M,L,O,j){const X=c.indexArray,Y=c.layoutVertexArray,$=c.segments.prepareSegment(4*h.length,Y,X,this.canOverlap?k.sortKey:void 0),le=this.glyphOffsetArray.length,ye=$.vertexLength,Be=this.allowVerticalPlacement&&S===l.ah.vertical?Math.PI/2:0,Se=k.text&&k.text.sections;for(let De=0;De<h.length;De++){const{tl:et,tr:bt,bl:Zt,br:ui,tex:Ut,pixelOffsetTL:Nt,pixelOffsetBR:ni,minFontScaleX:Kt,minFontScaleY:Ht,glyphOffset:at,isSDF:si,sectionIndex:ii}=h[De],gi=$.vertexLength,Qi=at[1];Xu(Y,I.x,I.y,et.x,Qi+et.y,Ut.x,Ut.y,m,si,Nt.x,Nt.y,Kt,Ht),Xu(Y,I.x,I.y,bt.x,Qi+bt.y,Ut.x+Ut.w,Ut.y,m,si,ni.x,Nt.y,Kt,Ht),Xu(Y,I.x,I.y,Zt.x,Qi+Zt.y,Ut.x,Ut.y+Ut.h,m,si,Nt.x,ni.y,Kt,Ht),Xu(Y,I.x,I.y,ui.x,Qi+ui.y,Ut.x+Ut.w,Ut.y+Ut.h,m,si,ni.x,ni.y,Kt,Ht),Sh(c.dynamicLayoutVertexArray,I,Be),X.emplaceBack(gi,gi+1,gi+2),X.emplaceBack(gi+1,gi+2,gi+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(at[0]),De!==h.length-1&&ii===h[De+1].sectionIndex||c.programConfigurations.populatePaintArrays(Y.length,k,k.index,{},j,Se&&Se[ii])}c.placedSymbolArray.emplaceBack(I.x,I.y,le,this.glyphOffsetArray.length-le,ye,M,L,I.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],S,0,!1,0,O)}_addCollisionDebugVertex(c,h,m,b,x,k){return h.emplaceBack(0,0),c.emplaceBack(m.x,m.y,b,x,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(c,h,m,b,x,k,S){const I=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),M=I.vertexLength,L=x.layoutVertexArray,O=x.collisionVertexArray,j=S.anchorX,X=S.anchorY;this._addCollisionDebugVertex(L,O,k,j,X,new C(c,h)),this._addCollisionDebugVertex(L,O,k,j,X,new C(m,h)),this._addCollisionDebugVertex(L,O,k,j,X,new C(m,b)),this._addCollisionDebugVertex(L,O,k,j,X,new C(c,b)),I.vertexLength+=4;const Y=x.indexArray;Y.emplaceBack(M,M+1),Y.emplaceBack(M+1,M+2),Y.emplaceBack(M+2,M+3),Y.emplaceBack(M+3,M),I.primitiveLength+=4}addDebugCollisionBoxes(c,h,m,b){for(let x=c;x<h;x++){const k=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,b?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ih(kr,ym.members,Mn),this.iconCollisionBox=new Ih(kr,ym.members,Mn);for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(c,h,m,b,x,k,S,I,M){const L={};for(let O=h;O<m;O++){const j=c.get(O);L.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.textFeatureIndex=j.featureIndex;break}for(let O=b;O<x;O++){const j=c.get(O);L.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.verticalTextFeatureIndex=j.featureIndex;break}for(let O=k;O<S;O++){const j=c.get(O);L.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.iconFeatureIndex=j.featureIndex;break}for(let O=I;O<M;O++){const j=c.get(O);L.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},L.verticalIconFeatureIndex=j.featureIndex;break}return L}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,h){const m=c.placedSymbolArray.get(h),b=m.vertexStartIndex+4*m.numGlyphs;for(let x=m.vertexStartIndex;x<b;x+=4)c.indexArray.emplaceBack(x,x+1,x+2),c.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(c),m=Math.cos(c),b=[],x=[],k=[];for(let S=0;S<this.symbolInstances.length;++S){k.push(S);const I=this.symbolInstances.get(S);b.push(0|Math.round(h*I.anchorX+m*I.anchorY)),x.push(I.featureIndex)}return k.sort((S,I)=>b[S]-b[I]||x[I]-x[S]),k}addToSortKeyRanges(c,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((b,x,k)=>{b>=0&&k.indexOf(b)===x&&this.addIndicesForPlacedSymbol(this.text,b)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Om,Fm;Xt("SymbolBucket",dl,{omit:["layers","collisionBoxArray","features","compareText"]}),dl.MAX_GLYPHS=65535,dl.addDynamicAttributes=Sh;var Ah={get paint(){return Fm=Fm||new w({"icon-opacity":new hi(Fe.paint_symbol["icon-opacity"]),"icon-color":new hi(Fe.paint_symbol["icon-color"]),"icon-halo-color":new hi(Fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new hi(Fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hi(Fe.paint_symbol["icon-halo-blur"]),"icon-translate":new Qt(Fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qt(Fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new hi(Fe.paint_symbol["text-opacity"]),"text-color":new hi(Fe.paint_symbol["text-color"],{runtimeType:Qn,getOverride:u=>u.textColor,hasOverride:u=>!!u.textColor}),"text-halo-color":new hi(Fe.paint_symbol["text-halo-color"]),"text-halo-width":new hi(Fe.paint_symbol["text-halo-width"]),"text-halo-blur":new hi(Fe.paint_symbol["text-halo-blur"]),"text-translate":new Qt(Fe.paint_symbol["text-translate"]),"text-translate-anchor":new Qt(Fe.paint_symbol["text-translate-anchor"])})},get layout(){return Om=Om||new w({"symbol-placement":new Qt(Fe.layout_symbol["symbol-placement"]),"symbol-spacing":new Qt(Fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qt(Fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hi(Fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qt(Fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qt(Fe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Qt(Fe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Qt(Fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qt(Fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qt(Fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new hi(Fe.layout_symbol["icon-size"]),"icon-text-fit":new Qt(Fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qt(Fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new hi(Fe.layout_symbol["icon-image"]),"icon-rotate":new hi(Fe.layout_symbol["icon-rotate"]),"icon-padding":new hi(Fe.layout_symbol["icon-padding"]),"icon-keep-upright":new Qt(Fe.layout_symbol["icon-keep-upright"]),"icon-offset":new hi(Fe.layout_symbol["icon-offset"]),"icon-anchor":new hi(Fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qt(Fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qt(Fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qt(Fe.layout_symbol["text-rotation-alignment"]),"text-field":new hi(Fe.layout_symbol["text-field"]),"text-font":new hi(Fe.layout_symbol["text-font"]),"text-size":new hi(Fe.layout_symbol["text-size"]),"text-max-width":new hi(Fe.layout_symbol["text-max-width"]),"text-line-height":new Qt(Fe.layout_symbol["text-line-height"]),"text-letter-spacing":new hi(Fe.layout_symbol["text-letter-spacing"]),"text-justify":new hi(Fe.layout_symbol["text-justify"]),"text-radial-offset":new hi(Fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qt(Fe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new hi(Fe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new hi(Fe.layout_symbol["text-anchor"]),"text-max-angle":new Qt(Fe.layout_symbol["text-max-angle"]),"text-writing-mode":new Qt(Fe.layout_symbol["text-writing-mode"]),"text-rotate":new hi(Fe.layout_symbol["text-rotate"]),"text-padding":new Qt(Fe.layout_symbol["text-padding"]),"text-keep-upright":new Qt(Fe.layout_symbol["text-keep-upright"]),"text-transform":new hi(Fe.layout_symbol["text-transform"]),"text-offset":new hi(Fe.layout_symbol["text-offset"]),"text-allow-overlap":new Qt(Fe.layout_symbol["text-allow-overlap"]),"text-overlap":new Qt(Fe.layout_symbol["text-overlap"]),"text-ignore-placement":new Qt(Fe.layout_symbol["text-ignore-placement"]),"text-optional":new Qt(Fe.layout_symbol["text-optional"])})}};class Bm{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:hs,this.defaultValue=c}evaluate(c){if(c.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(c.formattedSection))return h.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xt("FormatSectionOverride",Bm,{omit:["defaultValue"]});class Ku extends d{constructor(c){super(c,Ah)}recalculate(c,h){if(super.recalculate(c,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const x of m)b.indexOf(x)<0&&b.push(x);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,h,m,b){const x=this.layout.get(c).evaluate(h,{},m,b),k=this._unevaluatedLayout._values[c];return k.isDataDriven()||Va(k.value)||!x?x:function(S,I){return I.replace(/{([^{}]+)}/g,(M,L)=>S&&L in S?String(S[L]):"")}(h.properties,x)}createBucket(c){return new dl(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of Ah.paint.overridableProperties){if(!Ku.hasPaintOverride(this.layout,c))continue;const h=this.paint.get(c),m=new Bm(h),b=new Na(m,h.property.specification);let x=null;x=h.value.kind==="constant"||h.value.kind==="source"?new lo("source",b):new co("composite",b,h.value.zoomStops),this.paint._values[c]=new Jr(h.property,x,h.parameters)}}_handleOverridablePaintPropertyUpdate(c,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&Ku.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,h){const m=c.get("text-field"),b=Ah.paint.properties[h];let x=!1;const k=S=>{for(const I of S)if(b.overrides&&b.overrides.hasOverride(I))return void(x=!0)};if(m.value.kind==="constant"&&m.value.value instanceof lr)k(m.value.value.sections);else if(m.value.kind==="source"){const S=M=>{x||(M instanceof Er&&vn(M.value)===ns?k(M.value.sections):M instanceof Pa?k(M.sections):M.eachChild(S))},I=m.value;I._styleExpression&&S(I._styleExpression.expression)}return x}}let Nm;var Zb={get paint(){return Nm=Nm||new w({"background-color":new Qt(Fe.paint_background["background-color"]),"background-pattern":new $a(Fe.paint_background["background-pattern"]),"background-opacity":new Qt(Fe.paint_background["background-opacity"])})}};class Gb extends d{constructor(c){super(c,Zb)}}let Vm;var Hb={get paint(){return Vm=Vm||new w({"raster-opacity":new Qt(Fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qt(Fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qt(Fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qt(Fe.paint_raster["raster-brightness-max"]),"raster-saturation":new Qt(Fe.paint_raster["raster-saturation"]),"raster-contrast":new Qt(Fe.paint_raster["raster-contrast"]),"raster-resampling":new Qt(Fe.paint_raster["raster-resampling"]),"raster-fade-duration":new Qt(Fe.paint_raster["raster-fade-duration"])})}};class Wb extends d{constructor(c){super(c,Hb)}}class Xb extends d{constructor(c){super(c,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Kb{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Eh=63710088e-1;class Ao{constructor(c,h){if(isNaN(c)||isNaN(h))throw new Error(`Invalid LngLat object: (${c}, ${h})`);if(this.lng=+c,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ao(pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const h=Math.PI/180,m=this.lat*h,b=c.lat*h,x=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((c.lng-this.lng)*h);return Eh*Math.acos(Math.min(x,1))}static convert(c){if(c instanceof Ao)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Ao(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Ao(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const jm=2*Math.PI*Eh;function Um(u){return jm*Math.cos(u*Math.PI/180)}function qm(u){return(180+u)/360}function Zm(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Gm(u,c){return u/Um(c)}function Ph(u){return 360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}class Dc{constructor(c,h,m=0){this.x=+c,this.y=+h,this.z=+m}static fromLngLat(c,h=0){const m=Ao.convert(c);return new Dc(qm(m.lng),Zm(m.lat),Gm(h,m.lat))}toLngLat(){return new Ao(360*this.x-180,Ph(this.y))}toAltitude(){return this.z*Um(Ph(this.y))}meterInMercatorCoordinateUnits(){return 1/jm*(c=Ph(this.y),1/Math.cos(c*Math.PI/180));var c}}function Hm(u,c,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[u*m-2*Math.PI*6378137/2,c*m-2*Math.PI*6378137/2]}class Mh{constructor(c,h,m){if(!function(b,x,k){return!(b<0||b>25||k<0||k>=Math.pow(2,b)||x<0||x>=Math.pow(2,b))}(c,h,m))throw new Error(`x=${h}, y=${m}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=h,this.y=m,this.key=Lc(0,c,c,h,m)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,h,m){const b=(k=this.y,S=this.z,I=Hm(256*(x=this.x),256*(k=Math.pow(2,S)-k-1),S),M=Hm(256*(x+1),256*(k+1),S),I[0]+","+I[1]+","+M[0]+","+M[1]);var x,k,S,I,M;const L=function(O,j,X){let Y,$="";for(let le=O;le>0;le--)Y=1<<le-1,$+=(j&Y?1:0)+(X&Y?2:0);return $}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,b)}isChildOf(c){const h=this.z-c.z;return h>0&&c.x===this.x>>h&&c.y===this.y>>h}getTilePoint(c){const h=Math.pow(2,this.z);return new C((c.x*h-this.x)*wn,(c.y*h-this.y)*wn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Wm{constructor(c,h){this.wrap=c,this.canonical=h,this.key=Lc(c,h.z,h.z,h.x,h.y)}}class Fr{constructor(c,h,m,b,x){if(c<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${m}`);this.overscaledZ=c,this.wrap=h,this.canonical=new Mh(m,+b,+x),this.key=Lc(h,c,m,b,x)}clone(){return new Fr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-c;return c>this.canonical.z?new Fr(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fr(c,this.wrap,c,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(c,h){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?Lc(this.wrap*+h,c,this.canonical.z,this.canonical.x,this.canonical.y):Lc(this.wrap*+h,c,c,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const h=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>h&&c.canonical.y===this.canonical.y>>h}children(c){if(this.overscaledZ>=c)return[new Fr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new Fr(h,this.wrap,h,m,b),new Fr(h,this.wrap,h,m+1,b),new Fr(h,this.wrap,h,m,b+1),new Fr(h,this.wrap,h,m+1,b+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Fr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Fr(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Wm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new Dc(c.x-this.wrap,c.y))}}function Lc(u,c,h,m,b){(u*=2)<0&&(u=-1*u-1);const x=1<<h;return(x*x*u+x*b+m).toString(36)+h.toString(36)+c.toString(36)}Xt("CanonicalTileID",Mh),Xt("OverscaledTileID",Fr,{omit:["posMatrix"]});class Xm{constructor(c,h,m,b=1,x=1,k=1,S=0){if(this.uid=c,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Re(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const I=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=x,this.blueFactor=k,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<I;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(I,M)]=this.data[this._idx(I-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,I)]=this.data[this._idx(M,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<I;M++)for(let L=0;L<I;L++){const O=this.get(M,L);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(c,h){const m=new Uint8Array(this.data.buffer),b=4*this._idx(c,h);return this.unpack(m[b],m[b+1],m[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,h){if(c<-1||c>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(c+1)}unpack(c,h,m){return c*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Or({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,h,m){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let b=h*this.dim,x=h*this.dim+this.dim,k=m*this.dim,S=m*this.dim+this.dim;switch(h){case-1:b=x-1;break;case 1:x=b+1}switch(m){case-1:k=S-1;break;case 1:S=k+1}const I=-h*this.dim,M=-m*this.dim;for(let L=k;L<S;L++)for(let O=b;O<x;O++)this.data[this._idx(O,L)]=c.data[this._idx(O+I,L+M)]}}Xt("DEMData",Xm);class Km{constructor(c){this._stringToNumber={},this._numberToString=[];for(let h=0;h<c.length;h++){const m=c[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class Jm{constructor(c,h,m,b,x){this.type="Feature",this._vectorTileFeature=c,c._z=h,c._x=m,c._y=b,this.properties=c.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(c[h]=this[h]);return c}}class Ym{constructor(c,h){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new mo(wn,16,0),this.grid3D=new mo(wn,16,0),this.featureIndexArray=new Gn,this.promoteId=h}insert(c,h,m,b,x,k){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,x);const I=k?this.grid3D:this.grid;for(let M=0;M<h.length;M++){const L=h[M],O=[1/0,1/0,-1/0,-1/0];for(let j=0;j<L.length;j++){const X=L[j];O[0]=Math.min(O[0],X.x),O[1]=Math.min(O[1],X.y),O[2]=Math.max(O[2],X.x),O[3]=Math.max(O[3],X.y)}O[0]<wn&&O[1]<wn&&O[2]>=0&&O[3]>=0&&I.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new So.VectorTile(new bh(this.rawTileData)).layers,this.sourceLayerCoder=new Km(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,h,m,b){this.loadVTLayers();const x=c.params||{},k=wn/c.tileSize/c.scale,S=$l(x.filter),I=c.queryGeometry,M=c.queryPadding*k,L=$m(I),O=this.grid.query(L.minX-M,L.minY-M,L.maxX+M,L.maxY+M),j=$m(c.cameraQueryGeometry),X=this.grid3D.query(j.minX-M,j.minY-M,j.maxX+M,j.maxY+M,(le,ye,Be,Se)=>function(De,et,bt,Zt,ui){for(const Nt of De)if(et<=Nt.x&&bt<=Nt.y&&Zt>=Nt.x&&ui>=Nt.y)return!0;const Ut=[new C(et,bt),new C(et,ui),new C(Zt,ui),new C(Zt,bt)];if(De.length>2){for(const Nt of Ut)if(ol(De,Nt))return!0}for(let Nt=0;Nt<De.length-1;Nt++)if(Ey(De[Nt],De[Nt+1],Ut))return!0;return!1}(c.cameraQueryGeometry,le-M,ye-M,Be+M,Se+M));for(const le of X)O.push(le);O.sort(Jb);const Y={};let $;for(let le=0;le<O.length;le++){const ye=O[le];if(ye===$)continue;$=ye;const Be=this.featureIndexArray.get(ye);let Se=null;this.loadMatchingFeature(Y,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,S,x.layers,x.availableImages,h,m,b,(De,et,bt)=>(Se||(Se=ca(De)),et.queryIntersectsFeature(I,De,bt,Se,this.z,c.transform,k,c.pixelPosMatrix)))}return Y}loadMatchingFeature(c,h,m,b,x,k,S,I,M,L,O){const j=this.bucketLayerIDs[h];if(k&&!function(le,ye){for(let Be=0;Be<le.length;Be++)if(ye.indexOf(le[Be])>=0)return!0;return!1}(k,j))return;const X=this.sourceLayerCoder.decode(m),Y=this.vtLayers[X].feature(b);if(x.needGeometry){const le=ua(Y,!0);if(!x.filter(new tn(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!x.filter(new tn(this.tileID.overscaledZ),Y))return;const $=this.getId(Y,X);for(let le=0;le<j.length;le++){const ye=j[le];if(k&&k.indexOf(ye)<0)continue;const Be=I[ye];if(!Be)continue;let Se={};$&&L&&(Se=L.getState(Be.sourceLayer||"_geojsonTileLayer",$));const De=Ie({},M[ye]);De.paint=Qm(De.paint,Be.paint,Y,Se,S),De.layout=Qm(De.layout,Be.layout,Y,Se,S);const et=!O||O(Y,Be,Se);if(!et)continue;const bt=new Jm(Y,this.z,this.x,this.y,$);bt.layer=De;let Zt=c[ye];Zt===void 0&&(Zt=c[ye]=[]),Zt.push({featureIndex:b,feature:bt,intersectionZ:et})}}lookupSymbolFeatures(c,h,m,b,x,k,S,I){const M={};this.loadVTLayers();const L=$l(x);for(const O of c)this.loadMatchingFeature(M,m,b,O,L,k,S,I,h);return M}hasLayer(c){for(const h of this.bucketLayerIDs)for(const m of h)if(c===m)return!0;return!1}getId(c,h){let m=c.id;return this.promoteId&&(m=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function Qm(u,c,h,m,b){return je(u,(x,k)=>{const S=c instanceof sa?c.get(k):null;return S&&S.evaluate?S.evaluate(h,m,b):S})}function $m(u){let c=1/0,h=1/0,m=-1/0,b=-1/0;for(const x of u)c=Math.min(c,x.x),h=Math.min(h,x.y),m=Math.max(m,x.x),b=Math.max(b,x.y);return{minX:c,minY:h,maxX:m,maxY:b}}function Jb(u,c){return c-u}function ep(u,c,h,m,b){const x=[];for(let k=0;k<u.length;k++){const S=u[k];let I;for(let M=0;M<S.length-1;M++){let L=S[M],O=S[M+1];L.x<c&&O.x<c||(L.x<c?L=new C(c,L.y+(c-L.x)/(O.x-L.x)*(O.y-L.y))._round():O.x<c&&(O=new C(c,L.y+(c-L.x)/(O.x-L.x)*(O.y-L.y))._round()),L.y<h&&O.y<h||(L.y<h?L=new C(L.x+(h-L.y)/(O.y-L.y)*(O.x-L.x),h)._round():O.y<h&&(O=new C(L.x+(h-L.y)/(O.y-L.y)*(O.x-L.x),h)._round()),L.x>=m&&O.x>=m||(L.x>=m?L=new C(m,L.y+(m-L.x)/(O.x-L.x)*(O.y-L.y))._round():O.x>=m&&(O=new C(m,L.y+(m-L.x)/(O.x-L.x)*(O.y-L.y))._round()),L.y>=b&&O.y>=b||(L.y>=b?L=new C(L.x+(b-L.y)/(O.y-L.y)*(O.x-L.x),b)._round():O.y>=b&&(O=new C(L.x+(b-L.y)/(O.y-L.y)*(O.x-L.x),b)._round()),I&&L.equals(I[I.length-1])||(I=[L],x.push(I)),I.push(O)))))}}return x}Xt("FeatureIndex",Ym,{omit:["rawTileData","sourceLayerCoder"]});class Eo extends C{constructor(c,h,m,b){super(c,h),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new Eo(this.x,this.y,this.angle,this.segment)}}function tp(u,c,h,m,b){if(c.segment===void 0||h===0)return!0;let x=c,k=c.segment+1,S=0;for(;S>-h/2;){if(k--,k<0)return!1;S-=u[k].dist(x),x=u[k]}S+=u[k].dist(u[k+1]),k++;const I=[];let M=0;for(;S<h/2;){const L=u[k],O=u[k+1];if(!O)return!1;let j=u[k-1].angleTo(L)-L.angleTo(O);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:S,angleDelta:j}),M+=j;S-I[0].distance>m;)M-=I.shift().angleDelta;if(M>b)return!1;k++,S+=L.dist(O)}return!0}function ip(u){let c=0;for(let h=0;h<u.length-1;h++)c+=u[h].dist(u[h+1]);return c}function np(u,c,h){return u?.6*c*h:0}function rp(u,c){return Math.max(u?u.right-u.left:0,c?c.right-c.left:0)}function Yb(u,c,h,m,b,x){const k=np(h,b,x),S=rp(h,m)*x;let I=0;const M=ip(u)/2;for(let L=0;L<u.length-1;L++){const O=u[L],j=u[L+1],X=O.dist(j);if(I+X>M){const Y=(M-I)/X,$=$n.number(O.x,j.x,Y),le=$n.number(O.y,j.y,Y),ye=new Eo($,le,j.angleTo(O),L);return ye._round(),!k||tp(u,ye,S,k,c)?ye:void 0}I+=X}}function Qb(u,c,h,m,b,x,k,S,I){const M=np(m,x,k),L=rp(m,b),O=L*k,j=u[0].x===0||u[0].x===I||u[0].y===0||u[0].y===I;return c-O<c/4&&(c=O+c/4),sp(u,j?c/2*S%c:(L/2+2*x)*k*S%c,c,M,h,O,j,!1,I)}function sp(u,c,h,m,b,x,k,S,I){const M=x/2,L=ip(u);let O=0,j=c-h,X=[];for(let Y=0;Y<u.length-1;Y++){const $=u[Y],le=u[Y+1],ye=$.dist(le),Be=le.angleTo($);for(;j+h<O+ye;){j+=h;const Se=(j-O)/ye,De=$n.number($.x,le.x,Se),et=$n.number($.y,le.y,Se);if(De>=0&&De<I&&et>=0&&et<I&&j-M>=0&&j+M<=L){const bt=new Eo(De,et,Be,Y);bt._round(),m&&!tp(u,bt,x,m,b)||X.push(bt)}}O+=ye}return S||X.length||k||(X=sp(u,O/2,h,m,b,x,k,!0,I)),X}Xt("Anchor",Eo);const ml=mr;function op(u,c,h,m){const b=[],x=u.image,k=x.pixelRatio,S=x.paddedRect.w-2*ml,I=x.paddedRect.h-2*ml;let M={x1:u.left,y1:u.top,x2:u.right,y2:u.bottom};const L=x.stretchX||[[0,S]],O=x.stretchY||[[0,I]],j=(at,si)=>at+si[1]-si[0],X=L.reduce(j,0),Y=O.reduce(j,0),$=S-X,le=I-Y;let ye=0,Be=X,Se=0,De=Y,et=0,bt=$,Zt=0,ui=le;if(x.content&&m){const at=x.content,si=at[2]-at[0],ii=at[3]-at[1];(x.textFitWidth||x.textFitHeight)&&(M=Dm(u)),ye=Ju(L,0,at[0]),Se=Ju(O,0,at[1]),Be=Ju(L,at[0],at[2]),De=Ju(O,at[1],at[3]),et=at[0]-ye,Zt=at[1]-Se,bt=si-Be,ui=ii-De}const Ut=M.x1,Nt=M.y1,ni=M.x2-Ut,Kt=M.y2-Nt,Ht=(at,si,ii,gi)=>{const Qi=Yu(at.stretch-ye,Be,ni,Ut),Ji=Qu(at.fixed-et,bt,at.stretch,X),In=Yu(si.stretch-Se,De,Kt,Nt),Qr=Qu(si.fixed-Zt,ui,si.stretch,Y),Nn=Yu(ii.stretch-ye,Be,ni,Ut),An=Qu(ii.fixed-et,bt,ii.stretch,X),nr=Yu(gi.stretch-Se,De,Kt,Nt),rr=Qu(gi.fixed-Zt,ui,gi.stretch,Y),sr=new C(Qi,In),pn=new C(Nn,In),En=new C(Nn,nr),Wn=new C(Qi,nr),Vn=new C(Ji/k,Qr/k),or=new C(An/k,rr/k),jn=c*Math.PI/180;if(jn){const ji=Math.sin(jn),en=Math.cos(jn),on=[en,-ji,ji,en];sr._matMult(on),pn._matMult(on),Wn._matMult(on),En._matMult(on)}const Br=at.stretch+at.fixed,pr=si.stretch+si.fixed;return{tl:sr,tr:pn,bl:Wn,br:En,tex:{x:x.paddedRect.x+ml+Br,y:x.paddedRect.y+ml+pr,w:ii.stretch+ii.fixed-Br,h:gi.stretch+gi.fixed-pr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vn,pixelOffsetBR:or,minFontScaleX:bt/k/ni,minFontScaleY:ui/k/Kt,isSDF:h}};if(m&&(x.stretchX||x.stretchY)){const at=ap(L,$,X),si=ap(O,le,Y);for(let ii=0;ii<at.length-1;ii++){const gi=at[ii],Qi=at[ii+1];for(let Ji=0;Ji<si.length-1;Ji++)b.push(Ht(gi,si[Ji],Qi,si[Ji+1]))}}else b.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:I+1}));return b}function Ju(u,c,h){let m=0;for(const b of u)m+=Math.max(c,Math.min(h,b[1]))-Math.max(c,Math.min(h,b[0]));return m}function ap(u,c,h){const m=[{fixed:-ml,stretch:0}];for(const[b,x]of u){const k=m[m.length-1];m.push({fixed:b-k.stretch,stretch:k.stretch}),m.push({fixed:b-k.stretch,stretch:k.stretch+(x-b)})}return m.push({fixed:c+ml,stretch:h}),m}function Yu(u,c,h,m){return u/c*h+m}function Qu(u,c,h,m){return u-c*h/m}class $u{constructor(c,h,m,b,x,k,S,I,M,L){var O;if(this.boxStartIndex=c.length,M){let j=k.top,X=k.bottom;const Y=k.collisionPadding;Y&&(j-=Y[1],X+=Y[3]);let $=X-j;$>0&&($=Math.max(10,$),this.circleDiameter=$)}else{const j=!((O=k.image)===null||O===void 0)&&O.content&&(k.image.textFitWidth||k.image.textFitHeight)?Dm(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};j.y1=j.y1*S-I[0],j.y2=j.y2*S+I[2],j.x1=j.x1*S-I[3],j.x2=j.x2*S+I[1];const X=k.collisionPadding;if(X&&(j.x1-=X[0]*S,j.y1-=X[1]*S,j.x2+=X[2]*S,j.y2+=X[3]*S),L){const Y=new C(j.x1,j.y1),$=new C(j.x2,j.y1),le=new C(j.x1,j.y2),ye=new C(j.x2,j.y2),Be=L*Math.PI/180;Y._rotate(Be),$._rotate(Be),le._rotate(Be),ye._rotate(Be),j.x1=Math.min(Y.x,$.x,le.x,ye.x),j.x2=Math.max(Y.x,$.x,le.x,ye.x),j.y1=Math.min(Y.y,$.y,le.y,ye.y),j.y2=Math.max(Y.y,$.y,le.y,ye.y)}c.emplaceBack(h.x,h.y,j.x1,j.y1,j.x2,j.y2,m,b,x)}this.boxEndIndex=c.length}}class $b{constructor(c=[],h=(m,b)=>m<b?-1:m>b?1:0){if(this.data=c,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:h,compare:m}=this,b=h[c];for(;c>0;){const x=c-1>>1,k=h[x];if(m(b,k)>=0)break;h[c]=k,c=x}h[c]=b}_down(c){const{data:h,compare:m}=this,b=this.length>>1,x=h[c];for(;c<b;){let k=1+(c<<1);const S=k+1;if(S<this.length&&m(h[S],h[k])<0&&(k=S),m(h[k],x)>=0)break;h[c]=h[k],c=k}h[c]=x}}function ev(u,c=1,h=!1){let m=1/0,b=1/0,x=-1/0,k=-1/0;const S=u[0];for(let X=0;X<S.length;X++){const Y=S[X];(!X||Y.x<m)&&(m=Y.x),(!X||Y.y<b)&&(b=Y.y),(!X||Y.x>x)&&(x=Y.x),(!X||Y.y>k)&&(k=Y.y)}const I=Math.min(x-m,k-b);let M=I/2;const L=new $b([],tv);if(I===0)return new C(m,b);for(let X=m;X<x;X+=I)for(let Y=b;Y<k;Y+=I)L.push(new pl(X+M,Y+M,M,u));let O=function(X){let Y=0,$=0,le=0;const ye=X[0];for(let Be=0,Se=ye.length,De=Se-1;Be<Se;De=Be++){const et=ye[Be],bt=ye[De],Zt=et.x*bt.y-bt.x*et.y;$+=(et.x+bt.x)*Zt,le+=(et.y+bt.y)*Zt,Y+=3*Zt}return new pl($/Y,le/Y,0,X)}(u),j=L.length;for(;L.length;){const X=L.pop();(X.d>O.d||!O.d)&&(O=X,h&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,j)),X.max-O.d<=c||(M=X.h/2,L.push(new pl(X.p.x-M,X.p.y-M,M,u)),L.push(new pl(X.p.x+M,X.p.y-M,M,u)),L.push(new pl(X.p.x-M,X.p.y+M,M,u)),L.push(new pl(X.p.x+M,X.p.y+M,M,u)),j+=4)}return h&&(console.log(`num probes: ${j}`),console.log(`best distance: ${O.d}`)),O.p}function tv(u,c){return c.max-u.max}function pl(u,c,h,m){this.p=new C(u,c),this.h=h,this.d=function(b,x){let k=!1,S=1/0;for(let I=0;I<x.length;I++){const M=x[I];for(let L=0,O=M.length,j=O-1;L<O;j=L++){const X=M[L],Y=M[j];X.y>b.y!=Y.y>b.y&&b.x<(Y.x-X.x)*(b.y-X.y)/(Y.y-X.y)+X.x&&(k=!k),S=Math.min(S,Zd(b,X,Y))}}return(k?1:-1)*Math.sqrt(S)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Bn;l.aq=void 0,(Bn=l.aq||(l.aq={}))[Bn.center=1]="center",Bn[Bn.left=2]="left",Bn[Bn.right=3]="right",Bn[Bn.top=4]="top",Bn[Bn.bottom=5]="bottom",Bn[Bn["top-left"]=6]="top-left",Bn[Bn["top-right"]=7]="top-right",Bn[Bn["bottom-left"]=8]="bottom-left",Bn[Bn["bottom-right"]=9]="bottom-right";const Po=7,zh=Number.POSITIVE_INFINITY;function lp(u,c){return c[1]!==zh?function(h,m,b){let x=0,k=0;switch(m=Math.abs(m),b=Math.abs(b),h){case"top-right":case"top-left":case"top":k=b-Po;break;case"bottom-right":case"bottom-left":case"bottom":k=-b+Po}switch(h){case"top-right":case"bottom-right":case"right":x=-m;break;case"top-left":case"bottom-left":case"left":x=m}return[x,k]}(u,c[0],c[1]):function(h,m){let b=0,x=0;m<0&&(m=0);const k=m/Math.SQRT2;switch(h){case"top-right":case"top-left":x=k-Po;break;case"bottom-right":case"bottom-left":x=-k+Po;break;case"bottom":x=-m+Po;break;case"top":x=m-Po}switch(h){case"top-right":case"bottom-right":b=-k;break;case"top-left":case"bottom-left":b=k;break;case"left":b=m;break;case"right":b=-m}return[b,x]}(u,c[0])}function cp(u,c,h){var m;const b=u.layout,x=(m=b.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(c,{},h);if(x){const S=x.values,I=[];for(let M=0;M<S.length;M+=2){const L=I[M]=S[M],O=S[M+1].map(j=>j*kn);L.startsWith("top")?O[1]-=Po:L.startsWith("bottom")&&(O[1]+=Po),I[M+1]=O}return new gr(I)}const k=b.get("text-variable-anchor");if(k){let S;S=u._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(c,{},h)*kn,zh]:b.get("text-offset").evaluate(c,{},h).map(M=>M*kn);const I=[];for(const M of k)I.push(M,lp(M,S));return new gr(I)}return null}function Dh(u){switch(u){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iv(u,c,h,m,b,x,k,S,I,M,L){let O=x.textMaxSize.evaluate(c,{});O===void 0&&(O=k);const j=u.layers[0].layout,X=j.get("icon-offset").evaluate(c,{},L),Y=fp(h.horizontal),$=k/24,le=u.tilePixelRatio*$,ye=u.tilePixelRatio*O/24,Be=u.tilePixelRatio*S,Se=u.tilePixelRatio*j.get("symbol-spacing"),De=j.get("text-padding")*u.tilePixelRatio,et=function(at,si,ii,gi=1){const Qi=at.get("icon-padding").evaluate(si,{},ii),Ji=Qi&&Qi.values;return[Ji[0]*gi,Ji[1]*gi,Ji[2]*gi,Ji[3]*gi]}(j,c,L,u.tilePixelRatio),bt=j.get("text-max-angle")/180*Math.PI,Zt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",ui=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Ut=j.get("symbol-placement"),Nt=Se/2,ni=j.get("icon-text-fit");let Kt;m&&ni!=="none"&&(u.allowVerticalPlacement&&h.vertical&&(Kt=Lm(m,h.vertical,ni,j.get("icon-text-fit-padding"),X,$)),Y&&(m=Lm(m,Y,ni,j.get("icon-text-fit-padding"),X,$)));const Ht=(at,si)=>{si.x<0||si.x>=wn||si.y<0||si.y>=wn||function(ii,gi,Qi,Ji,In,Qr,Nn,An,nr,rr,sr,pn,En,Wn,Vn,or,jn,Br,pr,ji,en,on,Cr,fn,_l){const bs=ii.addToLineVertexArray(gi,Qi);let vs,$r,Nr,zn,qs=0,Fc=0,pp=0,_p=0,jh=-1,Uh=-1;const Zs={};let gp=il("");if(ii.allowVerticalPlacement&&Ji.vertical){const Xn=An.layout.get("text-rotate").evaluate(en,{},fn)+90;Nr=new $u(nr,gi,rr,sr,pn,Ji.vertical,En,Wn,Vn,Xn),Nn&&(zn=new $u(nr,gi,rr,sr,pn,Nn,jn,Br,Vn,Xn))}if(In){const Xn=An.layout.get("icon-rotate").evaluate(en,{}),Vr=An.layout.get("icon-text-fit")!=="none",ha=op(In,Xn,Cr,Vr),ls=Nn?op(Nn,Xn,Cr,Vr):void 0;$r=new $u(nr,gi,rr,sr,pn,In,jn,Br,!1,Xn),qs=4*ha.length;const da=ii.iconSizeData;let ws=null;da.kind==="source"?(ws=[ys*An.layout.get("icon-size").evaluate(en,{})],ws[0]>Io&&Re(`${ii.layerIds[0]}: Value for "icon-size" is >= ${zc}. Reduce your "icon-size".`)):da.kind==="composite"&&(ws=[ys*on.compositeIconSizes[0].evaluate(en,{},fn),ys*on.compositeIconSizes[1].evaluate(en,{},fn)],(ws[0]>Io||ws[1]>Io)&&Re(`${ii.layerIds[0]}: Value for "icon-size" is >= ${zc}. Reduce your "icon-size".`)),ii.addSymbols(ii.icon,ha,ws,ji,pr,en,l.ah.none,gi,bs.lineStartIndex,bs.lineLength,-1,fn),jh=ii.icon.placedSymbolArray.length-1,ls&&(Fc=4*ls.length,ii.addSymbols(ii.icon,ls,ws,ji,pr,en,l.ah.vertical,gi,bs.lineStartIndex,bs.lineLength,-1,fn),Uh=ii.icon.placedSymbolArray.length-1)}const yp=Object.keys(Ji.horizontal);for(const Xn of yp){const Vr=Ji.horizontal[Xn];if(!vs){gp=il(Vr.text);const ls=An.layout.get("text-rotate").evaluate(en,{},fn);vs=new $u(nr,gi,rr,sr,pn,Vr,En,Wn,Vn,ls)}const ha=Vr.positionedLines.length===1;if(pp+=up(ii,gi,Vr,Qr,An,Vn,en,or,bs,Ji.vertical?l.ah.horizontal:l.ah.horizontalOnly,ha?yp:[Xn],Zs,jh,on,fn),ha)break}Ji.vertical&&(_p+=up(ii,gi,Ji.vertical,Qr,An,Vn,en,or,bs,l.ah.vertical,["vertical"],Zs,Uh,on,fn));const sv=vs?vs.boxStartIndex:ii.collisionBoxArray.length,ov=vs?vs.boxEndIndex:ii.collisionBoxArray.length,av=Nr?Nr.boxStartIndex:ii.collisionBoxArray.length,lv=Nr?Nr.boxEndIndex:ii.collisionBoxArray.length,cv=$r?$r.boxStartIndex:ii.collisionBoxArray.length,uv=$r?$r.boxEndIndex:ii.collisionBoxArray.length,fv=zn?zn.boxStartIndex:ii.collisionBoxArray.length,hv=zn?zn.boxEndIndex:ii.collisionBoxArray.length;let as=-1;const tf=(Xn,Vr)=>Xn&&Xn.circleDiameter?Math.max(Xn.circleDiameter,Vr):Vr;as=tf(vs,as),as=tf(Nr,as),as=tf($r,as),as=tf(zn,as);const bp=as>-1?1:0;bp&&(as*=_l/kn),ii.glyphOffsetArray.length>=dl.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),en.sortKey!==void 0&&ii.addToSortKeyRanges(ii.symbolInstances.length,en.sortKey);const dv=cp(An,en,fn),[mv,pv]=function(Xn,Vr){const ha=Xn.length,ls=Vr==null?void 0:Vr.values;if((ls==null?void 0:ls.length)>0)for(let da=0;da<ls.length;da+=2){const ws=ls[da+1];Xn.emplaceBack(l.aq[ls[da]],ws[0],ws[1])}return[ha,Xn.length]}(ii.textAnchorOffsets,dv);ii.symbolInstances.emplaceBack(gi.x,gi.y,Zs.right>=0?Zs.right:-1,Zs.center>=0?Zs.center:-1,Zs.left>=0?Zs.left:-1,Zs.vertical||-1,jh,Uh,gp,sv,ov,av,lv,cv,uv,fv,hv,rr,pp,_p,qs,Fc,bp,0,En,as,mv,pv)}(u,si,at,h,m,b,Kt,u.layers[0],u.collisionBoxArray,c.index,c.sourceLayerIndex,u.index,le,[De,De,De,De],Zt,I,Be,et,ui,X,c,x,M,L,k)};if(Ut==="line")for(const at of ep(c.geometry,0,0,wn,wn)){const si=Qb(at,Se,bt,h.vertical||Y,m,24,ye,u.overscaling,wn);for(const ii of si)Y&&nv(u,Y.text,Nt,ii)||Ht(at,ii)}else if(Ut==="line-center"){for(const at of c.geometry)if(at.length>1){const si=Yb(at,bt,h.vertical||Y,m,24,ye);si&&Ht(at,si)}}else if(c.type==="Polygon")for(const at of za(c.geometry,0)){const si=ev(at,16);Ht(at[0],new Eo(si.x,si.y,0))}else if(c.type==="LineString")for(const at of c.geometry)Ht(at,new Eo(at[0].x,at[0].y,0));else if(c.type==="Point")for(const at of c.geometry)for(const si of at)Ht([si],new Eo(si.x,si.y,0))}function up(u,c,h,m,b,x,k,S,I,M,L,O,j,X,Y){const $=function(Be,Se,De,et,bt,Zt,ui,Ut){const Nt=et.layout.get("text-rotate").evaluate(Zt,{})*Math.PI/180,ni=[];for(const Kt of Se.positionedLines)for(const Ht of Kt.positionedGlyphs){if(!Ht.rect)continue;const at=Ht.rect||{};let si=Tm+1,ii=!0,gi=1,Qi=0;const Ji=(bt||Ut)&&Ht.vertical,In=Ht.metrics.advance*Ht.scale/2;if(Ut&&Se.verticalizable&&(Qi=Kt.lineOffset/2-(Ht.imageName?-(kn-Ht.metrics.width*Ht.scale)/2:(Ht.scale-1)*kn)),Ht.imageName){const ji=ui[Ht.imageName];ii=ji.sdf,gi=ji.pixelRatio,si=mr/gi}const Qr=bt?[Ht.x+In,Ht.y]:[0,0];let Nn=bt?[0,0]:[Ht.x+In+De[0],Ht.y+De[1]-Qi],An=[0,0];Ji&&(An=Nn,Nn=[0,0]);const nr=Ht.metrics.isDoubleResolution?2:1,rr=(Ht.metrics.left-si)*Ht.scale-In+Nn[0],sr=(-Ht.metrics.top-si)*Ht.scale+Nn[1],pn=rr+at.w/nr*Ht.scale/gi,En=sr+at.h/nr*Ht.scale/gi,Wn=new C(rr,sr),Vn=new C(pn,sr),or=new C(rr,En),jn=new C(pn,En);if(Ji){const ji=new C(-In,In-Pc),en=-Math.PI/2,on=kn/2-In,Cr=new C(5-Pc-on,-(Ht.imageName?on:0)),fn=new C(...An);Wn._rotateAround(en,ji)._add(Cr)._add(fn),Vn._rotateAround(en,ji)._add(Cr)._add(fn),or._rotateAround(en,ji)._add(Cr)._add(fn),jn._rotateAround(en,ji)._add(Cr)._add(fn)}if(Nt){const ji=Math.sin(Nt),en=Math.cos(Nt),on=[en,-ji,ji,en];Wn._matMult(on),Vn._matMult(on),or._matMult(on),jn._matMult(on)}const Br=new C(0,0),pr=new C(0,0);ni.push({tl:Wn,tr:Vn,bl:or,br:jn,tex:at,writingMode:Se.writingMode,glyphOffset:Qr,sectionIndex:Ht.sectionIndex,isSDF:ii,pixelOffsetTL:Br,pixelOffsetBR:pr,minFontScaleX:0,minFontScaleY:0})}return ni}(0,h,S,b,x,k,m,u.allowVerticalPlacement),le=u.textSizeData;let ye=null;le.kind==="source"?(ye=[ys*b.layout.get("text-size").evaluate(k,{})],ye[0]>Io&&Re(`${u.layerIds[0]}: Value for "text-size" is >= ${zc}. Reduce your "text-size".`)):le.kind==="composite"&&(ye=[ys*X.compositeTextSizes[0].evaluate(k,{},Y),ys*X.compositeTextSizes[1].evaluate(k,{},Y)],(ye[0]>Io||ye[1]>Io)&&Re(`${u.layerIds[0]}: Value for "text-size" is >= ${zc}. Reduce your "text-size".`)),u.addSymbols(u.text,$,ye,S,x,k,M,c,I.lineStartIndex,I.lineLength,j,Y);for(const Be of L)O[Be]=u.text.placedSymbolArray.length-1;return 4*$.length}function fp(u){for(const c in u)return u[c];return null}function nv(u,c,h,m){const b=u.compareText;if(c in b){const x=b[c];for(let k=x.length-1;k>=0;k--)if(m.dist(x[k])<h)return!0}else b[c]=[];return b[c].push(m),!1}const hp=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lh{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(c,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const b=m>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);const x=hp[15&m];if(!x)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(c,2,1),[S]=new Uint32Array(c,4,1);return new Lh(S,k,x,c)}constructor(c,h=64,m=Float64Array,b){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const x=hp.indexOf(this.ArrayType),k=2*c*this.ArrayType.BYTES_PER_ELEMENT,S=c*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-S%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${m}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+S+I,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+k+S+I),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+S+I,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=c)}add(c,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=c,this.coords[this._pos++]=h,m}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return Rh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,h,m,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:k,nodeSize:S}=this,I=[0,x.length-1,0],M=[];for(;I.length;){const L=I.pop()||0,O=I.pop()||0,j=I.pop()||0;if(O-j<=S){for(let le=j;le<=O;le++){const ye=k[2*le],Be=k[2*le+1];ye>=c&&ye<=m&&Be>=h&&Be<=b&&M.push(x[le])}continue}const X=j+O>>1,Y=k[2*X],$=k[2*X+1];Y>=c&&Y<=m&&$>=h&&$<=b&&M.push(x[X]),(L===0?c<=Y:h<=$)&&(I.push(j),I.push(X-1),I.push(1-L)),(L===0?m>=Y:b>=$)&&(I.push(X+1),I.push(O),I.push(1-L))}return M}within(c,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:x,nodeSize:k}=this,S=[0,b.length-1,0],I=[],M=m*m;for(;S.length;){const L=S.pop()||0,O=S.pop()||0,j=S.pop()||0;if(O-j<=k){for(let le=j;le<=O;le++)mp(x[2*le],x[2*le+1],c,h)<=M&&I.push(b[le]);continue}const X=j+O>>1,Y=x[2*X],$=x[2*X+1];mp(Y,$,c,h)<=M&&I.push(b[X]),(L===0?c-m<=Y:h-m<=$)&&(S.push(j),S.push(X-1),S.push(1-L)),(L===0?c+m>=Y:h+m>=$)&&(S.push(X+1),S.push(O),S.push(1-L))}return I}}function Rh(u,c,h,m,b,x){if(b-m<=h)return;const k=m+b>>1;dp(u,c,k,m,b,x),Rh(u,c,h,m,k-1,1-x),Rh(u,c,h,k+1,b,1-x)}function dp(u,c,h,m,b,x){for(;b>m;){if(b-m>600){const M=b-m+1,L=h-m+1,O=Math.log(M),j=.5*Math.exp(2*O/3),X=.5*Math.sqrt(O*j*(M-j)/M)*(L-M/2<0?-1:1);dp(u,c,h,Math.max(m,Math.floor(h-L*j/M+X)),Math.min(b,Math.floor(h+(M-L)*j/M+X)),x)}const k=c[2*h+x];let S=m,I=b;for(Rc(u,c,m,h),c[2*b+x]>k&&Rc(u,c,m,b);S<I;){for(Rc(u,c,S,I),S++,I--;c[2*S+x]<k;)S++;for(;c[2*I+x]>k;)I--}c[2*m+x]===k?Rc(u,c,m,I):(I++,Rc(u,c,I,b)),I<=h&&(m=I+1),h<=I&&(b=I-1)}}function Rc(u,c,h,m){Oh(u,h,m),Oh(c,2*h,2*m),Oh(c,2*h+1,2*m+1)}function Oh(u,c,h){const m=u[c];u[c]=u[h],u[h]=m}function mp(u,c,h,m){const b=u-h,x=c-m;return b*b+x*x}var Fh;l.bg=void 0,(Fh=l.bg||(l.bg={})).create="create",Fh.load="load",Fh.fullLoad="fullLoad";let ef=null,Oc=[];const Bh=1e3/60,Nh="loadTime",Vh="fullLoadTime",rv={mark(u){performance.mark(u)},frame(u){const c=u;ef!=null&&Oc.push(c-ef),ef=c},clearMetrics(){ef=null,Oc=[],performance.clearMeasures(Nh),performance.clearMeasures(Vh);for(const u in l.bg)performance.clearMarks(l.bg[u])},getPerformanceMetrics(){performance.measure(Nh,l.bg.create,l.bg.load),performance.measure(Vh,l.bg.create,l.bg.fullLoad);const u=performance.getEntriesByName(Nh)[0].duration,c=performance.getEntriesByName(Vh)[0].duration,h=Oc.length,m=1/(Oc.reduce((x,k)=>x+k,0)/h/1e3),b=Oc.filter(x=>x>Bh).reduce((x,k)=>x+(k-Bh)/Bh,0);return{loadTime:u,fullLoadTime:c,fps:m,percentDroppedFrames:b/(h+b)*100,totalFrames:h}}};l.$=class extends B{},l.A=al,l.B=Xf,l.C=function(u){if(Jt==null){const c=u.navigator?u.navigator.userAgent:null;Jt=!!u.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Jt},l.D=Qt,l.E=Ti,l.F=class{constructor(u,c){this.target=u,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Kb(()=>this.process()),this.subscription=function(h,m,b,x){return h.addEventListener(m,b,!1),{unsubscribe:()=>{h.removeEventListener(m,b,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=ti(self)?u:window}registerMessageHandler(u,c){this.messageHandlers[u]=c}sendAsync(u,c){return new Promise((h,m)=>{const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[b]={resolve:h,reject:m},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[b];const S={id:b,type:"<cancel>",origin:location.origin,targetMapId:u.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const x=[],k=Object.assign(Object.assign({},u),{id:b,sourceMapId:this.mapId,origin:location.origin,data:po(u.data,x)});this.target.postMessage(k,{transfer:x})})}receive(u){const c=u.data,h=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!=="resource://android"&&location.origin!=="resource://android"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(ti(self)||c.mustQueue)return this.tasks[h]=c,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,c)}}process(){if(this.taskQueue.length===0)return;const u=this.taskQueue.shift(),c=this.tasks[u];delete this.tasks[u],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(u,c)}processTask(u,c){return o(this,void 0,void 0,function*(){if(c.type==="<response>"){const b=this.resolveRejects[u];return delete this.resolveRejects[u],b?void(c.error?b.reject(_o(c.error)):b.resolve(_o(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(u,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=_o(c.data),m=new AbortController;this.abortControllers[u]=m;try{const b=yield this.messageHandlers[c.type](c.sourceMapId,h,m);this.completeTask(u,null,b)}catch(b){this.completeTask(u,b)}})}completeTask(u,c,h){const m=[];delete this.abortControllers[u];const b={id:u,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?po(c):null,data:po(h,m)};this.target.postMessage(b,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.G=fi,l.H=function(){var u=new al(16);return al!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0),u[0]=1,u[5]=1,u[10]=1,u[15]=1,u},l.I=wh,l.J=function(u,c,h){var m,b,x,k,S,I,M,L,O,j,X,Y,$=h[0],le=h[1],ye=h[2];return c===u?(u[12]=c[0]*$+c[4]*le+c[8]*ye+c[12],u[13]=c[1]*$+c[5]*le+c[9]*ye+c[13],u[14]=c[2]*$+c[6]*le+c[10]*ye+c[14],u[15]=c[3]*$+c[7]*le+c[11]*ye+c[15]):(b=c[1],x=c[2],k=c[3],S=c[4],I=c[5],M=c[6],L=c[7],O=c[8],j=c[9],X=c[10],Y=c[11],u[0]=m=c[0],u[1]=b,u[2]=x,u[3]=k,u[4]=S,u[5]=I,u[6]=M,u[7]=L,u[8]=O,u[9]=j,u[10]=X,u[11]=Y,u[12]=m*$+S*le+O*ye+c[12],u[13]=b*$+I*le+j*ye+c[13],u[14]=x*$+M*le+X*ye+c[14],u[15]=k*$+L*le+Y*ye+c[15]),u},l.K=function(u,c,h){var m=h[0],b=h[1],x=h[2];return u[0]=c[0]*m,u[1]=c[1]*m,u[2]=c[2]*m,u[3]=c[3]*m,u[4]=c[4]*b,u[5]=c[5]*b,u[6]=c[6]*b,u[7]=c[7]*b,u[8]=c[8]*x,u[9]=c[9]*x,u[10]=c[10]*x,u[11]=c[11]*x,u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},l.L=Xd,l.M=function(u,c){const h={};for(let m=0;m<c.length;m++){const b=c[m];b in u&&(h[b]=u[b])}return h},l.N=Ao,l.O=qm,l.P=C,l.Q=Zm,l.R=Or,l.S=Fr,l.T=Ya,l.U=K,l.V=q,l.W=pt,l.X=wn,l.Y=T,l.Z=Dc,l._=o,l.a=li,l.a$=function(u,c){var h=u[0],m=u[1],b=u[2],x=u[3],k=u[4],S=u[5],I=u[6],M=u[7],L=u[8],O=u[9],j=u[10],X=u[11],Y=u[12],$=u[13],le=u[14],ye=u[15],Be=c[0],Se=c[1],De=c[2],et=c[3],bt=c[4],Zt=c[5],ui=c[6],Ut=c[7],Nt=c[8],ni=c[9],Kt=c[10],Ht=c[11],at=c[12],si=c[13],ii=c[14],gi=c[15];return Math.abs(h-Be)<=ir*Math.max(1,Math.abs(h),Math.abs(Be))&&Math.abs(m-Se)<=ir*Math.max(1,Math.abs(m),Math.abs(Se))&&Math.abs(b-De)<=ir*Math.max(1,Math.abs(b),Math.abs(De))&&Math.abs(x-et)<=ir*Math.max(1,Math.abs(x),Math.abs(et))&&Math.abs(k-bt)<=ir*Math.max(1,Math.abs(k),Math.abs(bt))&&Math.abs(S-Zt)<=ir*Math.max(1,Math.abs(S),Math.abs(Zt))&&Math.abs(I-ui)<=ir*Math.max(1,Math.abs(I),Math.abs(ui))&&Math.abs(M-Ut)<=ir*Math.max(1,Math.abs(M),Math.abs(Ut))&&Math.abs(L-Nt)<=ir*Math.max(1,Math.abs(L),Math.abs(Nt))&&Math.abs(O-ni)<=ir*Math.max(1,Math.abs(O),Math.abs(ni))&&Math.abs(j-Kt)<=ir*Math.max(1,Math.abs(j),Math.abs(Kt))&&Math.abs(X-Ht)<=ir*Math.max(1,Math.abs(X),Math.abs(Ht))&&Math.abs(Y-at)<=ir*Math.max(1,Math.abs(Y),Math.abs(at))&&Math.abs($-si)<=ir*Math.max(1,Math.abs($),Math.abs(si))&&Math.abs(le-ii)<=ir*Math.max(1,Math.abs(le),Math.abs(ii))&&Math.abs(ye-gi)<=ir*Math.max(1,Math.abs(ye),Math.abs(gi))},l.a0=Li,l.a1=Mh,l.a2=Ae,l.a3=u=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(h=>{c.onloadstart=()=>{h(c)};for(const m of u){const b=window.document.createElement("source");xe(m)||(c.crossOrigin="Anonymous"),b.src=m,c.appendChild(b)}})},l.a4=function(){return Ce++},l.a5=qt,l.a6=dl,l.a7=$l,l.a8=ua,l.a9=Jm,l.aA=function(u){if(u.type==="custom")return new Xb(u);switch(u.type){case"background":return new Gb(u);case"circle":return new zy(u);case"fill":return new Ky(u);case"fill-extrusion":return new ub(u);case"heatmap":return new Ly(u);case"hillshade":return new Oy(u);case"line":return new yb(u);case"raster":return new Wb(u);case"symbol":return new Ku(u)}},l.aB=de,l.aC=function(u,c){if(!u)return[{command:"setStyle",args:[c]}];let h=[];try{if(!Ne(u.version,c.version))return[{command:"setStyle",args:[c]}];Ne(u.center,c.center)||h.push({command:"setCenter",args:[c.center]}),Ne(u.zoom,c.zoom)||h.push({command:"setZoom",args:[c.zoom]}),Ne(u.bearing,c.bearing)||h.push({command:"setBearing",args:[c.bearing]}),Ne(u.pitch,c.pitch)||h.push({command:"setPitch",args:[c.pitch]}),Ne(u.sprite,c.sprite)||h.push({command:"setSprite",args:[c.sprite]}),Ne(u.glyphs,c.glyphs)||h.push({command:"setGlyphs",args:[c.glyphs]}),Ne(u.transition,c.transition)||h.push({command:"setTransition",args:[c.transition]}),Ne(u.light,c.light)||h.push({command:"setLight",args:[c.light]}),Ne(u.terrain,c.terrain)||h.push({command:"setTerrain",args:[c.terrain]}),Ne(u.sky,c.sky)||h.push({command:"setSky",args:[c.sky]}),Ne(u.projection,c.projection)||h.push({command:"setProjection",args:[c.projection]});const m={},b=[];(function(k,S,I,M){let L;for(L in S=S||{},k=k||{})Object.prototype.hasOwnProperty.call(k,L)&&(Object.prototype.hasOwnProperty.call(S,L)||ln(L,I,M));for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&(Object.prototype.hasOwnProperty.call(k,L)?Ne(k[L],S[L])||(k[L].type==="geojson"&&S[L].type==="geojson"&&ar(k,S,L)?Wt(I,{command:"setGeoJSONSourceData",args:[L,S[L].data]}):xn(L,S,I,M)):pi(L,S,I))})(u.sources,c.sources,b,m);const x=[];u.layers&&u.layers.forEach(k=>{"source"in k&&m[k.source]?h.push({command:"removeLayer",args:[k.id]}):x.push(k)}),h=h.concat(b),function(k,S,I){S=S||[];const M=(k=k||[]).map(Sn),L=S.map(Sn),O=k.reduce(qr,{}),j=S.reduce(qr,{}),X=M.slice(),Y=Object.create(null);let $,le,ye,Be,Se;for(let De=0,et=0;De<M.length;De++)$=M[De],Object.prototype.hasOwnProperty.call(j,$)?et++:(Wt(I,{command:"removeLayer",args:[$]}),X.splice(X.indexOf($,et),1));for(let De=0,et=0;De<L.length;De++)$=L[L.length-1-De],X[X.length-1-De]!==$&&(Object.prototype.hasOwnProperty.call(O,$)?(Wt(I,{command:"removeLayer",args:[$]}),X.splice(X.lastIndexOf($,X.length-et),1)):et++,Be=X[X.length-De],Wt(I,{command:"addLayer",args:[j[$],Be]}),X.splice(X.length-De,0,$),Y[$]=!0);for(let De=0;De<L.length;De++)if($=L[De],le=O[$],ye=j[$],!Y[$]&&!Ne(le,ye))if(Ne(le.source,ye.source)&&Ne(le["source-layer"],ye["source-layer"])&&Ne(le.type,ye.type)){for(Se in Dn(le.layout,ye.layout,I,$,null,"setLayoutProperty"),Dn(le.paint,ye.paint,I,$,null,"setPaintProperty"),Ne(le.filter,ye.filter)||Wt(I,{command:"setFilter",args:[$,ye.filter]}),Ne(le.minzoom,ye.minzoom)&&Ne(le.maxzoom,ye.maxzoom)||Wt(I,{command:"setLayerZoomRange",args:[$,ye.minzoom,ye.maxzoom]}),le)Object.prototype.hasOwnProperty.call(le,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Dn(le[Se],ye[Se],I,$,Se.slice(6),"setPaintProperty"):Ne(le[Se],ye[Se])||Wt(I,{command:"setLayerProperty",args:[$,Se,ye[Se]]}));for(Se in ye)Object.prototype.hasOwnProperty.call(ye,Se)&&!Object.prototype.hasOwnProperty.call(le,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?Dn(le[Se],ye[Se],I,$,Se.slice(6),"setPaintProperty"):Ne(le[Se],ye[Se])||Wt(I,{command:"setLayerProperty",args:[$,Se,ye[Se]]}))}else Wt(I,{command:"removeLayer",args:[$]}),Be=X[X.lastIndexOf($)+1],Wt(I,{command:"addLayer",args:[ye,Be]})}(x,c.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[c]}]}return h},l.aD=function(u){const c=[],h=u.id;return h===void 0&&c.push({message:`layers.${h}: missing required property "id"`}),u.render===void 0&&c.push({message:`layers.${h}: missing required method "render"`}),u.renderingMode&&u.renderingMode!=="2d"&&u.renderingMode!=="3d"&&c.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),c},l.aE=function u(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(let m=0;m<c.length;m++)if(!u(c[m],h[m]))return!1;return!0}if(typeof c=="object"&&c!==null&&h!==null){if(typeof h!="object"||Object.keys(c).length!==Object.keys(h).length)return!1;for(const m in c)if(!u(c[m],h[m]))return!1;return!0}return c===h},l.aF=je,l.aG=Ve,l.aH=class extends aa{constructor(u,c){super(u,c),this.current=0}set(u){this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},l.aI=Ou,l.aJ=class extends aa{constructor(u,c){super(u,c),this.current=Cy}set(u){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let c=1;c<16;c++)if(u[c]!==this.current[c]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}},l.aK=Fd,l.aL=Bd,l.aM=Wi,l.aN=class extends aa{constructor(u,c){super(u,c),this.current=[0,0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2]))}},l.aO=class extends aa{constructor(u,c){super(u,c),this.current=[0,0]}set(u){u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1]))}},l.aP=function(u,c,h,m,b,x,k){var S=1/(c-h),I=1/(m-b),M=1/(x-k);return u[0]=-2*S,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*I,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*M,u[11]=0,u[12]=(c+h)*S,u[13]=(b+m)*I,u[14]=(k+x)*M,u[15]=1,u},l.aQ=My,l.aR=class extends Ee{},l.aS=xb,l.aT=class extends Ue{},l.aU=ch,l.aV=function(u){return u<=1?1:Math.pow(2,Math.ceil(Math.log(u)/Math.LN2))},l.aW=$d,l.aX=On,l.aY=Rr,l.aZ=class extends $t{},l.a_=function(u,c){return u[0]===c[0]&&u[1]===c[1]&&u[2]===c[2]&&u[3]===c[3]&&u[4]===c[4]&&u[5]===c[5]&&u[6]===c[6]&&u[7]===c[7]&&u[8]===c[8]&&u[9]===c[9]&&u[10]===c[10]&&u[11]===c[11]&&u[12]===c[12]&&u[13]===c[13]&&u[14]===c[14]&&u[15]===c[15]},l.aa=function(u){const c={};if(u.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,b,x)=>{const k=b||x;return c[m]=!k||k.toLowerCase(),""}),c["max-age"]){const h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c},l.ab=function(u,c){const h=[];for(const m in u)m in c||h.push(m);return h},l.ac=se,l.ad=function(u,c,h){var m=Math.sin(h),b=Math.cos(h),x=c[0],k=c[1],S=c[2],I=c[3],M=c[4],L=c[5],O=c[6],j=c[7];return c!==u&&(u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[0]=x*b+M*m,u[1]=k*b+L*m,u[2]=S*b+O*m,u[3]=I*b+j*m,u[4]=M*b-x*m,u[5]=L*b-k*m,u[6]=O*b-S*m,u[7]=j*b-I*m,u},l.ae=function(u){var c=new al(16);return c[0]=u[0],c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=u[6],c[7]=u[7],c[8]=u[8],c[9]=u[9],c[10]=u[10],c[11]=u[11],c[12]=u[12],c[13]=u[13],c[14]=u[14],c[15]=u[15],c},l.af=Vu,l.ag=function(u,c){let h=0,m=0;if(u.kind==="constant")m=u.layoutSize;else if(u.kind!=="source"){const{interpolationType:b,minZoom:x,maxZoom:k}=u,S=b?se(er.interpolationFactor(b,c,x,k),0,1):0;u.kind==="camera"?m=$n.number(u.minSize,u.maxSize,S):h=S}return{uSizeT:h,uSize:m}},l.ai=function(u,{uSize:c,uSizeT:h},{lowerSize:m,upperSize:b}){return u.kind==="source"?m/ys:u.kind==="composite"?$n.number(m/ys,b/ys,h):c},l.aj=Sh,l.ak=function(u,c,h,m){const b=c.y-u.y,x=c.x-u.x,k=m.y-h.y,S=m.x-h.x,I=k*x-S*b;if(I===0)return null;const M=(S*(u.y-h.y)-k*(u.x-h.x))/I;return new C(u.x+M*x,u.y+M*b)},l.al=ep,l.am=Ud,l.an=oh,l.ao=function(u){let c=1/0,h=1/0,m=-1/0,b=-1/0;for(const x of u)c=Math.min(c,x.x),h=Math.min(h,x.y),m=Math.max(m,x.x),b=Math.max(b,x.y);return[c,h,m,b]},l.ap=kn,l.ar=Ch,l.as=function(u,c){var h=c[0],m=c[1],b=c[2],x=c[3],k=c[4],S=c[5],I=c[6],M=c[7],L=c[8],O=c[9],j=c[10],X=c[11],Y=c[12],$=c[13],le=c[14],ye=c[15],Be=h*S-m*k,Se=h*I-b*k,De=h*M-x*k,et=m*I-b*S,bt=m*M-x*S,Zt=b*M-x*I,ui=L*$-O*Y,Ut=L*le-j*Y,Nt=L*ye-X*Y,ni=O*le-j*$,Kt=O*ye-X*$,Ht=j*ye-X*le,at=Be*Ht-Se*Kt+De*ni+et*Nt-bt*Ut+Zt*ui;return at?(u[0]=(S*Ht-I*Kt+M*ni)*(at=1/at),u[1]=(b*Kt-m*Ht-x*ni)*at,u[2]=($*Zt-le*bt+ye*et)*at,u[3]=(j*bt-O*Zt-X*et)*at,u[4]=(I*Nt-k*Ht-M*Ut)*at,u[5]=(h*Ht-b*Nt+x*Ut)*at,u[6]=(le*De-Y*Zt-ye*Se)*at,u[7]=(L*Zt-j*De+X*Se)*at,u[8]=(k*Kt-S*Nt+M*ui)*at,u[9]=(m*Nt-h*Kt-x*ui)*at,u[10]=(Y*bt-$*De+ye*Be)*at,u[11]=(O*De-L*bt-X*Be)*at,u[12]=(S*Ut-k*ni-I*ui)*at,u[13]=(h*ni-m*Ut+b*ui)*at,u[14]=($*Se-Y*et-le*Be)*at,u[15]=(L*et-O*Se+j*Be)*at,u):null},l.at=Dh,l.au=kh,l.av=Lh,l.aw=function(){const u={},c=Fe.$version;for(const h in Fe.$root){const m=Fe.$root[h];if(m.required){let b=null;b=h==="version"?c:m.type==="array"?[]:{},b!=null&&(u[h]=b)}}return u},l.ax=dc,l.ay=Ot,l.az=function(u){u=u.slice();const c=Object.create(null);for(let h=0;h<u.length;h++)c[u[h].id]=u[h];for(let h=0;h<u.length;h++)"ref"in u[h]&&(u[h]=hn(u[h],c[u[h].ref]));return u},l.b=We,l.b0=function(u,c){return u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[4]=c[4],u[5]=c[5],u[6]=c[6],u[7]=c[7],u[8]=c[8],u[9]=c[9],u[10]=c[10],u[11]=c[11],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15],u},l.b1=function(u,c,h){return u[0]=c[0]*h[0],u[1]=c[1]*h[1],u[2]=c[2]*h[2],u[3]=c[3]*h[3],u},l.b2=function(u,c){return u[0]*c[0]+u[1]*c[1]+u[2]*c[2]+u[3]*c[3]},l.b3=pe,l.b4=Wm,l.b5=Gm,l.b6=function(u,c,h,m,b){var x,k=1/Math.tan(c/2);return u[0]=k/h,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=k,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=-1,u[12]=0,u[13]=0,u[15]=0,b!=null&&b!==1/0?(u[10]=(b+m)*(x=1/(m-b)),u[14]=2*b*m*x):(u[10]=-1,u[14]=-2*m),u},l.b7=function(u,c,h){var m=Math.sin(h),b=Math.cos(h),x=c[4],k=c[5],S=c[6],I=c[7],M=c[8],L=c[9],O=c[10],j=c[11];return c!==u&&(u[0]=c[0],u[1]=c[1],u[2]=c[2],u[3]=c[3],u[12]=c[12],u[13]=c[13],u[14]=c[14],u[15]=c[15]),u[4]=x*b+M*m,u[5]=k*b+L*m,u[6]=S*b+O*m,u[7]=I*b+j*m,u[8]=M*b-x*m,u[9]=L*b-k*m,u[10]=O*b-S*m,u[11]=j*b-I*m,u},l.b8=ie,l.b9=oe,l.bA=bm,l.bB=function(u){return u.message===di},l.bC=ao,l.bD=hr,l.ba=function(u){return u*Math.PI/180},l.bb=function(u,c){const{x:h,y:m}=Dc.fromLngLat(c);return!(u<0||u>25||m<0||m>=1||h<0||h>=1)},l.bc=function(u,c){return u[0]=c[0],u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=c[1],u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=c[2],u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,u},l.bd=class extends R{},l.be=Eh,l.bf=rv,l.bh=ai,l.bi=function(u,c){li.REGISTERED_PROTOCOLS[u]=c},l.bj=function(u){delete li.REGISTERED_PROTOCOLS[u]},l.bk=function(u,c){const h={};for(let b=0;b<u.length;b++){const x=c&&c[u[b].id]||Cu(u[b]);c&&(c[u[b].id]=x);let k=h[x];k||(k=h[x]=[]),k.push(u[b])}const m=[];for(const b in h)m.push(h[b]);return m},l.bl=Xt,l.bm=Km,l.bn=Ym,l.bo=Am,l.bp=function(u){u.bucket.createArrays(),u.bucket.tilePixelRatio=wn/(512*u.bucket.overscaling),u.bucket.compareText={},u.bucket.iconsNeedLinear=!1;const c=u.bucket.layers[0],h=c.layout,m=c._unevaluatedLayout._values,b={layoutIconSize:m["icon-size"].possiblyEvaluate(new tn(u.bucket.zoom+1),u.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new tn(u.bucket.zoom+1),u.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new tn(18))};if(u.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:L}=u.bucket.textSizeData;b.compositeTextSizes=[m["text-size"].possiblyEvaluate(new tn(M),u.canonical),m["text-size"].possiblyEvaluate(new tn(L),u.canonical)]}if(u.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:L}=u.bucket.iconSizeData;b.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new tn(M),u.canonical),m["icon-size"].possiblyEvaluate(new tn(L),u.canonical)]}const x=h.get("text-line-height")*kn,k=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",S=h.get("text-keep-upright"),I=h.get("text-size");for(const M of u.bucket.features){const L=h.get("text-font").evaluate(M,{},u.canonical).join(","),O=I.evaluate(M,{},u.canonical),j=b.layoutTextSize.evaluate(M,{},u.canonical),X=b.layoutIconSize.evaluate(M,{},u.canonical),Y={horizontal:{},vertical:void 0},$=M.text;let le,ye=[0,0];if($){const De=$.toString(),et=h.get("text-letter-spacing").evaluate(M,{},u.canonical)*kn,bt=Kf(De)?et:0,Zt=h.get("text-anchor").evaluate(M,{},u.canonical),ui=cp(c,M,u.canonical);if(!ui){const Kt=h.get("text-radial-offset").evaluate(M,{},u.canonical);ye=Kt?lp(Zt,[Kt*kn,zh]):h.get("text-offset").evaluate(M,{},u.canonical).map(Ht=>Ht*kn)}let Ut=k?"center":h.get("text-justify").evaluate(M,{},u.canonical);const Nt=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(M,{},u.canonical)*kn:1/0,ni=()=>{u.bucket.allowVerticalPlacement&&mc(De)&&(Y.vertical=Hu($,u.glyphMap,u.glyphPositions,u.imagePositions,L,Nt,x,Zt,"left",bt,ye,l.ah.vertical,!0,j,O))};if(!k&&ui){const Kt=new Set;if(Ut==="auto")for(let at=0;at<ui.values.length;at+=2)Kt.add(Dh(ui.values[at]));else Kt.add(Ut);let Ht=!1;for(const at of Kt)if(!Y.horizontal[at])if(Ht)Y.horizontal[at]=Y.horizontal[0];else{const si=Hu($,u.glyphMap,u.glyphPositions,u.imagePositions,L,Nt,x,"center",at,bt,ye,l.ah.horizontal,!1,j,O);si&&(Y.horizontal[at]=si,Ht=si.positionedLines.length===1)}ni()}else{Ut==="auto"&&(Ut=Dh(Zt));const Kt=Hu($,u.glyphMap,u.glyphPositions,u.imagePositions,L,Nt,x,Zt,Ut,bt,ye,l.ah.horizontal,!1,j,O);Kt&&(Y.horizontal[Ut]=Kt),ni(),mc(De)&&k&&S&&(Y.vertical=Hu($,u.glyphMap,u.glyphPositions,u.imagePositions,L,Nt,x,Zt,Ut,bt,ye,l.ah.vertical,!1,j,O))}}let Be=!1;if(M.icon&&M.icon.name){const De=u.imageMap[M.icon.name];De&&(le=Vb(u.imagePositions[M.icon.name],h.get("icon-offset").evaluate(M,{},u.canonical),h.get("icon-anchor").evaluate(M,{},u.canonical)),Be=!!De.sdf,u.bucket.sdfIcons===void 0?u.bucket.sdfIcons=Be:u.bucket.sdfIcons!==Be&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==u.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(u.bucket.iconsNeedLinear=!0))}const Se=fp(Y.horizontal)||Y.vertical;u.bucket.iconsInText=!!Se&&Se.iconsInText,(Se||le)&&iv(u.bucket,M,Y,le,u.imageMap,b,j,X,ye,Be,u.canonical)}u.showCollisionBoxes&&u.bucket.generateCollisionDebugBuffers()},l.bq=gh,l.br=mh,l.bs=_h,l.bt=So,l.bu=bh,l.bv=class{constructor(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let u=performance.getEntriesByName(this._marks.measure);return u.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),u=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),u}},l.bw=function(u,c,h,m,b){return o(this,void 0,void 0,function*(){if(q())try{return yield pt(u,c,h,m,b)}catch{}return function(x,k,S,I,M){const L=x.width,O=x.height;xt&&At||(xt=new OffscreenCanvas(L,O),At=xt.getContext("2d",{willReadFrequently:!0})),xt.width=L,xt.height=O,At.drawImage(x,0,0,L,O);const j=At.getImageData(k,S,I,M);return At.clearRect(0,0,L,O),j.data}(u,c,h,m,b)})},l.bx=Xm,l.by=f,l.bz=p,l.c=Yt,l.d=u=>o(void 0,void 0,void 0,function*(){if(u.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(u)],{type:"image/png"});try{return createImageBitmap(c)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.e=Ie,l.f=u=>new Promise((c,h)=>{const m=new Image;m.onload=()=>{c(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Le})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const b=new Blob([new Uint8Array(u)],{type:"image/png"});m.src=u.byteLength?URL.createObjectURL(b):Le}),l.g=vt,l.h=(u,c)=>ft(Ie(u,{type:"json"}),c),l.i=ti,l.j=ri,l.k=Mt,l.l=(u,c)=>ft(Ie(u,{type:"arrayBuffer"}),c),l.m=ft,l.n=function(u){return new bh(u).readFields(Db,[])},l.o=kc,l.p=Im,l.q=w,l.r=Wf,l.s=xe,l.t=fc,l.u=Ns,l.v=Fe,l.w=Re,l.x=function([u,c,h]){return c+=90,c*=Math.PI/180,h*=Math.PI/180,{x:u*Math.cos(c)*Math.sin(h),y:u*Math.sin(c)*Math.sin(h),z:u*Math.cos(h)}},l.y=$n,l.z=tn}),r("worker",["./shared"],function(l){class o{constructor(W){this.keyCache={},W&&this.replace(W)}replace(W){this._layerConfigs={},this._layers={},this.update(W,[])}update(W,H){for(const me of W){this._layerConfigs[me.id]=me;const Te=this._layers[me.id]=l.aA(me);Te._featureFilter=l.a7(Te.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of H)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const te=l.bk(Object.values(this._layerConfigs),this.keyCache);for(const me of te){const Te=me.map(Xe=>this._layers[Xe.id]),Pe=Te[0];if(Pe.visibility==="none")continue;const Oe=Pe.source||"";let we=this.familiesBySource[Oe];we||(we=this.familiesBySource[Oe]={});const tt=Pe.sourceLayer||"_geojsonTileLayer";let mt=we[tt];mt||(mt=we[tt]=[]),mt.push(Te)}}}class f{constructor(W){const H={},te=[];for(const Oe in W){const we=W[Oe],tt=H[Oe]={};for(const mt in we){const Xe=we[+mt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Et={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};te.push(Et),tt[mt]={rect:Et,metrics:Xe.metrics}}}const{w:me,h:Te}=l.p(te),Pe=new l.o({width:me||1,height:Te||1});for(const Oe in W){const we=W[Oe];for(const tt in we){const mt=we[+tt];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const Xe=H[Oe][tt].rect;l.o.copy(mt.bitmap,Pe,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},mt.bitmap)}}this.image=Pe,this.positions=H}}l.bl("GlyphAtlas",f);class p{constructor(W){this.tileID=new l.S(W.tileID.overscaledZ,W.tileID.wrap,W.tileID.canonical.z,W.tileID.canonical.x,W.tileID.canonical.y),this.uid=W.uid,this.zoom=W.zoom,this.pixelRatio=W.pixelRatio,this.tileSize=W.tileSize,this.source=W.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=W.showCollisionBoxes,this.collectResourceTiming=!!W.collectResourceTiming,this.returnDependencies=!!W.returnDependencies,this.promoteId=W.promoteId,this.inFlightDependencies=[]}parse(W,H,te,me){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=W,this.collisionBoxArray=new l.a5;const Te=new l.bm(Object.keys(W.layers).sort()),Pe=new l.bn(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];const Oe={},we={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},tt=H.familiesBySource[this.source];for(const Ii in tt){const Hi=W.layers[Ii];if(!Hi)continue;Hi.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ii}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const an=Te.encode(Ii),Tn=[];for(let Pn=0;Pn<Hi.length;Pn++){const Zn=Hi.feature(Pn),Js=Pe.getId(Zn,Ii);Tn.push({feature:Zn,id:Js,index:Pn,sourceLayerIndex:an})}for(const Pn of tt[Ii]){const Zn=Pn[0];Zn.source!==this.source&&l.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.minzoom&&this.zoom<Math.floor(Zn.minzoom)||Zn.maxzoom&&this.zoom>=Zn.maxzoom||Zn.visibility!=="none"&&(g(Pn,this.zoom,te),(Oe[Zn.id]=Zn.createBucket({index:Pe.bucketLayerIDs.length,layers:Pn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:an,sourceID:this.source})).populate(Tn,we,this.tileID.canonical),Pe.bucketLayerIDs.push(Pn.map(Js=>Js.id)))}}const mt=l.aF(we.glyphDependencies,Ii=>Object.keys(Ii).map(Number));this.inFlightDependencies.forEach(Ii=>Ii==null?void 0:Ii.abort()),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(mt).length){const Ii=new AbortController;this.inFlightDependencies.push(Ii),Xe=me.sendAsync({type:"GG",data:{stacks:mt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ii)}const Et=Object.keys(we.iconDependencies);let oi=Promise.resolve({});if(Et.length){const Ii=new AbortController;this.inFlightDependencies.push(Ii),oi=me.sendAsync({type:"GI",data:{icons:Et,source:this.source,tileID:this.tileID,type:"icons"}},Ii)}const ci=Object.keys(we.patternDependencies);let Ri=Promise.resolve({});if(ci.length){const Ii=new AbortController;this.inFlightDependencies.push(Ii),Ri=me.sendAsync({type:"GI",data:{icons:ci,source:this.source,tileID:this.tileID,type:"patterns"}},Ii)}const[vi,Oi,Mi]=yield Promise.all([Xe,oi,Ri]),bn=new f(vi),un=new l.bo(Oi,Mi);for(const Ii in Oe){const Hi=Oe[Ii];Hi instanceof l.a6?(g(Hi.layers,this.zoom,te),l.bp({bucket:Hi,glyphMap:vi,glyphPositions:bn.positions,imageMap:Oi,imagePositions:un.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Hi.hasPattern&&(Hi instanceof l.bq||Hi instanceof l.br||Hi instanceof l.bs)&&(g(Hi.layers,this.zoom,te),Hi.addFeatures(we,this.tileID.canonical,un.patternPositions))}return this.status="done",{buckets:Object.values(Oe).filter(Ii=>!Ii.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:bn.image,imageAtlas:un,glyphMap:this.returnDependencies?vi:null,iconMap:this.returnDependencies?Oi:null,glyphPositions:this.returnDependencies?bn.positions:null}})}}function g(ge,W,H){const te=new l.z(W);for(const me of ge)me.recalculate(te,H)}class C{constructor(W,H,te){this.actor=W,this.layerIndex=H,this.availableImages=te,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(W,H){return l._(this,void 0,void 0,function*(){const te=yield l.l(W.request,H);try{return{vectorTile:new l.bt.VectorTile(new l.bu(te.data)),rawData:te.data,cacheControl:te.cacheControl,expires:te.expires}}catch(me){const Te=new Uint8Array(te.data);let Pe=`Unable to parse the tile at ${W.request.url}, `;throw Pe+=Te[0]===31&&Te[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.message}`,new Error(Pe)}})}loadTile(W){return l._(this,void 0,void 0,function*(){const H=W.uid,te=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.bv(W.request),me=new p(W);this.loading[H]=me;const Te=new AbortController;me.abort=Te;try{const Pe=yield this.loadVectorTile(W,Te);if(delete this.loading[H],!Pe)return null;const Oe=Pe.rawData,we={};Pe.expires&&(we.expires=Pe.expires),Pe.cacheControl&&(we.cacheControl=Pe.cacheControl);const tt={};if(te){const Xe=te.finish();Xe&&(tt.resourceTiming=JSON.parse(JSON.stringify(Xe)))}me.vectorTile=Pe.vectorTile;const mt=me.parse(Pe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=me,this.fetching[H]={rawTileData:Oe,cacheControl:we,resourceTiming:tt};try{const Xe=yield mt;return l.e({rawTileData:Oe.slice(0)},Xe,we,tt)}finally{delete this.fetching[H]}}catch(Pe){throw delete this.loading[H],me.status="done",this.loaded[H]=me,Pe}})}reloadTile(W){return l._(this,void 0,void 0,function*(){const H=W.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const te=this.loaded[H];if(te.showCollisionBoxes=W.showCollisionBoxes,te.status==="parsing"){const me=yield te.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor);let Te;if(this.fetching[H]){const{rawTileData:Pe,cacheControl:Oe,resourceTiming:we}=this.fetching[H];delete this.fetching[H],Te=l.e({rawTileData:Pe.slice(0)},me,Oe,we)}else Te=me;return Te}if(te.status==="done"&&te.vectorTile)return te.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(W){return l._(this,void 0,void 0,function*(){const H=this.loading,te=W.uid;H&&H[te]&&H[te].abort&&(H[te].abort.abort(),delete H[te])})}removeTile(W){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[W.uid]&&delete this.loaded[W.uid]})}}class A{constructor(){this.loaded={}}loadTile(W){return l._(this,void 0,void 0,function*(){const{uid:H,encoding:te,rawImageData:me,redFactor:Te,greenFactor:Pe,blueFactor:Oe,baseShift:we}=W,tt=me.width+2,mt=me.height+2,Xe=l.b(me)?new l.R({width:tt,height:mt},yield l.bw(me,-1,-1,tt,mt)):me,Et=new l.bx(H,Xe,te,Te,Pe,Oe,we);return this.loaded=this.loaded||{},this.loaded[H]=Et,Et})}removeTile(W){const H=this.loaded,te=W.uid;H&&H[te]&&delete H[te]}}function V(ge,W){if(ge.length!==0){U(ge[0],W);for(var H=1;H<ge.length;H++)U(ge[H],!W)}}function U(ge,W){for(var H=0,te=0,me=0,Te=ge.length,Pe=Te-1;me<Te;Pe=me++){var Oe=(ge[me][0]-ge[Pe][0])*(ge[Pe][1]+ge[me][1]),we=H+Oe;te+=Math.abs(H)>=Math.abs(Oe)?H-we+Oe:Oe-we+H,H=we}H+te>=0!=!!W&&ge.reverse()}var G=l.by(function ge(W,H){var te,me=W&&W.type;if(me==="FeatureCollection")for(te=0;te<W.features.length;te++)ge(W.features[te],H);else if(me==="GeometryCollection")for(te=0;te<W.geometries.length;te++)ge(W.geometries[te],H);else if(me==="Feature")ge(W.geometry,H);else if(me==="Polygon")V(W.coordinates,H);else if(me==="MultiPolygon")for(te=0;te<W.coordinates.length;te++)V(W.coordinates[te],H);return W});const Z=l.bt.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},q=l.bz,ie=l.bt.VectorTileFeature,oe=se;function se(ge,W){this.options=W||{},this.features=ge,this.length=ge.length}function pe(ge,W){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=W||4096}se.prototype.feature=function(ge){return new pe(this.features[ge],this.options.extent)},pe.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var W=0;W<ge.length;W++){for(var H=ge[W],te=[],me=0;me<H.length;me++)te.push(new q(H[me][0],H[me][1]));this.geometry.push(te)}return this.geometry},pe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,W=1/0,H=-1/0,te=1/0,me=-1/0,Te=0;Te<ge.length;Te++)for(var Pe=ge[Te],Oe=0;Oe<Pe.length;Oe++){var we=Pe[Oe];W=Math.min(W,we.x),H=Math.max(H,we.x),te=Math.min(te,we.y),me=Math.max(me,we.y)}return[W,te,H,me]},pe.prototype.toGeoJSON=ie.prototype.toGeoJSON;var Ie=l.bA,Ce=oe;function je(ge){var W=new Ie;return function(H,te){for(var me in H.layers)te.writeMessage(3,Ve,H.layers[me])}(ge,W),W.finish()}function Ve(ge,W){var H;W.writeVarintField(15,ge.version||1),W.writeStringField(1,ge.name||""),W.writeVarintField(5,ge.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<ge.length;H++)te.feature=ge.feature(H),W.writeMessage(2,de,te);var me=te.keys;for(H=0;H<me.length;H++)W.writeStringField(3,me[H]);var Te=te.values;for(H=0;H<Te.length;H++)W.writeMessage(4,Jt,Te[H])}function de(ge,W){var H=ge.feature;H.id!==void 0&&W.writeVarintField(1,H.id),W.writeMessage(2,Me,ge),W.writeVarintField(3,H.type),W.writeMessage(4,ti,H)}function Me(ge,W){var H=ge.feature,te=ge.keys,me=ge.values,Te=ge.keycache,Pe=ge.valuecache;for(var Oe in H.properties){var we=H.properties[Oe],tt=Te[Oe];if(we!==null){tt===void 0&&(te.push(Oe),Te[Oe]=tt=te.length-1),W.writeVarint(tt);var mt=typeof we;mt!=="string"&&mt!=="boolean"&&mt!=="number"&&(we=JSON.stringify(we));var Xe=mt+":"+we,Et=Pe[Xe];Et===void 0&&(me.push(we),Pe[Xe]=Et=me.length-1),W.writeVarint(Et)}}}function Re(ge,W){return(W<<3)+(7&ge)}function Rt(ge){return ge<<1^ge>>31}function ti(ge,W){for(var H=ge.loadGeometry(),te=ge.type,me=0,Te=0,Pe=H.length,Oe=0;Oe<Pe;Oe++){var we=H[Oe],tt=1;te===1&&(tt=we.length),W.writeVarint(Re(1,tt));for(var mt=te===3?we.length-1:we.length,Xe=0;Xe<mt;Xe++){Xe===1&&te!==1&&W.writeVarint(Re(2,mt-1));var Et=we[Xe].x-me,oi=we[Xe].y-Te;W.writeVarint(Rt(Et)),W.writeVarint(Rt(oi)),me+=Et,Te+=oi}te===3&&W.writeVarint(Re(7,1))}}function Jt(ge,W){var H=typeof ge;H==="string"?W.writeStringField(1,ge):H==="boolean"?W.writeBooleanField(7,ge):H==="number"&&(ge%1!=0?W.writeDoubleField(3,ge):ge<0?W.writeSVarintField(6,ge):W.writeVarintField(5,ge))}K.exports=je,K.exports.fromVectorTileJs=je,K.exports.fromGeojsonVt=function(ge,W){W=W||{};var H={};for(var te in ge)H[te]=new Ce(ge[te].features,W),H[te].name=te,H[te].version=W.version,H[te].extent=W.extent;return je({layers:H})},K.exports.GeoJSONWrapper=Ce;var We=l.by(K.exports);const Le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ge=>ge},pt=Math.fround||(xt=new Float32Array(1),ge=>(xt[0]=+ge,xt[0]));var xt;const At=3,di=5,Yt=6;class li{constructor(W){this.options=Object.assign(Object.create(Le),W),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(W){const{log:H,minZoom:te,maxZoom:me}=this.options;H&&console.time("total time");const Te=`prepare ${W.length} points`;H&&console.time(Te),this.points=W;const Pe=[];for(let we=0;we<W.length;we++){const tt=W[we];if(!tt.geometry)continue;const[mt,Xe]=tt.geometry.coordinates,Et=pt(ai(mt)),oi=pt(Ot(Xe));Pe.push(Et,oi,1/0,we,-1,1),this.options.reduce&&Pe.push(0)}let Oe=this.trees[me+1]=this._createTree(Pe);H&&console.timeEnd(Te);for(let we=me;we>=te;we--){const tt=+Date.now();Oe=this.trees[we]=this._createTree(this._cluster(Oe,we)),H&&console.log("z%d: %d clusters in %dms",we,Oe.numItems,+Date.now()-tt)}return H&&console.timeEnd("total time"),this}getClusters(W,H){let te=((W[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,W[1]));let Te=W[2]===180?180:((W[2]+180)%360+360)%360-180;const Pe=Math.max(-90,Math.min(90,W[3]));if(W[2]-W[0]>=360)te=-180,Te=180;else if(te>Te){const Xe=this.getClusters([te,me,180,Pe],H),Et=this.getClusters([-180,me,Te,Pe],H);return Xe.concat(Et)}const Oe=this.trees[this._limitZoom(H)],we=Oe.range(ai(te),Ot(Pe),ai(Te),Ot(me)),tt=Oe.data,mt=[];for(const Xe of we){const Et=this.stride*Xe;mt.push(tt[Et+di]>1?vt(tt,Et,this.clusterProps):this.points[tt[Et+At]])}return mt}getChildren(W){const H=this._getOriginId(W),te=this._getOriginZoom(W),me="No cluster with the specified id.",Te=this.trees[te];if(!Te)throw new Error(me);const Pe=Te.data;if(H*this.stride>=Pe.length)throw new Error(me);const Oe=this.options.radius/(this.options.extent*Math.pow(2,te-1)),we=Te.within(Pe[H*this.stride],Pe[H*this.stride+1],Oe),tt=[];for(const mt of we){const Xe=mt*this.stride;Pe[Xe+4]===W&&tt.push(Pe[Xe+di]>1?vt(Pe,Xe,this.clusterProps):this.points[Pe[Xe+At]])}if(tt.length===0)throw new Error(me);return tt}getLeaves(W,H,te){const me=[];return this._appendLeaves(me,W,H=H||10,te=te||0,0),me}getTile(W,H,te){const me=this.trees[this._limitZoom(W)],Te=Math.pow(2,W),{extent:Pe,radius:Oe}=this.options,we=Oe/Pe,tt=(te-we)/Te,mt=(te+1+we)/Te,Xe={features:[]};return this._addTileFeatures(me.range((H-we)/Te,tt,(H+1+we)/Te,mt),me.data,H,te,Te,Xe),H===0&&this._addTileFeatures(me.range(1-we/Te,tt,1,mt),me.data,Te,te,Te,Xe),H===Te-1&&this._addTileFeatures(me.range(0,tt,we/Te,mt),me.data,-1,te,Te,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(W){let H=this._getOriginZoom(W)-1;for(;H<=this.options.maxZoom;){const te=this.getChildren(W);if(H++,te.length!==1)break;W=te[0].properties.cluster_id}return H}_appendLeaves(W,H,te,me,Te){const Pe=this.getChildren(H);for(const Oe of Pe){const we=Oe.properties;if(we&&we.cluster?Te+we.point_count<=me?Te+=we.point_count:Te=this._appendLeaves(W,we.cluster_id,te,me,Te):Te<me?Te++:W.push(Oe),W.length===te)break}return Te}_createTree(W){const H=new l.av(W.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<W.length;te+=this.stride)H.add(W[te],W[te+1]);return H.finish(),H.data=W,H}_addTileFeatures(W,H,te,me,Te,Pe){for(const Oe of W){const we=Oe*this.stride,tt=H[we+di]>1;let mt,Xe,Et;if(tt)mt=fi(H,we,this.clusterProps),Xe=H[we],Et=H[we+1];else{const Ri=this.points[H[we+At]];mt=Ri.properties;const[vi,Oi]=Ri.geometry.coordinates;Xe=ai(vi),Et=Ot(Oi)}const oi={type:1,geometry:[[Math.round(this.options.extent*(Xe*Te-te)),Math.round(this.options.extent*(Et*Te-me))]],tags:mt};let ci;ci=tt||this.options.generateId?H[we+At]:this.points[H[we+At]].id,ci!==void 0&&(oi.id=ci),Pe.features.push(oi)}}_limitZoom(W){return Math.max(this.options.minZoom,Math.min(Math.floor(+W),this.options.maxZoom+1))}_cluster(W,H){const{radius:te,extent:me,reduce:Te,minPoints:Pe}=this.options,Oe=te/(me*Math.pow(2,H)),we=W.data,tt=[],mt=this.stride;for(let Xe=0;Xe<we.length;Xe+=mt){if(we[Xe+2]<=H)continue;we[Xe+2]=H;const Et=we[Xe],oi=we[Xe+1],ci=W.within(we[Xe],we[Xe+1],Oe),Ri=we[Xe+di];let vi=Ri;for(const Oi of ci){const Mi=Oi*mt;we[Mi+2]>H&&(vi+=we[Mi+di])}if(vi>Ri&&vi>=Pe){let Oi,Mi=Et*Ri,bn=oi*Ri,un=-1;const Ii=((Xe/mt|0)<<5)+(H+1)+this.points.length;for(const Hi of ci){const an=Hi*mt;if(we[an+2]<=H)continue;we[an+2]=H;const Tn=we[an+di];Mi+=we[an]*Tn,bn+=we[an+1]*Tn,we[an+4]=Ii,Te&&(Oi||(Oi=this._map(we,Xe,!0),un=this.clusterProps.length,this.clusterProps.push(Oi)),Te(Oi,this._map(we,an)))}we[Xe+4]=Ii,tt.push(Mi/vi,bn/vi,1/0,Ii,-1,vi),Te&&tt.push(un)}else{for(let Oi=0;Oi<mt;Oi++)tt.push(we[Xe+Oi]);if(vi>1)for(const Oi of ci){const Mi=Oi*mt;if(!(we[Mi+2]<=H)){we[Mi+2]=H;for(let bn=0;bn<mt;bn++)tt.push(we[Mi+bn])}}}}return tt}_getOriginId(W){return W-this.points.length>>5}_getOriginZoom(W){return(W-this.points.length)%32}_map(W,H,te){if(W[H+di]>1){const Pe=this.clusterProps[W[H+Yt]];return te?Object.assign({},Pe):Pe}const me=this.points[W[H+At]].properties,Te=this.options.map(me);return te&&Te===me?Object.assign({},Te):Te}}function vt(ge,W,H){return{type:"Feature",id:ge[W+At],properties:fi(ge,W,H),geometry:{type:"Point",coordinates:[(te=ge[W],360*(te-.5)),ft(ge[W+1])]}};var te}function fi(ge,W,H){const te=ge[W+di],me=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,Te=ge[W+Yt],Pe=Te===-1?{}:Object.assign({},H[Te]);return Object.assign(Pe,{cluster:!0,cluster_id:ge[W+At],point_count:te,point_count_abbreviated:me})}function ai(ge){return ge/360+.5}function Ot(ge){const W=Math.sin(ge*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function ft(ge){const W=(180-360*ge)*Math.PI/180;return 360*Math.atan(Math.exp(W))/Math.PI-90}function xe(ge,W,H,te){let me=te;const Te=W+(H-W>>1);let Pe,Oe=H-W;const we=ge[W],tt=ge[W+1],mt=ge[H],Xe=ge[H+1];for(let Et=W+3;Et<H;Et+=3){const oi=Ni(ge[Et],ge[Et+1],we,tt,mt,Xe);if(oi>me)Pe=Et,me=oi;else if(oi===me){const ci=Math.abs(Et-Te);ci<Oe&&(Pe=Et,Oe=ci)}}me>te&&(Pe-W>3&&xe(ge,W,Pe,te),ge[Pe+2]=me,H-Pe>3&&xe(ge,Pe,H,te))}function Ni(ge,W,H,te,me,Te){let Pe=me-H,Oe=Te-te;if(Pe!==0||Oe!==0){const we=((ge-H)*Pe+(W-te)*Oe)/(Pe*Pe+Oe*Oe);we>1?(H=me,te=Te):we>0&&(H+=Pe*we,te+=Oe*we)}return Pe=ge-H,Oe=W-te,Pe*Pe+Oe*Oe}function dt(ge,W,H,te){const me={id:ge??null,type:W,geometry:H,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(W==="Point"||W==="MultiPoint"||W==="LineString")Mt(me,H);else if(W==="Polygon")Mt(me,H[0]);else if(W==="MultiLineString")for(const Te of H)Mt(me,Te);else if(W==="MultiPolygon")for(const Te of H)Mt(me,Te[0]);return me}function Mt(ge,W){for(let H=0;H<W.length;H+=3)ge.minX=Math.min(ge.minX,W[H]),ge.minY=Math.min(ge.minY,W[H+1]),ge.maxX=Math.max(ge.maxX,W[H]),ge.maxY=Math.max(ge.maxY,W[H+1])}function ri(ge,W,H,te){if(!W.geometry)return;const me=W.geometry.coordinates;if(me&&me.length===0)return;const Te=W.geometry.type,Pe=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2);let Oe=[],we=W.id;if(H.promoteId?we=W.properties[H.promoteId]:H.generateId&&(we=te||0),Te==="Point")Ti(me,Oe);else if(Te==="MultiPoint")for(const tt of me)Ti(tt,Oe);else if(Te==="LineString")Fe(me,Oe,Pe,!1);else if(Te==="MultiLineString"){if(H.lineMetrics){for(const tt of me)Oe=[],Fe(tt,Oe,Pe,!1),ge.push(dt(we,"LineString",Oe,W.properties));return}ot(me,Oe,Pe,!1)}else if(Te==="Polygon")ot(me,Oe,Pe,!0);else{if(Te!=="MultiPolygon"){if(Te==="GeometryCollection"){for(const tt of W.geometry.geometries)ri(ge,{id:we,geometry:tt,properties:W.properties},H,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of me){const mt=[];ot(tt,mt,Pe,!0),Oe.push(mt)}}ge.push(dt(we,Te,Oe,W.properties))}function Ti(ge,W){W.push(hn(ge[0]),Ne(ge[1]),0)}function Fe(ge,W,H,te){let me,Te,Pe=0;for(let we=0;we<ge.length;we++){const tt=hn(ge[we][0]),mt=Ne(ge[we][1]);W.push(tt,mt,0),we>0&&(Pe+=te?(me*mt-tt*Te)/2:Math.sqrt(Math.pow(tt-me,2)+Math.pow(mt-Te,2))),me=tt,Te=mt}const Oe=W.length-3;W[2]=1,xe(W,0,Oe,H),W[Oe+2]=1,W.size=Math.abs(Pe),W.start=0,W.end=W.size}function ot(ge,W,H,te){for(let me=0;me<ge.length;me++){const Te=[];Fe(ge[me],Te,H,te),W.push(Te)}}function hn(ge){return ge/360+.5}function Ne(ge){const W=Math.sin(ge*Math.PI/180),H=.5-.25*Math.log((1+W)/(1-W))/Math.PI;return H<0?0:H>1?1:H}function Wt(ge,W,H,te,me,Te,Pe,Oe){if(te/=W,Te>=(H/=W)&&Pe<te)return ge;if(Pe<H||Te>=te)return null;const we=[];for(const tt of ge){const mt=tt.geometry;let Xe=tt.type;const Et=me===0?tt.minX:tt.minY,oi=me===0?tt.maxX:tt.maxY;if(Et>=H&&oi<te){we.push(tt);continue}if(oi<H||Et>=te)continue;let ci=[];if(Xe==="Point"||Xe==="MultiPoint")pi(mt,ci,H,te,me);else if(Xe==="LineString")ln(mt,ci,H,te,me,!1,Oe.lineMetrics);else if(Xe==="MultiLineString")ar(mt,ci,H,te,me,!1);else if(Xe==="Polygon")ar(mt,ci,H,te,me,!0);else if(Xe==="MultiPolygon")for(const Ri of mt){const vi=[];ar(Ri,vi,H,te,me,!0),vi.length&&ci.push(vi)}if(ci.length){if(Oe.lineMetrics&&Xe==="LineString"){for(const Ri of ci)we.push(dt(tt.id,Xe,Ri,tt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(ci.length===1?(Xe="LineString",ci=ci[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=ci.length===3?"Point":"MultiPoint"),we.push(dt(tt.id,Xe,ci,tt.tags))}}return we.length?we:null}function pi(ge,W,H,te,me){for(let Te=0;Te<ge.length;Te+=3){const Pe=ge[Te+me];Pe>=H&&Pe<=te&&Dn(W,ge[Te],ge[Te+1],ge[Te+2])}}function ln(ge,W,H,te,me,Te,Pe){let Oe=xn(ge);const we=me===0?Sn:qr;let tt,mt,Xe=ge.start;for(let vi=0;vi<ge.length-3;vi+=3){const Oi=ge[vi],Mi=ge[vi+1],bn=ge[vi+2],un=ge[vi+3],Ii=ge[vi+4],Hi=me===0?Oi:Mi,an=me===0?un:Ii;let Tn=!1;Pe&&(tt=Math.sqrt(Math.pow(Oi-un,2)+Math.pow(Mi-Ii,2))),Hi<H?an>H&&(mt=we(Oe,Oi,Mi,un,Ii,H),Pe&&(Oe.start=Xe+tt*mt)):Hi>te?an<te&&(mt=we(Oe,Oi,Mi,un,Ii,te),Pe&&(Oe.start=Xe+tt*mt)):Dn(Oe,Oi,Mi,bn),an<H&&Hi>=H&&(mt=we(Oe,Oi,Mi,un,Ii,H),Tn=!0),an>te&&Hi<=te&&(mt=we(Oe,Oi,Mi,un,Ii,te),Tn=!0),!Te&&Tn&&(Pe&&(Oe.end=Xe+tt*mt),W.push(Oe),Oe=xn(ge)),Pe&&(Xe+=tt)}let Et=ge.length-3;const oi=ge[Et],ci=ge[Et+1],Ri=me===0?oi:ci;Ri>=H&&Ri<=te&&Dn(Oe,oi,ci,ge[Et+2]),Et=Oe.length-3,Te&&Et>=3&&(Oe[Et]!==Oe[0]||Oe[Et+1]!==Oe[1])&&Dn(Oe,Oe[0],Oe[1],Oe[2]),Oe.length&&W.push(Oe)}function xn(ge){const W=[];return W.size=ge.size,W.start=ge.start,W.end=ge.end,W}function ar(ge,W,H,te,me,Te){for(const Pe of ge)ln(Pe,W,H,te,me,Te,!1)}function Dn(ge,W,H,te){ge.push(W,H,te)}function Sn(ge,W,H,te,me,Te){const Pe=(Te-W)/(te-W);return Dn(ge,Te,H+(me-H)*Pe,1),Pe}function qr(ge,W,H,te,me,Te){const Pe=(Te-H)/(me-H);return Dn(ge,W+(te-W)*Pe,Te,1),Pe}function Ae(ge,W){const H=[];for(let te=0;te<ge.length;te++){const me=ge[te],Te=me.type;let Pe;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Pe=Zr(me.geometry,W);else if(Te==="MultiLineString"||Te==="Polygon"){Pe=[];for(const Oe of me.geometry)Pe.push(Zr(Oe,W))}else if(Te==="MultiPolygon"){Pe=[];for(const Oe of me.geometry){const we=[];for(const tt of Oe)we.push(Zr(tt,W));Pe.push(we)}}H.push(dt(me.id,Te,Pe,me.tags))}return H}function Zr(ge,W){const H=[];H.size=ge.size,ge.start!==void 0&&(H.start=ge.start,H.end=ge.end);for(let te=0;te<ge.length;te+=3)H.push(ge[te]+W,ge[te+1],ge[te+2]);return H}function qn(ge,W){if(ge.transformed)return ge;const H=1<<ge.z,te=ge.x,me=ge.y;for(const Te of ge.features){const Pe=Te.geometry,Oe=Te.type;if(Te.geometry=[],Oe===1)for(let we=0;we<Pe.length;we+=2)Te.geometry.push(Gr(Pe[we],Pe[we+1],W,H,te,me));else for(let we=0;we<Pe.length;we++){const tt=[];for(let mt=0;mt<Pe[we].length;mt+=2)tt.push(Gr(Pe[we][mt],Pe[we][mt+1],W,H,te,me));Te.geometry.push(tt)}}return ge.transformed=!0,ge}function Gr(ge,W,H,te,me,Te){return[Math.round(H*(ge*te-me)),Math.round(H*(W*te-Te))]}function hs(ge,W,H,te,me){const Te=W===me.maxZoom?0:me.tolerance/((1<<W)*me.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:ge.length,source:null,x:H,y:te,z:W,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Oe of ge)Ft(Pe,Oe,Te,me);return Pe}function Ft(ge,W,H,te){const me=W.geometry,Te=W.type,Pe=[];if(ge.minX=Math.min(ge.minX,W.minX),ge.minY=Math.min(ge.minY,W.minY),ge.maxX=Math.max(ge.maxX,W.maxX),ge.maxY=Math.max(ge.maxY,W.maxY),Te==="Point"||Te==="MultiPoint")for(let Oe=0;Oe<me.length;Oe+=3)Pe.push(me[Oe],me[Oe+1]),ge.numPoints++,ge.numSimplified++;else if(Te==="LineString")Si(Pe,me,ge,H,!1,!1);else if(Te==="MultiLineString"||Te==="Polygon")for(let Oe=0;Oe<me.length;Oe++)Si(Pe,me[Oe],ge,H,Te==="Polygon",Oe===0);else if(Te==="MultiPolygon")for(let Oe=0;Oe<me.length;Oe++){const we=me[Oe];for(let tt=0;tt<we.length;tt++)Si(Pe,we[tt],ge,H,!0,tt===0)}if(Pe.length){let Oe=W.tags||null;if(Te==="LineString"&&te.lineMetrics){Oe={};for(const tt in W.tags)Oe[tt]=W.tags[tt];Oe.mapbox_clip_start=me.start/me.size,Oe.mapbox_clip_end=me.end/me.size}const we={geometry:Pe,type:Te==="Polygon"||Te==="MultiPolygon"?3:Te==="LineString"||Te==="MultiLineString"?2:1,tags:Oe};W.id!==null&&(we.id=W.id),ge.features.push(we)}}function Si(ge,W,H,te,me,Te){const Pe=te*te;if(te>0&&W.size<(me?Pe:te))return void(H.numPoints+=W.length/3);const Oe=[];for(let we=0;we<W.length;we+=3)(te===0||W[we+2]>Pe)&&(H.numSimplified++,Oe.push(W[we],W[we+1])),H.numPoints++;me&&function(we,tt){let mt=0;for(let Xe=0,Et=we.length,oi=Et-2;Xe<Et;oi=Xe,Xe+=2)mt+=(we[Xe]-we[oi])*(we[Xe+1]+we[oi+1]);if(mt>0===tt)for(let Xe=0,Et=we.length;Xe<Et/2;Xe+=2){const oi=we[Xe],ci=we[Xe+1];we[Xe]=we[Et-2-Xe],we[Xe+1]=we[Et-1-Xe],we[Et-2-Xe]=oi,we[Et-1-Xe]=ci}}(Oe,Te),ge.push(Oe)}const mi={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Qn{constructor(W,H){const te=(H=this.options=function(Te,Pe){for(const Oe in Pe)Te[Oe]=Pe[Oe];return Te}(Object.create(mi),H)).debug;if(te&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let me=function(Te,Pe){const Oe=[];if(Te.type==="FeatureCollection")for(let we=0;we<Te.features.length;we++)ri(Oe,Te.features[we],Pe,we);else ri(Oe,Te.type==="Feature"?Te:{geometry:Te},Pe);return Oe}(W,H);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Te,Pe){const Oe=Pe.buffer/Pe.extent;let we=Te;const tt=Wt(Te,1,-1-Oe,Oe,0,-1,2,Pe),mt=Wt(Te,1,1-Oe,2+Oe,0,-1,2,Pe);return(tt||mt)&&(we=Wt(Te,1,-Oe,1+Oe,0,-1,2,Pe)||[],tt&&(we=Ae(tt,1).concat(we)),mt&&(we=we.concat(Ae(mt,-1)))),we}(me,H),me.length&&this.splitTile(me,0,0,0),te&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(W,H,te,me,Te,Pe,Oe){const we=[W,H,te,me],tt=this.options,mt=tt.debug;for(;we.length;){me=we.pop(),te=we.pop(),H=we.pop(),W=we.pop();const Xe=1<<H,Et=Ar(H,te,me);let oi=this.tiles[Et];if(!oi&&(mt>1&&console.time("creation"),oi=this.tiles[Et]=hs(W,H,te,me,tt),this.tileCoords.push({z:H,x:te,y:me}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,te,me,oi.numFeatures,oi.numPoints,oi.numSimplified),console.timeEnd("creation"));const Tn=`z${H}`;this.stats[Tn]=(this.stats[Tn]||0)+1,this.total++}if(oi.source=W,Te==null){if(H===tt.indexMaxZoom||oi.numPoints<=tt.indexMaxPoints)continue}else{if(H===tt.maxZoom||H===Te)continue;if(Te!=null){const Tn=Te-H;if(te!==Pe>>Tn||me!==Oe>>Tn)continue}}if(oi.source=null,W.length===0)continue;mt>1&&console.time("clipping");const ci=.5*tt.buffer/tt.extent,Ri=.5-ci,vi=.5+ci,Oi=1+ci;let Mi=null,bn=null,un=null,Ii=null,Hi=Wt(W,Xe,te-ci,te+vi,0,oi.minX,oi.maxX,tt),an=Wt(W,Xe,te+Ri,te+Oi,0,oi.minX,oi.maxX,tt);W=null,Hi&&(Mi=Wt(Hi,Xe,me-ci,me+vi,1,oi.minY,oi.maxY,tt),bn=Wt(Hi,Xe,me+Ri,me+Oi,1,oi.minY,oi.maxY,tt),Hi=null),an&&(un=Wt(an,Xe,me-ci,me+vi,1,oi.minY,oi.maxY,tt),Ii=Wt(an,Xe,me+Ri,me+Oi,1,oi.minY,oi.maxY,tt),an=null),mt>1&&console.timeEnd("clipping"),we.push(Mi||[],H+1,2*te,2*me),we.push(bn||[],H+1,2*te,2*me+1),we.push(un||[],H+1,2*te+1,2*me),we.push(Ii||[],H+1,2*te+1,2*me+1)}}getTile(W,H,te){W=+W,H=+H,te=+te;const me=this.options,{extent:Te,debug:Pe}=me;if(W<0||W>24)return null;const Oe=1<<W,we=Ar(W,H=H+Oe&Oe-1,te);if(this.tiles[we])return qn(this.tiles[we],Te);Pe>1&&console.log("drilling down to z%d-%d-%d",W,H,te);let tt,mt=W,Xe=H,Et=te;for(;!tt&&mt>0;)mt--,Xe>>=1,Et>>=1,tt=this.tiles[Ar(mt,Xe,Et)];return tt&&tt.source?(Pe>1&&(console.log("found parent tile z%d-%d-%d",mt,Xe,Et),console.time("drilling down")),this.splitTile(tt.source,mt,Xe,Et,W,H,te),Pe>1&&console.timeEnd("drilling down"),this.tiles[we]?qn(this.tiles[we],Te):null):null}}function Ar(ge,W,H){return 32*((1<<ge)*H+W)+ge}function bi(ge,W){return W?ge.properties[W]:ge.id}function Hr(ge,W){if(ge==null)return!0;if(ge.type==="Feature")return bi(ge,W)!=null;if(ge.type==="FeatureCollection"){const H=new Set;for(const te of ge.features){const me=bi(te,W);if(me==null||H.has(me))return!1;H.add(me)}return!0}return!1}function ns(ge,W){const H=new Map;if(ge!=null)if(ge.type==="Feature")H.set(bi(ge,W),ge);else for(const te of ge.features)H.set(bi(te,W),te);return H}class ds extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(W,H){return l._(this,void 0,void 0,function*(){const te=W.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const me=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!me)return null;const Te=new class{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.X,this.length=Oe.length,this._features=Oe}feature(Oe){return new class{constructor(we){this._feature=we,this.extent=l.X,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))}loadGeometry(){if(this._feature.type===1){const we=[];for(const tt of this._feature.geometry)we.push([new l.P(tt[0],tt[1])]);return we}{const we=[];for(const tt of this._feature.geometry){const mt=[];for(const Xe of tt)mt.push(new l.P(Xe[0],Xe[1]));we.push(mt)}return we}}toGeoJSON(we,tt,mt){return Z.call(this,we,tt,mt)}}(this._features[Oe])}}(me.features);let Pe=We(Te);return Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),{vectorTile:Te,rawData:Pe.buffer}})}loadData(W){return l._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();const te=!!(W&&W.request&&W.request.collectResourceTiming)&&new l.bv(W.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(W,this._pendingRequest),this._geoJSONIndex=W.cluster?new li(function({superclusterOptions:Pe,clusterProperties:Oe}){if(!Oe||!Pe)return Pe;const we={},tt={},mt={accumulated:null,zoom:0},Xe={properties:null},Et=Object.keys(Oe);for(const oi of Et){const[ci,Ri]=Oe[oi],vi=l.bC(Ri),Oi=l.bC(typeof ci=="string"?[ci,["accumulated"],["get",oi]]:ci);we[oi]=vi.value,tt[oi]=Oi.value}return Pe.map=oi=>{Xe.properties=oi;const ci={};for(const Ri of Et)ci[Ri]=we[Ri].evaluate(mt,Xe);return ci},Pe.reduce=(oi,ci)=>{Xe.properties=ci;for(const Ri of Et)mt.accumulated=oi[Ri],oi[Ri]=tt[Ri].evaluate(mt,Xe)},Pe}(W)).load((yield this._pendingData).features):(me=yield this._pendingData,new Qn(me,W.geojsonVtOptions)),this.loaded={};const Te={};if(te){const Pe=te.finish();Pe&&(Te.resourceTiming={},Te.resourceTiming[W.source]=JSON.parse(JSON.stringify(Pe)))}return Te}catch(Te){if(delete this._pendingRequest,l.bB(Te))return{abandoned:!0};throw Te}var me})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(W){const H=this.loaded;return H&&H[W.uid]?super.reloadTile(W):this.loadTile(W)}loadAndProcessGeoJSON(W,H){return l._(this,void 0,void 0,function*(){let te=yield this.loadGeoJSON(W,H);if(delete this._pendingRequest,typeof te!="object")throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(G(te,!0),W.filter){const me=l.bC(W.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(me.result==="error")throw new Error(me.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));te={type:"FeatureCollection",features:te.features.filter(Pe=>me.value.evaluate({zoom:0},Pe))}}return te})}loadGeoJSON(W,H){return l._(this,void 0,void 0,function*(){const{promoteId:te}=W;if(W.request){const me=yield l.h(W.request,H);return this._dataUpdateable=Hr(me.data,te)?ns(me.data,te):void 0,me.data}if(typeof W.data=="string")try{const me=JSON.parse(W.data);return this._dataUpdateable=Hr(me,te)?ns(me,te):void 0,me}catch{throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`)}if(!W.dataDiff)throw new Error(`Input data given to '${W.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${W.source}`);return function(me,Te,Pe){var Oe,we,tt,mt;if(Te.removeAll&&me.clear(),Te.remove)for(const Xe of Te.remove)me.delete(Xe);if(Te.add)for(const Xe of Te.add){const Et=bi(Xe,Pe);Et!=null&&me.set(Et,Xe)}if(Te.update)for(const Xe of Te.update){let Et=me.get(Xe.id);if(Et==null)continue;const oi=!Xe.removeAllProperties&&(((Oe=Xe.removeProperties)===null||Oe===void 0?void 0:Oe.length)>0||((we=Xe.addOrUpdateProperties)===null||we===void 0?void 0:we.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||oi)&&(Et=Object.assign({},Et),me.set(Xe.id,Et),oi&&(Et.properties=Object.assign({},Et.properties))),Xe.newGeometry&&(Et.geometry=Xe.newGeometry),Xe.removeAllProperties)Et.properties={};else if(((tt=Xe.removeProperties)===null||tt===void 0?void 0:tt.length)>0)for(const ci of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Et.properties,ci)&&delete Et.properties[ci];if(((mt=Xe.addOrUpdateProperties)===null||mt===void 0?void 0:mt.length)>0)for(const{key:ci,value:Ri}of Xe.addOrUpdateProperties)Et.properties[ci]=Ri}}(this._dataUpdateable,W.dataDiff,te),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(W){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(W){return this._geoJSONIndex.getClusterExpansionZoom(W.clusterId)}getClusterChildren(W){return this._geoJSONIndex.getChildren(W.clusterId)}getClusterLeaves(W){return this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset)}}class Wr{constructor(W){this.self=W,this.actor=new l.F(W),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,te)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=te},this.self.addProtocol=l.bi,this.self.removeProtocol=l.bj,this.self.registerRTLTextPlugin=H=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,te)=>this._getDEMWorkerSource(H,te.source).loadTile(te)),this.actor.registerMessageHandler("RDT",(H,te)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,te.source).removeTile(te)})),this.actor.registerMessageHandler("GCEZ",(H,te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(H,te.type,te.source).getClusterExpansionZoom(te)})),this.actor.registerMessageHandler("GCC",(H,te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(H,te.type,te.source).getClusterChildren(te)})),this.actor.registerMessageHandler("GCL",(H,te)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(H,te.type,te.source).getClusterLeaves(te)})),this.actor.registerMessageHandler("LD",(H,te)=>this._getWorkerSource(H,te.type,te.source).loadData(te)),this.actor.registerMessageHandler("GD",(H,te)=>this._getWorkerSource(H,te.type,te.source).getData()),this.actor.registerMessageHandler("LT",(H,te)=>this._getWorkerSource(H,te.type,te.source).loadTile(te)),this.actor.registerMessageHandler("RT",(H,te)=>this._getWorkerSource(H,te.type,te.source).reloadTile(te)),this.actor.registerMessageHandler("AT",(H,te)=>this._getWorkerSource(H,te.type,te.source).abortTile(te)),this.actor.registerMessageHandler("RMT",(H,te)=>this._getWorkerSource(H,te.type,te.source).removeTile(te)),this.actor.registerMessageHandler("RS",(H,te)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][te.type]||!this.workerSources[H][te.type][te.source])return;const me=this.workerSources[H][te.type][te.source];delete this.workerSources[H][te.type][te.source],me.removeSource!==void 0&&me.removeSource(te)})),this.actor.registerMessageHandler("RM",H=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,te)=>l._(this,void 0,void 0,function*(){this.referrer=te})),this.actor.registerMessageHandler("SRPS",(H,te)=>this._syncRTLPluginState(H,te)),this.actor.registerMessageHandler("IS",(H,te)=>l._(this,void 0,void 0,function*(){this.self.importScripts(te)})),this.actor.registerMessageHandler("SI",(H,te)=>this._setImages(H,te)),this.actor.registerMessageHandler("UL",(H,te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(te.layers,te.removedIds)})),this.actor.registerMessageHandler("SL",(H,te)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(te)}))}_setImages(W,H){return l._(this,void 0,void 0,function*(){this.availableImages[W]=H;for(const te in this.workerSources[W]){const me=this.workerSources[W][te];for(const Te in me)me[Te].availableImages=H}})}_syncRTLPluginState(W,H){return l._(this,void 0,void 0,function*(){if(l.bD.isParsed())return l.bD.getState();if(H.pluginStatus!=="loading")return l.bD.setState(H),H;const te=H.pluginURL;if(this.self.importScripts(te),l.bD.isParsed()){const me={pluginStatus:"loaded",pluginURL:te};return l.bD.setState(me),me}throw l.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${te}`)})}_getAvailableImages(W){let H=this.availableImages[W];return H||(H=[]),H}_getLayerIndex(W){let H=this.layerIndexes[W];return H||(H=this.layerIndexes[W]=new o),H}_getWorkerSource(W,H,te){if(this.workerSources[W]||(this.workerSources[W]={}),this.workerSources[W][H]||(this.workerSources[W][H]={}),!this.workerSources[W][H][te]){const me={sendAsync:(Te,Pe)=>(Te.targetMapId=W,this.actor.sendAsync(Te,Pe))};switch(H){case"vector":this.workerSources[W][H][te]=new C(me,this._getLayerIndex(W),this._getAvailableImages(W));break;case"geojson":this.workerSources[W][H][te]=new ds(me,this._getLayerIndex(W),this._getAvailableImages(W));break;default:this.workerSources[W][H][te]=new this.externalWorkerSourceTypes[H](me,this._getLayerIndex(W),this._getAvailableImages(W))}}return this.workerSources[W][H][te]}_getDEMWorkerSource(W,H){return this.demWorkerSources[W]||(this.demWorkerSources[W]={}),this.demWorkerSources[W][H]||(this.demWorkerSources[W][H]=new A),this.demWorkerSources[W][H]}}return l.i(self)&&(self.worker=new Wr(self)),Wr}),r("index",["exports","./shared"],function(l,o){var f="4.7.1";let p,g;const C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:w=>new Promise((a,d)=>{const _=requestAnimationFrame(a);w.signal.addEventListener("abort",()=>{cancelAnimationFrame(_),d(o.c())})}),getImageData(w,a=0){return this.getImageCanvasContext(w).getImageData(-a,-a,w.width+2*a,w.height+2*a)},getImageCanvasContext(w){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=w.width,a.height=w.height,d.drawImage(w,0,0,w.width,w.height),d},resolveURL:w=>(p||(p=document.createElement("a")),p.href=w,p.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(g==null&&(g=matchMedia("(prefers-reduced-motion: reduce)")),g.matches)}};class A{static testProp(a){if(!A.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in A.docStyle)return a[d];return a[0]}static create(a,d,_){const y=window.document.createElement(a);return d!==void 0&&(y.className=d),_&&_.appendChild(y),y}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(a,d){a.style[A.transformProp]=d}static addEventListener(a,d,_,y={}){a.addEventListener(d,_,"passive"in y?y:y.capture)}static removeEventListener(a,d,_,y={}){a.removeEventListener(d,_,"passive"in y?y:y.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,_){const y=d.boundingClientRect;return new o.P((_.clientX-y.left)/d.x-a.clientLeft,(_.clientY-y.top)/d.y-a.clientTop)}static mousePos(a,d){const _=A.getScale(a);return A.getPoint(a,_,d)}static touchPos(a,d){const _=[],y=A.getScale(a);for(let v=0;v<d.length;v++)_.push(A.getPoint(a,y,d[v]));return _}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const V={supported:!1,testSupport:function(w){!Z&&G&&(K?q(w):U=w)}};let U,G,Z=!1,K=!1;function q(w){const a=w.createTexture();w.bindTexture(w.TEXTURE_2D,a);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,G),w.isContextLost())return;V.supported=!0}catch{}w.deleteTexture(a),Z=!0}var ie;typeof document<"u"&&(G=document.createElement("img"),G.onload=()=>{U&&q(U),U=null,K=!0},G.onerror=()=>{Z=!0,U=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let a,d,_,y;w.resetRequestQueue=()=>{a=[],d=0,_=0,y={}},w.addThrottleControl=P=>{const R=_++;return y[R]=P,R},w.removeThrottleControl=P=>{delete y[P],T()},w.getImage=(P,R,B=!0)=>new Promise((N,J)=>{V.supported&&(P.headers||(P.headers={}),P.headers.accept="image/webp,*/*"),o.e(P,{type:"image"}),a.push({abortController:R,requestParameters:P,supportImageRefresh:B,state:"queued",onError:ee=>{J(ee)},onSuccess:ee=>{N(ee)}}),T()});const v=P=>o._(this,void 0,void 0,function*(){P.state="running";const{requestParameters:R,supportImageRefresh:B,onError:N,onSuccess:J,abortController:ee}=P,ne=B===!1&&!o.i(self)&&!o.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce((ve,ke)=>ve&&ke==="accept",!0));d++;const _e=ne?E(R,ee):o.m(R,ee);try{const ve=yield _e;delete P.abortController,P.state="completed",ve.data instanceof HTMLImageElement||o.b(ve.data)?J(ve):ve.data&&J({data:yield(be=ve.data,typeof createImageBitmap=="function"?o.d(be):o.f(be)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete P.abortController,N(ve)}finally{d--,T()}var be}),T=()=>{const P=(()=>{for(const R of Object.keys(y))if(y[R]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=d;R<P&&a.length>0;R++){const B=a.shift();B.abortController.signal.aborted?R--:v(B)}},E=(P,R)=>new Promise((B,N)=>{const J=new Image,ee=P.url,ne=P.credentials;ne&&ne==="include"?J.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!o.s(ee))&&(J.crossOrigin="anonymous"),R.signal.addEventListener("abort",()=>{J.src="",N(o.c())}),J.fetchPriority="high",J.onload=()=>{J.onerror=J.onload=null,B({data:J})},J.onerror=()=>{J.onerror=J.onload=null,R.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},J.src=ee})}(ie||(ie={})),ie.resetRequestQueue();class oe{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function se(w){var a=new o.A(3);return a[0]=w[0],a[1]=w[1],a[2]=w[2],a}var pe,Ie=function(w,a,d){return w[0]=a[0]-d[0],w[1]=a[1]-d[1],w[2]=a[2]-d[2],w};pe=new o.A(3),o.A!=Float32Array&&(pe[0]=0,pe[1]=0,pe[2]=0);var Ce=function(w){var a=w[0],d=w[1];return a*a+d*d};function je(w){const a=[];if(typeof w=="string")a.push({id:"default",url:w});else if(w&&w.length>0){const d=[];for(const{id:_,url:y}of w){const v=`${_}${y}`;d.indexOf(v)===-1&&(d.push(v),a.push({id:_,url:y}))}}return a}function Ve(w,a,d){const _=w.split("?");return _[0]+=`${a}${d}`,_.join("?")}(function(){var w=new o.A(2);o.A!=Float32Array&&(w[0]=0,w[1]=0)})();class de{constructor(a,d,_,y){this.context=a,this.format=_,this.texture=a.gl.createTexture(),this.update(d,y)}update(a,d,_){const{width:y,height:v}=a,T=!(this.size&&this.size[0]===y&&this.size[1]===v||_),{context:E}=this,{gl:P}=E;if(this.useMipmap=!!(d&&d.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!d||d.premultiply!==!1)),T)this.size=[y,v],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,a):P.texImage2D(P.TEXTURE_2D,0,this.format,y,v,0,this.format,P.UNSIGNED_BYTE,a.data);else{const{x:R,y:B}=_||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||o.b(a)?P.texSubImage2D(P.TEXTURE_2D,0,R,B,P.RGBA,P.UNSIGNED_BYTE,a):P.texSubImage2D(P.TEXTURE_2D,0,R,B,y,v,P.RGBA,P.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(a,d,_){const{context:y}=this,{gl:v}=y;v.bindTexture(v.TEXTURE_2D,this.texture),_!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(_=v.LINEAR),a!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,a),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,_||a),this.filter=a),d!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,d),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function Me(w){const{userImage:a}=w;return!!(a&&a.render&&a.render())&&(w.data.replace(new Uint8Array(a.data.buffer)),!0)}class Re extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:_}of this.requestors)_(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const _=d.spriteData;d.data=new o.R({width:_.width,height:_.height},_.context.getImageData(_.x,_.y,_.width,_.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let _=!0;const y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new o.j(new Error(`Image "${a}" has invalid "stretchX" value`))),_=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new o.j(new Error(`Image "${a}" has invalid "stretchY" value`))),_=!1),this._validateContent(d.content,d)||(this.fire(new o.j(new Error(`Image "${a}" has invalid "content" value`))),_=!1),_}_validateStretch(a,d){if(!a)return!0;let _=0;for(const y of a){if(y[0]<_||y[1]<y[0]||d<y[1])return!1;_=y[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const _=d.spriteData,y=_&&_.width||d.data.width,v=_&&_.height||d.data.height;return!(a[0]<0||y<a[0]||a[1]<0||v<a[1]||a[2]<0||y<a[2]||a[3]<0||v<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,_=!0){const y=this.getImage(a);if(_&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,_)=>{let y=!0;if(!this.isLoaded())for(const v of a)this.images[v]||(y=!1);this.isLoaded()||y?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){const d={};for(const _ of a){let y=this.getImage(_);y||(this.fire(new o.k("styleimagemissing",{id:_})),y=this.getImage(_)),y?d[_]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],_=this.getImage(a);if(!_)return null;if(d&&d.position.version===_.version)return d.position;if(d)d.position.version=_.version;else{const y={w:_.data.width+2,h:_.data.height+2,x:0,y:0},v=new o.I(y,_);this.patterns[a]={bin:y,position:v}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new de(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const v in this.patterns)a.push(this.patterns[v].bin);const{w:d,h:_}=o.p(a),y=this.atlasImage;y.resize({width:d||1,height:_||1});for(const v in this.patterns){const{bin:T}=this.patterns[v],E=T.x+1,P=T.y+1,R=this.getImage(v).data,B=R.width,N=R.height;o.R.copy(R,y,{x:0,y:0},{x:E,y:P},{width:B,height:N}),o.R.copy(R,y,{x:0,y:N-1},{x:E,y:P-1},{width:B,height:1}),o.R.copy(R,y,{x:0,y:0},{x:E,y:P+N},{width:B,height:1}),o.R.copy(R,y,{x:B-1,y:0},{x:E-1,y:P},{width:1,height:N}),o.R.copy(R,y,{x:0,y:0},{x:E+B,y:P},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const _=this.getImage(d);_||o.w(`Image with ID: "${d}" was not found`),Me(_)&&this.updateImage(d,_)}}}const Rt=1e20;function ti(w,a,d,_,y,v,T,E,P){for(let R=a;R<a+_;R++)Jt(w,d*v+R,v,y,T,E,P);for(let R=d;R<d+y;R++)Jt(w,R*v+a,1,_,T,E,P)}function Jt(w,a,d,_,y,v,T){v[0]=0,T[0]=-Rt,T[1]=Rt,y[0]=w[a];for(let E=1,P=0,R=0;E<_;E++){y[E]=w[a+E*d];const B=E*E;do{const N=v[P];R=(y[E]-y[N]+B-N*N)/(E-N)/2}while(R<=T[P]&&--P>-1);P++,v[P]=E,T[P]=R,T[P+1]=Rt}for(let E=0,P=0;E<_;E++){for(;T[P+1]<E;)P++;const R=v[P],B=E-R;w[a+E*d]=y[R]+B*B}}class We{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,function*(){const d=[];for(const v in a)for(const T of a[v])d.push(this._getAndCacheGlyphsPromise(v,T));const _=yield Promise.all(d),y={};for(const{stack:v,id:T,glyph:E}of _)y[v]||(y[v]={}),y[v][T]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return y})}_getAndCacheGlyphsPromise(a,d){return o._(this,void 0,void 0,function*(){let _=this.entries[a];_||(_=this.entries[a]={glyphs:{},requests:{},ranges:{}});let y=_.glyphs[d];if(y!==void 0)return{stack:a,id:d,glyph:y};if(y=this._tinySDF(_,a,d),y)return _.glyphs[d]=y,{stack:a,id:d,glyph:y};const v=Math.floor(d/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(_.ranges[v])return{stack:a,id:d,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!_.requests[v]){const E=We.loadGlyphRange(a,v,this.url,this.requestManager);_.requests[v]=E}const T=yield _.requests[v];for(const E in T)this._doesCharSupportLocalGlyph(+E)||(_.glyphs[+E]=T[+E]);return _.ranges[v]=!0,{stack:a,id:d,glyph:T[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))}_tinySDF(a,d,_){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(_))return;let v=a.tinySDF;if(!v){let E="400";/bold/i.test(d)?E="900":/medium/i.test(d)?E="500":/light/i.test(d)&&(E="200"),v=a.tinySDF=new We.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:E})}const T=v.draw(String.fromCharCode(_));return{id:_,bitmap:new o.o({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}We.loadGlyphRange=function(w,a,d,_){return o._(this,void 0,void 0,function*(){const y=256*a,v=y+255,T=_.transformRequest(d.replace("{fontstack}",w).replace("{range}",`${y}-${v}`),"Glyphs"),E=yield o.l(T,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${a}, ${y}-${v}`);const P={};for(const R of o.n(E.data))P[R.id]=R;return P})},We.TinySDF=class{constructor({fontSize:w=24,buffer:a=3,radius:d=8,cutoff:_=.25,fontFamily:y="sans-serif",fontWeight:v="normal",fontStyle:T="normal"}={}){this.buffer=a,this.cutoff=_,this.radius=d;const E=this.size=w+4*a,P=this._createCanvas(E),R=this.ctx=P.getContext("2d",{willReadFrequently:!0});R.font=`${T} ${v} ${w}px ${y}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(w){const a=document.createElement("canvas");return a.width=a.height=w,a}draw(w){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:_,actualBoundingBoxLeft:y,actualBoundingBoxRight:v}=this.ctx.measureText(w),T=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-y))),P=Math.min(this.size-this.buffer,T+Math.ceil(_)),R=E+2*this.buffer,B=P+2*this.buffer,N=Math.max(R*B,0),J=new Uint8ClampedArray(N),ee={data:J,width:R,height:B,glyphWidth:E,glyphHeight:P,glyphTop:T,glyphLeft:0,glyphAdvance:a};if(E===0||P===0)return ee;const{ctx:ne,buffer:_e,gridInner:be,gridOuter:ve}=this;ne.clearRect(_e,_e,E,P),ne.fillText(w,_e,_e+T);const ke=ne.getImageData(_e,_e,E,P);ve.fill(Rt,0,N),be.fill(0,0,N);for(let ae=0;ae<P;ae++)for(let Ee=0;Ee<E;Ee++){const ze=ke.data[4*(ae*E+Ee)+3]/255;if(ze===0)continue;const Ue=(ae+_e)*R+Ee+_e;if(ze===1)ve[Ue]=0,be[Ue]=Rt;else{const ht=.5-ze;ve[Ue]=ht>0?ht*ht:0,be[Ue]=ht<0?ht*ht:0}}ti(ve,0,0,R,B,R,this.f,this.v,this.z),ti(be,_e,_e,E,P,R,this.f,this.v,this.z);for(let ae=0;ae<N;ae++){const Ee=Math.sqrt(ve[ae])-Math.sqrt(be[ae]);J[ae]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return ee}};class Le{constructor(){this.specification=o.v.light.position}possiblyEvaluate(a,d){return o.x(a.expression.evaluate(d))}interpolate(a,d,_){return{x:o.y.number(a.x,d.x,_),y:o.y.number(a.y,d.y,_),z:o.y.number(a.z,d.z,_)}}}let pt;class xt extends o.E{constructor(a){super(),pt=pt||new o.q({anchor:new o.D(o.v.light.anchor),position:new Le,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(pt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(o.r,a,d))for(const _ in a){const y=a[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),y):this._transitionable.setValue(_,y)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,_){return(!_||_.validate!==!1)&&o.t(this,a.call(o.u,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const At=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class di extends o.E{constructor(a){super(),this._transitionable=new o.T(At),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(a,d={}){if(!this._validate(o.B,a,d)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const _ in a){const y=a[_];_.endsWith("-transition")?this._transitionable.setTransition(_.slice(0,-11),y):this._transitionable.setValue(_,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,_={}){return(_==null?void 0:_.validate)!==!1&&o.t(this,a.call(o.u,o.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class Yt{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const _=a.join(",")+String(d);return this.dashEntry[_]||(this.dashEntry[_]=this.addDash(a,d)),this.dashEntry[_]}getDashRanges(a,d,_){const y=[];let v=a.length%2==1?-a[a.length-1]*_:0,T=a[0]*_,E=!0;y.push({left:v,right:T,isDash:E,zeroLength:a[0]===0});let P=a[0];for(let R=1;R<a.length;R++){E=!E;const B=a[R];v=P*_,P+=B,T=P*_,y.push({left:v,right:T,isDash:E,zeroLength:B===0})}return y}addRoundDash(a,d,_){const y=d/2;for(let v=-_;v<=_;v++){const T=this.width*(this.nextRow+_+v);let E=0,P=a[E];for(let R=0;R<this.width;R++){R/P.right>1&&(P=a[++E]);const B=Math.abs(R-P.left),N=Math.abs(R-P.right),J=Math.min(B,N);let ee;const ne=v/_*(y+1);if(P.isDash){const _e=y-Math.abs(ne);ee=Math.sqrt(J*J+_e*_e)}else ee=y-Math.sqrt(J*J+ne*ne);this.data[T+R]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(a){for(let E=a.length-1;E>=0;--E){const P=a[E],R=a[E+1];P.zeroLength?a.splice(E,1):R&&R.isDash===P.isDash&&(R.left=P.left,a.splice(E,1))}const d=a[0],_=a[a.length-1];d.isDash===_.isDash&&(d.left=_.left-this.width,_.right=d.right+this.width);const y=this.width*this.nextRow;let v=0,T=a[v];for(let E=0;E<this.width;E++){E/T.right>1&&(T=a[++v]);const P=Math.abs(E-T.left),R=Math.abs(E-T.right),B=Math.min(P,R);this.data[y+E]=Math.max(0,Math.min(255,(T.isDash?B:-B)+128))}}addDash(a,d){const _=d?7:0,y=2*_+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let v=0;for(let E=0;E<a.length;E++)v+=a[E];if(v!==0){const E=this.width/v,P=this.getDashRanges(a,this.width,E);d?this.addRoundDash(P,E,_):this.addRegularDash(P)}const T={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:v};return this.nextRow+=y,this.dirty=!0,T}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const li="maplibre_preloaded_worker_pool";class vt{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<vt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[li]}numActive(){return Object.keys(this.active).length}}const fi=Math.floor(C.hardwareConcurrency/2);let ai,Ot;function ft(){return ai||(ai=new vt),ai}vt.workerCount=o.C(globalThis)?Math.max(Math.min(fi,3),1):1;class xe{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const _=this.workerPool.acquire(d);for(let y=0;y<_.length;y++){const v=new o.F(_[y],d);v.name=`Worker ${y}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const _=[];for(const y of this.actors)_.push(y.sendAsync({type:a,data:d}));return Promise.all(_)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const _ of this.actors)_.registerMessageHandler(a,d)}}function Ni(){return Ot||(Ot=new xe(ft(),o.G),Ot.registerMessageHandler("GR",(w,a,d)=>o.m(a,d))),Ot}function dt(w,a){const d=o.H();return o.J(d,d,[1,1,0]),o.K(d,d,[.5*w.width,.5*w.height,1]),o.L(d,d,w.calculatePosMatrix(a.toUnwrapped()))}function Mt(w,a,d,_,y,v){const T=function(N,J,ee){if(N)for(const ne of N){const _e=J[ne];if(_e&&_e.source===ee&&_e.type==="fill-extrusion")return!0}else for(const ne in J){const _e=J[ne];if(_e.source===ee&&_e.type==="fill-extrusion")return!0}return!1}(y&&y.layers,a,w.id),E=v.maxPitchScaleFactor(),P=w.tilesIn(_,E,T);P.sort(ri);const R=[];for(const N of P)R.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(a,d,w._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,y,v,E,dt(w.transform,N.tileID))});const B=function(N){const J={},ee={};for(const ne of N){const _e=ne.queryResults,be=ne.wrappedTileID,ve=ee[be]=ee[be]||{};for(const ke in _e){const ae=_e[ke],Ee=ve[ke]=ve[ke]||{},ze=J[ke]=J[ke]||[];for(const Ue of ae)Ee[Ue.featureIndex]||(Ee[Ue.featureIndex]=!0,ze.push(Ue))}}return J}(R);for(const N in B)B[N].forEach(J=>{const ee=J.feature,ne=w.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=ne});return B}function ri(w,a){const d=w.tileID,_=a.tileID;return d.overscaledZ-_.overscaledZ||d.canonical.y-_.canonical.y||d.wrap-_.wrap||d.canonical.x-_.canonical.x}function Ti(w,a,d){return o._(this,void 0,void 0,function*(){let _=w;if(w.url?_=(yield o.h(a.transformRequest(w.url,"Source"),d)).data:yield C.frameAsync(d),!_)return null;const y=o.M(o.e(_,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(y.vectorLayerIds=_.vector_layers.map(v=>v.id)),y})}class Fe{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.N?new o.N(a.lng,a.lat):o.N.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.N?new o.N(a.lng,a.lat):o.N.convert(a),this}extend(a){const d=this._sw,_=this._ne;let y,v;if(a instanceof o.N)y=a,v=a;else{if(!(a instanceof Fe))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Fe.convert(a)):this.extend(o.N.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.N.convert(a)):this;if(y=a._sw,v=a._ne,!y||!v)return this}return d||_?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),_.lng=Math.max(v.lng,_.lng),_.lat=Math.max(v.lat,_.lat)):(this._sw=new o.N(y.lng,y.lat),this._ne=new o.N(v.lng,v.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:_}=o.N.convert(a);let y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&y}static convert(a){return a instanceof Fe?a:a&&new Fe(a)}static fromLngLat(a,d=0){const _=360*d/40075017,y=_/Math.cos(Math.PI/180*a.lat);return new Fe(new o.N(a.lng-y,a.lat-_),new o.N(a.lng+y,a.lat+_))}adjustAntiMeridian(){const a=new o.N(this._sw.lng,this._sw.lat),d=new o.N(this._ne.lng,this._ne.lat);return new Fe(a,a.lng>d.lng?new o.N(d.lng+360,d.lat):d)}}class ot{constructor(a,d,_){this.bounds=Fe.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=_||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),_=Math.floor(o.O(this.bounds.getWest())*d),y=Math.floor(o.Q(this.bounds.getNorth())*d),v=Math.ceil(o.O(this.bounds.getEast())*d),T=Math.ceil(o.Q(this.bounds.getSouth())*d);return a.x>=_&&a.x<v&&a.y>=y&&a.y<T}}class hn extends o.E{constructor(a,d,_,y){if(super(),this.id=a,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(d,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ti(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new ot(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};_.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((v,T)=>{a.reloadPromise={resolve:v,reject:T}})}else a.actor=this.dispatcher.getActor(),y="LT";a.abortController=new AbortController;try{const v=yield a.actor.sendAsync({type:y,data:_},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,v)}catch(v){if(delete a.abortController,a.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const _=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(_.resolve).catch(_.reject)}}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ne extends o.E{constructor(a,d,_,y){super(),this.id=a,this.dispatcher=_,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},d),o.e(this,o.M(d,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Ti(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(o.e(this,a),a.bounds&&(this.tileBounds=new ot(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new o.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const _=yield ie.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const y=this.map.painter.context,v=y.gl,T=_.data;a.texture=this.map.painter.getTileTexture(T.width),a.texture?a.texture.update(T,{useMipmap:!0}):(a.texture=new de(y,T,v.RGBA,{useMipmap:!0}),a.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class Wt extends Ne{constructor(a,d,_,y){super(a,d,_,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const y=yield ie.getImage(_,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(y&&y.data){const v=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&a.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=o.b(v)&&o.U()?v:yield this.readImageNow(v),E={type:this.type,uid:a.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const P=yield a.actor.sendAsync({type:"LDT",data:E});a.dem=P,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(y){if(delete a.abortController,a.aborted)a.state="unloaded";else if(y)throw a.state="errored",y}})}readImageNow(a){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){const d=a.width+2,_=a.height+2;try{return new o.R({width:d,height:_},yield o.W(a,-1,-1,d,_))}catch{}}return C.getImageData(a,1)})}_getNeighboringTiles(a){const d=a.canonical,_=Math.pow(2,d.z),y=(d.x-1+_)%_,v=d.x===0?a.wrap-1:a.wrap,T=(d.x+1+_)%_,E=d.x+1===_?a.wrap+1:a.wrap,P={};return P[new o.S(a.overscaledZ,v,d.z,y,d.y).key]={backfilled:!1},P[new o.S(a.overscaledZ,E,d.z,T,d.y).key]={backfilled:!1},d.y>0&&(P[new o.S(a.overscaledZ,v,d.z,y,d.y-1).key]={backfilled:!1},P[new o.S(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},P[new o.S(a.overscaledZ,E,d.z,T,d.y-1).key]={backfilled:!1}),d.y+1<_&&(P[new o.S(a.overscaledZ,v,d.z,y,d.y+1).key]={backfilled:!1},P[new o.S(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},P[new o.S(a.overscaledZ,E,d.z,T,d.y+1).key]={backfilled:!1}),P}unloadTile(a){return o._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class pi extends o.E{constructor(a,d,_,y){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=_.getActor(),this.setEventedParent(y),this._data=d.data,this._options=o.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const v=o.X/this.tileSize;d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*v,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*v,extent:o.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.X,radius:(d.clusterRadius||50)*v,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return o._(this,void 0,void 0,function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})})}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,_){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:_}})}_updateWorkerData(a){return o._(this,void 0,void 0,function*(){const d=o.e({type:this.type},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const _=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||_.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let y=null;_.resourceTiming&&_.resourceTiming[this.id]&&(y=_.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(v,{resourceTiming:y}),this.fire(new o.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(_){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(_))}})}loaded(){return this._pendingLoads===0}loadTile(a){return o._(this,void 0,void 0,function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const _={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const y=yield this.actor.sendAsync({type:d,data:_},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(y,this.map.painter,d==="RT")})}abortTile(a){return o._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return o._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ln=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class xn extends o.E{constructor(a,d,_,y){super(),this.id=a,this.dispatcher=_,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}load(a){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield ie.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new o.j(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(o.Z.fromLngLat);this.tileID=function(y){let v=1/0,T=1/0,E=-1/0,P=-1/0;for(const J of y)v=Math.min(v,J.x),T=Math.min(T,J.y),E=Math.max(E,J.x),P=Math.max(P,J.y);const R=Math.max(E-v,P-T),B=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),N=Math.pow(2,B);return new o.a1(B,Math.floor((v+E)/2*N),Math.floor((T+P)/2*N))}(d),this.minzoom=this.maxzoom=this.tileID.z;const _=d.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,o.X,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,o.X),this._boundsArray.emplaceBack(_[2].x,_[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,ln.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new de(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let _=!1;for(const y in this.tiles){const v=this.tiles[y];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ar extends xn{constructor(a,d,_,y){super(a,d,_,y),this.roundZoom=!0,this.type="video",this.options=d}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield o.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new o.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,ln.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new de(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let _=!1;for(const y in this.tiles){const v=this.tiles[y];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,_=!0)}_&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Dn extends xn{constructor(a,d,_,y){super(a,d,_,y),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(T=>typeof T!="number"))||this.fire(new o.j(new o.a2(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a2(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a2(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,_=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ln.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new de(d,this.canvas,_.RGBA,{premultiply:!0});let y=!1;for(const v in this.tiles){const T=this.tiles[v];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Sn={},qr=w=>{switch(w){case"geojson":return pi;case"image":return xn;case"raster":return Ne;case"raster-dem":return Wt;case"vector":return hn;case"video":return ar;case"canvas":return Dn}return Sn[w]},Ae="RTLPluginLoaded";class Zr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ni()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,function*(d,_=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!_)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Ae))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let qn=null;function Gr(){return qn||(qn=new Zr),qn}class hs{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=o.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,_){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(y,v){const T={};if(!v)return T;for(const E of y){const P=E.layerIds.map(R=>v.getLayer(R)).filter(Boolean);if(P.length!==0){E.layers=P,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(R=>P.filter(B=>B.id===R)[0]));for(const R of P)T[R.id]=E}}return T}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const v=this.buckets[y];if(v instanceof o.a6){if(this.hasSymbolBuckets=!0,!_)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const v=this.buckets[y];if(v instanceof o.a6&&v.hasRTLText){this.hasRTLText=!0,Gr().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const v=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(v))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const _ in this.buckets){const y=this.buckets[_];y.uploadPending()&&y.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new de(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new de(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,_,y,v,T,E,P,R,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:v,scale:T,tileSize:this.tileSize,pixelPosMatrix:B,transform:P,params:E,queryPadding:this.queryPadding*R},a,d,_):{}}querySourceFeatures(a,d){const _=this.latestFeatureIndex;if(!_||!_.rawTileData)return;const y=_.loadVTLayers(),v=d&&d.sourceLayer?d.sourceLayer:"",T=y._geojsonTileLayer||y[v];if(!T)return;const E=o.a7(d&&d.filter),{z:P,x:R,y:B}=this.tileID.canonical,N={z:P,x:R,y:B};for(let J=0;J<T.length;J++){const ee=T.feature(J);if(E.needGeometry){const be=o.a8(ee,!0);if(!E.filter(new o.z(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!E.filter(new o.z(this.tileID.overscaledZ),ee))continue;const ne=_.getId(ee,v),_e=new o.a9(ee,P,R,B,ne);_e.tile=N,a.push(_e)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const _=o.aa(a.cacheControl);_["max-age"]&&(this.expirationTime=Date.now()+1e3*_["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const _=Date.now();let y=!1;if(this.expirationTime>_)y=!1;else if(d)if(this.expirationTime<d)y=!0;else{const v=this.expirationTime-d;v?this.expirationTime=_+Math.max(v,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const _=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!d.style.hasLayer(y))continue;const v=this.buckets[y],T=v.layers[0].sourceLayer||"_geojsonTileLayer",E=_[T],P=a[T];if(!E||!P||Object.keys(P).length===0)continue;v.update(P,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=d&&d.style&&d.style.getLayer(y);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=C.now()+a}setDependencies(a,d){const _={};for(const y of d)_[y]=!0;this.dependencies[a]=_}hasDependency(a,d){for(const _ of a){const y=this.dependencies[_];if(y){for(const v of d)if(y[v])return!0}}return!1}}class Ft{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,_){const y=a.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const v={value:d,timeout:void 0};if(_!==void 0&&(v.timeout=setTimeout(()=>{this.remove(a,v)},_)),this.data[y].push(v),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const _=a.wrapped().key,y=d===void 0?0:this.data[_].indexOf(d),v=this.data[_][y];return this.data[_].splice(y,1),v.timeout&&clearTimeout(v.timeout),this.data[_].length===0&&delete this.data[_],this.onRemove(v.value),this.order.splice(this.order.indexOf(_),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const _ in this.data)for(const y of this.data[_])a(y.value)||d.push(y);for(const _ of d)this.remove(_.value.tileID,_)}}class Si{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,_){const y=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][y]=this.stateChanges[a][y]||{},o.e(this.stateChanges[a][y],_),this.deletedStates[a]===null){this.deletedStates[a]={};for(const v in this.state[a])v!==y&&(this.deletedStates[a][v]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][y]===null){this.deletedStates[a][y]={};for(const v in this.state[a][y])_[v]||(this.deletedStates[a][y][v]=null)}else for(const v in _)this.deletedStates[a]&&this.deletedStates[a][y]&&this.deletedStates[a][y][v]===null&&delete this.deletedStates[a][y][v]}removeFeatureState(a,d,_){if(this.deletedStates[a]===null)return;const y=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},_&&d!==void 0)this.deletedStates[a][y]!==null&&(this.deletedStates[a][y]=this.deletedStates[a][y]||{},this.deletedStates[a][y][_]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][y])for(_ in this.deletedStates[a][y]={},this.stateChanges[a][y])this.deletedStates[a][y][_]=null;else this.deletedStates[a][y]=null;else this.deletedStates[a]=null}getState(a,d){const _=String(d),y=o.e({},(this.state[a]||{})[_],(this.stateChanges[a]||{})[_]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const v=this.deletedStates[a][d];if(v===null)return{};for(const T in v)delete y[T]}return y}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const _={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const v={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),o.e(this.state[y][T],this.stateChanges[y][T]),v[T]=this.state[y][T];_[y]=v}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const v={};if(this.deletedStates[y]===null)for(const T in this.state[y])v[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const E of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][E];v[T]=this.state[y][T]}_[y]=_[y]||{},o.e(_[y],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(_).length!==0)for(const y in a)a[y].setFeatureState(_,d)}}class mi extends o.E{constructor(a,d,_){super(),this.id=a,this.dispatcher=_,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,v,T,E)=>{const P=new(qr(v.type))(y,v,T,E);if(P.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${P.id}`);return P})(a,d,_,this),this._tiles={},this._cache=new Ft(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Si,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,_){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,_)}catch(y){a.state="errored",y.status!==404?this._source.fire(new o.j(y,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const _=this._tiles[d];_.upload(a),_.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Qn).map(a=>a.key)}getRenderableIds(a){const d=[];for(const _ in this._tiles)this._isIdRenderable(_,a)&&d.push(this._tiles[_]);return a?d.sort((_,y)=>{const v=_.tileID,T=y.tileID,E=new o.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),P=new o.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-T.overscaledZ||P.y-E.y||P.x-E.x}).map(_=>_.tileID.key):d.map(_=>_.tileID).sort(Qn).map(_=>_.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return o._(this,void 0,void 0,function*(){const _=this._tiles[a];_&&(_.state!=="loading"&&(_.state=d),yield this._loadTile(_,a,d))})}_tileLoaded(a,d,_){a.timeAdded=C.now(),_==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let y=0;y<d.length;y++){const v=d[y];if(a.neighboringTiles&&a.neighboringTiles[v]){const T=this.getTileByID(v);_(a,T),_(T,a)}}function _(y,v){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=v.tileID.canonical.x-y.tileID.canonical.x;const E=v.tileID.canonical.y-y.tileID.canonical.y,P=Math.pow(2,y.tileID.canonical.z),R=v.tileID.key;T===0&&E===0||Math.abs(E)>1||(Math.abs(T)>1&&(Math.abs(T+P)===1?T+=P:Math.abs(T-P)===1&&(T-=P)),v.dem&&y.dem&&(y.dem.backfillBorder(v.dem,T,E),y.neighboringTiles&&y.neighboringTiles[R]&&(y.neighboringTiles[R].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,_,y){for(const v in this._tiles){let T=this._tiles[v];if(y[v]||!T.hasData()||T.tileID.overscaledZ<=d||T.tileID.overscaledZ>_)continue;let E=T.tileID;for(;T&&T.tileID.overscaledZ>d+1;){const R=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[R.key],T&&T.hasData()&&(E=R)}let P=E;for(;P.overscaledZ>d;)if(P=P.scaledTo(P.overscaledZ-1),a[P.key]){y[E.key]=E;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const _=this._loadedParentTiles[a.key];return _&&_.tileID.overscaledZ>=d?_:null}for(let _=a.overscaledZ-1;_>=d;_--){const y=a.scaledTo(_),v=this._getLoadedTile(y);if(v)return v}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,_=Math.ceil(a.height/this._source.tileSize)+1,y=Math.floor(d*_*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(v)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const _={};for(const y in this._tiles){const v=this._tiles[y];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+d),_[v.tileID.key]=v}this._tiles=_;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(a,d,_,y,v,T){const E={},P={},R=Object.keys(a),B=C.now();for(const N of R){const J=a[N],ee=this._tiles[N];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=B)continue;const ne=this.findLoadedParent(J,d),_e=this.findLoadedSibling(J),be=ne||_e||null;be&&(this._addTile(be.tileID),E[be.tileID.key]=be.tileID),P[N]=J}this._retainLoadedChildren(P,y,_,a);for(const N in E)a[N]||(this._coveredTiles[N]=!0,a[N]=E[N]);if(T){const N={},J={};for(const ee of v)this._tiles[ee.key].hasData()?N[ee.key]=ee:J[ee.key]=ee;for(const ee in J){const ne=J[ee].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(N[ne[0].key]=a[ne[0].key]=ne[0],N[ne[1].key]=a[ne[1].key]=ne[1],N[ne[2].key]=a[ne[2].key]=ne[2],N[ne[3].key]=a[ne[3].key]=ne[3],delete J[ee])}for(const ee in J){const ne=J[ee],_e=this.findLoadedParent(ne,this._source.minzoom),be=this.findLoadedSibling(ne),ve=_e||be||null;if(ve){N[ve.tileID.key]=a[ve.tileID.key]=ve.tileID;for(const ke in N)N[ke].isChildOf(ve.tileID)&&delete N[ke]}}for(const ee in this._tiles)N[ee]||(this._coveredTiles[ee]=!0)}}update(a,d){if(!this._sourceLoaded||this._paused)return;let _;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?_=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new o.S(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(_=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(_=_.filter(B=>this._source.hasTile(B)))):_=[];const y=a.coveringZoomLevel(this._source),v=Math.max(y-mi.maxOverzooming,this._source.minzoom),T=Math.max(y+mi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const N of _)if(N.canonical.z>this._source.minzoom){const J=N.scaledTo(N.canonical.z-1);B[J.key]=J;const ee=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));B[ee.key]=ee}_=_.concat(Object.values(B))}const E=_.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(_,y);Ar(this._source.type)&&this._updateCoveredAndRetainedTiles(P,v,T,y,_,d);for(const B in P)this._tiles[B].clearFadeHold();const R=o.ab(this._tiles,P);for(const B of R){const N=this._tiles[B];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){var _;const y={},v={},T=Math.max(d-mi.maxOverzooming,this._source.minzoom),E=Math.max(d+mi.maxUnderzooming,this._source.minzoom),P={};for(const R of a){const B=this._addTile(R);y[R.key]=R,B.hasData()||d<this._source.maxzoom&&(P[R.key]=R)}this._retainLoadedChildren(P,d,E,y);for(const R of a){let B=this._tiles[R.key];if(B.hasData())continue;if(d+1>this._source.maxzoom){const J=R.children(this._source.maxzoom)[0],ee=this.getTile(J);if(ee&&ee.hasData()){y[J.key]=J;continue}}else{const J=R.children(this._source.maxzoom);if(y[J[0].key]&&y[J[1].key]&&y[J[2].key]&&y[J[3].key])continue}let N=B.wasRequested();for(let J=R.overscaledZ-1;J>=T;--J){const ee=R.scaledTo(J);if(v[ee.key])break;if(v[ee.key]=!0,B=this.getTile(ee),!B&&N&&(B=this._addTile(ee)),B){const ne=B.hasData();if((ne||!(!((_=this.map)===null||_===void 0)&&_.cancelPendingTileRequestsWhileZooming)||N)&&(y[ee.key]=ee),N=B.wasRequested(),ne)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let _,y=this._tiles[a].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){_=this._loadedParentTiles[y.key];break}d.push(y.key);const v=y.scaledTo(y.overscaledZ-1);if(_=this._getLoadedTile(v),_)break;y=v}for(const v of d)this._loadedParentTiles[v]=_}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const d=this._tiles[a].tileID,_=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=_}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const _=d;return d||(d=new hs(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,_||this._source.fire(new o.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const _=d.getExpiryTimeout();_&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},_))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;a.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,_){const y=[],v=this.transform;if(!v)return y;const T=_?v.getCameraQueryGeometry(a):a,E=a.map(ne=>v.pointCoordinate(ne,this.terrain)),P=T.map(ne=>v.pointCoordinate(ne,this.terrain)),R=this.getIds();let B=1/0,N=1/0,J=-1/0,ee=-1/0;for(const ne of P)B=Math.min(B,ne.x),N=Math.min(N,ne.y),J=Math.max(J,ne.x),ee=Math.max(ee,ne.y);for(let ne=0;ne<R.length;ne++){const _e=this._tiles[R[ne]];if(_e.holdingForFade())continue;const be=_e.tileID,ve=Math.pow(2,v.zoom-_e.tileID.overscaledZ),ke=d*_e.queryPadding*o.X/_e.tileSize/ve,ae=[be.getTilePoint(new o.Z(B,N)),be.getTilePoint(new o.Z(J,ee))];if(ae[0].x-ke<o.X&&ae[0].y-ke<o.X&&ae[1].x+ke>=0&&ae[1].y+ke>=0){const Ee=E.map(Ue=>be.getTilePoint(Ue)),ze=P.map(Ue=>be.getTilePoint(Ue));y.push({tile:_e,tileID:be,queryGeometry:Ee,cameraQueryGeometry:ze,scale:ve})}}return y}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(_=>this._tiles[_].tileID);for(const _ of d)_.posMatrix=this.transform.calculatePosMatrix(_.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Ar(this._source.type)){const a=C.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,_){this._state.updateState(a=a||"_geojsonTileLayer",d,_)}removeFeatureState(a,d,_){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,_)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,_){const y=this._tiles[a];y&&y.setDependencies(d,_)}reloadTilesForDependencies(a,d){for(const _ in this._tiles)this._tiles[_].hasDependency(a,d)&&this._reloadTile(_,"reloading");this._cache.filter(_=>!_.hasDependency(a,d))}}function Qn(w,a){const d=Math.abs(2*w.wrap)-+(w.wrap<0),_=Math.abs(2*a.wrap)-+(a.wrap<0);return w.overscaledZ-a.overscaledZ||_-d||a.canonical.y-w.canonical.y||a.canonical.x-w.canonical.x}function Ar(w){return w==="raster"||w==="image"||w==="video"}mi.maxOverzooming=10,mi.maxUnderzooming=3;class bi{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ac(a,0,1);let d=1,_=this._distances[d];const y=a*this.paddedLength+this.padding;for(;_<y&&d<this._distances.length;)_=this._distances[++d];const v=d-1,T=this._distances[v],E=_-T,P=E>0?(y-T)/E:0;return this.points[v].mult(1-P).add(this.points[d].mult(P))}}function Hr(w,a){let d=!0;return w==="always"||w!=="never"&&a!=="never"||(d=!1),d}class ns{constructor(a,d,_){const y=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(a/_),this.yCellCount=Math.ceil(d/_);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,_,y,v){this._forEachCell(d,_,y,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(y),this.bboxes.push(v)}insertCircle(a,d,_,y){this._forEachCell(d-y,_-y,d+y,_+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(_),this.circles.push(y)}_insertBoxCell(a,d,_,y,v,T){this.boxCells[v].push(T)}_insertCircleCell(a,d,_,y,v,T){this.circleCells[v].push(T)}_query(a,d,_,y,v,T,E){if(_<0||a>this.width||y<0||d>this.height)return[];const P=[];if(a<=0&&d<=0&&this.width<=_&&this.height<=y){if(v)return[{key:null,x1:a,y1:d,x2:_,y2:y}];for(let R=0;R<this.boxKeys.length;R++)P.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const B=this.circles[3*R],N=this.circles[3*R+1],J=this.circles[3*R+2];P.push({key:this.circleKeys[R],x1:B-J,y1:N-J,x2:B+J,y2:N+J})}}else this._forEachCell(a,d,_,y,this._queryCell,P,{hitTest:v,overlapMode:T,seenUids:{box:{},circle:{}}},E);return P}query(a,d,_,y){return this._query(a,d,_,y,!1,null)}hitTest(a,d,_,y,v,T){return this._query(a,d,_,y,!0,v,T).length>0}hitTestCircle(a,d,_,y,v){const T=a-_,E=a+_,P=d-_,R=d+_;if(E<0||T>this.width||R<0||P>this.height)return!1;const B=[];return this._forEachCell(T,P,E,R,this._queryCellCircle,B,{hitTest:!0,overlapMode:y,circle:{x:a,y:d,radius:_},seenUids:{box:{},circle:{}}},v),B.length>0}_queryCell(a,d,_,y,v,T,E,P){const{seenUids:R,hitTest:B,overlapMode:N}=E,J=this.boxCells[v];if(J!==null){const ne=this.bboxes;for(const _e of J)if(!R.box[_e]){R.box[_e]=!0;const be=4*_e,ve=this.boxKeys[_e];if(a<=ne[be+2]&&d<=ne[be+3]&&_>=ne[be+0]&&y>=ne[be+1]&&(!P||P(ve))&&(!B||!Hr(N,ve.overlapMode))&&(T.push({key:ve,x1:ne[be],y1:ne[be+1],x2:ne[be+2],y2:ne[be+3]}),B))return!0}}const ee=this.circleCells[v];if(ee!==null){const ne=this.circles;for(const _e of ee)if(!R.circle[_e]){R.circle[_e]=!0;const be=3*_e,ve=this.circleKeys[_e];if(this._circleAndRectCollide(ne[be],ne[be+1],ne[be+2],a,d,_,y)&&(!P||P(ve))&&(!B||!Hr(N,ve.overlapMode))){const ke=ne[be],ae=ne[be+1],Ee=ne[be+2];if(T.push({key:ve,x1:ke-Ee,y1:ae-Ee,x2:ke+Ee,y2:ae+Ee}),B)return!0}}}return!1}_queryCellCircle(a,d,_,y,v,T,E,P){const{circle:R,seenUids:B,overlapMode:N}=E,J=this.boxCells[v];if(J!==null){const ne=this.bboxes;for(const _e of J)if(!B.box[_e]){B.box[_e]=!0;const be=4*_e,ve=this.boxKeys[_e];if(this._circleAndRectCollide(R.x,R.y,R.radius,ne[be+0],ne[be+1],ne[be+2],ne[be+3])&&(!P||P(ve))&&!Hr(N,ve.overlapMode))return T.push(!0),!0}}const ee=this.circleCells[v];if(ee!==null){const ne=this.circles;for(const _e of ee)if(!B.circle[_e]){B.circle[_e]=!0;const be=3*_e,ve=this.circleKeys[_e];if(this._circlesCollide(ne[be],ne[be+1],ne[be+2],R.x,R.y,R.radius)&&(!P||P(ve))&&!Hr(N,ve.overlapMode))return T.push(!0),!0}}}_forEachCell(a,d,_,y,v,T,E,P){const R=this._convertToXCellCoord(a),B=this._convertToYCellCoord(d),N=this._convertToXCellCoord(_),J=this._convertToYCellCoord(y);for(let ee=R;ee<=N;ee++)for(let ne=B;ne<=J;ne++)if(v.call(this,a,d,_,y,this.xCellCount*ne+ee,T,E,P))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,_,y,v,T){const E=y-a,P=v-d,R=_+T;return R*R>E*E+P*P}_circleAndRectCollide(a,d,_,y,v,T,E){const P=(T-y)/2,R=Math.abs(a-(y+P));if(R>P+_)return!1;const B=(E-v)/2,N=Math.abs(d-(v+B));if(N>B+_)return!1;if(R<=P||N<=B)return!0;const J=R-P,ee=N-B;return J*J+ee*ee<=_*_}}function ds(w,a,d,_,y){const v=o.H();return a?(o.K(v,v,[1/y,1/y,1]),d||o.ad(v,v,_.angle)):o.L(v,_.labelPlaneMatrix,w),v}function Wr(w,a,d,_,y){if(a){const v=o.ae(w);return o.K(v,v,[y,y,1]),d||o.ad(v,v,-_.angle),v}return _.glCoordMatrix}function ge(w,a,d,_){let y;_?(y=[w,a,_(w,a),1],o.af(y,y,d)):(y=[w,a,0,1],Ri(y,y,d));const v=y[3];return{point:new o.P(y[0]/v,y[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function W(w,a){return .5+w/a*.5}function H(w,a){return w.x>=-a[0]&&w.x<=a[0]&&w.y>=-a[1]&&w.y<=a[1]}function te(w,a,d,_,y,v,T,E,P,R,B,N,J,ee,ne){const _e=_?w.textSizeData:w.iconSizeData,be=o.ag(_e,d.transform.zoom),ve=[256/d.width*2+1,256/d.height*2+1],ke=_?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ke.clear();const ae=w.lineVertexArray,Ee=_?w.text.placedSymbolArray:w.icon.placedSymbolArray,ze=d.transform.width/d.transform.height;let Ue=!1;for(let ht=0;ht<Ee.length;ht++){const kt=Ee.get(ht);if(kt.hidden||kt.writingMode===o.ah.vertical&&!Ue){ci(kt.numGlyphs,ke);continue}Ue=!1;const Vt=ge(kt.anchorX,kt.anchorY,a,ne);if(!H(Vt.point,ve)){ci(kt.numGlyphs,ke);continue}const Gt=W(d.transform.cameraToCenterDistance,Vt.signedDistanceFromCamera),zt=o.ai(_e,be,kt),Pt=T?zt/Gt:zt*Gt,$t={getElevation:ne,labelPlaneMatrix:y,lineVertexArray:ae,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:R,tileAnchorPoint:new o.P(kt.anchorX,kt.anchorY),unwrappedTileID:B,width:N,height:J,translation:ee},yi=Pe($t,kt,Pt,!1,E,a,v,w.glyphOffsetArray,ke,ze,P);Ue=yi.useVertical,(yi.notEnoughRoom||Ue||yi.needsFlipping&&Pe($t,kt,Pt,!0,E,a,v,w.glyphOffsetArray,ke,ze,P).notEnoughRoom)&&ci(kt.numGlyphs,ke)}_?w.text.dynamicLayoutVertexBuffer.updateData(ke):w.icon.dynamicLayoutVertexBuffer.updateData(ke)}function me(w,a,d,_,y,v,T,E){const P=v.glyphStartIndex+v.numGlyphs,R=v.lineStartIndex,B=v.lineStartIndex+v.lineLength,N=a.getoffsetX(v.glyphStartIndex),J=a.getoffsetX(P-1),ee=Et(w*N,d,_,y,v.segment,R,B,E,T);if(!ee)return null;const ne=Et(w*J,d,_,y,v.segment,R,B,E,T);return ne?E.projectionCache.anyProjectionOccluded?null:{first:ee,last:ne}:null}function Te(w,a,d,_){return w===o.ah.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*_?{useVertical:!0}:(w===o.ah.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function Pe(w,a,d,_,y,v,T,E,P,R,B){const N=d/24,J=a.lineOffsetX*N,ee=a.lineOffsetY*N;let ne;if(a.numGlyphs>1){const _e=a.glyphStartIndex+a.numGlyphs,be=a.lineStartIndex,ve=a.lineStartIndex+a.lineLength,ke=me(N,E,J,ee,_,a,B,w);if(!ke)return{notEnoughRoom:!0};const ae=ge(ke.first.point.x,ke.first.point.y,T,w.getElevation).point,Ee=ge(ke.last.point.x,ke.last.point.y,T,w.getElevation).point;if(y&&!_){const ze=Te(a.writingMode,ae,Ee,R);if(ze)return ze}ne=[ke.first];for(let ze=a.glyphStartIndex+1;ze<_e-1;ze++)ne.push(Et(N*E.getoffsetX(ze),J,ee,_,a.segment,be,ve,w,B));ne.push(ke.last)}else{if(y&&!_){const be=ge(w.tileAnchorPoint.x,w.tileAnchorPoint.y,v,w.getElevation).point,ve=a.lineStartIndex+a.segment+1,ke=new o.P(w.lineVertexArray.getx(ve),w.lineVertexArray.gety(ve)),ae=ge(ke.x,ke.y,v,w.getElevation),Ee=ae.signedDistanceFromCamera>0?ae.point:function(Ue,ht,kt,Vt,Gt,zt){return Oe(Ue,ht,kt,1,Gt,zt)}(w.tileAnchorPoint,ke,be,0,v,w),ze=Te(a.writingMode,be,Ee,R);if(ze)return ze}const _e=Et(N*E.getoffsetX(a.glyphStartIndex),J,ee,_,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,w,B);if(!_e||w.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[_e]}for(const _e of ne)o.aj(P,_e.point,_e.angle);return{}}function Oe(w,a,d,_,y,v){const T=w.add(w.sub(a)._unit()),E=y!==void 0?ge(T.x,T.y,y,v.getElevation).point:tt(T.x,T.y,v).point,P=d.sub(E);return d.add(P._mult(_/P.mag()))}function we(w,a,d){const _=a.projectionCache;if(_.projections[w])return _.projections[w];const y=new o.P(a.lineVertexArray.getx(w),a.lineVertexArray.gety(w)),v=tt(y.x,y.y,a);if(v.signedDistanceFromCamera>0)return _.projections[w]=v.point,_.anyProjectionOccluded=_.anyProjectionOccluded||v.isOccluded,v.point;const T=w-d.direction;return function(E,P,R,B,N){return Oe(E,P,R,B,void 0,N)}(d.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(T),a.lineVertexArray.gety(T)),y,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,a)}function tt(w,a,d){const _=w+d.translation[0],y=a+d.translation[1];let v;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(v=d.projection.projectTileCoordinates(_,y,d.unwrappedTileID,d.getElevation),v.point.x=(.5*v.point.x+.5)*d.width,v.point.y=(.5*-v.point.y+.5)*d.height):(v=ge(_,y,d.labelPlaneMatrix,d.getElevation),v.isOccluded=!1),v}function mt(w,a,d){return w._unit()._perp()._mult(a*d)}function Xe(w,a,d,_,y,v,T,E,P){if(E.projectionCache.offsets[w])return E.projectionCache.offsets[w];const R=d.add(a);if(w+P.direction<_||w+P.direction>=y)return E.projectionCache.offsets[w]=R,R;const B=we(w+P.direction,E,P),N=mt(B.sub(d),T,P.direction),J=d.add(N),ee=B.add(N);return E.projectionCache.offsets[w]=o.ak(v,R,J,ee)||R,E.projectionCache.offsets[w]}function Et(w,a,d,_,y,v,T,E,P){const R=_?w-a:w+a;let B=R>0?1:-1,N=0;_&&(B*=-1,N=Math.PI),B<0&&(N+=Math.PI);let J,ee=B>0?v+y:v+y+1;E.projectionCache.cachedAnchorPoint?J=E.projectionCache.cachedAnchorPoint:(J=tt(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=J);let ne,_e,be=J,ve=J,ke=0,ae=0;const Ee=Math.abs(R),ze=[];let Ue;for(;ke+ae<=Ee;){if(ee+=B,ee<v||ee>=T)return null;ke+=ae,ve=be,_e=ne;const Vt={absOffsetX:Ee,direction:B,distanceFromAnchor:ke,previousVertex:ve};if(be=we(ee,E,Vt),d===0)ze.push(ve),Ue=be.sub(ve);else{let Gt;const zt=be.sub(ve);Gt=zt.mag()===0?mt(we(ee+B,E,Vt).sub(be),d,B):mt(zt,d,B),_e||(_e=ve.add(Gt)),ne=Xe(ee,Gt,be,v,T,_e,d,E,Vt),ze.push(_e),Ue=ne.sub(_e)}ae=Ue.mag()}const ht=Ue._mult((Ee-ke)/ae)._add(_e||ve),kt=N+Math.atan2(be.y-ve.y,be.x-ve.x);return ze.push(ht),{point:ht,angle:P?kt:0,path:ze}}const oi=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ci(w,a){for(let d=0;d<w;d++){const _=a.length;a.resize(_+4),a.float32.set(oi,3*_)}}function Ri(w,a,d){const _=a[0],y=a[1];return w[0]=d[0]*_+d[4]*y+d[12],w[1]=d[1]*_+d[5]*y+d[13],w[3]=d[3]*_+d[7]*y+d[15],w}const vi=100;class Oi{constructor(a,d,_=new ns(a.width+200,a.height+200,25),y=new ns(a.width+200,a.height+200,25)){this.transform=a,this.mapProjection=d,this.grid=_,this.ignoredGrid=y,this.pitchFactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+vi,this.screenBottomBoundary=a.height+vi,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,_,y,v,T,E,P,R,B,N){const J=a.anchorPointX+P[0],ee=a.anchorPointY+P[1],ne=this.projectAndGetPerspectiveRatio(y,J,ee,v,B),_e=_*ne.perspectiveRatio;let be;if(T||E)be=this._projectCollisionBox(a,_e,y,v,T,E,P,ne,B,N);else{const ze=ne.point.x+(N?N.x*_e:0),Ue=ne.point.y+(N?N.y*_e:0);be={allPointsOccluded:!1,box:[ze+a.x1*_e,Ue+a.y1*_e,ze+a.x2*_e,Ue+a.y2*_e]}}const[ve,ke,ae,Ee]=be.box;return this.mapProjection.useSpecialProjectionForSymbols&&(T?be.allPointsOccluded:this.mapProjection.isOccluded(J,ee,v))||ne.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ve,ke,ae,Ee)||d!=="always"&&this.grid.hitTest(ve,ke,ae,Ee,d,R)?{box:[ve,ke,ae,Ee],placeable:!1,offscreen:!1}:{box:[ve,ke,ae,Ee],placeable:!0,offscreen:this.isOffscreen(ve,ke,ae,Ee)}}placeCollisionCircles(a,d,_,y,v,T,E,P,R,B,N,J,ee,ne,_e,be){const ve=[],ke=new o.P(d.anchorX,d.anchorY),ae=this.getPerspectiveRatio(T,ke.x,ke.y,E,be),Ee=(N?v/ae:v*ae)/o.ap,ze={getElevation:be,labelPlaneMatrix:P,lineVertexArray:_,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ke,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:_e},Ue=me(Ee,y,d.lineOffsetX*Ee,d.lineOffsetY*Ee,!1,d,!1,ze);let ht=!1,kt=!1,Vt=!0;if(Ue){const Gt=.5*ee*ae+ne,zt=new o.P(-100,-100),Pt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),$t=new bi,yi=Ue.first,Bt=Ue.last;let qt=[];for(let ki=yi.path.length-1;ki>=1;ki--)qt.push(yi.path[ki]);for(let ki=1;ki<Bt.path.length;ki++)qt.push(Bt.path[ki]);const _i=2.5*Gt;if(R){const ki=this.projectPathToScreenSpace(qt,ze,R);qt=ki.some(zi=>zi.signedDistanceFromCamera<=0)?[]:ki.map(zi=>zi.point)}let nn=[];if(qt.length>0){const ki=qt[0].clone(),zi=qt[0].clone();for(let rn=1;rn<qt.length;rn++)ki.x=Math.min(ki.x,qt[rn].x),ki.y=Math.min(ki.y,qt[rn].y),zi.x=Math.max(zi.x,qt[rn].x),zi.y=Math.max(zi.y,qt[rn].y);nn=ki.x>=zt.x&&zi.x<=Pt.x&&ki.y>=zt.y&&zi.y<=Pt.y?[qt]:zi.x<zt.x||ki.x>Pt.x||zi.y<zt.y||ki.y>Pt.y?[]:o.al([qt],zt.x,zt.y,Pt.x,Pt.y)}for(const ki of nn){$t.reset(ki,.25*Gt);let zi=0;zi=$t.length<=.5*Gt?1:Math.ceil($t.paddedLength/_i)+1;for(let rn=0;rn<zi;rn++){const Rn=rn/Math.max(zi-1,1),Lr=$t.lerp(Rn),sn=Lr.x+vi,tr=Lr.y+vi;ve.push(sn,tr,Gt,0);const Gn=sn-Gt,On=tr-Gt,Hn=sn+Gt,Yr=tr+Gt;if(Vt=Vt&&this.isOffscreen(Gn,On,Hn,Yr),kt=kt||this.isInsideGrid(Gn,On,Hn,Yr),a!=="always"&&this.grid.hitTestCircle(sn,tr,Gt,a,J)&&(ht=!0,!B))return{circles:[],offscreen:!1,collisionDetected:ht}}}}return{circles:!B&&ht||!kt||ae<this.perspectiveRatioCutoff?[]:ve,offscreen:Vt,collisionDetected:ht}}projectPathToScreenSpace(a,d,_){return a.map(y=>ge(y.x,y.y,_,d.getElevation))}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let _=1/0,y=1/0,v=-1/0,T=-1/0;for(const B of a){const N=new o.P(B.x+vi,B.y+vi);_=Math.min(_,N.x),y=Math.min(y,N.y),v=Math.max(v,N.x),T=Math.max(T,N.y),d.push(N)}const E=this.grid.query(_,y,v,T).concat(this.ignoredGrid.query(_,y,v,T)),P={},R={};for(const B of E){const N=B.key;if(P[N.bucketInstanceId]===void 0&&(P[N.bucketInstanceId]={}),P[N.bucketInstanceId][N.featureIndex])continue;const J=[new o.P(B.x1,B.y1),new o.P(B.x2,B.y1),new o.P(B.x2,B.y2),new o.P(B.x1,B.y2)];o.am(d,J)&&(P[N.bucketInstanceId][N.featureIndex]=!0,R[N.bucketInstanceId]===void 0&&(R[N.bucketInstanceId]=[]),R[N.bucketInstanceId].push(N.featureIndex))}return R}insertCollisionBox(a,d,_,y,v,T){(_?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:v,collisionGroupID:T,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,_,y,v,T){const E=_?this.ignoredGrid:this.grid,P={bucketInstanceId:y,featureIndex:v,collisionGroupID:T,overlapMode:d};for(let R=0;R<a.length;R+=4)E.insertCircle(P,a[R],a[R+1],a[R+2])}projectAndGetPerspectiveRatio(a,d,_,y,v){let T;v?(T=[d,_,v(d,_),1],o.af(T,T,a)):(T=[d,_,0,1],Ri(T,T,a));const E=T[3];return{point:new o.P((T[0]/E+1)/2*this.transform.width+vi,(-T[1]/E+1)/2*this.transform.height+vi),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(a,d,_,y,v){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,_,y,v):ge(d,_,a,v);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(a,d,_,y){return _<vi||a>=this.screenRightBoundary||y<vi||d>this.screenBottomBoundary}isInsideGrid(a,d,_,y){return _>=0&&a<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=o.an([]);return o.J(a,a,[-100,-100,0]),a}_projectCollisionBox(a,d,_,y,v,T,E,P,R,B){let N=new o.P(1,0),J=new o.P(0,1);const ee=new o.P(a.anchorPointX+E[0],a.anchorPointY+E[1]);if(T&&!v){const Vt=this.projectAndGetPerspectiveRatio(_,ee.x+1,ee.y,y,R).point.sub(P.point).unit(),Gt=Math.atan(Vt.y/Vt.x)+(Vt.x<0?Math.PI:0),zt=Math.sin(Gt),Pt=Math.cos(Gt);N=new o.P(Pt,zt),J=new o.P(-zt,Pt)}else if(!T&&v){const Vt=-this.transform.angle,Gt=Math.sin(Vt),zt=Math.cos(Vt);N=new o.P(zt,Gt),J=new o.P(-Gt,zt)}let ne=P.point,_e=d;if(v){ne=ee;const Vt=this.transform.zoom-Math.floor(this.transform.zoom);_e=Math.pow(2,-Vt),_e*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,y),B||(_e*=o.ac(.5+P.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}B&&(ne=ne.add(N.mult(B.x*_e)).add(J.mult(B.y*_e)));const be=a.x1*_e,ve=a.x2*_e,ke=(be+ve)/2,ae=a.y1*_e,Ee=a.y2*_e,ze=(ae+Ee)/2,Ue=[{offsetX:be,offsetY:ae},{offsetX:ke,offsetY:ae},{offsetX:ve,offsetY:ae},{offsetX:ve,offsetY:ze},{offsetX:ve,offsetY:Ee},{offsetX:ke,offsetY:Ee},{offsetX:be,offsetY:Ee},{offsetX:be,offsetY:ze}];let ht=[];for(const{offsetX:Vt,offsetY:Gt}of Ue)ht.push(new o.P(ne.x+N.x*Vt+J.x*Gt,ne.y+N.y*Vt+J.y*Gt));let kt=!1;if(v){const Vt=ht.map(Gt=>this.projectAndGetPerspectiveRatio(_,Gt.x,Gt.y,y,R));kt=Vt.some(Gt=>!Gt.isOccluded),ht=Vt.map(Gt=>Gt.point)}else kt=!0;return{box:o.ao(ht),allPointsOccluded:!kt}}}function Mi(w,a,d){return a*(o.X/(w.tileSize*Math.pow(2,d-w.tileID.overscaledZ)))}class bn{constructor(a,d,_,y){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):y&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class un{constructor(a,d,_,y,v){this.text=new bn(a?a.text:null,d,_,v),this.icon=new bn(a?a.icon:null,d,y,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ii{constructor(a,d,_){this.text=a,this.icon=d,this.skipFade=_}}class Hi{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class an{constructor(a,d,_,y,v){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=_,this.bucketIndex=y,this.tileID=v}}class Tn{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:_=>_.collisionGroupID===d}}return this.collisionGroups[a]}}function Pn(w,a,d,_,y){const{horizontalAlign:v,verticalAlign:T}=o.au(w);return new o.P(-(v-.5)*a+_[0]*y,-(T-.5)*d+_[1]*y)}class Zn{constructor(a,d,_,y,v,T){this.transform=a.clone(),this.terrain=_,this.collisionIndex=new Oi(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new Tn(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const d=this.terrain;return d?(_,y)=>d.getElevation(a,_,y):null}getBucketParts(a,d,_,y){const v=_.getBucket(d),T=_.latestFeatureIndex;if(!v||!T||d.id!==v.layerIds[0])return;const E=_.collisionBoxArray,P=v.layers[0].layout,R=v.layers[0].paint,B=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),N=_.tileSize/o.X,J=_.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(J),ne=P.get("text-pitch-alignment")==="map",_e=P.get("text-rotation-alignment")==="map",be=Mi(_,1,this.transform.zoom),ve=this.collisionIndex.mapProjection.translatePosition(this.transform,_,R.get("text-translate"),R.get("text-translate-anchor")),ke=this.collisionIndex.mapProjection.translatePosition(this.transform,_,R.get("icon-translate"),R.get("icon-translate-anchor")),ae=ds(ee,ne,_e,this.transform,be);let Ee=null;if(ne){const Ue=Wr(ee,ne,_e,this.transform,be);Ee=o.L([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[v.bucketInstanceId]=new an(v.bucketInstanceId,T,v.sourceLayerIndex,v.index,_.tileID);const ze={bucket:v,layout:P,translationText:ve,translationIcon:ke,posMatrix:ee,unwrappedTileID:J,textLabelPlaneMatrix:ae,labelToScreenMatrix:Ee,scale:B,textPixelRatio:N,holdingForFade:_.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(y)for(const Ue of v.sortKeyRanges){const{sortKey:ht,symbolInstanceStart:kt,symbolInstanceEnd:Vt}=Ue;a.push({sortKey:ht,symbolInstanceStart:kt,symbolInstanceEnd:Vt,parameters:ze})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(a,d,_,y,v,T,E,P,R,B,N,J,ee,ne,_e,be,ve,ke,ae){const Ee=o.aq[a.textAnchor],ze=[a.textOffset0,a.textOffset1],Ue=Pn(Ee,_,y,ze,v),ht=this.collisionIndex.placeCollisionBox(d,J,P,R,B,E,T,be,N.predicate,ae,Ue);if((!ke||this.collisionIndex.placeCollisionBox(ke,J,P,R,B,E,T,ve,N.predicate,ae,Ue).placeable)&&ht.placeable){let kt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(kt=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:ze,width:_,height:y,anchor:Ee,textBoxScale:v,prevAnchor:kt},this.markUsedJustification(ne,Ee,ee,_e),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,_e,ee),this.placedOrientations[ee.crossTileID]=_e),{shift:Ue,placedGlyphBoxes:ht}}}placeLayerBucketPart(a,d,_){const{bucket:y,layout:v,translationText:T,translationIcon:E,posMatrix:P,unwrappedTileID:R,textLabelPlaneMatrix:B,labelToScreenMatrix:N,textPixelRatio:J,holdingForFade:ee,collisionBoxArray:ne,partiallyEvaluatedTextSize:_e,collisionGroup:be}=a.parameters,ve=v.get("text-optional"),ke=v.get("icon-optional"),ae=o.ar(v,"text-overlap","text-allow-overlap"),Ee=ae==="always",ze=o.ar(v,"icon-overlap","icon-allow-overlap"),Ue=ze==="always",ht=v.get("text-rotation-alignment")==="map",kt=v.get("text-pitch-alignment")==="map",Vt=v.get("icon-text-fit")!=="none",Gt=v.get("symbol-z-order")==="viewport-y",zt=Ee&&(Ue||!y.hasIconData()||ke),Pt=Ue&&(Ee||!y.hasTextData()||ve);!y.collisionArrays&&ne&&y.deserializeCollisionBoxes(ne);const $t=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),yi=(Bt,qt,_i)=>{var nn,ki;if(d[Bt.crossTileID])return;if(ee)return void(this.placements[Bt.crossTileID]=new Ii(!1,!1,!1));let zi=!1,rn=!1,Rn=!0,Lr=null,sn={box:null,placeable:!1,offscreen:null},tr={box:null,placeable:!1,offscreen:null},Gn=null,On=null,Hn=null,Yr=0,bo=0,el=0;qt.textFeatureIndex?Yr=qt.textFeatureIndex:Bt.useRuntimeCollisionCircles&&(Yr=Bt.featureIndex),qt.verticalTextFeatureIndex&&(bo=qt.verticalTextFeatureIndex);const vo=qt.textBox;if(vo){const xr=Mn=>{let Fn=o.ah.horizontal;if(y.allowVerticalPlacement&&!Mn&&this.prevPlacement){const dr=this.prevPlacement.placedOrientations[Bt.crossTileID];dr&&(this.placedOrientations[Bt.crossTileID]=dr,Fn=dr,this.markUsedOrientation(y,Fn,Bt))}return Fn},kr=(Mn,Fn)=>{if(y.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&qt.verticalTextBox){for(const dr of y.writingModes)if(dr===o.ah.vertical?(sn=Fn(),tr=sn):sn=Mn(),sn&&sn.placeable)break}else sn=Mn()},_s=Bt.textAnchorOffsetStartIndex,Rr=Bt.textAnchorOffsetEndIndex;if(Rr===_s){const Mn=(Fn,dr)=>{const Li=this.collisionIndex.placeCollisionBox(Fn,ae,J,P,R,kt,ht,T,be.predicate,$t);return Li&&Li.placeable&&(this.markUsedOrientation(y,dr,Bt),this.placedOrientations[Bt.crossTileID]=dr),Li};kr(()=>Mn(vo,o.ah.horizontal),()=>{const Fn=qt.verticalTextBox;return y.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&Fn?Mn(Fn,o.ah.vertical):{box:null,offscreen:null}}),xr(sn&&sn.placeable)}else{let Mn=o.aq[(ki=(nn=this.prevPlacement)===null||nn===void 0?void 0:nn.variableOffsets[Bt.crossTileID])===null||ki===void 0?void 0:ki.anchor];const Fn=(Li,Vs,wo)=>{const xo=Li.x2-Li.x1,Du=Li.y2-Li.y1,eh=Bt.textBoxScale,Lu=Vt&&ze==="never"?Vs:null;let gs=null,Ru=ae==="never"?1:2,il="never";Mn&&Ru++;for(let oa=0;oa<Ru;oa++){for(let nl=_s;nl<Rr;nl++){const rl=y.textAnchorOffsets.get(nl);if(Mn&&rl.textAnchor!==Mn)continue;const ko=this.attemptAnchorPlacement(rl,Li,xo,Du,eh,ht,kt,J,P,R,be,il,Bt,y,wo,T,E,Lu,$t);if(ko&&(gs=ko.placedGlyphBoxes,gs&&gs.placeable))return zi=!0,Lr=ko.shift,gs}Mn?Mn=null:il=ae}return _&&!gs&&(gs={box:this.collisionIndex.placeCollisionBox(vo,"always",J,P,R,kt,ht,T,be.predicate,$t,new o.P(0,0)).box,offscreen:!1,placeable:!1}),gs};kr(()=>Fn(vo,qt.iconBox,o.ah.horizontal),()=>{const Li=qt.verticalTextBox;return y.allowVerticalPlacement&&(!sn||!sn.placeable)&&Bt.numVerticalGlyphVertices>0&&Li?Fn(Li,qt.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),sn&&(zi=sn.placeable,Rn=sn.offscreen);const dr=xr(sn&&sn.placeable);if(!zi&&this.prevPlacement){const Li=this.prevPlacement.variableOffsets[Bt.crossTileID];Li&&(this.variableOffsets[Bt.crossTileID]=Li,this.markUsedJustification(y,Li.anchor,Bt,dr))}}}if(Gn=sn,zi=Gn&&Gn.placeable,Rn=Gn&&Gn.offscreen,Bt.useRuntimeCollisionCircles){const xr=y.text.placedSymbolArray.get(Bt.centerJustifiedTextSymbolIndex),kr=o.ai(y.textSizeData,_e,xr),_s=v.get("text-padding");On=this.collisionIndex.placeCollisionCircles(ae,xr,y.lineVertexArray,y.glyphOffsetArray,kr,P,R,B,N,_,kt,be.predicate,Bt.collisionCircleDiameter,_s,T,$t),On.circles.length&&On.collisionDetected&&!_&&o.w("Collisions detected, but collision boxes are not shown"),zi=Ee||On.circles.length>0&&!On.collisionDetected,Rn=Rn&&On.offscreen}if(qt.iconFeatureIndex&&(el=qt.iconFeatureIndex),qt.iconBox){const xr=kr=>this.collisionIndex.placeCollisionBox(kr,ze,J,P,R,kt,ht,E,be.predicate,$t,Vt&&Lr?Lr:void 0);tr&&tr.placeable&&qt.verticalIconBox?(Hn=xr(qt.verticalIconBox),rn=Hn.placeable):(Hn=xr(qt.iconBox),rn=Hn.placeable),Rn=Rn&&Hn.offscreen}const wr=ve||Bt.numHorizontalGlyphVertices===0&&Bt.numVerticalGlyphVertices===0,tl=ke||Bt.numIconVertices===0;wr||tl?tl?wr||(rn=rn&&zi):zi=rn&&zi:rn=zi=rn&&zi;const bc=rn&&Hn.placeable;if(zi&&Gn.placeable&&this.collisionIndex.insertCollisionBox(Gn.box,ae,v.get("text-ignore-placement"),y.bucketInstanceId,tr&&tr.placeable&&bo?bo:Yr,be.ID),bc&&this.collisionIndex.insertCollisionBox(Hn.box,ze,v.get("icon-ignore-placement"),y.bucketInstanceId,el,be.ID),On&&zi&&this.collisionIndex.insertCollisionCircles(On.circles,ae,v.get("text-ignore-placement"),y.bucketInstanceId,Yr,be.ID),_&&this.storeCollisionData(y.bucketInstanceId,_i,qt,Gn,Hn,On),Bt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Bt.crossTileID]=new Ii(zi||zt,rn||Pt,Rn||y.justReloaded),d[Bt.crossTileID]=!0};if(Gt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Bt=y.getSortedSymbolIndexes(this.transform.angle);for(let qt=Bt.length-1;qt>=0;--qt){const _i=Bt[qt];yi(y.symbolInstances.get(_i),y.collisionArrays[_i],_i)}}else for(let Bt=a.symbolInstanceStart;Bt<a.symbolInstanceEnd;Bt++)yi(y.symbolInstances.get(Bt),y.collisionArrays[Bt],Bt);if(_&&y.bucketInstanceId in this.collisionCircleArrays){const Bt=this.collisionCircleArrays[y.bucketInstanceId];o.as(Bt.invProjMatrix,P),Bt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(a,d,_,y,v,T){if(_.textBox||_.iconBox){let E,P;this.collisionBoxArrays.has(a)?E=this.collisionBoxArrays.get(a):(E=new Map,this.collisionBoxArrays.set(a,E)),E.has(d)?P=E.get(d):(P={text:null,icon:null},E.set(d,P)),_.textBox&&(P.text=y.box),_.iconBox&&(P.icon=v.box)}if(T){let E=this.collisionCircleArrays[a];E===void 0&&(E=this.collisionCircleArrays[a]=new Hi);for(let P=0;P<T.circles.length;P+=4)E.circles.push(T.circles[P+0]),E.circles.push(T.circles[P+1]),E.circles.push(T.circles[P+2]),E.circles.push(T.collisionDetected?1:0)}}markUsedJustification(a,d,_,y){let v;v=y===o.ah.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.at(d)];const T=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const E of T)E>=0&&(a.text.placedSymbolArray.get(E).crossTileID=v>=0&&E!==v?0:_.crossTileID)}markUsedOrientation(a,d,_){const y=d===o.ah.horizontal||d===o.ah.horizontalOnly?d:0,v=d===o.ah.vertical?d:0,T=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const E of T)a.text.placedSymbolArray.get(E).placedOrientation=y;_.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let _=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const y=d?d.symbolFadeChange(a):1,v=d?d.opacities:{},T=d?d.variableOffsets:{},E=d?d.placedOrientations:{};for(const P in this.placements){const R=this.placements[P],B=v[P];B?(this.opacities[P]=new un(B,y,R.text,R.icon),_=_||R.text!==B.text.placed||R.icon!==B.icon.placed):(this.opacities[P]=new un(null,y,R.text,R.icon,R.skipFade),_=_||R.text||R.icon)}for(const P in v){const R=v[P];if(!this.opacities[P]){const B=new un(R,y,!1,!1);B.isHidden()||(this.opacities[P]=B,_=_||R.text.placed||R.icon.placed)}}for(const P in T)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=T[P]);for(const P in E)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=E[P]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");_?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const _={};for(const y of d){const v=y.getBucket(a);v&&y.latestFeatureIndex&&a.id===v.layerIds[0]&&this.updateBucketOpacities(v,y.tileID,_,y.collisionBoxArray)}}updateBucketOpacities(a,d,_,y){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const v=a.layers[0],T=v.layout,E=new un(null,0,!1,!1,!0),P=T.get("text-allow-overlap"),R=T.get("icon-allow-overlap"),B=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=T.get("text-rotation-alignment")==="map",J=T.get("text-pitch-alignment")==="map",ee=T.get("icon-text-fit")!=="none",ne=new un(null,0,P&&(R||!a.hasIconData()||T.get("icon-optional")),R&&(P||!a.hasTextData()||T.get("text-optional")),!0);!a.collisionArrays&&y&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(y);const _e=(ve,ke,ae)=>{for(let Ee=0;Ee<ke/4;Ee++)ve.opacityVertexArray.emplaceBack(ae);ve.hasVisibleVertices=ve.hasVisibleVertices||ae!==Ys},be=this.collisionBoxArrays.get(a.bucketInstanceId);for(let ve=0;ve<a.symbolInstances.length;ve++){const ke=a.symbolInstances.get(ve),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:Ee,crossTileID:ze}=ke;let Ue=this.opacities[ze];_[ze]?Ue=E:Ue||(Ue=ne,this.opacities[ze]=Ue),_[ze]=!0;const ht=ke.numIconVertices>0,kt=this.placedOrientations[ke.crossTileID],Vt=kt===o.ah.vertical,Gt=kt===o.ah.horizontal||kt===o.ah.horizontalOnly;if(ae>0||Ee>0){const Pt=ur(Ue.text);_e(a.text,ae,Vt?Ys:Pt),_e(a.text,Ee,Gt?Ys:Pt);const $t=Ue.text.isHidden();[ke.rightJustifiedTextSymbolIndex,ke.centerJustifiedTextSymbolIndex,ke.leftJustifiedTextSymbolIndex].forEach(qt=>{qt>=0&&(a.text.placedSymbolArray.get(qt).hidden=$t||Vt?1:0)}),ke.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(ke.verticalPlacedTextSymbolIndex).hidden=$t||Gt?1:0);const yi=this.variableOffsets[ke.crossTileID];yi&&this.markUsedJustification(a,yi.anchor,ke,kt);const Bt=this.placedOrientations[ke.crossTileID];Bt&&(this.markUsedJustification(a,"left",ke,Bt),this.markUsedOrientation(a,Bt,ke))}if(ht){const Pt=ur(Ue.icon),$t=!(ee&&ke.verticalPlacedIconSymbolIndex&&Vt);ke.placedIconSymbolIndex>=0&&(_e(a.icon,ke.numIconVertices,$t?Pt:Ys),a.icon.placedSymbolArray.get(ke.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),ke.verticalPlacedIconSymbolIndex>=0&&(_e(a.icon,ke.numVerticalIconVertices,$t?Ys:Pt),a.icon.placedSymbolArray.get(ke.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}const zt=be&&be.has(ve)?be.get(ve):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Pt=a.collisionArrays[ve];if(Pt){let $t=new o.P(0,0);if(Pt.textBox||Pt.verticalTextBox){let yi=!0;if(B){const Bt=this.variableOffsets[ze];Bt?($t=Pn(Bt.anchor,Bt.width,Bt.height,Bt.textOffset,Bt.textBoxScale),N&&$t._rotate(J?this.transform.angle:-this.transform.angle)):yi=!1}if(Pt.textBox||Pt.verticalTextBox){let Bt;Pt.textBox&&(Bt=Vt),Pt.verticalTextBox&&(Bt=Gt),Js(a.textCollisionBox.collisionVertexArray,Ue.text.placed,!yi||Bt,zt.text,$t.x,$t.y)}}if(Pt.iconBox||Pt.verticalIconBox){const yi=!!(!Gt&&Pt.verticalIconBox);let Bt;Pt.iconBox&&(Bt=yi),Pt.verticalIconBox&&(Bt=!yi),Js(a.iconCollisionBox.collisionVertexArray,Ue.icon.placed,Bt,zt.icon,ee?$t.x:0,ee?$t.y:0)}}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=ve.invProjMatrix,a.placementViewportMatrix=ve.viewportMatrix,a.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const _=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*_>a}setStale(){this.stale=!0}}function Js(w,a,d,_,y,v){_&&_.length!==0||(_=[0,0,0,0]);const T=_[0]-vi,E=_[1]-vi,P=_[2]-vi,R=_[3]-vi;w.emplaceBack(a?1:0,d?1:0,y||0,v||0,T,E),w.emplaceBack(a?1:0,d?1:0,y||0,v||0,P,E),w.emplaceBack(a?1:0,d?1:0,y||0,v||0,P,R),w.emplaceBack(a?1:0,d?1:0,y||0,v||0,T,R)}const Wi=Math.pow(2,25),Pl=Math.pow(2,24),Ml=Math.pow(2,17),lr=Math.pow(2,16),cr=Math.pow(2,9),Af=Math.pow(2,8),gr=Math.pow(2,1);function ur(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const a=w.placed?1:0,d=Math.floor(127*w.opacity);return d*Wi+a*Pl+d*Ml+a*lr+d*cr+a*Af+d*gr+a}const Ys=0;function As(){return{isOccluded:(w,a,d)=>!1,getPitchedTextCorrection:(w,a,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(w,a,d,_){throw new Error("Not implemented.")},translatePosition:(w,a,d,_)=>function(y,v,T,E,P=!1){if(!T[0]&&!T[1])return[0,0];const R=P?E==="map"?y.angle:0:E==="viewport"?-y.angle:0;if(R){const B=Math.sin(R),N=Math.cos(R);T=[T[0]*N-T[1]*B,T[0]*B+T[1]*N]}return[P?T[0]:Mi(v,T[0],y.zoom),P?T[1]:Mi(v,T[1],y.zoom)]}(w,a,d,_),getCircleRadiusCorrection:w=>1}}class vn{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,_,y,v){const T=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(T,y,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((E,P)=>E.sortKey-P.sortKey));this._currentPartIndex<T.length;)if(d.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,_),this._currentPartIndex++,v())return!0;return!1}}class Uo{constructor(a,d,_,y,v,T,E,P){this.placement=new Zn(a,As(),d,T,E,P),this._currentPlacementIndex=_.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(a,d,_){const y=C.now(),v=()=>!this._forceFullPlacement&&C.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=d[a[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=E)&&(!T.maxzoom||T.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new vn(T)),this._inProgressLayer.continuePlacement(_[T.source],this.placement,this._showCollisionBoxes,T,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Er=512/o.X/2;class _n{constructor(a,d,_){this.tileID=a,this.bucketInstanceId=_,this._symbolsByKey={};const y=new Map;for(let v=0;v<d.length;v++){const T=d.get(v),E=T.key,P=y.get(E);P?P.push(T):y.set(E,[T])}for(const[v,T]of y){const E={positions:T.map(P=>({x:Math.floor(P.anchorX*Er),y:Math.floor(P.anchorY*Er)})),crossTileIDs:T.map(P=>P.crossTileID)};if(E.positions.length>128){const P=new o.av(E.positions.length,16,Uint16Array);for(const{x:R,y:B}of E.positions)P.add(R,B);P.finish(),delete E.positions,E.index=P}this._symbolsByKey[v]=E}}getScaledCoordinates(a,d){const{x:_,y,z:v}=this.tileID.canonical,{x:T,y:E,z:P}=d.canonical,R=Er/Math.pow(2,P-v),B=(E*o.X+a.anchorY)*R,N=y*o.X*Er;return{x:Math.floor((T*o.X+a.anchorX)*R-_*o.X*Er),y:Math.floor(B-N)}}findMatches(a,d,_){const y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let v=0;v<a.length;v++){const T=a.get(v);if(T.crossTileID)continue;const E=this._symbolsByKey[T.key];if(!E)continue;const P=this.getScaledCoordinates(T,d);if(E.index){const R=E.index.range(P.x-y,P.y-y,P.x+y,P.y+y).sort();for(const B of R){const N=E.crossTileIDs[B];if(!_[N]){_[N]=!0,T.crossTileID=N;break}}}else if(E.positions)for(let R=0;R<E.positions.length;R++){const B=E.positions[R],N=E.crossTileIDs[R];if(Math.abs(B.x-P.x)<=y&&Math.abs(B.y-P.y)<=y&&!_[N]){_[N]=!0,T.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class ka{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Pr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const _ in this.indexes){const y=this.indexes[_],v={};for(const T in y){const E=y[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),v[E.tileID.key]=E}this.indexes[_]=v}this.lng=a}addBucket(a,d,_){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let v=0;v<d.symbolInstances.length;v++)d.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const y=this.usedCrossTileIDs[a.overscaledZ];for(const v in this.indexes){const T=this.indexes[v];if(Number(v)>a.overscaledZ)for(const E in T){const P=T[E];P.tileID.isChildOf(a)&&P.findMatches(d.symbolInstances,a,y)}else{const E=T[a.scaledTo(Number(v)).key];E&&E.findMatches(d.symbolInstances,a,y)}}for(let v=0;v<d.symbolInstances.length;v++){const T=d.symbolInstances.get(v);T.crossTileID||(T.crossTileID=_.generate(),y[T.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new _n(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const _ of d.getCrossTileIDsLists())for(const y of _)delete this.usedCrossTileIDs[a][y]}removeStaleBuckets(a){let d=!1;for(const _ in this.indexes){const y=this.indexes[_];for(const v in y)a[y[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,y[v]),delete y[v],d=!0)}return d}}class zl{constructor(){this.layerIndexes={},this.crossTileIDs=new ka,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,_){let y=this.layerIndexes[a.id];y===void 0&&(y=this.layerIndexes[a.id]=new Pr);let v=!1;const T={};y.handleWrapJump(_);for(const E of d){const P=E.getBucket(a);P&&a.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(E.tileID,P,this.crossTileIDs)&&(v=!0),T[P.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(v=!0),v}pruneUnusedLayers(a){const d={};a.forEach(_=>{d[_]=!0});for(const _ in this.layerIndexes)d[_]||delete this.layerIndexes[_]}}const Mr=(w,a)=>o.t(w,a&&a.filter(d=>d.identifier!=="source.canvas")),Ef=o.aw();class Ca extends o.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(const _ in this.sourceCaches){const y=this.sourceCaches[_].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[_].reload()}},this.map=a,this.dispatcher=new xe(ft(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",(_,y)=>this.getGlyphs(_,y)),this.dispatcher.registerMessageHandler("GI",(_,y)=>this.getImages(_,y)),this.imageManager=new Re,this.imageManager.setEventedParent(this),this.glyphManager=new We(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new zl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),Gr().on(Ae,this._rtlPluginLoaded),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const y=this.sourceCaches[_.sourceId];if(!y)return;const v=y.getSource();if(v&&v.vectorLayerIds)for(const T in this._layers){const E=this._layers[T];E.source===v.id&&this._validateLayer(E)}})}loadURL(a,d={},_){this.fire(new o.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const y=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const v=this._loadStyleRequest;o.h(y,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,d,_)}).catch(T=>{this._loadStyleRequest=null,T&&!v.signal.aborted&&this.fire(new o.j(T))})}loadJSON(a,d={},_){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,_)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Ef,{validate:!1})}_load(a,d,_){var y;const v=d.transformStyle?d.transformStyle(_,a):a;if(!d.validate||!Mr(this,o.u(v))){this._loaded=!0,this.stylesheet=v;for(const T in v.sources)this.addSource(T,v.sources[T],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new xt(this.stylesheet.light),this.sky=new di(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const a=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const _=o.aA(d);_.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=_}}_loadSprite(a,d=!1,_=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,T,E,P){return o._(this,void 0,void 0,function*(){const R=je(v),B=E>1?"@2x":"",N={},J={};for(const{id:ee,url:ne}of R){const _e=T.transformRequest(Ve(ne,B,".json"),"SpriteJSON");N[ee]=o.h(_e,P);const be=T.transformRequest(Ve(ne,B,".png"),"SpriteImage");J[ee]=ie.getImage(be,P)}return yield Promise.all([...Object.values(N),...Object.values(J)]),function(ee,ne){return o._(this,void 0,void 0,function*(){const _e={};for(const be in ee){_e[be]={};const ve=C.getImageCanvasContext((yield ne[be]).data),ke=(yield ee[be]).data;for(const ae in ke){const{width:Ee,height:ze,x:Ue,y:ht,sdf:kt,pixelRatio:Vt,stretchX:Gt,stretchY:zt,content:Pt,textFitWidth:$t,textFitHeight:yi}=ke[ae];_e[be][ae]={data:null,pixelRatio:Vt,sdf:kt,stretchX:Gt,stretchY:zt,content:Pt,textFitWidth:$t,textFitHeight:yi,spriteData:{width:Ee,height:ze,x:Ue,y:ht,context:ve}}}}return _e})}(N,J)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const T in v){this._spritesImagesIds[T]=[];const E=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(P=>!(P in v)):[];for(const P of E)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in v[T]){const R=T==="default"?P:`${T}:${P}`;this._spritesImagesIds[T].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,v[T][P],!1):this.imageManager.addImage(R,v[T][P]),d&&(this._changedImages[R]=!0)}}}).catch(v=>{this._spriteRequest=null,y=v,this.fire(new o.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),_&&_(y)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const _=a.sourceLayer;if(!_)return;const y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.j(new Error(`Source layer "${_}" does not exist on source "${y.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,d=!1){const _=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d?o.aB(_):_);const y=[];for(const v of a)if(_[v]){const T=d?o.aB(_[v]):_[v];y.push(T)}return y}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const _ of d){const y=this._layers[_];y.type!=="custom"&&(a[_]=y.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const y=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(y.length||v.length)&&this._updateWorkerLayers(y,v);for(const T in this._updatedSources){const E=this._updatedSources[T];if(E==="reload")this._reloadSource(T);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const _={};for(const y in this.sourceCaches){const v=this.sourceCaches[y];_[y]=v.used,v.used=!1}for(const y of this._order){const v=this._layers[y];v.recalculate(a,this._availableImages),!v.isHidden(a.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const y in _){const v=this.sourceCaches[y];!!_[y]!=!!v.used&&v.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(a),this.sky.recalculate(a),this.z=a.zoom,d&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var _;this._checkLoaded();const y=this.serialize();if(a=d.transformStyle?d.transformStyle(y,a):a,((_=d.validate)===null||_===void 0||_)&&Mr(this,o.u(a)))return!1;(a=o.aB(a)).layers=o.az(a.layers);const v=o.aC(y,a),T=this._getOperationsToPerform(v);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const E of T.operations)E();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],_=[];for(const y of a)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":d.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":d.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,y.args));break;case"setSky":d.push(()=>this.setSky.apply(this,y.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":d.push(()=>{});break;default:_.push(y.command)}return{operations:d,unimplemented:_}}addImage(a,d){if(this.getImage(a))return this.fire(new o.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,_={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.u.source,`sources.${a}`,d,null,_))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const y=this.sourceCaches[a]=new mi(a,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:a})),y.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===a)return this.fire(new o.j(new Error(`Source "${a}" cannot be removed while layer "${_}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const _=this.sourceCaches[a].getSource();if(_.type!=="geojson")throw new Error(`geojsonSource.type is ${_.type}, which is !== 'geojson`);_.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,_={}){this._checkLoaded();const y=a.id;if(this.getLayer(y))return void this.fire(new o.j(new Error(`Layer "${y}" already exists on this map.`)));let v;if(a.type==="custom"){if(Mr(this,o.aD(a)))return;v=o.aA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(y,a.source),a=o.aB(a),a=o.e(a,{source:y})),this._validate(o.u.layer,`layers.${y}`,a,{arrayIndex:-1},_))return;v=o.aA(a),this._validateLayer(v),v.setEventedParent(this,{layer:{id:y}})}const T=d?this._order.indexOf(d):this._order.length;if(d&&T===-1)this.fire(new o.j(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=v,this._removedLayers[y]&&v.source&&v.type!=="custom"){const E=this._removedLayers[y];delete this._removedLayers[y],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const _=this._order.indexOf(a);this._order.splice(_,1);const y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new o.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(y,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const _=this._order.indexOf(a);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,_){this._checkLoaded();const y=this.getLayer(a);y?y.minzoom===d&&y.maxzoom===_||(d!=null&&(y.minzoom=d),_!=null&&(y.maxzoom=_),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,_={}){this._checkLoaded();const y=this.getLayer(a);if(y){if(!o.aE(y.filter,d))return d==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.u.filter,`layers.${y.id}.filter`,d,null,_)||(y.filter=o.aB(d),this._updateLayer(y)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.aB(this.getLayer(a).filter)}setLayoutProperty(a,d,_,y={}){this._checkLoaded();const v=this.getLayer(a);v?o.aE(v.getLayoutProperty(d),_)||(v.setLayoutProperty(d,_,y),this._updateLayer(v)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const _=this.getLayer(a);if(_)return _.getLayoutProperty(d);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,_,y={}){this._checkLoaded();const v=this.getLayer(a);v?o.aE(v.getPaintProperty(d),_)||(v.setPaintProperty(d,_,y)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const _=a.source,y=a.sourceLayer,v=this.sourceCaches[_];if(v===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const T=v.getSource().type;T==="geojson"&&y?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(a.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(y,a.id,d)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const _=a.source,y=this.sourceCaches[_];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${_}' does not exist in the map's style.`)));const v=y.getSource().type,T=v==="vector"?a.sourceLayer:void 0;v!=="vector"||T?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,a.id,d):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,_=a.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||_?(a.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(_,a.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.aF(this.sourceCaches,v=>v.serialize()),d=this._serializeByIds(this._order,!0),_=this.map.getTerrain()||void 0,y=this.stylesheet;return o.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:a,layers:d,terrain:_},v=>v!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=T=>this._layers[T].type==="fill-extrusion",_={},y=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(d(E)){_[E]=T;for(const P of a){const R=P[E];if(R)for(const B of R)y.push(B)}}}y.sort((T,E)=>E.intersectionZ-T.intersectionZ);const v=[];for(let T=this._order.length-1;T>=0;T--){const E=this._order[T];if(d(E))for(let P=y.length-1;P>=0;P--){const R=y[P].feature;if(_[R.layer.id]<T)break;v.push(R),y.pop()}else for(const P of a){const R=P[E];if(R)for(const B of R)v.push(B.feature)}}return v}queryRenderedFeatures(a,d,_){d&&d.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",d.filter,null,d);const y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const E of d.layers){const P=this._layers[E];if(!P)return this.fire(new o.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];y[P.source]=!0}}const v=[];d.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const E in this.sourceCaches)d.layers&&!y[E]||v.push(Mt(this.sourceCaches[E],this._layers,T,a,d,_));return this.placement&&v.push(function(E,P,R,B,N,J,ee){const ne={},_e=J.queryRenderedSymbols(B),be=[];for(const ve of Object.keys(_e).map(Number))be.push(ee[ve]);be.sort(ri);for(const ve of be){const ke=ve.featureIndex.lookupSymbolFeatures(_e[ve.bucketInstanceId],P,ve.bucketIndex,ve.sourceLayerIndex,N.filter,N.layers,N.availableImages,E);for(const ae in ke){const Ee=ne[ae]=ne[ae]||[],ze=ke[ae];ze.sort((Ue,ht)=>{const kt=ve.featureSortOrder;if(kt){const Vt=kt.indexOf(Ue.featureIndex);return kt.indexOf(ht.featureIndex)-Vt}return ht.featureIndex-Ue.featureIndex});for(const Ue of ze)Ee.push(Ue)}}for(const ve in ne)ne[ve].forEach(ke=>{const ae=ke.feature,Ee=R[E[ve].source].getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=Ee});return ne}(this._layers,T,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(a,d){d&&d.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",d.filter,null,d);const _=this.sourceCaches[a];return _?function(y,v){const T=y.getRenderableIds().map(R=>y.getTileByID(R)),E=[],P={};for(let R=0;R<T.length;R++){const B=T[R],N=B.tileID.canonical.key;P[N]||(P[N]=!0,B.querySourceFeatures(E,v))}return E}(_,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const _=this.light.getLight();let y=!1;for(const T in a)if(!o.aE(a[T],_[T])){y=!0;break}if(!y)return;const v={now:C.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(v)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,d={}){const _=this.getSky();let y=!1;if(!a&&!_)return;if(a&&!_)y=!0;else if(!a&&_)y=!0;else for(const T in a)if(!o.aE(a[T],_[T])){y=!0;break}if(!y)return;const v={now:C.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,d),this.sky.updateTransitions(v)}_validate(a,d,_,y,v={}){return(!v||v.validate!==!1)&&Mr(this,a.call(o.u,o.e({key:d,style:this.serialize(),value:_,styleSpec:o.v},y)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Gr().off(Ae,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const _=this.sourceCaches[d];_.setEventedParent(null),_.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,_,y,v=!1){let T=!1,E=!1;const P={};for(const R of this._order){const B=this._layers[R];if(B.type!=="symbol")continue;if(!P[B.source]){const J=this.sourceCaches[B.source];P[B.source]=J.getRenderableIds(!0).map(ee=>J.getTileByID(ee)).sort((ee,ne)=>ne.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ne.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(B,P[B.source],a.center.lng);T=T||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||_===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),a.zoom))&&(this.pauseablePlacement=new Uo(a,this.map.terrain,this._order,v,d,_,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),E=!0),T&&this.pauseablePlacement.placement.setStale()),E||T)for(const R of this._order){const B=this._layers[R];B.type==="symbol"&&this.placement.updateLayerOpacities(B,P[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return o._(this,void 0,void 0,function*(){const _=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,d.icons),_})}getGlyphs(a,d){return o._(this,void 0,void 0,function*(){const _=yield this.glyphManager.getGlyphs(d.stacks),y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,[""]),_})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(o.u.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,_={},y){this._checkLoaded();const v=[{id:a,url:d}],T=[...je(this.stylesheet.sprite),...v];this._validate(o.u.sprite,"sprite",T,null,_)||(this.stylesheet.sprite=T,this._loadSprite(v,!0,y))}removeSprite(a){this._checkLoaded();const d=je(this.stylesheet.sprite);if(d.find(_=>_.id===a)){if(this._spritesImagesIds[a])for(const _ of this._spritesImagesIds[a])this.imageManager.removeImage(_),this._changedImages[_]=!0;d.splice(d.findIndex(_=>_.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return je(this.stylesheet.sprite)}setSprite(a,d={},_){this._checkLoaded(),a&&this._validate(o.u.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,_):(this._unloadSprite(),_&&_(null)))}}var Es=o.Y([{name:"a_pos",type:"Int16",components:2}]);const ms={prelude:Ui(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ui(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ui(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ui(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ui(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ui(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ui("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ui("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ui(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ui(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ui(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ui(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ui(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ui(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ui(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ui(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ui(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ui(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ui(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ui(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ui(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ui("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ui("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ui("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ui("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ui(w,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=a.match(/attribute ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=v?v.concat(y):y,E={};return{fragmentSource:w=w.replace(d,(P,R,B,N,J)=>(E[J]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${B} ${N} ${J};
#else
uniform ${B} ${N} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${B} ${N} ${J} = u_${J};
#endif
`)),vertexSource:a=a.replace(d,(P,R,B,N,J)=>{const ee=N==="float"?"vec2":"vec4",ne=J.match(/color/)?"color":ee;return E[J]?R==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${B} ${ee} a_${J};
varying ${B} ${N} ${J};
#else
uniform ${B} ${N} u_${J};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${B} ${N} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${ne}(a_${J}, u_${J}_t);
#else
    ${B} ${N} ${J} = u_${J};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${B} ${ee} a_${J};
#else
uniform ${B} ${N} u_${J};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${B} ${N} ${J} = a_${J};
#else
    ${B} ${N} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${B} ${N} ${J} = unpack_mix_${ne}(a_${J}, u_${J}_t);
#else
    ${B} ${N} ${J} = u_${J};
#endif
`}),staticAttributes:_,staticUniforms:T}}class Dl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,_,y,v,T,E,P,R){this.context=a;let B=this.boundPaintVertexBuffers.length!==y.length;for(let N=0;!B&&N<y.length;N++)this.boundPaintVertexBuffers[N]!==y[N]&&(B=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==_||B||this.boundIndexBuffer!==v||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==R?this.freshBind(d,_,y,v,T,E,P,R):(a.bindVertexArray.set(this.vao),E&&E.bind(),v&&v.dynamicDraw&&v.bind(),P&&P.bind(),R&&R.bind())}freshBind(a,d,_,y,v,T,E,P){const R=a.numAttributes,B=this.context,N=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=y,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=P,d.enableAttributes(N,a);for(const J of _)J.enableAttributes(N,a);T&&T.enableAttributes(N,a),E&&E.enableAttributes(N,a),P&&P.enableAttributes(N,a),d.bind(),d.setVertexAttribPointers(N,a,v);for(const J of _)J.bind(),J.setVertexAttribPointers(N,a,v);T&&(T.bind(),T.setVertexAttribPointers(N,a,v)),y&&y.bind(),E&&(E.bind(),E.setVertexAttribPointers(N,a,v)),P&&(P.bind(),P.setVertexAttribPointers(N,a,v)),B.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ll=(w,a,d,_,y)=>({u_matrix:w,u_texture:0,u_ele_delta:a,u_fog_matrix:d,u_fog_color:_?_.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:_?_.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?_.calculateFogBlendOpacity(y):0,u_horizon_color:_?_.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:_?_.properties.get("horizon-fog-blend"):1});function Qs(w){const a=[];for(let d=0;d<w.length;d++){if(w[d]===null)continue;const _=w[d].split(" ");a.push(_.pop())}return a}class Rl{constructor(a,d,_,y,v,T){const E=a.gl;this.program=E.createProgram();const P=Qs(d.staticAttributes),R=_?_.getBinderAttributes():[],B=P.concat(R),N=ms.prelude.staticUniforms?Qs(ms.prelude.staticUniforms):[],J=d.staticUniforms?Qs(d.staticUniforms):[],ee=_?_.getBinderUniforms():[],ne=N.concat(J).concat(ee),_e=[];for(const Ue of ne)_e.indexOf(Ue)<0&&_e.push(Ue);const be=_?_.defines():[];v&&be.push("#define OVERDRAW_INSPECTOR;"),T&&be.push("#define TERRAIN3D;");const ve=be.concat(ms.prelude.fragmentSource,d.fragmentSource).join(`
`),ke=be.concat(ms.prelude.vertexSource,d.vertexSource).join(`
`),ae=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ae,ve),E.compileShader(ae),!E.getShaderParameter(ae,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(ae)}`);E.attachShader(this.program,ae);const Ee=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Ee,ke),E.compileShader(Ee),!E.getShaderParameter(Ee,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(Ee)}`);E.attachShader(this.program,Ee),this.attributes={};const ze={};this.numAttributes=B.length;for(let Ue=0;Ue<this.numAttributes;Ue++)B[Ue]&&(E.bindAttribLocation(this.program,Ue,B[Ue]),this.attributes[B[Ue]]=Ue);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(Ee),E.deleteShader(ae);for(let Ue=0;Ue<_e.length;Ue++){const ht=_e[Ue];if(ht&&!ze[ht]){const kt=E.getUniformLocation(this.program,ht);kt&&(ze[ht]=kt)}}this.fixedUniforms=y(a,ze),this.terrainUniforms=((Ue,ht)=>({u_depth:new o.aH(Ue,ht.u_depth),u_terrain:new o.aH(Ue,ht.u_terrain),u_terrain_dim:new o.aI(Ue,ht.u_terrain_dim),u_terrain_matrix:new o.aJ(Ue,ht.u_terrain_matrix),u_terrain_unpack:new o.aK(Ue,ht.u_terrain_unpack),u_terrain_exaggeration:new o.aI(Ue,ht.u_terrain_exaggeration)}))(a,ze),this.binderUniforms=_?_.getUniforms(a,ze):[]}draw(a,d,_,y,v,T,E,P,R,B,N,J,ee,ne,_e,be,ve,ke){const ae=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(_),a.setStencilMode(y),a.setColorMode(v),a.setCullFace(T),P){a.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,P.depthTexture),a.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,P.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(P[ze])}for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(E[ze]);_e&&_e.setUniforms(a,this.binderUniforms,ee,{zoom:ne});let Ee=0;switch(d){case ae.LINES:Ee=2;break;case ae.TRIANGLES:Ee=3;break;case ae.LINE_STRIP:Ee=1}for(const ze of J.get()){const Ue=ze.vaos||(ze.vaos={});(Ue[R]||(Ue[R]=new Dl)).bind(a,this,B,_e?_e.getPaintVertexBuffers():[],N,ze.vertexOffset,be,ve,ke),ae.drawElements(d,ze.primitiveLength*Ee,ae.UNSIGNED_SHORT,ze.primitiveOffset*Ee*2)}}}function Sa(w,a,d){const _=1/Mi(d,1,a.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),v=d.tileSize*Math.pow(2,a.transform.tileZoom)/y,T=v*(d.tileID.canonical.x+d.tileID.wrap*y),E=v*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[_,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[T>>16,E>>16],u_pixel_coord_lower:[65535&T,65535&E]}}const qo=(w,a,d,_)=>{const y=a.style.light,v=y.properties.get("position"),T=[v.x,v.y,v.z],E=function(){var R=new o.A(9);return o.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();y.properties.get("anchor")==="viewport"&&function(R,B){var N=Math.sin(B),J=Math.cos(B);R[0]=J,R[1]=N,R[2]=0,R[3]=-N,R[4]=J,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(E,-a.transform.angle),function(R,B,N){var J=B[0],ee=B[1],ne=B[2];R[0]=J*N[0]+ee*N[3]+ne*N[6],R[1]=J*N[1]+ee*N[4]+ne*N[7],R[2]=J*N[2]+ee*N[5]+ne*N[8]}(T,T,E);const P=y.properties.get("color");return{u_matrix:w,u_lightpos:T,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+d,u_opacity:_}},Ta=(w,a,d,_,y,v,T)=>o.e(qo(w,a,d,_),Sa(v,a,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),$s=w=>({u_matrix:w}),eu=(w,a,d,_)=>o.e($s(w),Sa(d,a,_)),Pf=(w,a)=>({u_matrix:w,u_world:a}),tu=(w,a,d,_,y)=>o.e(eu(w,a,d,_),{u_world:y}),Mf=(w,a,d,_)=>{const y=w.transform;let v,T;if(_.paint.get("circle-pitch-alignment")==="map"){const E=Mi(d,1,y.zoom);v=!0,T=[E,E]}else v=!1,T=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(_.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(a.posMatrix,d,_.paint.get("circle-translate"),_.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:T}},Ps=(w,a,d)=>({u_matrix:w,u_inv_matrix:a,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),Zo=(w,a,d=1)=>({u_matrix:w,u_color:a,u_overlay:0,u_overlay_scale:d}),$n=w=>({u_matrix:w}),er=(w,a,d,_)=>({u_matrix:w,u_extrude_scale:Mi(a,1,d),u_intensity:_}),Ia=(w,a,d,_)=>{const y=o.H();o.aP(y,0,w.width,w.height,0,0,1);const v=w.context.gl;return{u_matrix:y,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:d,u_color_ramp:_,u_opacity:a.paint.get("heatmap-opacity")}};function Aa(w,a){const d=Math.pow(2,a.canonical.z),_=a.canonical.y;return[new o.Z(0,_/d).toLngLat().lat,new o.Z(0,(_+1)/d).toLngLat().lat]}const Ea=(w,a,d,_)=>{const y=w.transform;return{u_matrix:ru(w,a,d,_),u_ratio:1/Mi(a,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},iu=(w,a,d,_,y)=>o.e(Ea(w,a,d,y),{u_image:0,u_image_height:_}),eo=(w,a,d,_,y)=>{const v=w.transform,T=nu(a,v);return{u_matrix:ru(w,a,d,y),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Mi(a,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[T,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},zf=(w,a,d,_,y,v)=>{const T=w.lineAtlas,E=nu(a,w.transform),P=d.layout.get("line-cap")==="round",R=T.getDash(_.from,P),B=T.getDash(_.to,P),N=R.width*y.fromScale,J=B.width*y.toScale;return o.e(Ea(w,a,d,v),{u_patternscale_a:[E/N,-R.height/2],u_patternscale_b:[E/J,-B.height/2],u_sdfgamma:T.width/(256*Math.min(N,J)*w.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:B.y,u_mix:y.t})};function nu(w,a){return 1/Mi(w,1,a.tileZoom)}function ru(w,a,d,_){return w.translatePosMatrix(_?_.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Df=(w,a,d,_,y)=>{return{u_matrix:w,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:_.mix,u_opacity:_.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(T=y.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(v=y.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:Lf(y.paint.get("raster-hue-rotate"))};var v,T};function Lf(w){w*=Math.PI/180;const a=Math.sin(w),d=Math.cos(w);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const su=(w,a,d,_,y,v,T,E,P,R,B,N,J,ee)=>{const ne=T.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ne.width/ne.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:R,u_is_text:+N,u_pitch_with_map:+_,u_is_along_line:y,u_is_variable_anchor:v,u_texsize:J,u_texture:0,u_translation:B,u_pitched_scale:ee}},Go=(w,a,d,_,y,v,T,E,P,R,B,N,J,ee,ne)=>{const _e=T.transform;return o.e(su(w,a,d,_,y,v,T,E,P,R,B,N,J,ne),{u_gamma_scale:_?Math.cos(_e._pitch)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:+ee})},Ol=(w,a,d,_,y,v,T,E,P,R,B,N,J,ee)=>o.e(Go(w,a,d,_,y,v,T,E,P,R,B,!0,N,!0,ee),{u_texsize_icon:J,u_texture_icon:1}),Pa=(w,a,d)=>({u_matrix:w,u_opacity:a,u_color:d}),Fl=(w,a,d,_,y,v)=>o.e(function(T,E,P,R){const B=P.imageManager.getPattern(T.from.toString()),N=P.imageManager.getPattern(T.to.toString()),{width:J,height:ee}=P.imageManager.getPixelSize(),ne=Math.pow(2,R.tileID.overscaledZ),_e=R.tileSize*Math.pow(2,P.transform.tileZoom)/ne,be=_e*(R.tileID.canonical.x+R.tileID.wrap*ne),ve=_e*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[J,ee],u_mix:E.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Mi(R,1,P.transform.tileZoom),u_pixel_coord_upper:[be>>16,ve>>16],u_pixel_coord_lower:[65535&be,65535&ve]}}(_,v,d,y),{u_matrix:w,u_opacity:a}),Bl={fillExtrusion:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_lightpos:new o.aN(w,a.u_lightpos),u_lightintensity:new o.aI(w,a.u_lightintensity),u_lightcolor:new o.aN(w,a.u_lightcolor),u_vertical_gradient:new o.aI(w,a.u_vertical_gradient),u_opacity:new o.aI(w,a.u_opacity)}),fillExtrusionPattern:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_lightpos:new o.aN(w,a.u_lightpos),u_lightintensity:new o.aI(w,a.u_lightintensity),u_lightcolor:new o.aN(w,a.u_lightcolor),u_vertical_gradient:new o.aI(w,a.u_vertical_gradient),u_height_factor:new o.aI(w,a.u_height_factor),u_image:new o.aH(w,a.u_image),u_texsize:new o.aO(w,a.u_texsize),u_pixel_coord_upper:new o.aO(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(w,a.u_pixel_coord_lower),u_scale:new o.aN(w,a.u_scale),u_fade:new o.aI(w,a.u_fade),u_opacity:new o.aI(w,a.u_opacity)}),fill:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix)}),fillPattern:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_image:new o.aH(w,a.u_image),u_texsize:new o.aO(w,a.u_texsize),u_pixel_coord_upper:new o.aO(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(w,a.u_pixel_coord_lower),u_scale:new o.aN(w,a.u_scale),u_fade:new o.aI(w,a.u_fade)}),fillOutline:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_world:new o.aO(w,a.u_world)}),fillOutlinePattern:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_world:new o.aO(w,a.u_world),u_image:new o.aH(w,a.u_image),u_texsize:new o.aO(w,a.u_texsize),u_pixel_coord_upper:new o.aO(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(w,a.u_pixel_coord_lower),u_scale:new o.aN(w,a.u_scale),u_fade:new o.aI(w,a.u_fade)}),circle:(w,a)=>({u_camera_to_center_distance:new o.aI(w,a.u_camera_to_center_distance),u_scale_with_map:new o.aH(w,a.u_scale_with_map),u_pitch_with_map:new o.aH(w,a.u_pitch_with_map),u_extrude_scale:new o.aO(w,a.u_extrude_scale),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_matrix:new o.aJ(w,a.u_matrix)}),collisionBox:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_pixel_extrude_scale:new o.aO(w,a.u_pixel_extrude_scale)}),collisionCircle:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_inv_matrix:new o.aJ(w,a.u_inv_matrix),u_camera_to_center_distance:new o.aI(w,a.u_camera_to_center_distance),u_viewport_size:new o.aO(w,a.u_viewport_size)}),debug:(w,a)=>({u_color:new o.aL(w,a.u_color),u_matrix:new o.aJ(w,a.u_matrix),u_overlay:new o.aH(w,a.u_overlay),u_overlay_scale:new o.aI(w,a.u_overlay_scale)}),clippingMask:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix)}),heatmap:(w,a)=>({u_extrude_scale:new o.aI(w,a.u_extrude_scale),u_intensity:new o.aI(w,a.u_intensity),u_matrix:new o.aJ(w,a.u_matrix)}),heatmapTexture:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_world:new o.aO(w,a.u_world),u_image:new o.aH(w,a.u_image),u_color_ramp:new o.aH(w,a.u_color_ramp),u_opacity:new o.aI(w,a.u_opacity)}),hillshade:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_image:new o.aH(w,a.u_image),u_latrange:new o.aO(w,a.u_latrange),u_light:new o.aO(w,a.u_light),u_shadow:new o.aL(w,a.u_shadow),u_highlight:new o.aL(w,a.u_highlight),u_accent:new o.aL(w,a.u_accent)}),hillshadePrepare:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_image:new o.aH(w,a.u_image),u_dimension:new o.aO(w,a.u_dimension),u_zoom:new o.aI(w,a.u_zoom),u_unpack:new o.aK(w,a.u_unpack)}),line:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_ratio:new o.aI(w,a.u_ratio),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.aO(w,a.u_units_to_pixels)}),lineGradient:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_ratio:new o.aI(w,a.u_ratio),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.aO(w,a.u_units_to_pixels),u_image:new o.aH(w,a.u_image),u_image_height:new o.aI(w,a.u_image_height)}),linePattern:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_texsize:new o.aO(w,a.u_texsize),u_ratio:new o.aI(w,a.u_ratio),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_image:new o.aH(w,a.u_image),u_units_to_pixels:new o.aO(w,a.u_units_to_pixels),u_scale:new o.aN(w,a.u_scale),u_fade:new o.aI(w,a.u_fade)}),lineSDF:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_ratio:new o.aI(w,a.u_ratio),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_units_to_pixels:new o.aO(w,a.u_units_to_pixels),u_patternscale_a:new o.aO(w,a.u_patternscale_a),u_patternscale_b:new o.aO(w,a.u_patternscale_b),u_sdfgamma:new o.aI(w,a.u_sdfgamma),u_image:new o.aH(w,a.u_image),u_tex_y_a:new o.aI(w,a.u_tex_y_a),u_tex_y_b:new o.aI(w,a.u_tex_y_b),u_mix:new o.aI(w,a.u_mix)}),raster:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_tl_parent:new o.aO(w,a.u_tl_parent),u_scale_parent:new o.aI(w,a.u_scale_parent),u_buffer_scale:new o.aI(w,a.u_buffer_scale),u_fade_t:new o.aI(w,a.u_fade_t),u_opacity:new o.aI(w,a.u_opacity),u_image0:new o.aH(w,a.u_image0),u_image1:new o.aH(w,a.u_image1),u_brightness_low:new o.aI(w,a.u_brightness_low),u_brightness_high:new o.aI(w,a.u_brightness_high),u_saturation_factor:new o.aI(w,a.u_saturation_factor),u_contrast_factor:new o.aI(w,a.u_contrast_factor),u_spin_weights:new o.aN(w,a.u_spin_weights)}),symbolIcon:(w,a)=>({u_is_size_zoom_constant:new o.aH(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(w,a.u_is_size_feature_constant),u_size_t:new o.aI(w,a.u_size_t),u_size:new o.aI(w,a.u_size),u_camera_to_center_distance:new o.aI(w,a.u_camera_to_center_distance),u_pitch:new o.aI(w,a.u_pitch),u_rotate_symbol:new o.aH(w,a.u_rotate_symbol),u_aspect_ratio:new o.aI(w,a.u_aspect_ratio),u_fade_change:new o.aI(w,a.u_fade_change),u_matrix:new o.aJ(w,a.u_matrix),u_label_plane_matrix:new o.aJ(w,a.u_label_plane_matrix),u_coord_matrix:new o.aJ(w,a.u_coord_matrix),u_is_text:new o.aH(w,a.u_is_text),u_pitch_with_map:new o.aH(w,a.u_pitch_with_map),u_is_along_line:new o.aH(w,a.u_is_along_line),u_is_variable_anchor:new o.aH(w,a.u_is_variable_anchor),u_texsize:new o.aO(w,a.u_texsize),u_texture:new o.aH(w,a.u_texture),u_translation:new o.aO(w,a.u_translation),u_pitched_scale:new o.aI(w,a.u_pitched_scale)}),symbolSDF:(w,a)=>({u_is_size_zoom_constant:new o.aH(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(w,a.u_is_size_feature_constant),u_size_t:new o.aI(w,a.u_size_t),u_size:new o.aI(w,a.u_size),u_camera_to_center_distance:new o.aI(w,a.u_camera_to_center_distance),u_pitch:new o.aI(w,a.u_pitch),u_rotate_symbol:new o.aH(w,a.u_rotate_symbol),u_aspect_ratio:new o.aI(w,a.u_aspect_ratio),u_fade_change:new o.aI(w,a.u_fade_change),u_matrix:new o.aJ(w,a.u_matrix),u_label_plane_matrix:new o.aJ(w,a.u_label_plane_matrix),u_coord_matrix:new o.aJ(w,a.u_coord_matrix),u_is_text:new o.aH(w,a.u_is_text),u_pitch_with_map:new o.aH(w,a.u_pitch_with_map),u_is_along_line:new o.aH(w,a.u_is_along_line),u_is_variable_anchor:new o.aH(w,a.u_is_variable_anchor),u_texsize:new o.aO(w,a.u_texsize),u_texture:new o.aH(w,a.u_texture),u_gamma_scale:new o.aI(w,a.u_gamma_scale),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_is_halo:new o.aH(w,a.u_is_halo),u_translation:new o.aO(w,a.u_translation),u_pitched_scale:new o.aI(w,a.u_pitched_scale)}),symbolTextAndIcon:(w,a)=>({u_is_size_zoom_constant:new o.aH(w,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(w,a.u_is_size_feature_constant),u_size_t:new o.aI(w,a.u_size_t),u_size:new o.aI(w,a.u_size),u_camera_to_center_distance:new o.aI(w,a.u_camera_to_center_distance),u_pitch:new o.aI(w,a.u_pitch),u_rotate_symbol:new o.aH(w,a.u_rotate_symbol),u_aspect_ratio:new o.aI(w,a.u_aspect_ratio),u_fade_change:new o.aI(w,a.u_fade_change),u_matrix:new o.aJ(w,a.u_matrix),u_label_plane_matrix:new o.aJ(w,a.u_label_plane_matrix),u_coord_matrix:new o.aJ(w,a.u_coord_matrix),u_is_text:new o.aH(w,a.u_is_text),u_pitch_with_map:new o.aH(w,a.u_pitch_with_map),u_is_along_line:new o.aH(w,a.u_is_along_line),u_is_variable_anchor:new o.aH(w,a.u_is_variable_anchor),u_texsize:new o.aO(w,a.u_texsize),u_texsize_icon:new o.aO(w,a.u_texsize_icon),u_texture:new o.aH(w,a.u_texture),u_texture_icon:new o.aH(w,a.u_texture_icon),u_gamma_scale:new o.aI(w,a.u_gamma_scale),u_device_pixel_ratio:new o.aI(w,a.u_device_pixel_ratio),u_is_halo:new o.aH(w,a.u_is_halo),u_translation:new o.aO(w,a.u_translation),u_pitched_scale:new o.aI(w,a.u_pitched_scale)}),background:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_opacity:new o.aI(w,a.u_opacity),u_color:new o.aL(w,a.u_color)}),backgroundPattern:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_opacity:new o.aI(w,a.u_opacity),u_image:new o.aH(w,a.u_image),u_pattern_tl_a:new o.aO(w,a.u_pattern_tl_a),u_pattern_br_a:new o.aO(w,a.u_pattern_br_a),u_pattern_tl_b:new o.aO(w,a.u_pattern_tl_b),u_pattern_br_b:new o.aO(w,a.u_pattern_br_b),u_texsize:new o.aO(w,a.u_texsize),u_mix:new o.aI(w,a.u_mix),u_pattern_size_a:new o.aO(w,a.u_pattern_size_a),u_pattern_size_b:new o.aO(w,a.u_pattern_size_b),u_scale_a:new o.aI(w,a.u_scale_a),u_scale_b:new o.aI(w,a.u_scale_b),u_pixel_coord_upper:new o.aO(w,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(w,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(w,a.u_tile_units_to_pixels)}),terrain:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_texture:new o.aH(w,a.u_texture),u_ele_delta:new o.aI(w,a.u_ele_delta),u_fog_matrix:new o.aJ(w,a.u_fog_matrix),u_fog_color:new o.aL(w,a.u_fog_color),u_fog_ground_blend:new o.aI(w,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(w,a.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(w,a.u_horizon_color),u_horizon_fog_blend:new o.aI(w,a.u_horizon_fog_blend)}),terrainDepth:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_ele_delta:new o.aI(w,a.u_ele_delta)}),terrainCoords:(w,a)=>({u_matrix:new o.aJ(w,a.u_matrix),u_texture:new o.aH(w,a.u_texture),u_terrain_coords_id:new o.aI(w,a.u_terrain_coords_id),u_ele_delta:new o.aI(w,a.u_ele_delta)}),sky:(w,a)=>({u_sky_color:new o.aL(w,a.u_sky_color),u_horizon_color:new o.aL(w,a.u_horizon_color),u_horizon:new o.aI(w,a.u_horizon),u_sky_horizon_blend:new o.aI(w,a.u_sky_horizon_blend)})};class Xr{constructor(a,d,_){this.context=a;const y=a.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!_,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Nl{constructor(a,d,_,y){this.length=d.length,this.attributes=_,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=a;const v=a.gl;this.buffer=v.createBuffer(),a.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let _=0;_<this.attributes.length;_++){const y=d.attributes[this.attributes[_].name];y!==void 0&&a.enableVertexAttribArray(y)}}setVertexAttribPointers(a,d,_){for(let y=0;y<this.attributes.length;y++){const v=this.attributes[y],T=d.attributes[v.name];T!==void 0&&a.vertexAttribPointer(T,v.components,a[Rf[v.type]],!1,this.itemSize,v.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ms=new WeakMap;function ps(w){var a;if(Ms.has(w))return Ms.get(w);{const d=(a=w.getParameter(w.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Ms.set(w,d),d}}class qi{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ma extends qi{getDefault(){return o.aM.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Of extends qi{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class to extends qi{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Ff extends qi{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ou extends qi{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Bf extends qi{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class au extends qi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Vl extends qi{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class lu extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class cu extends qi{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class uu extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class fu extends qi{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class zs extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class hu extends qi{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Nf extends qi{getDefault(){return o.aM.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class du extends qi{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Ho extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Vf extends qi{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class za extends qi{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class jf extends qi{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Uf extends qi{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class mu extends qi{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class pu extends qi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class _u extends qi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class jl extends qi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class gu extends qi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Da extends qi{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class rs extends qi{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const _=this.gl;ps(_)?_.bindVertexArray(a):(d=_.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Ul extends qi{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class ql extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Zl extends qi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class La extends qi{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class Gl extends La{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Ds extends La{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Hl extends La{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class qf{constructor(a,d,_,y,v){this.context=a,this.width=d,this.height=_;const T=a.gl,E=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Gl(a,E),y)this.depthAttachment=v?new Hl(a,E):new Ds(a,E);else if(v)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const _=this.depthAttachment.get();_&&a.deleteRenderbuffer(_)}a.deleteFramebuffer(this.framebuffer)}}class dn{constructor(a,d,_){this.blendFunction=a,this.blendColor=d,this.mask=_}}dn.Replace=[1,0],dn.disabled=new dn(dn.Replace,o.aM.transparent,[!1,!1,!1,!1]),dn.unblended=new dn(dn.Replace,o.aM.transparent,[!0,!0,!0,!0]),dn.alphaBlended=new dn([1,771],o.aM.transparent,[!0,!0,!0,!0]);class Zf{constructor(a){var d,_;if(this.gl=a,this.clearColor=new Ma(this),this.clearDepth=new Of(this),this.clearStencil=new to(this),this.colorMask=new Ff(this),this.depthMask=new ou(this),this.stencilMask=new Bf(this),this.stencilFunc=new au(this),this.stencilOp=new Vl(this),this.stencilTest=new lu(this),this.depthRange=new cu(this),this.depthTest=new uu(this),this.depthFunc=new fu(this),this.blend=new zs(this),this.blendFunc=new hu(this),this.blendColor=new Nf(this),this.blendEquation=new du(this),this.cullFace=new Ho(this),this.cullFaceSide=new Vf(this),this.frontFace=new za(this),this.program=new jf(this),this.activeTexture=new Uf(this),this.viewport=new mu(this),this.bindFramebuffer=new pu(this),this.bindRenderbuffer=new _u(this),this.bindTexture=new jl(this),this.bindVertexBuffer=new gu(this),this.bindElementBuffer=new Da(this),this.bindVertexArray=new rs(this),this.pixelStoreUnpack=new Ul(this),this.pixelStoreUnpackPremultiplyAlpha=new ql(this),this.pixelStoreUnpackFlipY=new Zl(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),ps(a)){this.HALF_FLOAT=a.HALF_FLOAT;const y=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(_=a.RGB16F)!==null&&_!==void 0?_:y==null?void 0:y.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const y=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Xr(this,a,d)}createVertexBuffer(a,d,_){return new Nl(this,a,d,_)}createRenderbuffer(a,d,_){const y=this.gl,v=y.createRenderbuffer();return this.bindRenderbuffer.set(v),y.renderbufferStorage(y.RENDERBUFFER,a,d,_),this.bindRenderbuffer.set(null),v}createFramebuffer(a,d,_,y){return new qf(this,a,d,_,y)}clear({color:a,depth:d,stencil:_}){const y=this.gl;let v=0;a&&(v|=y.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(v|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),_!==void 0&&(v|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),y.clear(v)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.aE(a.blendFunction,dn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return ps(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return ps(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Pi{constructor(a,d,_){this.func=a,this.mask=d,this.range=_}}Pi.ReadOnly=!1,Pi.ReadWrite=!0,Pi.disabled=new Pi(519,Pi.ReadOnly,[0,1]);const Ra=7680;class $i{constructor(a,d,_,y,v,T){this.test=a,this.ref=d,this.mask=_,this.fail=y,this.depthFail=v,this.pass=T}}$i.disabled=new $i({func:519,mask:0},0,0,Ra,Ra,Ra);class Xi{constructor(a,d,_){this.enable=a,this.mode=d,this.frontFace=_}}let Ls;function Wo(w,a,d,_,y){const v=w.context,T=v.gl,E=w.useProgram("collisionBox"),P=[];let R=0,B=0;for(let ve=0;ve<_.length;ve++){const ke=_[ve],ae=a.getTile(ke).getBucket(d);if(!ae)continue;const Ee=y?ae.textCollisionBox:ae.iconCollisionBox,ze=ae.collisionCircleArray;if(ze.length>0){const Ue=o.H();o.aQ(Ue,ae.placementInvProjMatrix,w.transform.glCoordMatrix),o.aQ(Ue,Ue,ae.placementViewportMatrix),P.push({circleArray:ze,circleOffset:B,transform:ke.posMatrix,invTransform:Ue,coord:ke}),R+=ze.length/4,B=R}Ee&&E.draw(v,T.LINES,Pi.disabled,$i.disabled,w.colorModeForRenderPass(),Xi.disabled,{u_matrix:ke.posMatrix,u_pixel_extrude_scale:[1/(N=w.transform).width,1/N.height]},w.style.map.terrain&&w.style.map.terrain.getTerrainData(ke),d.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,null,w.transform.zoom,null,null,Ee.collisionVertexBuffer)}var N;if(!y||!P.length)return;const J=w.useProgram("collisionCircle"),ee=new o.aR;ee.resize(4*R),ee._trim();let ne=0;for(const ve of P)for(let ke=0;ke<ve.circleArray.length/4;ke++){const ae=4*ke,Ee=ve.circleArray[ae+0],ze=ve.circleArray[ae+1],Ue=ve.circleArray[ae+2],ht=ve.circleArray[ae+3];ee.emplace(ne++,Ee,ze,Ue,ht,0),ee.emplace(ne++,Ee,ze,Ue,ht,1),ee.emplace(ne++,Ee,ze,Ue,ht,2),ee.emplace(ne++,Ee,ze,Ue,ht,3)}(!Ls||Ls.length<2*R)&&(Ls=function(ve){const ke=2*ve,ae=new o.aT;ae.resize(ke),ae._trim();for(let Ee=0;Ee<ke;Ee++){const ze=6*Ee;ae.uint16[ze+0]=4*Ee+0,ae.uint16[ze+1]=4*Ee+1,ae.uint16[ze+2]=4*Ee+2,ae.uint16[ze+3]=4*Ee+2,ae.uint16[ze+4]=4*Ee+3,ae.uint16[ze+5]=4*Ee+0}return ae}(R));const _e=v.createIndexBuffer(Ls,!0),be=v.createVertexBuffer(ee,o.aS.members,!0);for(const ve of P){const ke=Ps(ve.transform,ve.invTransform,w.transform);J.draw(v,T.TRIANGLES,Pi.disabled,$i.disabled,w.colorModeForRenderPass(),Xi.disabled,ke,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ve.coord),d.id,be,_e,o.a0.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,w.transform.zoom,null,null,null)}be.destroy(),_e.destroy()}Xi.disabled=new Xi(!1,1029,2305),Xi.backCCW=new Xi(!0,1029,2305);const Xo=o.an(new Float32Array(16));function Wl(w,a,d,_,y,v){const{horizontalAlign:T,verticalAlign:E}=o.au(w);return new o.P((-(T-.5)*a/y+_[0])*v,(-(E-.5)*d/y+_[1])*v)}function Rs(w,a,d,_,y,v){const T=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let E=_.mult(v);d||(E=E.rotate(-y));const P=T.add(E);return ge(P.x,P.y,a.labelPlaneMatrix,a.getElevation).point}if(d){const E=tt(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(w),P=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return w.add(_.rotate(P))}return w.add(_)}function io(w,a,d,_,y,v,T,E,P,R,B,N,J,ee){const ne=w.text.placedSymbolArray,_e=w.text.dynamicLayoutVertexArray,be=w.icon.dynamicLayoutVertexArray,ve={};_e.clear();for(let ke=0;ke<ne.length;ke++){const ae=ne.get(ke),Ee=ae.hidden||!ae.crossTileID||w.allowVerticalPlacement&&!ae.placedOrientation?null:_[ae.crossTileID];if(Ee){const ze=new o.P(ae.anchorX,ae.anchorY),Ue={getElevation:ee,width:y.width,height:y.height,labelPlaneMatrix:v,lineVertexArray:null,pitchWithMap:d,projection:B,projectionCache:null,tileAnchorPoint:ze,translation:N,unwrappedTileID:J},ht=d?ge(ze.x,ze.y,T,ee):tt(ze.x,ze.y,Ue),kt=W(y.cameraToCenterDistance,ht.signedDistanceFromCamera);let Vt=o.ai(w.textSizeData,P,ae)*kt/o.ap;d&&(Vt*=w.tilePixelRatio/E);const{width:Gt,height:zt,anchor:Pt,textOffset:$t,textBoxScale:yi}=Ee,Bt=Wl(Pt,Gt,zt,$t,yi,Vt),qt=B.getPitchedTextCorrection(y,ze.add(new o.P(N[0],N[1])),J),_i=Rs(ht.point,Ue,a,Bt,y.angle,qt),nn=w.allowVerticalPlacement&&ae.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let ki=0;ki<ae.numGlyphs;ki++)o.aj(_e,_i,nn);R&&ae.associatedIconIndex>=0&&(ve[ae.associatedIconIndex]={shiftedAnchor:_i,angle:nn})}else ci(ae.numGlyphs,_e)}if(R){be.clear();const ke=w.icon.placedSymbolArray;for(let ae=0;ae<ke.length;ae++){const Ee=ke.get(ae);if(Ee.hidden)ci(Ee.numGlyphs,be);else{const ze=ve[ae];if(ze)for(let Ue=0;Ue<Ee.numGlyphs;Ue++)o.aj(be,ze.shiftedAnchor,ze.angle);else ci(Ee.numGlyphs,be)}}w.icon.dynamicLayoutVertexBuffer.updateData(be)}w.text.dynamicLayoutVertexBuffer.updateData(_e)}function yr(w,a,d){return d.iconsInText&&a?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Xl(w,a,d,_,y,v,T,E,P,R,B,N){const J=w.context,ee=J.gl,ne=w.transform,_e=As(),be=E==="map",ve=P==="map",ke=E!=="viewport"&&d.layout.get("symbol-placement")!=="point",ae=be&&!ve&&!ke,Ee=!ve&&ke,ze=!d.layout.get("symbol-sort-key").isConstant();let Ue=!1;const ht=w.depthModeForSublayer(0,Pi.ReadOnly),kt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Vt=[],Gt=_e.getCircleRadiusCorrection(ne);for(const zt of _){const Pt=a.getTile(zt),$t=Pt.getBucket(d);if(!$t)continue;const yi=y?$t.text:$t.icon;if(!yi||!yi.segments.get().length||!yi.hasVisibleVertices)continue;const Bt=yi.programConfigurations.get(d.id),qt=y||$t.sdfIcons,_i=y?$t.textSizeData:$t.iconSizeData,nn=ve||ne.pitch!==0,ki=w.useProgram(yr(qt,y,$t),Bt),zi=o.ag(_i,ne.zoom),rn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(zt);let Rn,Lr,sn,tr,Gn=[0,0],On=null;if(y)Lr=Pt.glyphAtlasTexture,sn=ee.LINEAR,Rn=Pt.glyphAtlasTexture.size,$t.iconsInText&&(Gn=Pt.imageAtlasTexture.size,On=Pt.imageAtlasTexture,tr=nn||w.options.rotating||w.options.zooming||_i.kind==="composite"||_i.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Li=d.layout.get("icon-size").constantOr(0)!==1||$t.iconsNeedLinear;Lr=Pt.imageAtlasTexture,sn=qt||w.options.rotating||w.options.zooming||Li||nn?ee.LINEAR:ee.NEAREST,Rn=Pt.imageAtlasTexture.size}const Hn=Mi(Pt,1,w.transform.zoom),Yr=Ee?zt.posMatrix:Xo,bo=ds(Yr,ve,be,w.transform,Hn),el=Wr(Yr,ve,be,w.transform,Hn),vo=Wr(zt.posMatrix,ve,be,w.transform,Hn),wr=_e.translatePosition(w.transform,Pt,v,T),tl=kt&&$t.hasTextData(),bc=d.layout.get("icon-text-fit")!=="none"&&tl&&$t.hasIconData();if(ke){const Li=w.style.map.terrain?(wo,xo)=>w.style.map.terrain.getElevation(zt,wo,xo):null,Vs=d.layout.get("text-rotation-alignment")==="map";te($t,zt.posMatrix,w,y,bo,vo,ve,R,Vs,_e,zt.toUnwrapped(),ne.width,ne.height,wr,Li)}const xr=zt.posMatrix,kr=y&&kt||bc,_s=ke||kr?Xo:bo,Rr=el,Mn=qt&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Fn;Fn=qt?$t.iconsInText?Ol(_i.kind,zi,ae,ve,ke,kr,w,xr,_s,Rr,wr,Rn,Gn,Gt):Go(_i.kind,zi,ae,ve,ke,kr,w,xr,_s,Rr,wr,y,Rn,!0,Gt):su(_i.kind,zi,ae,ve,ke,kr,w,xr,_s,Rr,wr,y,Rn,Gt);const dr={program:ki,buffers:yi,uniformValues:Fn,atlasTexture:Lr,atlasTextureIcon:On,atlasInterpolation:sn,atlasInterpolationIcon:tr,isSDF:qt,hasHalo:Mn};if(ze&&$t.canOverlap){Ue=!0;const Li=yi.segments.get();for(const Vs of Li)Vt.push({segments:new o.a0([Vs]),sortKey:Vs.sortKey,state:dr,terrainData:rn})}else Vt.push({segments:yi.segments,sortKey:0,state:dr,terrainData:rn})}Ue&&Vt.sort((zt,Pt)=>zt.sortKey-Pt.sortKey);for(const zt of Vt){const Pt=zt.state;if(J.activeTexture.set(ee.TEXTURE0),Pt.atlasTexture.bind(Pt.atlasInterpolation,ee.CLAMP_TO_EDGE),Pt.atlasTextureIcon&&(J.activeTexture.set(ee.TEXTURE1),Pt.atlasTextureIcon&&Pt.atlasTextureIcon.bind(Pt.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Pt.isSDF){const $t=Pt.uniformValues;Pt.hasHalo&&($t.u_is_halo=1,Kl(Pt.buffers,zt.segments,d,w,Pt.program,ht,B,N,$t,zt.terrainData)),$t.u_is_halo=0}Kl(Pt.buffers,zt.segments,d,w,Pt.program,ht,B,N,Pt.uniformValues,zt.terrainData)}}function Kl(w,a,d,_,y,v,T,E,P,R){const B=_.context;y.draw(B,B.gl.TRIANGLES,v,T,E,Xi.disabled,P,R,d.id,w.layoutVertexBuffer,w.indexBuffer,a,d.paint,_.transform.zoom,w.programConfigurations.get(d.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Jl(w,a,d,_){const y=w.context,v=y.gl,T=$i.disabled,E=new dn([v.ONE,v.ONE],o.aM.transparent,[!0,!0,!0,!0]),P=a.getBucket(d);if(!P)return;const R=_.key;let B=d.heatmapFbos.get(R);B||(B=Ko(y,a.tileSize,a.tileSize),d.heatmapFbos.set(R,B)),y.bindFramebuffer.set(B.framebuffer),y.viewport.set([0,0,a.tileSize,a.tileSize]),y.clear({color:o.aM.transparent});const N=P.programConfigurations.get(d.id),J=w.useProgram("heatmap",N),ee=w.style.map.terrain.getTerrainData(_);J.draw(y,v.TRIANGLES,Pi.disabled,T,E,Xi.disabled,er(_.posMatrix,a,w.transform.zoom,d.paint.get("heatmap-intensity")),ee,d.id,P.layoutVertexBuffer,P.indexBuffer,P.segments,d.paint,w.transform.zoom,N)}function Os(w,a,d){const _=w.context,y=_.gl;_.setColorMode(w.colorModeForRenderPass());const v=Jo(_,a),T=d.key,E=a.heatmapFbos.get(T);E&&(_.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,E.colorAttachment.get()),_.activeTexture.set(y.TEXTURE1),v.bind(y.LINEAR,y.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(_,y.TRIANGLES,Pi.disabled,$i.disabled,w.colorModeForRenderPass(),Xi.disabled,Ia(w,a,0,1),null,a.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,a.paint,w.transform.zoom),E.destroy(),a.heatmapFbos.delete(T))}function Ko(w,a,d){var _,y;const v=w.gl,T=v.createTexture();v.bindTexture(v.TEXTURE_2D,T),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);const E=(_=w.HALF_FLOAT)!==null&&_!==void 0?_:v.UNSIGNED_BYTE,P=(y=w.RGBA16F)!==null&&y!==void 0?y:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,P,a,d,0,v.RGBA,E,null);const R=w.createFramebuffer(a,d,!1,!1);return R.colorAttachment.set(T),R}function Jo(w,a){return a.colorRampTexture||(a.colorRampTexture=new de(w,a.colorRamp,w.gl.RGBA)),a.colorRampTexture}function no(w,a,d,_,y){if(!d||!_||!_.imageAtlas)return;const v=_.imageAtlas.patternPositions;let T=v[d.to.toString()],E=v[d.from.toString()];if(!T&&E&&(T=E),!E&&T&&(E=T),!T||!E){const P=y.getPaintProperty(a);T=v[P],E=v[P]}T&&E&&w.setConstantPatternPositions(T,E)}function Yo(w,a,d,_,y,v,T){const E=w.context.gl,P="fill-pattern",R=d.paint.get(P),B=R&&R.constantOr(1),N=d.getCrossfadeParameters();let J,ee,ne,_e,be;T?(ee=B&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=E.LINES):(ee=B?"fillPattern":"fill",J=E.TRIANGLES);const ve=R.constantOr(null);for(const ke of _){const ae=a.getTile(ke);if(B&&!ae.patternsLoaded())continue;const Ee=ae.getBucket(d);if(!Ee)continue;const ze=Ee.programConfigurations.get(d.id),Ue=w.useProgram(ee,ze),ht=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ke);B&&(w.context.activeTexture.set(E.TEXTURE0),ae.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ze.updatePaintBuffers(N)),no(ze,P,ve,ae,d);const kt=ht?ke:null,Vt=w.translatePosMatrix(kt?kt.posMatrix:ke.posMatrix,ae,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(T){_e=Ee.indexBuffer2,be=Ee.segments2;const Gt=[E.drawingBufferWidth,E.drawingBufferHeight];ne=ee==="fillOutlinePattern"&&B?tu(Vt,w,N,ae,Gt):Pf(Vt,Gt)}else _e=Ee.indexBuffer,be=Ee.segments,ne=B?eu(Vt,w,N,ae):$s(Vt);Ue.draw(w.context,J,y,w.stencilModeForClipping(ke),v,Xi.disabled,ne,ht,d.id,Ee.layoutVertexBuffer,_e,be,d.paint,w.transform.zoom,ze)}}function Oa(w,a,d,_,y,v,T){const E=w.context,P=E.gl,R="fill-extrusion-pattern",B=d.paint.get(R),N=B.constantOr(1),J=d.getCrossfadeParameters(),ee=d.paint.get("fill-extrusion-opacity"),ne=B.constantOr(null);for(const _e of _){const be=a.getTile(_e),ve=be.getBucket(d);if(!ve)continue;const ke=w.style.map.terrain&&w.style.map.terrain.getTerrainData(_e),ae=ve.programConfigurations.get(d.id),Ee=w.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ae);N&&(w.context.activeTexture.set(P.TEXTURE0),be.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ae.updatePaintBuffers(J)),no(ae,R,ne,be,d);const ze=w.translatePosMatrix(_e.posMatrix,be,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ue=d.paint.get("fill-extrusion-vertical-gradient"),ht=N?Ta(ze,w,Ue,ee,_e,J,be):qo(ze,w,Ue,ee);Ee.draw(E,E.gl.TRIANGLES,y,v,T,Xi.backCCW,ht,ke,d.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,d.paint,w.transform.zoom,ae,w.style.map.terrain&&ve.centroidVertexBuffer)}}function ro(w,a,d,_,y,v,T){const E=w.context,P=E.gl,R=d.fbo;if(!R)return;const B=w.useProgram("hillshade"),N=w.style.map.terrain&&w.style.map.terrain.getTerrainData(a);E.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,R.colorAttachment.get()),B.draw(E,P.TRIANGLES,y,v,T,Xi.disabled,((J,ee,ne,_e)=>{const be=ne.paint.get("hillshade-shadow-color"),ve=ne.paint.get("hillshade-highlight-color"),ke=ne.paint.get("hillshade-accent-color");let ae=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=J.transform.angle);const Ee=!J.options.moving;return{u_matrix:_e?_e.posMatrix:J.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:Aa(0,ee.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ae],u_shadow:be,u_highlight:ve,u_accent:ke}})(w,d,_,N?a:null),N,_.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function so(w,a,d,_,y,v){const T=w.context,E=T.gl,P=a.dem;if(P&&P.data){const R=P.dim,B=P.stride,N=P.getPixels();if(T.activeTexture.set(E.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||w.getTileTexture(B),a.demTexture){const ee=a.demTexture;ee.update(N,{premultiply:!1}),ee.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else a.demTexture=new de(T,N,E.RGBA,{premultiply:!1}),a.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);T.activeTexture.set(E.TEXTURE0);let J=a.fbo;if(!J){const ee=new de(T,{width:R,height:R,data:null},E.RGBA);ee.bind(E.LINEAR,E.CLAMP_TO_EDGE),J=a.fbo=T.createFramebuffer(R,R,!0,!1),J.colorAttachment.set(ee.texture)}T.bindFramebuffer.set(J.framebuffer),T.viewport.set([0,0,R,R]),w.useProgram("hillshadePrepare").draw(T,E.TRIANGLES,_,y,v,Xi.disabled,((ee,ne)=>{const _e=ne.stride,be=o.H();return o.aP(be,0,o.X,-o.X,0,0,1),o.J(be,be,[0,-o.X,0]),{u_matrix:be,u_image:1,u_dimension:[_e,_e],u_zoom:ee.overscaledZ,u_unpack:ne.getUnpackVector()}})(a.tileID,P),null,d.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function yu(w,a,d,_,y,v){const T=_.paint.get("raster-fade-duration");if(!v&&T>0){const E=C.now(),P=(E-w.timeAdded)/T,R=a?(E-a.timeAdded)/T:-1,B=d.getSource(),N=y.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),J=!a||Math.abs(a.tileID.overscaledZ-N)>Math.abs(w.tileID.overscaledZ-N),ee=J&&w.refreshedUponExpiration?1:o.ac(J?P:1-R,0,1);return w.refreshedUponExpiration&&P>=1&&(w.refreshedUponExpiration=!1),a?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Yl=new o.aM(1,0,0,1),Vi=new o.aM(0,1,0,1),Fa=new o.aM(0,0,1,1),Gf=new o.aM(1,0,1,1),bu=new o.aM(0,1,1,1);function oo(w,a,d,_){Ba(w,0,a+d/2,w.transform.width,d,_)}function vu(w,a,d,_){Ba(w,a-d/2,0,d,w.transform.height,_)}function Ba(w,a,d,_,y,v){const T=w.context,E=T.gl;E.enable(E.SCISSOR_TEST),E.scissor(a*w.pixelRatio,d*w.pixelRatio,_*w.pixelRatio,y*w.pixelRatio),T.clear({color:v}),E.disable(E.SCISSOR_TEST)}function wu(w,a,d){const _=w.context,y=_.gl,v=d.posMatrix,T=w.useProgram("debug"),E=Pi.disabled,P=$i.disabled,R=w.colorModeForRenderPass(),B="$debug",N=w.style.map.terrain&&w.style.map.terrain.getTerrainData(d);_.activeTexture.set(y.TEXTURE0);const J=a.getTileByID(d.key).latestRawTileData,ee=Math.floor((J&&J.byteLength||0)/1024),ne=a.getTile(d).tileSize,_e=512/Math.min(ne,512)*(d.overscaledZ/w.transform.zoom)*.5;let be=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(be+=` => ${d.overscaledZ}`),function(ve,ke){ve.initDebugOverlayCanvas();const ae=ve.debugOverlayCanvas,Ee=ve.context.gl,ze=ve.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,ae.width,ae.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(ke,5,5),ze.strokeText(ke,5,5),ve.debugOverlayTexture.update(ae),ve.debugOverlayTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}(w,`${be} ${ee}kB`),T.draw(_,y.TRIANGLES,E,P,dn.alphaBlended,Xi.disabled,Zo(v,o.aM.transparent,_e),null,B,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(_,y.LINE_STRIP,E,P,R,Xi.disabled,Zo(v,o.aM.red),N,B,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function xu(w,a,d){const _=w.context,y=_.gl,v=w.colorModeForRenderPass(),T=new Pi(y.LEQUAL,Pi.ReadWrite,w.depthRangeFor3D),E=w.useProgram("terrain"),P=a.getTerrainMesh();_.bindFramebuffer.set(null),_.viewport.set([0,0,w.width,w.height]);for(const R of d){const B=w.renderToTexture.getTexture(R),N=a.getTerrainData(R.tileID);_.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,B.texture);const J=w.transform.calculatePosMatrix(R.tileID.toUnwrapped()),ee=a.getMeshFrameDelta(w.transform.zoom),ne=w.transform.calculateFogMatrix(R.tileID.toUnwrapped()),_e=Ll(J,ee,ne,w.style.sky,w.transform.pitch);E.draw(_,y.TRIANGLES,T,$i.disabled,v,Xi.backCCW,_e,N,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class Na{constructor(a,d,_){this.vertexBuffer=a,this.indexBuffer=d,this.segments=_}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Va{constructor(a,d){this.context=new Zf(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=mi.maxUnderzooming+mi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zl}resize(a,d,_){if(this.width=Math.floor(a*_),this.height=Math.floor(d*_),this.pixelRatio=_,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const a=this.context,d=new o.aX;d.emplaceBack(0,0),d.emplaceBack(o.X,0),d.emplaceBack(0,o.X),d.emplaceBack(o.X,o.X),this.tileExtentBuffer=a.createVertexBuffer(d,Es.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);const _=new o.aX;_.emplaceBack(0,0),_.emplaceBack(o.X,0),_.emplaceBack(0,o.X),_.emplaceBack(o.X,o.X),this.debugBuffer=a.createVertexBuffer(_,Es.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);const y=new o.$;y.emplaceBack(0,0,0,0),y.emplaceBack(o.X,0,o.X,0),y.emplaceBack(0,o.X,0,o.X),y.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=a.createVertexBuffer(y,ln.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);const v=new o.aX;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(v,Es.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);const T=new o.aZ;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(T);const E=new o.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(E);const P=this.context.gl;this.stencilClearMode=new $i({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const _=o.H();o.aP(_,0,this.width,this.height,0,0,1),o.K(_,_,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Pi.disabled,this.stencilClearMode,dn.disabled,Xi.disabled,$n(_),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const _=this.context,y=_.gl;this.nextStencilID+d.length>256&&this.clearStencil(),_.setColorMode(dn.disabled),_.setDepthMode(Pi.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of d){const E=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);v.draw(_,y.TRIANGLES,Pi.disabled,new $i({func:y.ALWAYS,mask:0},E,255,y.KEEP,y.KEEP,y.REPLACE),dn.disabled,Xi.disabled,$n(T.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new $i({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new $i({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,_=a.sort((T,E)=>E.overscaledZ-T.overscaledZ),y=_[_.length-1].overscaledZ,v=_[0].overscaledZ-y+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const T={};for(let E=0;E<v;E++)T[E+y]=new $i({func:d.GEQUAL,mask:255},E+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=v,[T,_]}return[{[y]:$i.disabled},_]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new dn([a.CONSTANT_COLOR,a.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?dn.unblended:dn.alphaBlended}depthModeForSublayer(a,d,_){if(!this.opaquePassEnabledForLayer())return Pi.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Pi(_||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();const _=this.style._order,y=this.style.sourceCaches,v={},T={},E={};for(const P in y){const R=y[P];R.used&&R.prepare(this.context),v[P]=R.getVisibleCoordinates(),T[P]=v[P].slice().reverse(),E[P]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<_.length;P++)if(this.style._layers[_[P]].is3D()){this.opaquePassCutoff=P;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const P of _){const R=this.style._layers[P];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const B=T[R.source];(R.type==="custom"||B.length)&&this.renderLayer(this,y[R.source],R,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(P,R){const B=P.context,N=B.gl,J=((ve,ke,ae)=>({u_sky_color:ve.properties.get("sky-color"),u_horizon_color:ve.properties.get("horizon-color"),u_horizon:(ke.height/2+ke.getHorizon())*ae,u_sky_horizon_blend:ve.properties.get("sky-horizon-blend")*ke.height/2*ae}))(R,P.style.map.transform,P.pixelRatio),ee=new Pi(N.LEQUAL,Pi.ReadWrite,[0,1]),ne=$i.disabled,_e=P.colorModeForRenderPass(),be=P.useProgram("sky");if(!R.mesh){const ve=new o.aX;ve.emplaceBack(-1,-1),ve.emplaceBack(1,-1),ve.emplaceBack(1,1),ve.emplaceBack(-1,1);const ke=new o.aY;ke.emplaceBack(0,1,2),ke.emplaceBack(0,2,3),R.mesh=new Na(B.createVertexBuffer(ve,Es.members),B.createIndexBuffer(ke),o.a0.simpleSegment(0,0,ve.length,ke.length))}be.draw(B,N.TRIANGLES,ee,ne,_e,Xi.disabled,J,void 0,"sky",R.mesh.vertexBuffer,R.mesh.indexBuffer,R.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[_[this.currentLayer]],R=y[P.source],B=v[P.source];this._renderTileClippingMasks(P,B),this.renderLayer(this,R,P,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const P=this.style._layers[_[this.currentLayer]],R=y[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const B=(P.type==="symbol"?E:T)[P.source];this._renderTileClippingMasks(P,v[P.source]),this.renderLayer(this,R,P,B)}if(this.options.showTileBoundaries){const P=function(R,B){let N=null;const J=Object.values(R._layers).flatMap(be=>be.source&&!be.isHidden(B)?[R.sourceCaches[be.source]]:[]),ee=J.filter(be=>be.getSource().type==="vector"),ne=J.filter(be=>be.getSource().type!=="vector"),_e=be=>{(!N||N.getSource().maxzoom<be.getSource().maxzoom)&&(N=be)};return ee.forEach(be=>_e(be)),N||ne.forEach(be=>_e(be)),N}(this.style,this.transform.zoom);P&&function(R,B,N){for(let J=0;J<N.length;J++)wu(R,B,N[J])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const R=P.transform.padding;oo(P,P.transform.height-(R.top||0),3,Yl),oo(P,R.bottom||0,3,Vi),vu(P,R.left||0,3,Fa),vu(P,P.transform.width-(R.right||0),3,Gf);const B=P.transform.centerPoint;(function(N,J,ee,ne){Ba(N,J-1,ee-10,2,20,ne),Ba(N,J-10,ee-1,20,2,ne)})(P,B.x,P.transform.height-B.y,bu)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,_=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=a?!o.a_(d,_):!o.a$(d,_)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(o.b0(d,_),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,T){const E=v.context,P=E.gl,R=dn.unblended,B=new Pi(P.LEQUAL,Pi.ReadWrite,[0,1]),N=T.getTerrainMesh(),J=T.sourceCache.getRenderableTiles(),ee=v.useProgram("terrainDepth");E.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:o.aM.transparent,depth:1});for(const ne of J){const _e=T.getTerrainData(ne.tileID),be={u_matrix:v.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_ele_delta:T.getMeshFrameDelta(v.transform.zoom)};ee.draw(E,P.TRIANGLES,B,$i.disabled,R,Xi.backCCW,be,_e,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,T){const E=v.context,P=E.gl,R=dn.unblended,B=new Pi(P.LEQUAL,Pi.ReadWrite,[0,1]),N=T.getTerrainMesh(),J=T.getCoordsTexture(),ee=T.sourceCache.getRenderableTiles(),ne=v.useProgram("terrainCoords");E.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:o.aM.transparent,depth:1}),T.coordsIndex=[];for(const _e of ee){const be=T.getTerrainData(_e.tileID);E.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,J.texture);const ve={u_matrix:v.transform.calculatePosMatrix(_e.tileID.toUnwrapped()),u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(v.transform.zoom)};ne.draw(E,P.TRIANGLES,B,$i.disabled,R,Xi.backCCW,ve,be,"terrain",N.vertexBuffer,N.indexBuffer,N.segments),T.coordsIndex.push(_e.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(a,d,_,y){if(!_.isHidden(this.transform.zoom)&&(_.type==="background"||_.type==="custom"||(y||[]).length))switch(this.id=_.id,_.type){case"symbol":(function(v,T,E,P,R){if(v.renderPass!=="translucent")return;const B=$i.disabled,N=v.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(J,ee,ne,_e,be,ve,ke,ae,Ee){const ze=ee.transform,Ue=As(),ht=be==="map",kt=ve==="map";for(const Vt of J){const Gt=_e.getTile(Vt),zt=Gt.getBucket(ne);if(!zt||!zt.text||!zt.text.segments.get().length)continue;const Pt=o.ag(zt.textSizeData,ze.zoom),$t=Mi(Gt,1,ee.transform.zoom),yi=ds(Vt.posMatrix,kt,ht,ee.transform,$t),Bt=ne.layout.get("icon-text-fit")!=="none"&&zt.hasIconData();if(Pt){const qt=Math.pow(2,ze.zoom-Gt.tileID.overscaledZ),_i=ee.style.map.terrain?(ki,zi)=>ee.style.map.terrain.getElevation(Vt,ki,zi):null,nn=Ue.translatePosition(ze,Gt,ke,ae);io(zt,ht,kt,Ee,ze,yi,Vt.posMatrix,qt,Pt,Bt,Ue,nn,Vt.toUnwrapped(),_i)}}}(P,v,E,T,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),R),E.paint.get("icon-opacity").constantOr(1)!==0&&Xl(v,T,E,P,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),B,N),E.paint.get("text-opacity").constantOr(1)!==0&&Xl(v,T,E,P,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),B,N),T.map.showCollisionBoxes&&(Wo(v,T,E,P,!0),Wo(v,T,E,P,!1))})(a,d,_,y,this.style.placement.variableOffsets);break;case"circle":(function(v,T,E,P){if(v.renderPass!=="translucent")return;const R=E.paint.get("circle-opacity"),B=E.paint.get("circle-stroke-width"),N=E.paint.get("circle-stroke-opacity"),J=!E.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(B.constantOr(1)===0||N.constantOr(1)===0))return;const ee=v.context,ne=ee.gl,_e=v.depthModeForSublayer(0,Pi.ReadOnly),be=$i.disabled,ve=v.colorModeForRenderPass(),ke=[];for(let ae=0;ae<P.length;ae++){const Ee=P[ae],ze=T.getTile(Ee),Ue=ze.getBucket(E);if(!Ue)continue;const ht=Ue.programConfigurations.get(E.id),kt=v.useProgram("circle",ht),Vt=Ue.layoutVertexBuffer,Gt=Ue.indexBuffer,zt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ee),Pt={programConfiguration:ht,program:kt,layoutVertexBuffer:Vt,indexBuffer:Gt,uniformValues:Mf(v,Ee,ze,E),terrainData:zt};if(J){const $t=Ue.segments.get();for(const yi of $t)ke.push({segments:new o.a0([yi]),sortKey:yi.sortKey,state:Pt})}else ke.push({segments:Ue.segments,sortKey:0,state:Pt})}J&&ke.sort((ae,Ee)=>ae.sortKey-Ee.sortKey);for(const ae of ke){const{programConfiguration:Ee,program:ze,layoutVertexBuffer:Ue,indexBuffer:ht,uniformValues:kt,terrainData:Vt}=ae.state;ze.draw(ee,ne.TRIANGLES,_e,be,ve,Xi.disabled,kt,Vt,E.id,Ue,ht,ae.segments,E.paint,v.transform.zoom,Ee)}})(a,d,_,y);break;case"heatmap":(function(v,T,E,P){if(E.paint.get("heatmap-opacity")===0)return;const R=v.context;if(v.style.map.terrain){for(const B of P){const N=T.getTile(B);T.hasRenderableParent(B)||(v.renderPass==="offscreen"?Jl(v,N,E,B):v.renderPass==="translucent"&&Os(v,E,B))}R.viewport.set([0,0,v.width,v.height])}else v.renderPass==="offscreen"?function(B,N,J,ee){const ne=B.context,_e=ne.gl,be=$i.disabled,ve=new dn([_e.ONE,_e.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(ke,ae,Ee){const ze=ke.gl;ke.activeTexture.set(ze.TEXTURE1),ke.viewport.set([0,0,ae.width/4,ae.height/4]);let Ue=Ee.heatmapFbos.get(o.aU);Ue?(ze.bindTexture(ze.TEXTURE_2D,Ue.colorAttachment.get()),ke.bindFramebuffer.set(Ue.framebuffer)):(Ue=Ko(ke,ae.width/4,ae.height/4),Ee.heatmapFbos.set(o.aU,Ue))})(ne,B,J),ne.clear({color:o.aM.transparent});for(let ke=0;ke<ee.length;ke++){const ae=ee[ke];if(N.hasRenderableParent(ae))continue;const Ee=N.getTile(ae),ze=Ee.getBucket(J);if(!ze)continue;const Ue=ze.programConfigurations.get(J.id),ht=B.useProgram("heatmap",Ue),{zoom:kt}=B.transform;ht.draw(ne,_e.TRIANGLES,Pi.disabled,be,ve,Xi.disabled,er(ae.posMatrix,Ee,kt,J.paint.get("heatmap-intensity")),null,J.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,J.paint,B.transform.zoom,Ue)}ne.viewport.set([0,0,B.width,B.height])}(v,T,E,P):v.renderPass==="translucent"&&function(B,N){const J=B.context,ee=J.gl;J.setColorMode(B.colorModeForRenderPass());const ne=N.heatmapFbos.get(o.aU);ne&&(J.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ne.colorAttachment.get()),J.activeTexture.set(ee.TEXTURE1),Jo(J,N).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),B.useProgram("heatmapTexture").draw(J,ee.TRIANGLES,Pi.disabled,$i.disabled,B.colorModeForRenderPass(),Xi.disabled,Ia(B,N,0,1),null,N.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,N.paint,B.transform.zoom))}(v,E)})(a,d,_,y);break;case"line":(function(v,T,E,P){if(v.renderPass!=="translucent")return;const R=E.paint.get("line-opacity"),B=E.paint.get("line-width");if(R.constantOr(1)===0||B.constantOr(1)===0)return;const N=v.depthModeForSublayer(0,Pi.ReadOnly),J=v.colorModeForRenderPass(),ee=E.paint.get("line-dasharray"),ne=E.paint.get("line-pattern"),_e=ne.constantOr(1),be=E.paint.get("line-gradient"),ve=E.getCrossfadeParameters(),ke=_e?"linePattern":ee?"lineSDF":be?"lineGradient":"line",ae=v.context,Ee=ae.gl;let ze=!0;for(const Ue of P){const ht=T.getTile(Ue);if(_e&&!ht.patternsLoaded())continue;const kt=ht.getBucket(E);if(!kt)continue;const Vt=kt.programConfigurations.get(E.id),Gt=v.context.program.get(),zt=v.useProgram(ke,Vt),Pt=ze||zt.program!==Gt,$t=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ue),yi=ne.constantOr(null);if(yi&&ht.imageAtlas){const _i=ht.imageAtlas,nn=_i.patternPositions[yi.to.toString()],ki=_i.patternPositions[yi.from.toString()];nn&&ki&&Vt.setConstantPatternPositions(nn,ki)}const Bt=$t?Ue:null,qt=_e?eo(v,ht,E,ve,Bt):ee?zf(v,ht,E,ee,ve,Bt):be?iu(v,ht,E,kt.lineClipsArray.length,Bt):Ea(v,ht,E,Bt);if(_e)ae.activeTexture.set(Ee.TEXTURE0),ht.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Vt.updatePaintBuffers(ve);else if(ee&&(Pt||v.lineAtlas.dirty))ae.activeTexture.set(Ee.TEXTURE0),v.lineAtlas.bind(ae);else if(be){const _i=kt.gradients[E.id];let nn=_i.texture;if(E.gradientVersion!==_i.version){let ki=256;if(E.stepInterpolant){const zi=T.getSource().maxzoom,rn=Ue.canonical.z===zi?Math.ceil(1<<v.transform.maxZoom-Ue.canonical.z):1;ki=o.ac(o.aV(kt.maxLineLength/o.X*1024*rn),256,ae.maxTextureSize)}_i.gradient=o.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:ki,image:_i.gradient||void 0,clips:kt.lineClipsArray}),_i.texture?_i.texture.update(_i.gradient):_i.texture=new de(ae,_i.gradient,Ee.RGBA),_i.version=E.gradientVersion,nn=_i.texture}ae.activeTexture.set(Ee.TEXTURE0),nn.bind(E.stepInterpolant?Ee.NEAREST:Ee.LINEAR,Ee.CLAMP_TO_EDGE)}zt.draw(ae,Ee.TRIANGLES,N,v.stencilModeForClipping(Ue),J,Xi.disabled,qt,$t,E.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,E.paint,v.transform.zoom,Vt,kt.layoutVertexBuffer2),ze=!1}})(a,d,_,y);break;case"fill":(function(v,T,E,P){const R=E.paint.get("fill-color"),B=E.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const N=v.colorModeForRenderPass(),J=E.paint.get("fill-pattern"),ee=v.opaquePassEnabledForLayer()&&!J.constantOr(1)&&R.constantOr(o.aM.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===ee){const ne=v.depthModeForSublayer(1,v.renderPass==="opaque"?Pi.ReadWrite:Pi.ReadOnly);Yo(v,T,E,P,ne,N,!1)}if(v.renderPass==="translucent"&&E.paint.get("fill-antialias")){const ne=v.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Pi.ReadOnly);Yo(v,T,E,P,ne,N,!0)}})(a,d,_,y);break;case"fill-extrusion":(function(v,T,E,P){const R=E.paint.get("fill-extrusion-opacity");if(R!==0&&v.renderPass==="translucent"){const B=new Pi(v.context.gl.LEQUAL,Pi.ReadWrite,v.depthRangeFor3D);if(R!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Oa(v,T,E,P,B,$i.disabled,dn.disabled),Oa(v,T,E,P,B,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const N=v.colorModeForRenderPass();Oa(v,T,E,P,B,$i.disabled,N)}}})(a,d,_,y);break;case"hillshade":(function(v,T,E,P){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const R=v.context,B=v.depthModeForSublayer(0,Pi.ReadOnly),N=v.colorModeForRenderPass(),[J,ee]=v.renderPass==="translucent"?v.stencilConfigForOverlap(P):[{},P];for(const ne of ee){const _e=T.getTile(ne);_e.needsHillshadePrepare!==void 0&&_e.needsHillshadePrepare&&v.renderPass==="offscreen"?so(v,_e,E,B,$i.disabled,N):v.renderPass==="translucent"&&ro(v,ne,_e,E,B,J[ne.overscaledZ],N)}R.viewport.set([0,0,v.width,v.height])})(a,d,_,y);break;case"raster":(function(v,T,E,P){if(v.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!P.length)return;const R=v.context,B=R.gl,N=T.getSource(),J=v.useProgram("raster"),ee=v.colorModeForRenderPass(),[ne,_e]=N instanceof xn?[{},P]:v.stencilConfigForOverlap(P),be=_e[_e.length-1].overscaledZ,ve=!v.options.moving;for(const ke of _e){const ae=v.depthModeForSublayer(ke.overscaledZ-be,E.paint.get("raster-opacity")===1?Pi.ReadWrite:Pi.ReadOnly,B.LESS),Ee=T.getTile(ke);Ee.registerFadeDuration(E.paint.get("raster-fade-duration"));const ze=T.findLoadedParent(ke,0),Ue=T.findLoadedSibling(ke),ht=yu(Ee,ze||Ue||null,T,E,v.transform,v.style.map.terrain);let kt,Vt;const Gt=E.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;R.activeTexture.set(B.TEXTURE0),Ee.texture.bind(Gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(B.TEXTURE1),ze?(ze.texture.bind(Gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),kt=Math.pow(2,ze.tileID.overscaledZ-Ee.tileID.overscaledZ),Vt=[Ee.tileID.canonical.x*kt%1,Ee.tileID.canonical.y*kt%1]):Ee.texture.bind(Gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Ee.texture.useMipmap&&R.extTextureFilterAnisotropic&&v.transform.pitch>20&&B.texParameterf(B.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax);const zt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ke),Pt=zt?ke:null,$t=Pt?Pt.posMatrix:v.transform.calculatePosMatrix(ke.toUnwrapped(),ve),yi=Df($t,Vt||[0,0],kt||1,ht,E);N instanceof xn?J.draw(R,B.TRIANGLES,ae,$i.disabled,ee,Xi.disabled,yi,zt,E.id,N.boundsBuffer,v.quadTriangleIndexBuffer,N.boundsSegments):J.draw(R,B.TRIANGLES,ae,ne[ke.overscaledZ],ee,Xi.disabled,yi,zt,E.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(a,d,_,y);break;case"background":(function(v,T,E,P){const R=E.paint.get("background-color"),B=E.paint.get("background-opacity");if(B===0)return;const N=v.context,J=N.gl,ee=v.transform,ne=ee.tileSize,_e=E.paint.get("background-pattern");if(v.isPatternMissing(_e))return;const be=!_e&&R.a===1&&B===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==be)return;const ve=$i.disabled,ke=v.depthModeForSublayer(0,be==="opaque"?Pi.ReadWrite:Pi.ReadOnly),ae=v.colorModeForRenderPass(),Ee=v.useProgram(_e?"backgroundPattern":"background"),ze=P||ee.coveringTiles({tileSize:ne,terrain:v.style.map.terrain});_e&&(N.activeTexture.set(J.TEXTURE0),v.imageManager.bind(v.context));const Ue=E.getCrossfadeParameters();for(const ht of ze){const kt=P?ht.posMatrix:v.transform.calculatePosMatrix(ht.toUnwrapped()),Vt=_e?Fl(kt,B,v,_e,{tileID:ht,tileSize:ne},Ue):Pa(kt,B,R),Gt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ht);Ee.draw(N,J.TRIANGLES,ke,ve,ae,Xi.disabled,Vt,Gt,E.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(a,0,_,y);break;case"custom":(function(v,T,E){const P=v.context,R=E.implementation;if(v.renderPass==="offscreen"){const B=R.prerender;B&&(v.setCustomLayerDefaults(),P.setColorMode(v.colorModeForRenderPass()),B.call(R,P.gl,v.transform.customLayerMatrix()),P.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),P.setColorMode(v.colorModeForRenderPass()),P.setStencilMode($i.disabled);const B=R.renderingMode==="3d"?new Pi(v.context.gl.LEQUAL,Pi.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Pi.ReadOnly);P.setDepthMode(B),R.render(P.gl,v.transform.customLayerMatrix(),{farZ:v.transform.farZ,nearZ:v.transform.nearZ,fov:v.transform._fov,modelViewProjectionMatrix:v.transform.modelViewProjectionMatrix,projectionMatrix:v.transform.projectionMatrix}),P.setDirty(),v.setBaseState(),P.bindFramebuffer.set(null)}})(a,0,_)}}translatePosMatrix(a,d,_,y,v){if(!_[0]&&!_[1])return a;const T=v?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(T){const R=Math.sin(T),B=Math.cos(T);_=[_[0]*B-_[1]*R,_[0]*R+_[1]*B]}const E=[v?_[0]:Mi(d,_[0],this.transform.zoom),v?_[1]:Mi(d,_[1],this.transform.zoom),0],P=new Float32Array(16);return o.J(P,a,E),P}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),_=this.imageManager.getPattern(a.to.toString());return!d||!_}useProgram(a,d){this.cache=this.cache||{};const _=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[_]||(this.cache[_]=new Rl(this.context,ms[a],d,Bl[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[_]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new de(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class ao{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,_){const y=Math.pow(2,_),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const P=1/(E=o.af([],E,a))[3]/d*y;return o.b1(E,E,[P,P,1/E[3],P])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const P=function(J,ee){var ne=ee[0],_e=ee[1],be=ee[2],ve=ne*ne+_e*_e+be*be;return ve>0&&(ve=1/Math.sqrt(ve)),J[0]=ee[0]*ve,J[1]=ee[1]*ve,J[2]=ee[2]*ve,J}([],function(J,ee,ne){var _e=ee[0],be=ee[1],ve=ee[2],ke=ne[0],ae=ne[1],Ee=ne[2];return J[0]=be*Ee-ve*ae,J[1]=ve*ke-_e*Ee,J[2]=_e*ae-be*ke,J}([],Ie([],v[E[0]],v[E[1]]),Ie([],v[E[2]],v[E[1]]))),R=-((B=P)[0]*(N=v[E[1]])[0]+B[1]*N[1]+B[2]*N[2]);var B,N;return P.concat(R)});return new ao(v,T)}}class lo{constructor(a,d){this.min=a,this.max=d,this.center=function(_,y,v){return _[0]=.5*y[0],_[1]=.5*y[1],_[2]=.5*y[2],_}([],function(_,y,v){return _[0]=y[0]+v[0],_[1]=y[1]+v[1],_[2]=y[2]+v[2],_}([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],_=se(this.min),y=se(this.max);for(let v=0;v<d.length;v++)_[v]=d[v]?this.min[v]:this.center[v],y[v]=d[v]?this.center[v]:this.max[v];return y[2]=this.max[2],new lo(_,y)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let _=!0;for(let y=0;y<a.planes.length;y++){const v=a.planes[y];let T=0;for(let E=0;E<d.length;E++)o.b2(v,d[E])>=0&&T++;if(T===0)return 0;T!==d.length&&(_=!1)}if(_)return 2;for(let y=0;y<3;y++){let v=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let E=0;E<a.points.length;E++){const P=a.points[E][y]-this.min[y];v=Math.min(v,P),T=Math.max(T,P)}if(T<0||v>this.max[y]-this.min[y])return 0}return 1}}class co{constructor(a=0,d=0,_=0,y=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(_)||_<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=_,this.right=y}interpolate(a,d,_){return d.top!=null&&a.top!=null&&(this.top=o.y.number(a.top,d.top,_)),d.bottom!=null&&a.bottom!=null&&(this.bottom=o.y.number(a.bottom,d.bottom,_)),d.left!=null&&a.left!=null&&(this.left=o.y.number(a.left,d.left,_)),d.right!=null&&a.right!=null&&(this.right=o.y.number(a.right,d.right,_)),this}getCenter(a,d){const _=o.ac((this.left+a-this.right)/2,0,a),y=o.ac((this.top+d-this.bottom)/2,0,d);return new o.P(_,y)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new co(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ql=85.051129;class uo{constructor(a,d,_,y,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new co,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new uo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.lngRange=a.lngRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-o.b3(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var _=new o.A(4);return o.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}(),function(_,y,v){var T=y[0],E=y[1],P=y[2],R=y[3],B=Math.sin(v),N=Math.cos(v);_[0]=T*N+P*B,_[1]=E*N+R*B,_[2]=T*-B+P*N,_[3]=E*-B+R*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=o.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,_){this._unmodified=!1,this._edgeInsets.interpolate(a,d,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new o.b4(0,a)];if(this._renderWorldCopies){const _=this.pointCoordinate(new o.P(0,0)),y=this.pointCoordinate(new o.P(this.width,0)),v=this.pointCoordinate(new o.P(this.width,this.height)),T=this.pointCoordinate(new o.P(0,this.height)),E=Math.floor(Math.min(_.x,y.x,v.x,T.x)),P=Math.floor(Math.max(_.x,y.x,v.x,T.x)),R=1;for(let B=E-R;B<=P+R;B++)B!==0&&d.push(new o.b4(B,a))}return d}coveringTiles(a){var d,_;let y=this.coveringZoomLevel(a);const v=y;if(a.minzoom!==void 0&&y<a.minzoom)return[];a.maxzoom!==void 0&&y>a.maxzoom&&(y=a.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),E=o.Z.fromLngLat(this.center),P=Math.pow(2,y),R=[P*T.x,P*T.y,0],B=[P*E.x,P*E.y,0],N=ao.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y);let J=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(J=y);const ee=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ne=ae=>({aabb:new lo([ae*P,0,0],[(ae+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ae,fullyVisible:!1}),_e=[],be=[],ve=y,ke=a.reparseOverscaled?v:y;if(this._renderWorldCopies)for(let ae=1;ae<=3;ae++)_e.push(ne(-ae)),_e.push(ne(ae));for(_e.push(ne(0));_e.length>0;){const ae=_e.pop(),Ee=ae.x,ze=ae.y;let Ue=ae.fullyVisible;if(!Ue){const zt=ae.aabb.intersects(N);if(zt===0)continue;Ue=zt===2}const ht=a.terrain?R:B,kt=ae.aabb.distanceX(ht),Vt=ae.aabb.distanceY(ht),Gt=Math.max(Math.abs(kt),Math.abs(Vt));if(ae.zoom===ve||Gt>ee+(1<<ve-ae.zoom)-2&&ae.zoom>=J){const zt=ve-ae.zoom,Pt=R[0]-.5-(Ee<<zt),$t=R[1]-.5-(ze<<zt);be.push({tileID:new o.S(ae.zoom===ve?ke:ae.zoom,ae.wrap,ae.zoom,Ee,ze),distanceSq:Ce([B[0]-.5-Ee,B[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(Pt*Pt+$t*$t)})}else for(let zt=0;zt<4;zt++){const Pt=(Ee<<1)+zt%2,$t=(ze<<1)+(zt>>1),yi=ae.zoom+1;let Bt=ae.aabb.quadrant(zt);if(a.terrain){const qt=new o.S(yi,ae.wrap,yi,Pt,$t),_i=a.terrain.getMinMaxElevation(qt),nn=(d=_i.minElevation)!==null&&d!==void 0?d:this.elevation,ki=(_=_i.maxElevation)!==null&&_!==void 0?_:this.elevation;Bt=new lo([Bt.min[0],Bt.min[1],nn],[Bt.max[0],Bt.max[1],ki])}_e.push({aabb:Bt,zoom:yi,x:Pt,y:$t,wrap:ae.wrap,fullyVisible:Ue})}}return be.sort((ae,Ee)=>ae.distanceSq-Ee.distanceSq).map(ae=>ae.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=o.ac(a.lat,-85.051129,Ql);return new o.P(o.O(a.lng)*this.worldSize,o.Q(d)*this.worldSize)}unproject(a){return new o.Z(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.elevation,_=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,a),v=a.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-v))return;const T=_+d-v,E=Math.cos(this._pitch)*this.cameraToCenterDistance/T/o.b5(1,y.lat),P=this.scaleZoom(E/this.tileSize);this._elevation=v,this._center=y,this.zoom=P}setLocationAtPoint(a,d){const _=this.pointCoordinate(d),y=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(a),T=new o.Z(v.x-(_.x-y.x),v.y-(_.y-y.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return o.Z.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const J=d.pointCoordinate(a);if(J!=null)return J}const _=[a.x,a.y,0,1],y=[a.x,a.y,1,1];o.af(_,_,this.pixelMatrixInverse),o.af(y,y,this.pixelMatrixInverse);const v=_[3],T=y[3],E=_[1]/v,P=y[1]/T,R=_[2]/v,B=y[2]/T,N=R===B?0:(0-R)/(B-R);return new o.Z(o.y.number(_[0]/v,y[0]/T,N)/this.worldSize,o.y.number(E,P,N)/this.worldSize)}coordinatePoint(a,d=0,_=this.pixelMatrix){const y=[a.x*this.worldSize,a.y*this.worldSize,d,1];return o.af(y,y,_),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Fe().extend(this.pointLocation(new o.P(0,a))).extend(this.pointLocation(new o.P(this.width,a))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Fe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ql])}calculateTileMatrix(a){const d=a.canonical,_=this.worldSize/this.zoomScale(d.z),y=d.x+Math.pow(2,d.z)*a.wrap,v=o.an(new Float64Array(16));return o.J(v,v,[y*_,d.y*_,0]),o.K(v,v,[_/o.X,_/o.X,1]),v}calculatePosMatrix(a,d=!1){const _=a.key,y=d?this._alignedPosMatrixCache:this._posMatrixCache;if(y[_])return y[_];const v=this.calculateTileMatrix(a);return o.L(v,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,v),y[_]=new Float32Array(v),y[_]}calculateFogMatrix(a){const d=a.key,_=this._fogMatrixCache;if(_[d])return _[d];const y=this.calculateTileMatrix(a);return o.L(y,this.fogMatrix,y),_[d]=new Float32Array(y),_[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=o.ac(+d,this.minZoom,this.maxZoom);const _={center:new o.N(a.lng,a.lat),zoom:d};let y=this.lngRange;if(!this._renderWorldCopies&&y===null){const ae=179.9999999999;y=[-ae,ae]}const v=this.tileSize*this.zoomScale(_.zoom);let T=0,E=v,P=0,R=v,B=0,N=0;const{x:J,y:ee}=this.size;if(this.latRange){const ae=this.latRange;T=o.Q(ae[1])*v,E=o.Q(ae[0])*v,E-T<ee&&(B=ee/(E-T))}y&&(P=o.b3(o.O(y[0])*v,0,v),R=o.b3(o.O(y[1])*v,0,v),R<P&&(R+=v),R-P<J&&(N=J/(R-P)));const{x:ne,y:_e}=this.project.call({worldSize:v},a);let be,ve;const ke=Math.max(N||0,B||0);if(ke){const ae=new o.P(N?(R+P)/2:ne,B?(E+T)/2:_e);return _.center=this.unproject.call({worldSize:v},ae).wrap(),_.zoom+=this.scaleZoom(ke),_}if(this.latRange){const ae=ee/2;_e-ae<T&&(ve=T+ae),_e+ae>E&&(ve=E-ae)}if(y){const ae=(P+R)/2;let Ee=ne;this._renderWorldCopies&&(Ee=o.b3(ne,ae-v/2,ae+v/2));const ze=J/2;Ee-ze<P&&(be=P+ze),Ee+ze>R&&(be=R-ze)}if(be!==void 0||ve!==void 0){const ae=new o.P(be??ne,ve??_e);_.center=this.unproject.call({worldSize:v},ae).wrap()}return _}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:_}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=_,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,_=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let y=o.an(new Float64Array(16));o.K(y,y,[this.width/2,-this.height/2,1]),o.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=o.an(new Float64Array(16)),o.K(y,y,[1,-1,1]),o.J(y,y,[-1,-1,0]),o.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this.minElevationForCurrentTile),E=v-T*this._pixelPerMeter/Math.cos(this._pitch),P=T<0?E:v,R=Math.PI/2+this._pitch,B=this._fov*(.5+a.y/this.height),N=Math.sin(B)*P/Math.sin(o.ac(Math.PI-R-B,.01,Math.PI-.01)),J=this.getHorizon(),ee=2*Math.atan(J/this.cameraToCenterDistance)*(.5+a.y/(2*J)),ne=Math.sin(ee)*P/Math.sin(o.ac(Math.PI-R-ee,.01,Math.PI-.01)),_e=Math.min(N,ne);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*_e+P),this.nearZ=this.height/50,y=new Float64Array(16),o.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-a.x/this.width,y[9]=2*a.y/this.height,this.projectionMatrix=o.ae(y),o.K(y,y,[1,-1,1]),o.J(y,y,[0,0,-this.cameraToCenterDistance]),o.b7(y,y,this._pitch),o.ad(y,y,this.angle),o.J(y,y,[-d,-_,0]),this.mercatorMatrix=o.K([],y,[this.worldSize,this.worldSize,this.worldSize]),o.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,y),o.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=o.as([],y),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,v,this.farZ),this.fogMatrix[8]=2*-a.x/this.width,this.fogMatrix[9]=2*a.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-d,-_,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,y);const be=this.width%2/2,ve=this.height%2/2,ke=Math.cos(this.angle),ae=Math.sin(this.angle),Ee=d-Math.round(d)+ke*be+ae*ve,ze=_-Math.round(_)+ke*ve+ae*be,Ue=new Float64Array(y);if(o.J(Ue,Ue,[Ee>.5?Ee-1:Ee,ze>.5?ze-1:ze,0]),this.alignedModelViewProjectionMatrix=Ue,y=o.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new o.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let _=d.x,y=d.y,v=d.x,T=d.y;for(const E of a)_=Math.min(_,E.x),y=Math.min(y,E.y),v=Math.max(v,E.x),T=Math.max(T,E.y);return[new o.P(_,y),new o.P(v,y),new o.P(v,T),new o.P(_,T),new o.P(_,y)]}}lngLatToCameraDepth(a,d){const _=this.locationCoordinate(a),y=[_.x*this.worldSize,_.y*this.worldSize,d,1];return o.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function Qo(w,a){let d,_=!1,y=null,v=null;const T=()=>{y=null,_&&(w.apply(v,d),y=setTimeout(T,a),_=!1)};return(...E)=>(_=!0,v=this,d=E,y||T(),y)}class ja{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let _;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(_=y)}),(_&&_[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(_=>isNaN(_))){const _=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:_,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const _=d.join("/");let y=_;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${_}`);let v=window.location.hash.replace(y,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let T=window.location.href.replace(/(#.+)?$/,v);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Qo(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const d=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,y=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,y),T=Math.round(d.lng*v)/v,E=Math.round(d.lat*v)/v,P=this._map.getBearing(),R=this._map.getPitch();let B="";if(B+=a?`/${T}/${E}/${_}`:`${_}/${E}/${T}`,(P||R)&&(B+="/"+Math.round(10*P)/10),R&&(B+=`/${Math.round(R)}`),this._hashName){const N=this._hashName;let J=!1;const ee=window.location.hash.slice(1).split("&").map(ne=>{const _e=ne.split("=")[0];return _e===N?(J=!0,`${_e}=${B}`):ne}).filter(ne=>ne);return J||ee.push(`${N}=${B}`),`#${ee.join("&")}`}return`#${B}`}}const Ua={linearity:.3,easing:o.b8(0,0,.3,1)},$l=o.e({deceleration:2500,maxSpeed:1400},Ua),Hf=o.e({deceleration:20,maxSpeed:1400},Ua),ku=o.e({deceleration:1e3,maxSpeed:360},Ua),qa=o.e({deceleration:1e3,maxSpeed:90},Ua);class ec{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=C.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)d.zoom+=v.zoomDelta||0,d.bearing+=v.bearingDelta||0,d.pitch+=v.pitchDelta||0,v.panDelta&&d.pan._add(v.panDelta),v.around&&(d.around=v.around),v.pinchAround&&(d.pinchAround=v.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){const v=ea(d.pan.mag(),_,o.e({},$l,a||{}));y.offset=d.pan.mult(v.amount/d.pan.mag()),y.center=this._map.transform.center,$o(y,v)}if(d.zoom){const v=ea(d.zoom,_,Hf);y.zoom=this._map.transform.zoom+v.amount,$o(y,v)}if(d.bearing){const v=ea(d.bearing,_,ku);y.bearing=this._map.transform.bearing+o.ac(v.amount,-179,179),$o(y,v)}if(d.pitch){const v=ea(d.pitch,_,qa);y.pitch=this._map.transform.pitch+v.amount,$o(y,v)}if(y.zoom||y.bearing){const v=d.pinchAround===void 0?d.around:d.pinchAround;y.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function $o(w,a){(!w.duration||w.duration<a.duration)&&(w.duration=a.duration,w.easing=a.easing)}function ea(w,a,d){const{maxSpeed:_,linearity:y,deceleration:v}=d,T=o.ac(w*y/(a/1e3),-_,_),E=Math.abs(T)/(v*y);return{easing:d.easing,duration:1e3*E,amount:T*(E/2)}}class Ln extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,_,y={}){const v=A.mousePos(d.getCanvas(),_),T=d.unproject(v);super(a,o.e({point:v,lngLat:T,originalEvent:_},y)),this._defaultPrevented=!1,this.target=d}}class Fs extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,_){const y=a==="touchend"?_.changedTouches:_.touches,v=A.touchPos(d.getCanvasContainer(),y),T=v.map(P=>d.unproject(P)),E=v.reduce((P,R,B,N)=>P.add(R.div(N.length)),new o.P(0,0));super(a,{points:v,point:E,lngLats:T,lngLat:d.unproject(E),originalEvent:_}),this._defaultPrevented=!1}}class Cu extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,_){super(a,{originalEvent:_}),this._defaultPrevented=!1}}class Su{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new Cu(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new Ln(a.type,this._map,a))}mouseup(a){this._map.fire(new Ln(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ln(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ln(a.type,this._map,a))}mouseover(a){this._map.fire(new Ln(a.type,this._map,a))}mouseout(a){this._map.fire(new Ln(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Fs(a.type,this._map,a))}touchmove(a){this._map.fire(new Fs(a.type,this._map,a))}touchend(a){this._map.fire(new Fs(a.type,this._map,a))}touchcancel(a){this._map.fire(new Fs(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mn{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ln(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ln(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zr{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(o.P.convert(a),this._map.terrain)}}class fr{constructor(a,d){this._map=a,this._tr=new zr(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(A.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const _=d;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=_,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const v=Math.min(y.x,_.x),T=Math.max(y.x,_.x),E=Math.min(y.y,_.y),P=Math.max(y.y,_.y);A.setTransform(this._box,`translate(${v}px,${E}px)`),this._box.style.width=T-v+"px",this._box.style.height=P-E+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const _=this._startPos,y=d;if(this.reset(),A.suppressClick(),_.x!==y.x||_.y!==y.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:a})),{cameraAnimation:v=>v.fitScreenCoordinates(_,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new o.k(a,{originalEvent:d}))}}function ta(w,a){if(w.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${a.length}`);const d={};for(let _=0;_<w.length;_++)d[w[_].identifier]=a[_];return d}class tc{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),_.length===this.numTouches&&(this.centroid=function(y){const v=new o.P(0,0);for(const T of y)v._add(T);return v.div(y.length)}(d),this.touches=ta(_,d)))}touchmove(a,d,_){if(this.aborted||!this.centroid)return;const y=ta(_,d);for(const v in this.touches){const T=y[v];(!T||T.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(a,d,_){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Za{constructor(a){this.singleTap=new tc(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,_){this.singleTap.touchstart(a,d,_)}touchmove(a,d,_){this.singleTap.touchmove(a,d,_)}touchend(a,d,_){const y=this.singleTap.touchend(a,d,_);if(y){const v=a.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(v&&T||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class fo{constructor(a){this._tr=new zr(a),this._zoomIn=new Za({numTouches:1,numTaps:2}),this._zoomOut=new Za({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,_){this._zoomIn.touchstart(a,d,_),this._zoomOut.touchstart(a,d,_)}touchmove(a,d,_){this._zoomIn.touchmove(a,d,_),this._zoomOut.touchmove(a,d,_)}touchend(a,d,_){const y=this._zoomIn.touchend(a,d,_),v=this._zoomOut.touchend(a,d,_),T=this._tr;return y?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:a})}):v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(v)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ss{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const _=this._lastPoint;if(!_)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const y=d.length?d[0]:d;return!this._moved&&y.dist(_)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(_,y))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&A.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ic={0:1,2:2};class Ga{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=A.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,_){const y=ic[_];return d.buttons===void 0||(d.buttons&y)!==y}(a,this._eventButton)}isValidEndEvent(a){return A.mouseButton(a)===this._eventButton}}class nc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Ha=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=a=>{a.preventDefault()}},rc=({enable:w,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const _=new Ga({checkCorrectEvent:y=>A.mouseButton(y)===0&&y.ctrlKey||A.mouseButton(y)===2});return new ss({clickTolerance:a,move:(y,v)=>({bearingDelta:(v.x-y.x)*d}),moveStateManager:_,enable:w,assignEvents:Ha})},sc=({enable:w,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const _=new Ga({checkCorrectEvent:y=>A.mouseButton(y)===0&&y.ctrlKey||A.mouseButton(y)===2});return new ss({clickTolerance:a,move:(y,v)=>({pitchDelta:(v.y-y.y)*d}),moveStateManager:_,enable:w,assignEvents:Ha})};class Bs{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,d,_){return this._calculateTransform(a,d,_)}touchmove(a,d,_){if(this._active){if(!this._shouldBePrevented(_.length))return a.preventDefault(),this._calculateTransform(a,d,_);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,d,_){this._calculateTransform(a,d,_),this._active&&this._shouldBePrevented(_.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,_){_.length>0&&(this._active=!0);const y=ta(_,d),v=new o.P(0,0),T=new o.P(0,0);let E=0;for(const R in y){const B=y[R],N=this._touches[R];N&&(v._add(B),T._add(B.sub(N)),E++,y[R]=B)}if(this._touches=y,this._shouldBePrevented(E)||!T.mag())return;const P=T.div(E);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(E),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,_){if(!this._firstTwoTouches)return;a.preventDefault();const[y,v]=this._firstTwoTouches,T=ia(_,d,y),E=ia(_,d,v);if(!T||!E)return;const P=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],P,a)}touchend(a,d,_){if(!this._firstTwoTouches)return;const[y,v]=this._firstTwoTouches,T=ia(_,d,y),E=ia(_,d,v);T&&E||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ia(w,a,d){for(let _=0;_<w.length;_++)if(w[_].identifier===d)return a[_]}function oc(w,a){return Math.log(w/a)/Math.LN2}class ac extends Wa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const _=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(oc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oc(this._distance,_),pinchAround:d}}}function lc(w,a){return 180*w.angleWith(a)/Math.PI}class cc extends Wa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,_){const y=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:lc(this._vector,y),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,_=lc(a,this._startVector);return Math.abs(_)<d}}function Xa(w){return Math.abs(w.y)>Math.abs(w.x)}class ho extends Wa{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,_){super.touchstart(a,d,_),this._currentTouchCount=_.length}_start(a){this._lastPoints=a,Xa(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,_){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=a[0].sub(this._lastPoints[0]),v=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,v,_.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(y.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,_){if(this._valid!==void 0)return this._valid;const y=a.mag()>=2,v=d.mag()>=2;if(!y&&!v)return;if(!y||!v)return this._firstMove===void 0&&(this._firstMove=_),_-this._firstMove<100&&void 0;const T=a.y>0==d.y>0;return Xa(a)&&Xa(d)&&T}}const Tu={panStep:100,bearingStep:15,pitchStep:10};class br{constructor(a){this._tr=new zr(a);const d=Tu;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,_=0,y=0,v=0,T=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?_=-1:(a.preventDefault(),v=-1);break;case 39:a.shiftKey?_=1:(a.preventDefault(),v=1);break;case 38:a.shiftKey?y=1:(a.preventDefault(),T=-1);break;case 40:a.shiftKey?y=-1:(a.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(_=0,y=0),{cameraAnimation:E=>{const P=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Kr,zoom:d?Math.round(P.zoom)+d*(a.shiftKey?2:1):P.zoom,bearing:P.bearing+_*this._bearingStep,pitch:P.pitch+y*this._pitchStep,offset:[-v*this._panStep,-T*this._panStep],center:P.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Kr(w){return w*(2-w)}const uc=4.000244140625;class Dr{constructor(a,d){this._onTimeout=_=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},this._map=a,this._tr=new zr(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const _=C.now(),y=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,d!==0&&d%uc==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=A.mousePos(this._map.getCanvas(),a),_=this._tr;this._around=d.y>_.transform.height/2-_.transform.getHorizon()?o.N.convert(this._aroundCenter?_.center:_.unproject(d)):o.N.convert(_.center),this._aroundPoint=_.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>uc?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&R!==0&&(R=1/R);const B=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(B*R))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,_=this._startZoom,y=this._easing;let v,T=!1;const E=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&_&&y&&E){const P=Math.min(E/200,1),R=y(P);v=o.y.number(_,d,R),P<1?this._frameId||(this._frameId=!0):T=!0}else v=d,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:v-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=o.b9;if(this._prevEase){const _=this._prevEase,y=(C.now()-_.start)/_.duration,v=_.easing(y+.01)-_.easing(y),T=.27/Math.sqrt(v*v+1e-4)*.01,E=Math.sqrt(.0729-T*T);d=o.b8(T,E,.25,1)}return this._prevEase={start:C.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ns{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wf{constructor(a){this._tr=new zr(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xf{constructor(){this._tap=new Za({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,_){if(!this._swipePoint)if(this._tapTime){const y=d[0],v=a.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;v&&T?_.length>0&&(this._swipePoint=y,this._swipeTouch=_[0].identifier):this.reset()}else this._tap.touchstart(a,d,_)}touchmove(a,d,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const y=d[0],v=y.y-this._swipePoint.y;return this._swipePoint=y,a.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(a,d,_)}touchend(a,d,_){if(this._tapTime)this._swipePoint&&_.length===0&&this.reset();else{const y=this._tap.touchend(a,d,_);y&&(this._tapTime=a.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Iu{constructor(a,d,_){this._el=a,this._mousePan=d,this._touchPan=_}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Au{constructor(a,d,_){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fc{constructor(a,d,_,y){this._el=a,this._touchZoom=d,this._touchRotate=_,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class mo{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const _=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=d,this._container.appendChild(y);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=_,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,d){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:a,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const vr=w=>w.zoom||w.drag||w.pitch||w.rotate;class Xt extends o.k{}function Ka(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class hc{constructor(a,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,v)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,E={needsRenderFrame:!1},P={},R={},B=y.touches,N=B?this._getMapTouches(B):void 0,J=N?A.touchPos(this._map.getCanvas(),N):A.mousePos(this._map.getCanvas(),y);for(const{handlerName:_e,handler:be,allowed:ve}of this._handlers){if(!be.isEnabled())continue;let ke;this._blockedByActive(R,ve,_e)?be.reset():be[v||y.type]&&(ke=be[v||y.type](y,J,N),this.mergeHandlerResult(E,P,ke,_e,T),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||be.isActive())&&(R[_e]=be)}const ee={};for(const _e in this._previousActiveHandlers)R[_e]||(ee[_e]=T);this._previousActiveHandlers=R,(Object.keys(ee).length||Ka(E))&&(this._changes.push([E,P,ee]),this._triggerRenderFrame()),(Object.keys(R).length||Ka(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=E;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ec(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,v,T]of this._listeners)A.addEventListener(y,v,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[a,d,_]of this._listeners)A.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(a){const d=this._map,_=d.getCanvasContainer();this._add("mapEvent",new Su(d,a));const y=d.boxZoom=new fr(d,a);this._add("boxZoom",y),a.interactive&&a.boxZoom&&y.enable();const v=d.cooperativeGestures=new mo(d,a.cooperativeGestures);this._add("cooperativeGestures",v),a.cooperativeGestures&&v.enable();const T=new fo(d),E=new Wf(d);d.doubleClickZoom=new Ns(E,T),this._add("tapZoom",T),this._add("clickZoom",E),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const P=new Xf;this._add("tapDragZoom",P);const R=d.touchPitch=new ho(d);this._add("touchPitch",R),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const B=rc(a),N=sc(a);d.dragRotate=new Au(a,B,N),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const J=(({enable:ke,clickTolerance:ae})=>{const Ee=new Ga({checkCorrectEvent:ze=>A.mouseButton(ze)===0&&!ze.ctrlKey});return new ss({clickTolerance:ae,move:(ze,Ue)=>({around:Ue,panDelta:Ue.sub(ze)}),activateOnStart:!0,moveStateManager:Ee,enable:ke,assignEvents:Ha})})(a),ee=new Bs(a,d);d.dragPan=new Iu(_,J,ee),this._add("mousePan",J),this._add("touchPan",ee,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const ne=new cc,_e=new ac;d.touchZoomRotate=new fc(_,_e,ne,P),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const be=d.scrollZoom=new Dr(d,()=>this._triggerRenderFrame());this._add("scrollZoom",be,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const ve=d.keyboard=new br(d);this._add("keyboard",ve),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new mn(d))}_add(a,d,_){this._handlers.push({handlerName:a,handler:d,allowed:_}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vr(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,_){for(const y in a)if(y!==_&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const _ of a)this._el.contains(_.target)&&d.push(_);return d}mergeHandlerResult(a,d,_,y,v){if(!_)return;o.e(a,_);const T={handlerName:y,originalEvent:_.originalEvent||v};_.zoomDelta!==void 0&&(d.zoom=T),_.panDelta!==void 0&&(d.drag=T),_.pitchDelta!==void 0&&(d.pitch=T),_.bearingDelta!==void 0&&(d.rotate=T)}_applyChanges(){const a={},d={},_={};for(const[y,v,T]of this._changes)y.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(a.around=y.around),y.pinchAround!==void 0&&(a.pinchAround=y.pinchAround),y.noInertia&&(a.noInertia=y.noInertia),o.e(d,v),o.e(_,T);this._updateMapTransform(a,d,_),this._changes=[]}_updateMapTransform(a,d,_){const y=this._map,v=y._getTransformForUpdate(),T=y.terrain;if(!(Ka(a)||T&&this._terrainMovement))return this._fireEvents(d,_,!0);let{panDelta:E,zoomDelta:P,bearingDelta:R,pitchDelta:B,around:N,pinchAround:J}=a;J!==void 0&&(N=J),y._stop(!0),N=N||y.transform.centerPoint;const ee=v.pointLocation(E?N.sub(E):N);R&&(v.bearing+=R),B&&(v.pitch+=B),P&&(v.zoom+=P),T?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(E)):v.setLocationAtPoint(ee,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(ee,N)):v.setLocationAtPoint(ee,N),y._applyUpdatedTransform(v),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,_,!0)}_fireEvents(a,d,_){const y=vr(this._eventsInProgress),v=vr(a),T={};for(const N in a){const{originalEvent:J}=a[N];this._eventsInProgress[N]||(T[`${N}start`]=J),this._eventsInProgress[N]=a[N]}!y&&v&&this._fireEvent("movestart",v.originalEvent);for(const N in T)this._fireEvent(N,T[N]);v&&this._fireEvent("move",v.originalEvent);for(const N in a){const{originalEvent:J}=a[N];this._fireEvent(N,J)}const E={};let P;for(const N in this._eventsInProgress){const{handlerName:J,originalEvent:ee}=this._eventsInProgress[N];this._handlersById[J].isActive()||(delete this._eventsInProgress[N],P=d[J]||ee,E[`${N}end`]=P)}for(const N in E)this._fireEvent(N,E[N]);const R=vr(this._eventsInProgress),B=(y||v)&&!R;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const N=this._map._getTransformForUpdate();N.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(N)}if(_&&B){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!N||!N.essential&&C.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:P})),J(this._map.getBearing())&&this._map.resetNorth()):(J(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new o.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Xt("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Eu extends o.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const _=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,_){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},d),_)}panTo(a,d,_){return this.easeTo(o.e({center:a},d),_)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,_){return this.easeTo(o.e({zoom:a},d),_)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,_){return this.easeTo(o.e({bearing:a},d),_)}resetNorth(a,d){return this.rotateTo(0,o.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=Fe.convert(a).adjustAntiMeridian();const _=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),_,d)}_cameraForBoxAndBearing(a,d,_,y){const v={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const zt=y.padding;y.padding={top:zt,bottom:zt,right:zt,left:zt}}y.padding=o.e(v,y.padding);const T=this.transform,E=T.padding,P=new Fe(a,d),R=T.project(P.getNorthWest()),B=T.project(P.getNorthEast()),N=T.project(P.getSouthEast()),J=T.project(P.getSouthWest()),ee=o.ba(-_),ne=R.rotate(ee),_e=B.rotate(ee),be=N.rotate(ee),ve=J.rotate(ee),ke=new o.P(Math.max(ne.x,_e.x,ve.x,be.x),Math.max(ne.y,_e.y,ve.y,be.y)),ae=new o.P(Math.min(ne.x,_e.x,ve.x,be.x),Math.min(ne.y,_e.y,ve.y,be.y)),Ee=ke.sub(ae),ze=(T.width-(E.left+E.right+y.padding.left+y.padding.right))/Ee.x,Ue=(T.height-(E.top+E.bottom+y.padding.top+y.padding.bottom))/Ee.y;if(Ue<0||ze<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ht=Math.min(T.scaleZoom(T.scale*Math.min(ze,Ue)),y.maxZoom),kt=o.P.convert(y.offset),Vt=new o.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(o.ba(_)),Gt=kt.add(Vt).mult(T.scale/T.zoomScale(ht));return{center:T.unproject(R.add(N).div(2).sub(Gt)),zoom:ht,bearing:_}}fitBounds(a,d,_){return this._fitInternal(this.cameraForBounds(a,d),d,_)}fitScreenCoordinates(a,d,_,y,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(a)),this.transform.pointLocation(o.P.convert(d)),_,y),y,v)}_fitInternal(a,d,_){return a?(delete(d=o.e(a,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this}jumpTo(a,d){this.stop();const _=this._getTransformForUpdate();let y=!1,v=!1,T=!1;return"zoom"in a&&_.zoom!==+a.zoom&&(y=!0,_.zoom=+a.zoom),a.center!==void 0&&(_.center=o.N.convert(a.center)),"bearing"in a&&_.bearing!==+a.bearing&&(v=!0,_.bearing=+a.bearing),"pitch"in a&&_.pitch!==+a.pitch&&(T=!0,_.pitch=+a.pitch),a.padding==null||_.isPaddingEqual(a.padding)||(_.padding=a.padding),this._applyUpdatedTransform(_),this.fire(new o.k("movestart",d)).fire(new o.k("move",d)),y&&this.fire(new o.k("zoomstart",d)).fire(new o.k("zoom",d)).fire(new o.k("zoomend",d)),v&&this.fire(new o.k("rotatestart",d)).fire(new o.k("rotate",d)).fire(new o.k("rotateend",d)),T&&this.fire(new o.k("pitchstart",d)).fire(new o.k("pitch",d)).fire(new o.k("pitchend",d)),this.fire(new o.k("moveend",d))}calculateCameraOptionsFromTo(a,d,_,y=0){const v=o.Z.fromLngLat(a,d),T=o.Z.fromLngLat(_,y),E=T.x-v.x,P=T.y-v.y,R=T.z-v.z,B=Math.hypot(E,P,R);if(B===0)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(E,P),J=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),ee=180*Math.atan2(E,-P)/Math.PI;let ne=180*Math.acos(N/B)/Math.PI;return ne=R<0?90-ne:90+ne,{center:T.toLngLat(),zoom:J,pitch:ne,bearing:ee}}easeTo(a,d){var _;this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.b9},a)).animate===!1||!a.essential&&C.prefersReducedMotion)&&(a.duration=0);const y=this._getTransformForUpdate(),v=y.zoom,T=y.bearing,E=y.pitch,P=y.padding,R="bearing"in a?this._normalizeBearing(a.bearing,T):T,B="pitch"in a?+a.pitch:E,N="padding"in a?a.padding:y.padding,J=o.P.convert(a.offset);let ee=y.centerPoint.add(J);const ne=y.pointLocation(ee),{center:_e,zoom:be}=y.getConstrained(o.N.convert(a.center||ne),(_=a.zoom)!==null&&_!==void 0?_:v);this._normalizeCenter(_e,y);const ve=y.project(ne),ke=y.project(_e).sub(ve),ae=y.zoomScale(be-v);let Ee,ze;a.around&&(Ee=o.N.convert(a.around),ze=y.locationPoint(Ee));const Ue={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||be!==v,this._rotating=this._rotating||T!==R,this._pitching=this._pitching||B!==E,this._padding=!y.isPaddingEqual(N),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,Ue),this.terrain&&this._prepareElevation(_e),this._ease(ht=>{if(this._zooming&&(y.zoom=o.y.number(v,be,ht)),this._rotating&&(y.bearing=o.y.number(T,R,ht)),this._pitching&&(y.pitch=o.y.number(E,B,ht)),this._padding&&(y.interpolatePadding(P,N,ht),ee=y.centerPoint.add(J)),this.terrain&&!a.freezeElevation&&this._updateElevation(ht),Ee)y.setLocationAtPoint(Ee,ze);else{const kt=y.zoomScale(y.zoom-v),Vt=be>v?Math.min(2,ae):Math.max(.5,ae),Gt=Math.pow(Vt,1-ht),zt=y.unproject(ve.add(ke.mult(ht*Gt)).mult(kt));y.setLocationAtPoint(y.renderWorldCopies?zt.wrap():zt,ee)}this._applyUpdatedTransform(y),this._fireMoveEvents(d)},ht=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ht)},a),this}_prepareEase(a,d,_={}){this._moving=!0,d||_.moving||this.fire(new o.k("movestart",a)),this._zooming&&!_.zooming&&this.fire(new o.k("zoomstart",a)),this._rotating&&!_.rotating&&this.fire(new o.k("rotatestart",a)),this._pitching&&!_.pitching&&this.fire(new o.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const _=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(_-(d-(_*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){const d=a.getCameraPosition(),_=this.terrain.getElevationForLngLatZoom(d.lngLat,a.zoom);if(d.altitude<_){const y=this.calculateCameraOptionsFromTo(d.lngLat,_,a.center,a.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(a){const d=[];if(this.terrain&&d.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&d.push(y=>this.transformCameraUpdate(y)),!d.length)return;const _=a.clone();for(const y of d){const v=_.clone(),{center:T,zoom:E,pitch:P,bearing:R,elevation:B}=y(v);T&&(v.center=T),E!==void 0&&(v.zoom=E),P!==void 0&&(v.pitch=P),R!==void 0&&(v.bearing=R),B!==void 0&&(v.elevation=B),_.apply(v)}this.transform.apply(_)}_fireMoveEvents(a){this.fire(new o.k("move",a)),this._zooming&&this.fire(new o.k("zoom",a)),this._rotating&&this.fire(new o.k("rotate",a)),this._pitching&&this.fire(new o.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const _=this._zooming,y=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.k("zoomend",a)),y&&this.fire(new o.k("rotateend",a)),v&&this.fire(new o.k("pitchend",a)),this.fire(new o.k("moveend",a))}flyTo(a,d){var _;if(!a.essential&&C.prefersReducedMotion){const qt=o.M(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(qt,d)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},a);const y=this._getTransformForUpdate(),v=y.zoom,T=y.bearing,E=y.pitch,P=y.padding,R="bearing"in a?this._normalizeBearing(a.bearing,T):T,B="pitch"in a?+a.pitch:E,N="padding"in a?a.padding:y.padding,J=o.P.convert(a.offset);let ee=y.centerPoint.add(J);const ne=y.pointLocation(ee),{center:_e,zoom:be}=y.getConstrained(o.N.convert(a.center||ne),(_=a.zoom)!==null&&_!==void 0?_:v);this._normalizeCenter(_e,y);const ve=y.zoomScale(be-v),ke=y.project(ne),ae=y.project(_e).sub(ke);let Ee=a.curve;const ze=Math.max(y.width,y.height),Ue=ze/ve,ht=ae.mag();if("minZoom"in a){const qt=o.ac(Math.min(a.minZoom,v,be),y.minZoom,y.maxZoom),_i=ze/y.zoomScale(qt-v);Ee=Math.sqrt(_i/ht*2)}const kt=Ee*Ee;function Vt(qt){const _i=(Ue*Ue-ze*ze+(qt?-1:1)*kt*kt*ht*ht)/(2*(qt?Ue:ze)*kt*ht);return Math.log(Math.sqrt(_i*_i+1)-_i)}function Gt(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function zt(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const Pt=Vt(!1);let $t=function(qt){return zt(Pt)/zt(Pt+Ee*qt)},yi=function(qt){return ze*((zt(Pt)*(Gt(_i=Pt+Ee*qt)/zt(_i))-Gt(Pt))/kt)/ht;var _i},Bt=(Vt(!0)-Pt)/Ee;if(Math.abs(ht)<1e-6||!isFinite(Bt)){if(Math.abs(ze-Ue)<1e-6)return this.easeTo(a,d);const qt=Ue<ze?-1:1;Bt=Math.abs(Math.log(Ue/ze))/Ee,yi=()=>0,$t=_i=>Math.exp(qt*Ee*_i)}return a.duration="duration"in a?+a.duration:1e3*Bt/("screenSpeed"in a?+a.screenSpeed/Ee:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=T!==R,this._pitching=B!==E,this._padding=!y.isPaddingEqual(N),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(_e),this._ease(qt=>{const _i=qt*Bt,nn=1/$t(_i);y.zoom=qt===1?be:v+y.scaleZoom(nn),this._rotating&&(y.bearing=o.y.number(T,R,qt)),this._pitching&&(y.pitch=o.y.number(E,B,qt)),this._padding&&(y.interpolatePadding(P,N,qt),ee=y.centerPoint.add(J)),this.terrain&&!a.freezeElevation&&this._updateElevation(qt);const ki=qt===1?_e:y.unproject(ke.add(ae.mult(yi(_i))).mult(nn));y.setLocationAtPoint(y.renderWorldCopies?ki.wrap():ki,ee),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){var _;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}return a||(_=this.handlers)===null||_===void 0||_.stop(!1),this}_ease(a,d,_){_.animate===!1||_.duration===0?(a(1),d()):(this._easeStart=C.now(),this._easeOptions=_,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=o.b3(a,-180,180);const _=Math.abs(a-d);return Math.abs(a-360-d)<_&&(a-=360),Math.abs(a+360-d)<_&&(a+=360),a}_normalizeCenter(a,d){if(!d.renderWorldCopies||d.lngRange)return;const _=a.lng-d.center.lng;a.lng+=_>180?-360:_<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const po={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class _o{constructor(a=po){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const _=this._map._getUIString(`AttributionControl.${d}`);a.title=_,a.setAttribute("aria-label",_)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const d=this._map.style.sourceCaches;for(const y in d){const v=d[y];if(v.used||v.usedForTerrain){const T=v.getSource();T.attribution&&a.indexOf(T.attribution)<0&&a.push(T.attribution)}}a=a.filter(y=>String(y).trim()),a.sort((y,v)=>y.length-v.length),a=a.filter((y,v)=>{for(let T=v+1;T<a.length;T++)if(a[T].indexOf(y)>=0)return!1;return!0});const _=a.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,a.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class dc{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const _=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&_.classList.add("maplibregl-compact"):_.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const d=A.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Di{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,_=d?this._queue.concat(d):this._queue;for(const y of _)if(y.id===a)return void(y.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const _ of d)if(!_.cancelled&&(_.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mc=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Kf extends o.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const _={};for(const y of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))_[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.aP(y.posMatrix,0,o.X,0,o.X,0,1),this._tiles[y.key]=new hs(y,this.tileSize));for(const y in this._tiles)_[y]||delete this._tiles[y]}freeRtt(a){for(const d in this._tiles){const _=this._tiles[d];(!a||_.tileID.equals(a)||_.tileID.isChildOf(a)||a.isChildOf(_.tileID))&&(_.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const _ of this._renderableTilesKeys){const y=this._tiles[_].tileID;if(y.canonical.equals(a.canonical)){const v=a.clone();v.posMatrix=new Float64Array(16),o.aP(v.posMatrix,0,o.X,0,o.X,0,1),d[_]=v}else if(y.canonical.isChildOf(a.canonical)){const v=a.clone();v.posMatrix=new Float64Array(16);const T=y.canonical.z-a.canonical.z,E=y.canonical.x-(y.canonical.x>>T<<T),P=y.canonical.y-(y.canonical.y>>T<<T),R=o.X>>T;o.aP(v.posMatrix,0,R,0,R,0,1),o.J(v.posMatrix,v.posMatrix,[-E*R,-P*R,0]),d[_]=v}else if(a.canonical.isChildOf(y.canonical)){const v=a.clone();v.posMatrix=new Float64Array(16);const T=a.canonical.z-y.canonical.z,E=a.canonical.x-(a.canonical.x>>T<<T),P=a.canonical.y-(a.canonical.y>>T<<T),R=o.X>>T;o.aP(v.posMatrix,0,o.X,0,o.X,0,1),o.J(v.posMatrix,v.posMatrix,[E*R,P*R,0]),o.K(v.posMatrix,v.posMatrix,[1/2**T,1/2**T,0]),d[_]=v}}return d}getSourceTile(a,d){const _=this.sourceCache._source;let y=a.overscaledZ-this.deltaZoom;if(y>_.maxzoom&&(y=_.maxzoom),y<_.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(y).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!v||!v.dem)&&d)for(;y>=_.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(a.scaledTo(y--).key);return v}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class pc{constructor(a,d,_){this.painter=a,this.sourceCache=new Kf(d),this.options=_,this.exaggeration=typeof _.exaggeration=="number"?_.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,_,y=o.X){var v;if(!(d>=0&&d<y&&_>=0&&_<y))return 0;const T=this.getTerrainData(a),E=(v=T.tile)===null||v===void 0?void 0:v.dem;if(!E)return 0;const P=function(ne,_e,be){var ve=_e[0],ke=_e[1];return ne[0]=be[0]*ve+be[4]*ke+be[12],ne[1]=be[1]*ve+be[5]*ke+be[13],ne}([],[d/y*o.X,_/y*o.X],T.u_terrain_matrix),R=[P[0]*E.dim,P[1]*E.dim],B=Math.floor(R[0]),N=Math.floor(R[1]),J=R[0]-B,ee=R[1]-N;return E.get(B,N)*(1-J)*(1-ee)+E.get(B+1,N)*J*(1-ee)+E.get(B,N+1)*(1-J)*ee+E.get(B+1,N+1)*J*ee}getElevationForLngLatZoom(a,d){if(!o.bb(d,a.wrap()))return 0;const{tileID:_,mercatorX:y,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(_,y%o.X,v%o.X,o.X)}getElevation(a,d,_,y=o.X){return this.getDEMElevation(a,d,_,y)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const y=this.painter.context,v=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new de(y,v,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new de(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new de(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const _=d&&d+d.tileID.key+a.key;if(_&&!this._demMatrixCache[_]){const y=this.sourceCache.sourceCache._source.maxzoom;let v=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=y?v=a.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=a.canonical.x-(a.canonical.x>>v<<v),E=a.canonical.y-(a.canonical.y>>v<<v),P=o.bc(new Float64Array(16),[1/(o.X<<v),1/(o.X<<v),0]);o.J(P,P,[T*o.X,E*o.X,0]),this._demMatrixCache[a.key]={matrix:P,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:_?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,_=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===_&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new de(d.context,{width:_,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new de(d.context,{width:_,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(_,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,_,y))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,T=0;v<this._coordsTextureSize;v++)for(let E=0;E<this._coordsTextureSize;E++,T+=4)d[T+0]=255&E,d[T+1]=255&v,d[T+2]=E>>8<<4|v>>8,d[T+3]=0;const _=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new de(a,_,a.gl.RGBA,{premultiply:!1});return y.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),_=this.painter.context,y=_.gl,v=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);_.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(v,E-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),_.bindFramebuffer.set(null);const P=d[0]+(d[2]>>4<<8),R=d[1]+((15&d[2])<<8),B=this.coordsIndex[255-d[3]],N=B&&this.sourceCache.getTileByID(B);if(!N)return null;const J=this._coordsTextureSize,ee=(1<<N.tileID.canonical.z)*J;return new o.Z((N.tileID.canonical.x*J+P)/ee+N.tileID.wrap,(N.tileID.canonical.y*J+R)/ee,this.getElevation(N.tileID,P,R,J))}depthAtPoint(a){const d=new Uint8Array(4),_=this.painter.context,y=_.gl;return _.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),_.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new o.bd,_=new o.aY,y=this.meshSize,v=o.X/y,T=y*y;for(let N=0;N<=y;N++)for(let J=0;J<=y;J++)d.emplaceBack(J*v,N*v,0);for(let N=0;N<T;N+=y+1)for(let J=0;J<y;J++)_.emplaceBack(J+N,y+J+N+1,y+J+N+2),_.emplaceBack(J+N,y+J+N+2,J+N+1);const E=d.length,P=E+2*(y+1);for(const N of[0,1])for(let J=0;J<=y;J++)for(const ee of[0,1])d.emplaceBack(J*v,N*o.X,ee);for(let N=0;N<2*y;N+=2)_.emplaceBack(P+N,P+N+1,P+N+3),_.emplaceBack(P+N,P+N+3,P+N+2),_.emplaceBack(E+N,E+N+3,E+N+1),_.emplaceBack(E+N,E+N+2,E+N+3);const R=d.length,B=R+2*(y+1);for(const N of[0,1])for(let J=0;J<=y;J++)for(const ee of[0,1])d.emplaceBack(N*o.X,J*v,ee);for(let N=0;N<2*y;N+=2)_.emplaceBack(R+N,R+N+1,R+N+3),_.emplaceBack(R+N,R+N+3,R+N+2),_.emplaceBack(B+N,B+N+3,B+N+1),_.emplaceBack(B+N,B+N+2,B+N+3);return this._mesh=new Na(a.createVertexBuffer(d,mc.members),a.createIndexBuffer(_),o.a0.simpleSegment(0,0,d.length,_.length)),this._mesh}getMeshFrameDelta(a){return 2*Math.PI*o.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var _;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(_=this.getMinMaxElevation(y).minElevation)!==null&&_!==void 0?_:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,_={minElevation:null,maxElevation:null};return d&&d.dem&&(_.minElevation=d.dem.min*this.exaggeration,_.maxElevation=d.dem.max*this.exaggeration),_}_getOverscaledTileIDFromLngLatZoom(a,d){const _=o.Z.fromLngLat(a.wrap()),y=(1<<d)*o.X,v=_.x*y,T=_.y*y,E=Math.floor(v/o.X),P=Math.floor(T/o.X);return{tileID:new o.S(d,0,d,E,P),mercatorX:v,mercatorY:T}}}class Jf{constructor(a,d,_){this._context=a,this._size=d,this._tileSize=_,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),_=new de(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return _.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(_.texture),{id:a,fbo:d,texture:_,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const go={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pu{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Jf(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(_=>!a._layers[_].isHidden(d)),this._coordsDescendingInv={};for(const _ in a.sourceCaches){this._coordsDescendingInv[_]={};const y=a.sourceCaches[_].getVisibleCoordinates();for(const v of y){const T=this.terrain.sourceCache.getTerrainCoords(v);for(const E in T)this._coordsDescendingInv[_][E]||(this._coordsDescendingInv[_][E]=[]),this._coordsDescendingInv[_][E].push(T[E])}}this._coordsDescendingInvStr={};for(const _ of a._order){const y=a._layers[_],v=y.source;if(go[y.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const T in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][T]=this._coordsDescendingInv[v][T].map(E=>E.key).sort().join()}}for(const _ of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[y][_.tileID.key];v&&v!==_.rttCoords[y]&&(_.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,_=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(go[d]&&(this._prevType&&go[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!y))return!0;if(go[this._prevType]||go[d]&&y){this._prevType=d;const v=this._stacks.length-1,T=this._stacks[v]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(xu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[v]){const R=this.pool.getObjectForId(E.rtt[v].id);if(R.stamp===E.rtt[v].stamp){this.pool.useObject(R);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),E.rtt[v]={id:P.id,stamp:P.stamp},_.context.bindFramebuffer.set(P.fbo.framebuffer),_.context.clear({color:o.aM.transparent,stencil:0}),_.currentStencilSource=void 0;for(let R=0;R<T.length;R++){const B=_.style._layers[T[R]],N=B.source?this._coordsDescendingInv[B.source][E.tileID.key]:[E.tileID];_.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),_._renderTileClippingMasks(B,N),_.renderLayer(_,_.style.sourceCaches[B.source],B,N),B.source&&(E.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][E.tileID.key])}}return xu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),go[d]}return!1}}const _c={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Mu=f,Yf={hash:!1,interactive:!0,bearingSnap:7,attributionControl:po,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},gc=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},Qf={showCompass:!0,showZoom:!0,visualizePitch:!1};class $f{constructor(a,d,_=!1){this.mousedown=T=>{this.startMouse(o.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),A.mousePos(this.element,T)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,A.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=a.dragRotate._mouseRotate.getClickTolerance(),v=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=rc({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:E,bearingDegreesPerPixelMoved:P=.8})=>{const R=new nc;return new ss({clickTolerance:E,move:(B,N)=>({bearingDelta:(N.x-B.x)*P}),moveStateManager:R,enable:T,assignEvents:gc})})({clickTolerance:y,enable:!0}),this.map=a,_&&(this.mousePitch=sc({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:E,pitchDegreesPerPixelMoved:P=-.5})=>{const R=new nc;return new ss({clickTolerance:E,move:(B,N)=>({pitchDelta:(N.y-B.y)*P}),moveStateManager:R,enable:T,assignEvents:gc})})({clickTolerance:v,enable:!0})),A.addEventListener(d,"mousedown",this.mousedown),A.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),A.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),A.disableDrag()}moveMouse(a,d){const _=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(a,d)||{};if(y&&_.setBearing(_.getBearing()+y),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(a,d)||{};v&&_.setPitch(_.getPitch()+v)}}moveTouch(a,d){const _=this.map,{bearingDelta:y}=this.touchRotate.dragMove(a,d)||{};if(y&&_.setBearing(_.getBearing()+y),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(a,d)||{};v&&_.setPitch(_.getPitch()+v)}}off(){const a=this.element;A.removeEventListener(a,"mousedown",this.mousedown),A.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let hr;function tn(w,a,d){const _=new o.N(w.lng,w.lat);if(w=new o.N(w.lng,w.lat),a){const y=new o.N(w.lng-360,w.lat),v=new o.N(w.lng+360,w.lat),T=d.locationPoint(w).distSqr(a);d.locationPoint(y).distSqr(a)<T?w=y:d.locationPoint(v).distSqr(a)<T&&(w=v)}for(;Math.abs(w.lng-d.center.lng)>180;){const y=d.locationPoint(w);if(y.x>=0&&y.y>=0&&y.x<=d.width&&y.y<=d.height)break;w.lng>d.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&d.locationPoint(w).y>d.height/2-d.getHorizon()?w:_}const yo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ja(w,a,d){const _=w.classList;for(const y in yo)_.remove(`maplibregl-${d}-anchor-${y}`);_.add(`maplibregl-${d}-anchor-${a}`)}class Ya extends o.E{constructor(a){if(super(),this._onKeyPress=d=>{const _=d.code,y=d.charCode||d.keyCode;_!=="Space"&&_!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{const _=d.originalEvent.target,y=this._element;this._popup&&(_===y||y.contains(_))&&this.togglePopup()},this._update=d=>{var _;if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?tn(this._lngLat,this._flatPos,this._map.transform):(_=this._lngLat)===null||_===void 0?void 0:_.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${yo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${v}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const _=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a==null?void 0:a.opacity,a==null?void 0:a.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const d=A.createNS("http://www.w3.org/2000/svg","svg"),_=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${_}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${_}`);const v=A.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const E=A.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of P){const ke=A.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",ve.rx),ke.setAttributeNS(null,"ry",ve.ry),E.appendChild(ke)}const R=A.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const B=A.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(B);const N=A.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");const J=A.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(J);const ee=A.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ne=A.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _e=A.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");const be=A.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),ne.appendChild(_e),ne.appendChild(be),T.appendChild(E),T.appendChild(R),T.appendChild(N),T.appendChild(ee),T.appendChild(ne),d.appendChild(T),d.setAttributeNS(null,"height",_*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Ja(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.N.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const y=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,_;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const y=this._map,v=y.terrain.depthAtPoint(this._pos),T=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,T)-v<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/y.transform._pixelPerMeter,P=Math.sin(y.getPitch()*Math.PI/180)*E,R=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),B=y.transform.lngLatToCameraDepth(this._lngLat,T+P)-R>.006;!((_=this._popup)===null||_===void 0)&&_.isOpen()&&B&&this._popup.remove(),this._element.style.opacity=B?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return a===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const zu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let na=0,ra=!1;const Jr={maxWidth:100,unit:"metric"};function sa(w,a,d){const _=d&&d.maxWidth||100,y=w._container.clientHeight/2,v=w.unproject([0,y]),T=w.unproject([_,y]),E=v.distanceTo(T);if(d&&d.unit==="imperial"){const P=3.2808*E;P>5280?Qt(a,_,P/5280,w._getUIString("ScaleControl.Miles")):Qt(a,_,P,w._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Qt(a,_,E/1852,w._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Qt(a,_,E/1e3,w._getUIString("ScaleControl.Kilometers")):Qt(a,_,E,w._getUIString("ScaleControl.Meters"))}function Qt(w,a,d,_){const y=function(v){const T=Math.pow(10,`${Math.floor(v)}`.length-1);let E=v/T;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(P){const R=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*R)/R}(E),T*E}(d);w.style.width=a*(y/d)+"px",w.innerHTML=`${y}&nbsp;${_}`}const hi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Qa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $a(w){if(w){if(typeof w=="number"){const a=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-w),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const a=o.P.convert(w);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return $a(new o.P(0,0))}const yc=f;l.AJAXError=o.bh,l.Evented=o.E,l.LngLat=o.N,l.MercatorCoordinate=o.Z,l.Point=o.P,l.addProtocol=o.bi,l.config=o.a,l.removeProtocol=o.bj,l.AttributionControl=_o,l.BoxZoomHandler=fr,l.CanvasSource=Dn,l.CooperativeGesturesHandler=mo,l.DoubleClickZoomHandler=Ns,l.DragPanHandler=Iu,l.DragRotateHandler=Au,l.EdgeInsets=co,l.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d==null?void 0:d.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=pi,l.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new o.N(a.coords.longitude,a.coords.latitude),_=a.coords.accuracy,y=this._map.getBearing(),v=o.e({bearing:y},this.options.fitBoundsOptions),T=Fe.fromLngLat(d,_);this._map.fitBounds(T,v,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new o.N(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&ra)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ya({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ya({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},zu,w)}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(a=!1){if(hr!==void 0&&!a)return hr;if(window.navigator.permissions===void 0)return hr=!!window.navigator.geolocation,hr;try{hr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{hr=!!window.navigator.geolocation}return hr})}().then(a=>this._finishSetupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,na=0,ra=!1}_isOutOfMapMaxBounds(w){const a=this._map.getMaxBounds(),d=w.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),a=w.getSouthEast(),d=w.getNorthEast(),_=a.distanceTo(d),y=Math.ceil(this._accuracy/(_/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":na--,ra=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),na++,na>1?(w={maximumAge:6e5,timeout:0},ra=!0):(w=this.options.positionOptions,ra=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.Hash=ja,l.ImageSource=xn,l.KeyboardHandler=br,l.LngLatBounds=Fe,l.LogoControl=dc,l.Map=class extends Eu{constructor(w){o.bf.mark(o.bg.create);const a=Object.assign(Object.assign({},Yf),w);if(a.minZoom!=null&&a.maxZoom!=null&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(a.minPitch!=null&&a.maxPitch!=null&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(a.minPitch!=null&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(a.maxPitch!=null&&a.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new uo(a.minZoom,a.maxZoom,a.minPitch,a.maxPitch,a.renderWorldCopies),{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Di,this._controls=[],this._mapId=o.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=a.preserveDrawingBuffer===!0,this._antialias=a.antialias===!0,this._trackResize=a.trackResize===!0,this._bearingSnap=a.bearingSnap,this._refreshExpiredTiles=a.refreshExpiredTiles===!0,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=a.crossSourceCollisions===!0,this._collectResourceTiming=a.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},_c),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=a.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ie.addThrottleControl(()=>this.isMoving()),this._requestManager=new oe(a.transformRequest),typeof a.container=="string"){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;const _=Qo(y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())},50);this._resizeObserver=new ResizeObserver(y=>{d?_(y):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new hc(this,a),this._hash=a.hash&&new ja(typeof a.hash=="string"&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,o.e({},a.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new _o(typeof a.attributionControl=="boolean"?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new dc,a.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new o.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new o.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new o.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(w,a){if(a===void 0&&(a=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=w.onAdd(this);this._controls.push(w);const _=this._controlPositions[a];return a.indexOf("bottom")!==-1?_.insertBefore(d,_.firstChild):_.appendChild(d),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(w);return a>-1&&this._controls.splice(a,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,a,d,_){return _==null&&this.terrain&&(_=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,a,d,_)}resize(w){var a;const d=this._containerDimensions(),_=d[0],y=d[1],v=this._getClampedPixelRatio(_,y);if(this._resizeCanvas(_,y,v),this.painter.resize(_,y,v),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const P=this._getClampedPixelRatio(_,y);this._resizeCanvas(_,y,P),this.painter.resize(_,y,P)}this.transform.resize(_,y),(a=this._requestedCameraState)===null||a===void 0||a.resize(_,y);const T=!this._moving;return T&&(this.stop(),this.fire(new o.k("movestart",w)).fire(new o.k("move",w))),this.fire(new o.k("resize",w)),T&&this.fire(new o.k("moveend",w)),this}_getClampedPixelRatio(w,a){const{0:d,1:_}=this._maxCanvasSize,y=this.getPixelRatio(),v=w*y,T=a*y;return Math.min(v>d?d/v:1,T>_?_/T:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Fe.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}project(w){return this.transform.locationPoint(o.N.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,a,d){if(w==="mouseenter"||w==="mouseover"){let _=!1;return{layers:a,listener:d,delegates:{mousemove:v=>{const T=a.filter(P=>this.getLayer(P)),E=T.length!==0?this.queryRenderedFeatures(v.point,{layers:T}):[];E.length?_||(_=!0,d.call(this,new Ln(w,this,v.originalEvent,{features:E}))):_=!1},mouseout:()=>{_=!1}}}}if(w==="mouseleave"||w==="mouseout"){let _=!1;return{layers:a,listener:d,delegates:{mousemove:T=>{const E=a.filter(P=>this.getLayer(P));(E.length!==0?this.queryRenderedFeatures(T.point,{layers:E}):[]).length?_=!0:_&&(_=!1,d.call(this,new Ln(w,this,T.originalEvent)))},mouseout:T=>{_&&(_=!1,d.call(this,new Ln(w,this,T.originalEvent)))}}}}{const _=y=>{const v=a.filter(E=>this.getLayer(E)),T=v.length!==0?this.queryRenderedFeatures(y.point,{layers:v}):[];T.length&&(y.features=T,d.call(this,y),delete y.features)};return{layers:a,listener:d,delegates:{[w]:_}}}}_saveDelegatedListener(w,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(a)}_removeDelegatedListener(w,a,d){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const _=this._delegatedListeners[w];for(let y=0;y<_.length;y++){const v=_[y];if(v.listener===d&&v.layers.length===a.length&&v.layers.every(T=>a.includes(T))){for(const T in v.delegates)this.off(T,v.delegates[T]);return void _.splice(y,1)}}}on(w,a,d){if(d===void 0)return super.on(w,a);const _=this._createDelegatedListener(w,typeof a=="string"?[a]:a,d);this._saveDelegatedListener(w,_);for(const y in _.delegates)this.on(y,_.delegates[y]);return this}once(w,a,d){if(d===void 0)return super.once(w,a);const _=typeof a=="string"?[a]:a,y=this._createDelegatedListener(w,_,d);for(const v in y.delegates){const T=y.delegates[v];y.delegates[v]=(...E)=>{this._removeDelegatedListener(w,_,d),T(...E)}}this._saveDelegatedListener(w,y);for(const v in y.delegates)this.once(v,y.delegates[v]);return this}off(w,a,d){return d===void 0?super.off(w,a):(this._removeDelegatedListener(w,typeof a=="string"?[a]:a,d),this)}queryRenderedFeatures(w,a){if(!this.style)return[];let d;const _=w instanceof o.P||Array.isArray(w),y=_?w:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(_?{}:w)||{},y instanceof o.P||typeof y[0]=="number")d=[o.P.convert(y)];else{const v=o.P.convert(y[0]),T=o.P.convert(y[1]);d=[v,new o.P(T.x,v.y),T,new o.P(v.x,T.y),v]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(w,a){return this.style.querySourceFeatures(w,a)}setStyle(w,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(w,a))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const a=this._locale[w];if(a==null)throw new Error(`Missing UI string '${w}'`);return a}_updateStyle(w,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Ca(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,a,d):this.style.loadJSON(w,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ca(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,a){if(typeof w=="string"){const d=this._requestManager.transformRequest(w,"Style");o.h(d,new AbortController).then(_=>{this._updateDiff(_.data,a)}).catch(_=>{_&&this.fire(new o.j(_))})}else typeof w=="object"&&this._updateDiff(w,a)}_updateDiff(w,a){try{this.style.setState(w,a)&&this._update(!0)}catch(d){o.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(w,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,a){return this._lazyInitEmptyStyle(),this.style.addSource(w,a),this._update(!0)}isSourceLoaded(w){const a=this.style&&this.style.sourceCaches[w];if(a!==void 0)return a.loaded();this.fire(new o.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const a=this.style.sourceCaches[w.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&a.reload();for(const d in this.style._layers){const _=this.style._layers[d];_.type==="hillshade"&&_.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new pc(this.painter,a,w),this.painter.renderToTexture=new Pu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==w.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:w})),this}getTerrain(){var w,a;return(a=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const a in w){const d=w[a]._tiles;for(const _ in d){const y=d[_];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,a,d={}){const{pixelRatio:_=1,sdf:y=!1,stretchX:v,stretchY:T,content:E,textFitWidth:P,textFitHeight:R}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:N,data:J}=a,ee=a;return this.style.addImage(w,{data:new o.R({width:B,height:N},new Uint8Array(J)),pixelRatio:_,stretchX:v,stretchY:T,content:E,textFitWidth:P,textFitHeight:R,sdf:y,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,w),this}}{const{width:B,height:N,data:J}=C.getImageData(a);this.style.addImage(w,{data:new o.R({width:B,height:N},J),pixelRatio:_,stretchX:v,stretchY:T,content:E,textFitWidth:P,textFitHeight:R,sdf:y,version:0})}}updateImage(w,a){const d=this.style.getImage(w);if(!d)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=a instanceof HTMLImageElement||o.b(a)?C.getImageData(a):a,{width:y,height:v,data:T}=_;if(y===void 0||v===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||v!==d.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(a instanceof HTMLImageElement||o.b(a));return d.data.replace(T,E),this.style.updateImage(w,d),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return ie.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,a){return this._lazyInitEmptyStyle(),this.style.addLayer(w,a),this._update(!0)}moveLayer(w,a){return this.style.moveLayer(w,a),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,a,d){return this.style.setLayerZoomRange(w,a,d),this._update(!0)}setFilter(w,a,d={}){return this.style.setFilter(w,a,d),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,a,d,_={}){return this.style.setPaintProperty(w,a,d,_),this._update(!0)}getPaintProperty(w,a){return this.style.getPaintProperty(w,a)}setLayoutProperty(w,a,d,_={}){return this.style.setLayoutProperty(w,a,d,_),this._update(!0)}getLayoutProperty(w,a){return this.style.getLayoutProperty(w,a)}setGlyphs(w,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,a,d,_=>{_||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,a,d=>{d||this._update(!0)}),this}setLight(w,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(w){return this._lazyInitEmptyStyle(),this.style.setSky(w),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,a){return this.style.setFeatureState(w,a),this._update()}removeFeatureState(w,a){return this.style.removeFeatureState(w,a),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,a=0;return this._container&&(w=this._container.clientWidth||400,a=this._container.clientHeight||300),[w,a]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const a=this._canvasContainer=A.create("div","maplibregl-canvas-container",w);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),_=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],_);const y=this._controlContainer=A.create("div","maplibregl-control-container",w),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{v[T]=A.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,a,d){this._canvas.width=Math.floor(d*w),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",_=>{a={requestedAttributes:w},_&&(a.statusMessage=_.statusMessage,a.type=_.type)},{once:!0});const d=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!d){const _="Failed to initialize WebGL";throw a?(a.message=_,new Error(JSON.stringify(a))):new Error(_)}this.painter=new Va(d,this.transform),V.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,v=C.now();this.style.zoomHistory.update(y,v);const T=new o.z(y,{now:v,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=T.crossFadingFactor();E===1&&E===this._crossFadingFactor||(d=!0,this._crossFadingFactor=E),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const _=this._sourcesDirty||this._styleDirty||this._placementDirty;return _||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||_||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ie.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a!=null&&a.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(w=>{o.bf.frame(w),this._frameRequest=null,this._render(w)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Mu}getCameraTargetElevation(){return this.transform.elevation}},l.MapMouseEvent=Ln,l.MapTouchEvent=Fs,l.MapWheelEvent=Cu,l.Marker=Ya,l.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),_=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const _=this._map._getUIString(`NavigationControl.${d}`);a.title=_,a.setAttribute("aria-label",_)},this.options=o.e({},Qf,w),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new $f(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,a){const d=A.create("button",w,this._container);return d.type="button",d.addEventListener("click",a),d}},l.Popup=class extends o.E{constructor(w){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?tn(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!a)return;const _=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor;const v=$a(this.options.offset);if(!y){const E=this._container.offsetWidth,P=this._container.offsetHeight;let R;R=_.y+v.bottom.y<P?["top"]:_.y>this._map.transform.height-P?["bottom"]:[],_.x<E/2?R.push("left"):_.x>this._map.transform.width-E/2&&R.push("right"),y=R.length===0?"bottom":R.join("-")}let T=_.add(v[y]);this.options.subpixelPositioning||(T=T.round()),A.setTransform(this._container,`${yo[y]} translate(${T.x}px,${T.y}px)`),Ja(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(hi),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.N.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const a=document.createDocumentFragment(),d=document.createElement("body");let _;for(d.innerHTML=w;_=d.firstChild,_;)a.appendChild(_);return this.setDOMContent(a)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Qa);w&&w.focus()}},l.RasterDEMTileSource=Wt,l.RasterTileSource=Ne,l.ScaleControl=class{constructor(w){this._onMove=()=>{sa(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,sa(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Jr),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Dr,l.Style=Ca,l.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=ho,l.TwoFingersTouchRotateHandler=cc,l.TwoFingersTouchZoomHandler=ac,l.TwoFingersTouchZoomRotateHandler=fc,l.VectorTileSource=hn,l.VideoSource=ar,l.addSourceType=(w,a)=>o._(void 0,void 0,void 0,function*(){if(qr(w))throw new Error(`A source type called "${w}" already exists.`);((d,_)=>{Sn[d]=_})(w,a)}),l.clearPrewarmedResources=function(){const w=ai;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(li),ai=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return Gr().getRTLTextPluginStatus()},l.getVersion=function(){return yc},l.getWorkerCount=function(){return vt.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(w){return Ni().broadcast("IS",w)},l.prewarm=function(){ft().acquire(li)},l.setMaxParallelImageRequests=function(w){o.a.MAX_PARALLEL_IMAGE_REQUESTS=w},l.setRTLTextPlugin=function(w,a){return Gr().setRTLTextPlugin(w,a)},l.setWorkerCount=function(w){vt.workerCount=w},l.setWorkerUrl=function(w){o.a.WORKER_URL=w}});var s=i;return s})})(yy);var bD=yy.exports;const es=s2(bD);var vD=wD;function wD(n){var e,i,t;if(n){if(Array.isArray(n)){for(e=[],i=n.length,t=0;t<i;t++){var r=n[t];r!=null&&e.push(r)}return e}if(typeof n=="object"){e={};var s=Object.keys(n);for(i=s.length,t=0;t<i;t++){var l=s[t],o=n[l];o!=null&&(e[l]=o)}return e}}}function xD(n,e,i){let t;const{map:r}=El();ei(n,r,f=>i(4,t=f));let{position:s="top-left"}=e,{container:l=void 0}=e,o=null;return Fo(()=>{t!=null&&t.loaded()&&o&&t.removeControl(o)}),n.$$set=f=>{"position"in f&&i(1,s=f.position),"container"in f&&i(2,l=f.container)},n.$$.update=()=>{if(n.$$.dirty&30&&t&&!o){let f;typeof l=="string"?f=document.querySelector(l)??void 0:f=l,i(3,o=new es.FullscreenControl({container:f})),t.addControl(o,s)}},[r,s,l,o,t]}class kD extends lt{constructor(e){super(),ct(this,e,xD,null,st,{position:1,container:2})}}function CD(n,e,i){let t;const{map:r}=El();ei(n,r,A=>i(8,t=A));let{position:s="top-left"}=e,{positionOptions:l=void 0}=e,{fitBoundsOptions:o=void 0}=e,{trackUserLocation:f=!1}=e,{showAccuracyCircle:p=!0}=e,{showUserLocation:g=!0}=e,{control:C=null}=e;return Fo(()=>{t!=null&&t.loaded()&&C&&t.removeControl(C)}),n.$$set=A=>{"position"in A&&i(2,s=A.position),"positionOptions"in A&&i(3,l=A.positionOptions),"fitBoundsOptions"in A&&i(4,o=A.fitBoundsOptions),"trackUserLocation"in A&&i(5,f=A.trackUserLocation),"showAccuracyCircle"in A&&i(6,p=A.showAccuracyCircle),"showUserLocation"in A&&i(7,g=A.showUserLocation),"control"in A&&i(1,C=A.control)},n.$$.update=()=>{n.$$.dirty&510&&t&&!C&&(i(1,C=new es.GeolocateControl({positionOptions:l,fitBoundsOptions:o,trackUserLocation:f,showAccuracyCircle:p,showUserLocation:g})),t.addControl(C,s))},[r,C,s,l,o,f,p,g,t]}class SD extends lt{constructor(e){super(),ct(this,e,CD,null,st,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function TD(n){let e=n.getCenter(),i=Math.round(n.getZoom()*100)/100,t=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,t),s=Math.round(e.lat*r)/r,l=Math.round(e.lng*r)/r,o=`${i}/${s}/${l}`,f=n.getBearing(),p=n.getPitch();return(f||p)&&(o+=`/${Math.round(f*10)/10}`),p&&(o+=`/${Math.round(p)}`),`#${o}`}function ID(n){return n.replace("#","").split("/").map(parseFloat)}var yl=Od;function Od(n,e){return n===e||n!==n&&e!==e?!0:typeof n!=typeof e||{}.toString.call(n)!={}.toString.call(e)||n!==Object(n)||!n?!1:Array.isArray(n)?Q1(n,e):{}.toString.call(n)=="[object Set]"?Q1(Array.from(n),Array.from(e)):{}.toString.call(n)=="[object Object]"?ED(n,e):AD(n,e)}function AD(n,e){return n.toString()===e.toString()}function Q1(n,e){var i=n.length;if(i!=e.length)return!1;for(var t=0;t<i;t++)if(!Od(n[t],e[t]))return!1;return!0}function ED(n,e){var i=Object.keys(n),t=i.length;if(t!=Object.keys(e).length)return!1;for(var r=0;r<t;r++){var s=i[r];if(!(e.hasOwnProperty(s)&&Od(n[s],e[s])))return!1}return!0}function PD(n,e,i){let t;const{map:r}=El();ei(n,r,g=>i(6,t=g));let{position:s="top-left"}=e,{showCompass:l=!0}=e,{showZoom:o=!0}=e,{visualizePitch:f=!1}=e,p=null;return Fo(()=>{t!=null&&t.loaded()&&p&&t.removeControl(p)}),n.$$set=g=>{"position"in g&&i(1,s=g.position),"showCompass"in g&&i(2,l=g.showCompass),"showZoom"in g&&i(3,o=g.showZoom),"visualizePitch"in g&&i(4,f=g.visualizePitch)},n.$$.update=()=>{n.$$.dirty&126&&t&&!p&&(i(5,p=new es.NavigationControl({showCompass:l,showZoom:o,visualizePitch:f})),t.addControl(p,s))},[r,s,l,o,f,p,t]}class MD extends lt{constructor(e){super(),ct(this,e,PD,null,st,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function zD(n,e,i){let t;const{map:r}=El();ei(n,r,p=>i(5,t=p));let{position:s="bottom-left"}=e,{maxWidth:l=void 0}=e,{unit:o="metric"}=e,f=null;return Fo(()=>{t!=null&&t.loaded()&&f&&t.removeControl(f)}),n.$$set=p=>{"position"in p&&i(1,s=p.position),"maxWidth"in p&&i(2,l=p.maxWidth),"unit"in p&&i(3,o=p.unit)},n.$$.update=()=>{n.$$.dirty&62&&t&&!f&&(i(4,f=new es.ScaleControl({maxWidth:l,unit:o})),t.addControl(f,s))},[r,s,l,o,f,t]}class DD extends lt{constructor(e){super(),ct(this,e,zD,null,st,{position:1,maxWidth:2,unit:3})}}const{window:LD}=R2,RD=n=>({map:n[0]&16,loadedImages:n[0]&32,allImagesLoaded:n[0]&64}),$1=n=>({map:n[4],loadedImages:n[5],allImagesLoaded:n[6]});function e0(n){let e,i,t=n[3]&&t0(n);const r=n[46].default,s=Ke(r,n,n[45],$1);return{c(){t&&t.c(),e=it(),s&&s.c()},l(l){t&&t.l(l),e=nt(l),s&&s.l(l)},m(l,o){t&&t.m(l,o),Q(l,e,o),s&&s.m(l,o),i=!0},p(l,o){l[3]?t?(t.p(l,o),o[0]&8&&z(t,1)):(t=t0(l),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It()),s&&s.p&&(!i||o[0]&112|o[1]&16384)&&Je(s,r,l,l[45],i?Qe(r,l[45],o,RD):Ye(l[45]),$1)},i(l){i||(z(t),z(s,l),i=!0)},o(l){D(t),D(s,l),i=!1},d(l){l&&F(e),t&&t.d(l),s&&s.d(l)}}}function t0(n){let e,i,t,r,s,l,o,f;return e=new MD({props:{position:n[7]}}),t=new SD({props:{position:n[7],fitBoundsOptions:{maxZoom:12}}}),s=new kD({props:{position:n[7]}}),o=new DD({props:{position:n[7]}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment),r=it(),ce(s.$$.fragment),l=it(),ce(o.$$.fragment)},l(p){ue(e.$$.fragment,p),i=nt(p),ue(t.$$.fragment,p),r=nt(p),ue(s.$$.fragment,p),l=nt(p),ue(o.$$.fragment,p)},m(p,g){fe(e,p,g),Q(p,i,g),fe(t,p,g),Q(p,r,g),fe(s,p,g),Q(p,l,g),fe(o,p,g),f=!0},p(p,g){const C={};g[0]&128&&(C.position=p[7]),e.$set(C);const A={};g[0]&128&&(A.position=p[7]),t.$set(A);const V={};g[0]&128&&(V.position=p[7]),s.$set(V);const U={};g[0]&128&&(U.position=p[7]),o.$set(U)},i(p){f||(z(e.$$.fragment,p),z(t.$$.fragment,p),z(s.$$.fragment,p),z(o.$$.fragment,p),f=!0)},o(p){D(e.$$.fragment,p),D(t.$$.fragment,p),D(s.$$.fragment,p),D(o.$$.fragment,p),f=!1},d(p){p&&(F(i),F(r),F(l)),he(e,p),he(t,p),he(s,p),he(o,p)}}}function OD(n){let e,i,t,r,s,l=n[4]&&n[0]&&e0(n);return{c(){e=Ze("div"),l&&l.c(),this.h()},l(o){e=Ge(o,"DIV",{class:!0,"data-testid":!0});var f=$e(e);l&&l.l(f),f.forEach(F),this.h()},h(){gt(e,"class",i=kp(n[2])+" svelte-p00lfq"),gt(e,"data-testid","map-container"),ks(e,"expand-map",!n[2])},m(o,f){Q(o,e,f),l&&l.m(e,null),n[47](e),t=!0,r||(s=[_t(LD,"hashchange",n[11]),xi(n[10].call(null,e))],r=!0)},p(o,f){o[4]&&o[0]?l?(l.p(o,f),f[0]&17&&z(l,1)):(l=e0(o),l.c(),z(l,1),l.m(e,null)):l&&(Tt(),D(l,1,1,()=>{l=null}),It()),(!t||f[0]&4&&i!==(i=kp(o[2])+" svelte-p00lfq"))&&gt(e,"class",i),(!t||f[0]&4)&&ks(e,"expand-map",!o[2])},i(o){t||(z(l),t=!0)},o(o){D(l),t=!1},d(o){o&&F(e),l&&l.d(),n[47](null),r=!1,Gi(s)}}}function FD(n,e,i){let t,r,s,l,{$$slots:o={},$$scope:f}=e,{map:p=null}=e,{mapContainer:g=void 0}=e,{class:C=void 0}=e,{style:A}=e,{diffStyleUpdates:V=!1}=e,{center:U=void 0}=e,{zoom:G=void 0}=e,{pitch:Z=0}=e,{bearing:K=0}=e,{bounds:q=void 0}=e,{hash:ie=!1}=e,{updateHash:oe=Ne=>{window.history.replaceState(window.history.state,"",Ne)}}=e,{loaded:se=!1}=e,{minZoom:pe=0}=e,{maxZoom:Ie=22}=e,{minPitch:Ce=0}=e,{maxPitch:je=60}=e,{renderWorldCopies:Ve=void 0}=e,{dragPan:de=void 0}=e,{dragRotate:Me=void 0}=e,{pitchWithRotate:Re=void 0}=e,{antialias:Rt=void 0}=e,{zoomOnDoubleClick:ti=!0}=e,{locale:Jt=void 0}=e,{interactive:We=!0}=e,{attributionControl:Le=!0}=e,{cooperativeGestures:pt=!1}=e,{preserveDrawingBuffer:xt=!1}=e,{maxBounds:At=void 0}=e,{images:di=[]}=e,{standardControls:Yt=!1}=e,{filterLayers:li=void 0}=e,{transformRequest:vt=void 0}=e;const fi=_f(),{map:ai,loadedImages:Ot}=mD();ei(n,ai,Ne=>i(4,s=Ne)),ei(n,Ot,Ne=>i(5,l=Ne));let ft=new Set;async function xe(Ne,Wt=!1){if(s&&!(!s.loaded()&&!Wt))if("url"in Ne){ft.add(Ne.id);try{let pi=await s.loadImage(Ne.url);s==null||s.addImage(Ne.id,pi.data,Ne.options),l.add(Ne.id),Ot.set(l)}catch(pi){fi("error",pi)}finally{ft.delete(Ne.id)}}else s.addImage(Ne.id,Ne.data,Ne.options),l.add(Ne.id),Ot.set(l)}let Ni,dt,Mt,ri;function Ti(Ne){return ot(),_a(ai,s=new es.Map(vD({container:Ne,style:A,locale:Jt,center:U,zoom:G,pitch:Z,bearing:K,minZoom:pe,maxZoom:Ie,minPitch:Ce,maxPitch:je,renderWorldCopies:Ve,dragPan:de,dragRotate:Me,pitchWithRotate:Re,antialias:Rt,interactive:We,preserveDrawingBuffer:xt,maxBounds:At,bounds:q,attributionControl:Le,transformRequest:vt,cooperativeGestures:pt})),s),s.on("load",Wt=>{Wt.target.getContainer().setAttribute("data-testid","map"),Wt.target.getCanvas().setAttribute("data-testid","map-canvas"),i(0,se=!0),fi("load",s)}),s.on("error",Wt=>fi("error",{...Wt,map:s})),s.on("movestart",Wt=>fi("movestart",{...Wt,map:s})),s.on("moveend",Wt=>{if(i(12,U=Wt.target.getCenter()),i(13,G=Wt.target.getZoom()),i(14,Z=Wt.target.getPitch()),i(15,K=Wt.target.getBearing()),i(16,q=Wt.target.getBounds()),fi("moveend",{...Wt,map:s}),ie){let pi=new URL(window.location.href.replace(/(#.+)?$/,TD(s)));oe(pi)}}),s.on("click",Wt=>fi("click",{...Wt,map:s})),s.on("dblclick",Wt=>fi("dblclick",{...Wt,map:s})),s.on("contextmenu",Wt=>fi("contextmenu",{...Wt,map:s})),s.on("zoomstart",Wt=>fi("zoomstart",{...Wt,map:s})),s.on("zoom",Wt=>{fi("zoom",{...Wt,map:s})}),s.on("zoomend",Wt=>{fi("zoomend",{...Wt,map:s})}),s.on("style.load",()=>{if(s){const Wt=s.getStyle();if(i(42,Ni=Wt.layers.map(pi=>pi.id)),i(43,dt=Object.keys(Wt.sources)),ri)for(const[pi,ln]of Object.entries(ri))s.addSource(pi,ln);if(Mt)for(const pi of Mt)s.addLayer(pi);for(const pi of di)xe(pi,!0)}}),s.on("styledata",Wt=>{if(s&&li){const pi=s.getStyle().layers;if(pi)for(let ln of pi)li(ln)||s.setLayoutProperty(ln.id,"visibility","none")}fi("styledata",{...Wt,map:s})}),{destroy(){i(0,se=!1),s==null||s.remove(),_a(ai,s=null,s)}}}let Fe=A;function ot(){if(ie){let Ne=ID(window.location.hash);Ne.length>=3&&(i(13,G=Ne[0]),i(12,U=[Ne[2],Ne[1]])),Ne.length==5&&(i(15,K=Ne[3]),i(14,Z=Ne[4]))}}function hn(Ne){Dt[Ne?"unshift":"push"](()=>{g=Ne,i(1,g)})}return n.$$set=Ne=>{"map"in Ne&&i(17,p=Ne.map),"mapContainer"in Ne&&i(1,g=Ne.mapContainer),"class"in Ne&&i(2,C=Ne.class),"style"in Ne&&i(18,A=Ne.style),"diffStyleUpdates"in Ne&&i(19,V=Ne.diffStyleUpdates),"center"in Ne&&i(12,U=Ne.center),"zoom"in Ne&&i(13,G=Ne.zoom),"pitch"in Ne&&i(14,Z=Ne.pitch),"bearing"in Ne&&i(15,K=Ne.bearing),"bounds"in Ne&&i(16,q=Ne.bounds),"hash"in Ne&&i(20,ie=Ne.hash),"updateHash"in Ne&&i(21,oe=Ne.updateHash),"loaded"in Ne&&i(0,se=Ne.loaded),"minZoom"in Ne&&i(22,pe=Ne.minZoom),"maxZoom"in Ne&&i(23,Ie=Ne.maxZoom),"minPitch"in Ne&&i(24,Ce=Ne.minPitch),"maxPitch"in Ne&&i(25,je=Ne.maxPitch),"renderWorldCopies"in Ne&&i(26,Ve=Ne.renderWorldCopies),"dragPan"in Ne&&i(27,de=Ne.dragPan),"dragRotate"in Ne&&i(28,Me=Ne.dragRotate),"pitchWithRotate"in Ne&&i(29,Re=Ne.pitchWithRotate),"antialias"in Ne&&i(30,Rt=Ne.antialias),"zoomOnDoubleClick"in Ne&&i(31,ti=Ne.zoomOnDoubleClick),"locale"in Ne&&i(32,Jt=Ne.locale),"interactive"in Ne&&i(33,We=Ne.interactive),"attributionControl"in Ne&&i(34,Le=Ne.attributionControl),"cooperativeGestures"in Ne&&i(35,pt=Ne.cooperativeGestures),"preserveDrawingBuffer"in Ne&&i(36,xt=Ne.preserveDrawingBuffer),"maxBounds"in Ne&&i(37,At=Ne.maxBounds),"images"in Ne&&i(38,di=Ne.images),"standardControls"in Ne&&i(3,Yt=Ne.standardControls),"filterLayers"in Ne&&i(39,li=Ne.filterLayers),"transformRequest"in Ne&&i(40,vt=Ne.transformRequest),"$$scope"in Ne&&i(45,f=Ne.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&8&&i(7,t=typeof Yt=="boolean"?void 0:Yt),n.$$.dirty[0]&16&&i(17,p=s),n.$$.dirty[0]&786448|n.$$.dirty[1]&14336&&s&&!yl(A,Fe)){const Ne=s.getStyle();if(Ni&&(Mt=Ne.layers.filter(Wt=>!Ni.includes(Wt.id))),dt){const Wt=Object.keys(Ne.sources).filter(pi=>!dt.includes(pi));ri={};for(const pi of Wt)ri[pi]=Ne.sources[pi]}i(44,Fe=A),s.setStyle(A,{diff:V}),_a(Ot,l=new Set,l),i(41,ft=new Set)}if(n.$$.dirty[0]&49|n.$$.dirty[1]&1152&&se&&s!=null&&s.loaded())for(let Ne of di)!l.has(Ne.id)&&!ft.has(Ne.id)&&!s.hasImage(Ne.id)&&xe(Ne);if(n.$$.dirty[0]&32|n.$$.dirty[1]&128&&i(6,r=di.every(Ne=>l.has(Ne.id))),n.$$.dirty[0]&61456&&s){let Ne={};U!=null&&!yl(U,s==null?void 0:s.getCenter())&&(Ne.center=U),G!=null&&!yl(G,s==null?void 0:s.getZoom())&&(Ne.zoom=G),K!=null&&!yl(K,s==null?void 0:s.getBearing())&&(Ne.bearing=K),Z!=null&&!yl(Z,s==null?void 0:s.getPitch())&&(Ne.pitch=Z),Object.keys(Ne).length&&s.easeTo(Ne)}n.$$.dirty[0]&65552&&q&&!yl(q,s==null?void 0:s.getBounds())&&(s==null||s.fitBounds(q)),n.$$.dirty[0]&16|n.$$.dirty[1]&1&&(ti?s==null||s.doubleClickZoom.enable():s==null||s.doubleClickZoom.disable())},[se,g,C,Yt,s,l,r,t,ai,Ot,Ti,ot,U,G,Z,K,q,p,A,V,ie,oe,pe,Ie,Ce,je,Ve,de,Me,Re,Rt,ti,Jt,We,Le,pt,xt,At,di,li,vt,ft,Ni,dt,Fe,f,o,hn]}class BD extends lt{constructor(e){super(),ct(this,e,FD,OD,st,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,minPitch:24,maxPitch:25,renderWorldCopies:26,dragPan:27,dragRotate:28,pitchWithRotate:29,antialias:30,zoomOnDoubleClick:31,locale:32,interactive:33,attributionControl:34,cooperativeGestures:35,preserveDrawingBuffer:36,maxBounds:37,images:38,standardControls:3,filterLayers:39,transformRequest:40},null,[-1,-1])}}const ND=n=>({marker:n&8}),i0=n=>({marker:n[3]});function VD(n){let e,i,t,r,s,l,o;const f=n[19].default,p=Ke(f,n,n[18],i0);return{c(){e=Ze("div"),p&&p.c(),this.h()},l(g){e=Ge(g,"DIV",{tabindex:!0,role:!0});var C=$e(e);p&&p.l(C),C.forEach(F),this.h()},h(){gt(e,"tabindex",i=n[1]?0:void 0),gt(e,"role",t=n[1]?"button":void 0),uf(e,"z-index",n[2])},m(g,C){Q(g,e,C),p&&p.m(e,null),s=!0,l||(o=[xi(n[7].call(null,e)),xi(r=jD.call(null,e,n[0])),_t(e,"click",qh(n[20])),_t(e,"dblclick",qh(n[21])),_t(e,"contextmenu",qh(w0(n[22]))),_t(e,"mouseenter",n[23]),_t(e,"mouseleave",n[24]),_t(e,"mousemove",n[25]),_t(e,"keydown",n[8])],l=!0)},p(g,[C]){p&&p.p&&(!s||C&262152)&&Je(p,f,g,g[18],s?Qe(f,g[18],C,ND):Ye(g[18]),i0),(!s||C&2&&i!==(i=g[1]?0:void 0))&&gt(e,"tabindex",i),(!s||C&2&&t!==(t=g[1]?"button":void 0))&&gt(e,"role",t),r&&x0(r.update)&&C&1&&r.update.call(null,g[0]),C&4&&uf(e,"z-index",g[2])},i(g){s||(z(p,g),s=!0)},o(g){D(p,g),s=!1},d(g){g&&F(e),p&&p.d(g),l=!1,Gi(o)}}}function jD(n,e){const i=n.className;function t(r){r?n.className=`${i} ${r}`:n.className=i}return t(e),{update:t}}function UD(n,e,i){let t,r,s,{$$slots:l={},$$scope:o}=e,{marker:f=void 0}=e,{lngLat:p}=e,{class:g=void 0}=e,{interactive:C=!0}=e,{asButton:A=!1}=e,{draggable:V=!1}=e,{feature:U=null}=e,{offset:G=void 0}=e,{zIndex:Z=void 0}=e,{rotation:K=0}=e,{opacity:q=1}=e;const ie=_f(),{map:oe,layerEvent:se,self:pe,markerClickManager:Ie}=_D();ei(n,oe,Le=>i(27,s=Le)),ei(n,se,Le=>i(26,t=Le)),ei(n,pe,Le=>i(3,r=Le));function Ce(Le){_a(pe,r=new es.Marker({element:Le,rotation:K,draggable:V,offset:G,opacity:q.toString()}).setLngLat(p).addTo(s),r),i(11,f=r);const pt=()=>de("dragstart"),xt=()=>{je(),de("drag")},At=()=>{je(),de("dragend")};return V&&(r.on("dragstart",pt),r.on("drag",xt),r.on("dragend",At)),{destroy(){V&&(r==null||r.off("dragstart",pt),r==null||r.off("drag",xt),r==null||r.off("dragend",At)),i(11,f=void 0),r==null||r.remove()}}}function je(){let Le=r==null?void 0:r.getLngLat();Le&&(Array.isArray(p)?i(10,p=[Le.lng,Le.lat]):p&&"lon"in p?i(10,p={lon:Le.lng,lat:Le.lat}):i(10,p=Le))}function Ve(Le){Le.key===" "&&(Le.preventDefault(),Le.stopPropagation(),de("click"))}function de(Le){if(!C)return;let pt=r==null?void 0:r.getLngLat();if(!pt)return;const xt=[pt.lng,pt.lat];let At={map:s,marker:r,lngLat:xt,features:[{type:"Feature",properties:(U==null?void 0:U.properties)??{},geometry:{type:"Point",coordinates:xt}}]};(Le==="click"||Le==="contextmenu")&&Ie.handleClick(At),_a(se,t={...At,layerType:"marker",type:Le},t),ie(Le,At)}const Me=()=>de("click"),Re=()=>de("dblclick"),Rt=()=>{de("contextmenu")},ti=()=>{de("mouseenter")},Jt=()=>{de("mouseleave")},We=()=>de("mousemove");return n.$$set=Le=>{"marker"in Le&&i(11,f=Le.marker),"lngLat"in Le&&i(10,p=Le.lngLat),"class"in Le&&i(0,g=Le.class),"interactive"in Le&&i(12,C=Le.interactive),"asButton"in Le&&i(1,A=Le.asButton),"draggable"in Le&&i(13,V=Le.draggable),"feature"in Le&&i(14,U=Le.feature),"offset"in Le&&i(15,G=Le.offset),"zIndex"in Le&&i(2,Z=Le.zIndex),"rotation"in Le&&i(16,K=Le.rotation),"opacity"in Le&&i(17,q=Le.opacity),"$$scope"in Le&&i(18,o=Le.$$scope)},n.$$.update=()=>{n.$$.dirty&1032&&(r==null||r.setLngLat(p)),n.$$.dirty&32776&&(r==null||r.setOffset(G??[0,0])),n.$$.dirty&65544&&(r==null||r.setRotation(K)),n.$$.dirty&131080&&(r==null||r.setOpacity(q.toString()))},[g,A,Z,r,oe,se,pe,Ce,Ve,de,p,f,C,V,U,G,K,q,o,l,Me,Re,Rt,ti,Jt,We]}class qD extends lt{constructor(e){super(),ct(this,e,UD,VD,st,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}const ZD=n=>({features:n[0]&16,data:n[0]&16,map:n[0]&4,close:n[0]&1}),n0=n=>{var e;return{features:n[4],data:((e=n[4])==null?void 0:e[0])??null,map:n[2],close:n[31]}};function r0(n){var r;let e,i,t=(((r=n[4])==null?void 0:r.length)||n[3]instanceof es.Marker)&&s0(n);return{c(){e=Ze("div"),t&&t.c()},l(s){e=Ge(s,"DIV",{});var l=$e(e);t&&t.l(l),l.forEach(F)},m(s,l){Q(s,e,l),t&&t.m(e,null),n[32](e),i=!0},p(s,l){var o;(o=s[4])!=null&&o.length||s[3]instanceof es.Marker?t?(t.p(s,l),l[0]&24&&z(t,1)):(t=s0(s),t.c(),z(t,1),t.m(e,null)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(s){i||(z(t),i=!0)},o(s){D(t),i=!1},d(s){s&&F(e),t&&t.d(),n[32](null)}}}function s0(n){let e;const i=n[30].default,t=Ke(i,n,n[29],n0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&536870933)&&Je(t,i,r,r[29],e?Qe(i,r[29],s,ZD):Ye(r[29]),n0)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function GD(n){let e,i,t=n[9].default&&r0(n);return{c(){t&&t.c(),e=He()},l(r){t&&t.l(r),e=He()},m(r,s){t&&t.m(r,s),Q(r,e,s),i=!0},p(r,s){r[9].default?t?(t.p(r,s),s[0]&512&&z(t,1)):(t=r0(r),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(r){i||(z(t),i=!0)},o(r){D(t),i=!1},d(r){r&&F(e),t&&t.d(r)}}}function HD(n,e,i){let t,r,s,l,o,f,{$$slots:p={},$$scope:g}=e;const C=md(p);let{closeButton:A=void 0}=e,{closeOnClickOutside:V=!0}=e,{closeOnClickInside:U=!1}=e,{closeOnMove:G=!1}=e,{openOn:Z="click"}=e,{openIfTopMost:K=!0}=e,{focusAfterOpen:q=!0}=e,{anchor:ie=void 0}=e,{offset:oe=void 0}=e,{popupClass:se=void 0}=e,{maxWidth:pe=void 0}=e,{lngLat:Ie=void 0}=e,{html:Ce=void 0}=e,{open:je=!1}=e;const Ve=_f(),{map:de,popupTarget:Me,layerEvent:Re,layer:Rt,eventTopMost:ti,markerClickManager:Jt}=El();ei(n,de,ot=>i(2,s=ot)),ei(n,Me,ot=>i(3,o=ot)),ei(n,Re,ot=>i(28,l=ot)),ei(n,Rt,ot=>i(35,f=ot));const We=["click","dblclick","contextmenu"];let Le,pt=!1,xt;function At(){if(!Le)return;let ot=Le.getElement();!ot||ot===xt||(xt=ot,Z==="hover"&&(xt.style.pointerEvents="none"),xt.addEventListener("mouseenter",()=>{i(24,pt=!0)},{passive:!0}),xt.addEventListener("mouseleave",()=>{i(24,pt=!1)},{passive:!0}),xt.addEventListener("click",()=>{U&&i(0,je=!1)},{passive:!0}))}kl(()=>{if(s)return s.on("click",dt),s.on("contextmenu",dt),Jt.add(Mt),typeof o=="string"&&(s.on("click",o,fi),s.on("dblclick",o,fi),s.on("contextmenu",o,fi),s.on("mousemove",o,Ni),s.on("mouseleave",o,xe),s.on("touchstart",o,Ot),s.on("touchend",o,ft)),()=>{s!=null&&s.loaded()&&(Le==null||Le.remove(),s.off("click",dt),s.off("contextmenu",dt),Jt.remove(Mt),o instanceof es.Marker?o.getPopup()===Le&&o.setPopup(void 0):typeof o=="string"&&(s.off("click",o,fi),s.off("dblclick",o,fi),s.off("contextmenu",o,fi),s.off("mousemove",o,Ni),s.off("mouseleave",o,xe),s.off("touchstart",o,Ot),s.off("touchend",o,ft)))}});function di(ot){return K?!("marker"in ot)&&!gD(ot)&&ti(ot)!==f:!1}let Yt=null,li="normal";function vt(ot){"layerType"in ot&&ot.layerType==="deckgl"?(i(10,Ie=ot.coordinate),i(4,Yt=ot.object?[ot.object]:null)):(i(10,Ie=ot.lngLat),i(4,Yt=ot.features??[]))}function fi(ot){ot.type!==Z||di(ot)||(vt(ot),setTimeout(()=>i(0,je=!0)))}let ai=null;function Ot(ot){ai=ot.point}function ft(ot){if(!ai||Z!=="hover")return;let hn=ai.dist(ot.point);ai=null,hn<3&&(i(10,Ie=ot.lngLat),i(4,Yt=ot.features??[]),Le.isOpen()?i(25,li="justOpened"):(i(25,li="opening"),i(0,je=!0)))}function xe(ot){Z!=="hover"||ai||li!=="normal"||(i(0,je=!1),i(4,Yt=null))}function Ni(ot){if(!(Z!=="hover"||ai||li!=="normal")){if(di(ot)){i(0,je=!1),i(4,Yt=null);return}i(0,je=!0),i(4,Yt=ot.features??[]),i(10,Ie=ot.lngLat)}}function dt(ot){if(li==="justOpened"){i(25,li="normal");return}if(!V)return;let hn=[xt,o instanceof es.Marker?o==null?void 0:o.getElement():null];je&&Le.isOpen()&&!hn.some(Ne=>Ne==null?void 0:Ne.contains(ot.originalEvent.target))&&(ot.type==="contextmenu"&&Z==="contextmenu"||ot.type!=="contextmenu")&&i(0,je=!1)}function Mt(ot){V&&je&&Le.isOpen()&&ot.marker!==o&&i(0,je=!1)}Fo(()=>{s&&(Le!=null&&Le.isOpen())&&Le.remove()});let ri;const Ti=()=>i(0,je=!1);function Fe(ot){Dt[ot?"unshift":"push"](()=>{ri=ot,i(1,ri)})}return n.$$set=ot=>{"closeButton"in ot&&i(11,A=ot.closeButton),"closeOnClickOutside"in ot&&i(12,V=ot.closeOnClickOutside),"closeOnClickInside"in ot&&i(13,U=ot.closeOnClickInside),"closeOnMove"in ot&&i(14,G=ot.closeOnMove),"openOn"in ot&&i(15,Z=ot.openOn),"openIfTopMost"in ot&&i(16,K=ot.openIfTopMost),"focusAfterOpen"in ot&&i(17,q=ot.focusAfterOpen),"anchor"in ot&&i(18,ie=ot.anchor),"offset"in ot&&i(19,oe=ot.offset),"popupClass"in ot&&i(20,se=ot.popupClass),"maxWidth"in ot&&i(21,pe=ot.maxWidth),"lngLat"in ot&&i(10,Ie=ot.lngLat),"html"in ot&&i(22,Ce=ot.html),"open"in ot&&i(0,je=ot.open),"$$scope"in ot&&i(29,g=ot.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&14336&&i(27,t=A??(!V&&!U)),n.$$.dirty[0]&146685952&&(Le||(i(23,Le=new es.Popup({closeButton:t,closeOnClick:!1,closeOnMove:G,focusAfterOpen:q,maxWidth:pe,className:se,anchor:ie,offset:oe})),xt=Le.getElement(),Le.on("open",()=>{i(0,je=!0),At(),Ve("open",Le)}),Le.on("close",()=>{i(0,je=!1),Ve("close",Le)}),Le.on("hover",()=>{Ve("hover",Le)}))),n.$$.dirty[0]&8421384&&Le&&o instanceof es.Marker&&(Z==="click"?o.setPopup(Le):o.getPopup()===Le&&o.setPopup(void 0)),n.$$.dirty[0]&268468224&&We.includes(Z)&&(l==null?void 0:l.type)===Z&&(fi(l),_a(Re,l=null,l)),n.$$.dirty[0]&268468224&&i(26,r=Z==="hover"&&((l==null?void 0:l.type)==="mousemove"||(l==null?void 0:l.type)==="mouseenter")),n.$$.dirty[0]&352354304&&Z==="hover"&&Re&&(r&&l&&vt(l),i(0,je=(r||pt)??!1)),n.$$.dirty[0]&12582914&&(ri?Le.setDOMContent(ri):Ce&&Le.setHTML(Ce)),n.$$.dirty[0]&8389632&&Ie&&Le.setLngLat(Ie),n.$$.dirty[0]&41943045&&s){let ot=Le.isOpen();je&&!ot?(Le.addTo(s),li==="opening"&&i(25,li="justOpened")):!je&&ot&&Le.remove()}},[je,ri,s,o,Yt,de,Me,Re,Rt,C,Ie,A,V,U,G,Z,K,q,ie,oe,se,pe,Ce,Le,pt,li,r,t,l,g,p,Ti,Fe]}class WD extends lt{constructor(e){super(),ct(this,e,HD,GD,st,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}var $c=Uint8Array,vy=Uint16Array,XD=Int32Array,KD=new $c([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),JD=new $c([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wy=function(n,e){for(var i=new vy(31),t=0;t<31;++t)i[t]=e+=1<<n[t-1];for(var r=new XD(i[30]),t=1;t<30;++t)for(var s=i[t];s<i[t+1];++s)r[s]=s-i[t]<<5|t;return{b:i,r}},xy=wy(KD,2),YD=xy.b,QD=xy.r;YD[28]=258,QD[258]=28;wy(JD,0);var $D=new vy(32768);for(Yi=0;Yi<32768;++Yi)Gs=(Yi&43690)>>1|(Yi&21845)<<1,Gs=(Gs&52428)>>2|(Gs&13107)<<2,Gs=(Gs&61680)>>4|(Gs&3855)<<4,$D[Yi]=((Gs&65280)>>8|(Gs&255)<<8)>>1;var Gs,Yi,If=new $c(288);for(Yi=0;Yi<144;++Yi)If[Yi]=8;var Yi;for(Yi=144;Yi<256;++Yi)If[Yi]=9;var Yi;for(Yi=256;Yi<280;++Yi)If[Yi]=7;var Yi;for(Yi=280;Yi<288;++Yi)If[Yi]=8;var Yi,e6=new $c(32);for(Yi=0;Yi<32;++Yi)e6[Yi]=5;var Yi,t6=new $c(0),i6=typeof TextDecoder<"u"&&new TextDecoder,n6=0;try{i6.decode(t6,{stream:!0}),n6=1}catch{}function o0(n){let e,i;return e=new qD({props:{class:n[4],draggable:n[1]&&!n[2],lngLat:n[6],$$slots:{default:[s6]},$$scope:{ctx:n}}}),e.$on("drag",n[8]),e.$on("click",n[11]),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&16&&(s.class=t[4]),r&6&&(s.draggable=t[1]&&!t[2]),r&64&&(s.lngLat=t[6]),r&4132&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function r6(n){let e,i=n[5].name+"",t;return{c(){e=Ze("span"),t=Ct(i),this.h()},l(r){e=Ge(r,"SPAN",{class:!0});var s=$e(e);t=St(s,i),s.forEach(F),this.h()},h(){gt(e,"class","text-md")},m(r,s){Q(r,e,s),ut(e,t)},p(r,s){s&32&&i!==(i=r[5].name+"")&&Ai(t,i)},d(r){r&&F(e)}}}function s6(n){let e,i,t,r,s,l;return i=new Ks({props:{item:n[5],defaultIcon:n[7]}}),s=new WD({props:{offset:[0,-25],openOn:"hover",$$slots:{default:[r6]},$$scope:{ctx:n}}}),{c(){e=Ze("div"),ce(i.$$.fragment),r=it(),ce(s.$$.fragment),this.h()},l(o){e=Ge(o,"DIV",{class:!0});var f=$e(e);ue(i.$$.fragment,f),f.forEach(F),r=nt(o),ue(s.$$.fragment,o),this.h()},h(){gt(e,"class",t="group relative h-8 w-8 "+(n[2]&&"opacity-50"))},m(o,f){Q(o,e,f),fe(i,e,null),Q(o,r,f),fe(s,o,f),l=!0},p(o,f){const p={};f&32&&(p.item=o[5]),i.$set(p),(!l||f&4&&t!==(t="group relative h-8 w-8 "+(o[2]&&"opacity-50")))&&gt(e,"class",t);const g={};f&4128&&(g.$$scope={dirty:f,ctx:o}),s.$set(g)},i(o){l||(z(i.$$.fragment,o),z(s.$$.fragment,o),l=!0)},o(o){D(i.$$.fragment,o),D(s.$$.fragment,o),l=!1},d(o){o&&(F(e),F(r)),he(i),he(s,o)}}}function o6(n){let e,i,t=n[6]&&o0(n);return{c(){t&&t.c(),e=He()},l(r){t&&t.l(r),e=He()},m(r,s){t&&t.m(r,s),Q(r,e,s),i=!0},p(r,[s]){r[6]?t?(t.p(r,s),s&64&&z(t,1)):(t=o0(r),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(r){i||(z(t),i=!0)},o(r){D(t),i=!1},d(r){r&&F(e),t&&t.d(r)}}}function a6(n){return`${n[0].toFixed(4)}, ${n[1].toFixed(4)}`}function l6(n,e,i){let t,r,{location:s}=e,{draggable:l=!1}=e,{disabled:o=!1}=e,{debounceDelay:f=300}=e,{onDrag:p=()=>{}}=e,{onClick:g=()=>{}}=e,{class:C=""}=e;const A=yn.fromString("lucide:map-pin"),V=yd(G=>{const K=G.detail.lngLat;s instanceof Zc?s.point?s.point.updateCoords(K).then(()=>{p(s.point)}):af.fromCoords(K).then(q=>{i(0,s.point=q,s),p(s.point)}):s instanceof af&&s.updateCoords(K).then(()=>p(s))},f),U=()=>g(s);return n.$$set=G=>{"location"in G&&i(0,s=G.location),"draggable"in G&&i(1,l=G.draggable),"disabled"in G&&i(2,o=G.disabled),"debounceDelay"in G&&i(9,f=G.debounceDelay),"onDrag"in G&&i(10,p=G.onDrag),"onClick"in G&&i(3,g=G.onClick),"class"in G&&i(4,C=G.class)},n.$$.update=()=>{var G,Z;n.$$.dirty&1&&i(6,t=s instanceof Zc?(G=s.point)==null?void 0:G.coords:s.coords),n.$$.dirty&1&&i(5,r=s instanceof af?{name:`Point: (${a6(s.coords)})`,icon:A,description:(Z=s.address)==null?void 0:Z.format()}:s)},[s,l,o,g,C,r,t,A,V,f,p,U]}class ky extends lt{constructor(e){super(),ct(this,e,l6,o6,st,{location:0,draggable:1,disabled:2,debounceDelay:9,onDrag:10,onClick:3,class:4})}}function a0(n,e,i){const t=n.slice();return t[16]=e[i],t}function l0(n){let e,i;return e=new ky({props:{location:n[16],draggable:n[1],disabled:n[2],debounceDelay:n[3],onClick:n[4],onDrag:n[5]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.location=t[16]),r&2&&(s.draggable=t[1]),r&4&&(s.disabled=t[2]),r&8&&(s.debounceDelay=t[3]),r&16&&(s.onClick=t[4]),r&32&&(s.onDrag=t[5]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function c6(n){let e,i,t=Zi(n[0]),r=[];for(let f=0;f<t.length;f+=1)r[f]=l0(a0(n,t,f));const s=f=>D(r[f],1,1,()=>{r[f]=null}),l=n[13].default,o=Ke(l,n,n[14],null);return{c(){for(let f=0;f<r.length;f+=1)r[f].c();e=it(),o&&o.c()},l(f){for(let p=0;p<r.length;p+=1)r[p].l(f);e=nt(f),o&&o.l(f)},m(f,p){for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(f,p);Q(f,e,p),o&&o.m(f,p),i=!0},p(f,p){if(p&63){t=Zi(f[0]);let g;for(g=0;g<t.length;g+=1){const C=a0(f,t,g);r[g]?(r[g].p(C,p),z(r[g],1)):(r[g]=l0(C),r[g].c(),z(r[g],1),r[g].m(e.parentNode,e))}for(Tt(),g=t.length;g<r.length;g+=1)s(g);It()}o&&o.p&&(!i||p&16384)&&Je(o,l,f,f[14],i?Qe(l,f[14],p,null):Ye(f[14]),null)},i(f){if(!i){for(let p=0;p<t.length;p+=1)z(r[p]);z(o,f),i=!0}},o(f){r=r.filter(Boolean);for(let p=0;p<r.length;p+=1)D(r[p]);D(o,f),i=!1},d(f){f&&F(e),Yn(r,f),o&&o.d(f)}}}function u6(n){let e,i,t;return i=new BD({props:{bounds:Lp(n[9]),class:"aspect-auto h-full w-full",standardControls:!0,style:n[8],$$slots:{default:[c6]},$$scope:{ctx:n}}}),i.$on("click",n[10]),{c(){e=Ze("div"),ce(i.$$.fragment),this.h()},l(r){e=Ge(r,"DIV",{class:!0,id:!0});var s=$e(e);ue(i.$$.fragment,s),s.forEach(F),this.h()},h(){gt(e,"class",n[7]),gt(e,"id",n[6])},m(r,s){Q(r,e,s),fe(i,e,null),t=!0},p(r,[s]){const l={};s&512&&(l.bounds=Lp(r[9])),s&256&&(l.style=r[8]),s&16447&&(l.$$scope={dirty:s,ctx:r}),i.$set(l),(!t||s&128)&&gt(e,"class",r[7]),(!t||s&64)&&gt(e,"id",r[6])},i(r){t||(z(i.$$.fragment,r),t=!0)},o(r){D(i.$$.fragment,r),t=!1},d(r){r&&F(e),he(i)}}}function f6(n,e,i){let t,r,s;ei(n,o2,ie=>i(12,s=ie));let{$$slots:l={},$$scope:o}=e,{locations:f=[]}=e,{draggable:p=!1}=e,{disabled:g=!1}=e,{debounceDelay:C=300}=e,{onMarkerClick:A=()=>{}}=e,{onMarkerDrag:V=()=>{}}=e,{onMapClick:U=()=>{}}=e,{id:G=void 0}=e,{class:Z=""}=e;function K(ie){var oe;return ie instanceof Zc?(oe=ie.point)==null?void 0:oe.coords:ie.coords}const q=yd(ie=>{const se=ie.detail.lngLat,pe=[se.lng,se.lat];U(pe)},C);return n.$$set=ie=>{"locations"in ie&&i(0,f=ie.locations),"draggable"in ie&&i(1,p=ie.draggable),"disabled"in ie&&i(2,g=ie.disabled),"debounceDelay"in ie&&i(3,C=ie.debounceDelay),"onMarkerClick"in ie&&i(4,A=ie.onMarkerClick),"onMarkerDrag"in ie&&i(5,V=ie.onMarkerDrag),"onMapClick"in ie&&i(11,U=ie.onMapClick),"id"in ie&&i(6,G=ie.id),"class"in ie&&i(7,Z=ie.class),"$$scope"in ie&&i(14,o=ie.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&i(9,t=f.map(ie=>K(ie)).filter(ie=>ie!==void 0)),n.$$.dirty&4096&&i(8,r=s==="dark"?"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json":"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json")},[f,p,g,C,A,V,G,Z,r,t,q,U,s,l,o]}let h6=class extends lt{constructor(e){super(),ct(this,e,f6,u6,st,{locations:0,draggable:1,disabled:2,debounceDelay:3,onMarkerClick:4,onMarkerDrag:5,onMapClick:11,id:6,class:7})}};function d6(n){let e;return{c(){e=Ct("Address")},l(i){e=St(i,"Address")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function m6(n){let e;return{c(){e=Ct("Location")},l(i){e=St(i,"Location")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function p6(n){let e,i,t;function r(l){n[5](l)}let s={draggable:!0,onDrag:n[3]};return n[0]!==void 0&&(s.location=n[0]),e=new ky({props:s}),Dt.push(()=>Bi(e,"location",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&1&&(i=!0,f.location=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function c0(n){let e,i="Click on the map to select a location";return{c(){e=Ze("p"),e.textContent=i},l(t){e=Ge(t,"P",{"data-svelte-h":!0}),ts(e)!=="svelte-1gckwwz"&&(e.textContent=i)},m(t,r){Q(t,e,r)},d(t){t&&F(e)}}}function _6(n){let e,i,t,r,s,l,o,f,p,g,C;i=new Sr({props:{class:"font-semibold",for:"address",$$slots:{default:[d6]},$$scope:{ctx:n}}}),r=new N0({props:{value:n[2],getSuggestions:a2,onSubmit:n[4]}}),o=new Sr({props:{class:"font-semibold",for:"point",$$slots:{default:[m6]},$$scope:{ctx:n}}}),p=new h6({props:{locations:id(n[1],n[0]),disabled:!0,id:"point",class:"h-[250px]",$$slots:{default:[p6]},$$scope:{ctx:n}}});let A=!n[0].point&&c0();return{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),ce(r.$$.fragment),s=it(),l=Ze("div"),ce(o.$$.fragment),f=it(),ce(p.$$.fragment),g=it(),A&&A.c(),this.h()},l(V){e=Ge(V,"DIV",{class:!0});var U=$e(e);ue(i.$$.fragment,U),t=nt(U),ue(r.$$.fragment,U),U.forEach(F),s=nt(V),l=Ge(V,"DIV",{class:!0});var G=$e(l);ue(o.$$.fragment,G),f=nt(G),ue(p.$$.fragment,G),g=nt(G),A&&A.l(G),G.forEach(F),this.h()},h(){gt(e,"class","flex w-full flex-col gap-1.5"),gt(l,"class","flex w-full flex-col gap-1.5")},m(V,U){Q(V,e,U),fe(i,e,null),ut(e,t),fe(r,e,null),Q(V,s,U),Q(V,l,U),fe(o,l,null),ut(l,f),fe(p,l,null),ut(l,g),A&&A.m(l,null),C=!0},p(V,[U]){const G={};U&64&&(G.$$scope={dirty:U,ctx:V}),i.$set(G);const Z={};U&4&&(Z.value=V[2]),U&1&&(Z.onSubmit=V[4]),r.$set(Z);const K={};U&64&&(K.$$scope={dirty:U,ctx:V}),o.$set(K);const q={};U&3&&(q.locations=id(V[1],V[0])),U&65&&(q.$$scope={dirty:U,ctx:V}),p.$set(q),V[0].point?A&&(A.d(1),A=null):A||(A=c0(),A.c(),A.m(l,null))},i(V){C||(z(i.$$.fragment,V),z(r.$$.fragment,V),z(o.$$.fragment,V),z(p.$$.fragment,V),C=!0)},o(V){D(i.$$.fragment,V),D(r.$$.fragment,V),D(o.$$.fragment,V),D(p.$$.fragment,V),C=!1},d(V){V&&(F(e),F(s),F(l)),he(i),he(r),he(o),he(p),A&&A.d()}}}function g6(n,e,i){let{item:t}=e,{locations:r}=e,s=t.address;function l(p){console.log(p),i(2,s=p.address.format())}const o=p=>af.search(p).then(g=>{t instanceof Zc&&g&&i(0,t.point=g[0],t)});function f(p){t=p,i(0,t)}return n.$$set=p=>{"item"in p&&i(0,t=p.item),"locations"in p&&i(1,r=p.locations)},[t,r,s,l,o,f]}class y6 extends lt{constructor(e){super(),ct(this,e,g6,_6,st,{item:0,locations:1})}}function b6(n){let e;return{c(){e=Ct("Contracted Duration")},l(i){e=St(i,"Contracted Duration")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function v6(n){let e,i;return e=new Al({props:{placeholder:"Mode"}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p:Ci,i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function w6(n){let e;return{c(){e=Ct("Simple")},l(i){e=St(i,"Simple")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function x6(n){let e;return{c(){e=Ct("Complex")},l(i){e=St(i,"Complex")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function k6(n){let e,i,t,r;return e=new Oo({props:{value:"simple",$$slots:{default:[w6]},$$scope:{ctx:n}}}),t=new Oo({props:{value:"complex",$$slots:{default:[x6]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&512&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function C6(n){let e,i,t,r;return e=new Il({props:{class:"w-[180px]",$$slots:{default:[v6]},$$scope:{ctx:n}}}),t=new Tl({props:{$$slots:{default:[k6]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&512&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function S6(n){let e,i,t,r,s,l,o,f,p,g,C,A,V=n[1],U,G;i=new Sr({props:{class:"font-semibold",for:"start",$$slots:{default:[I6]},$$scope:{ctx:n}}});function Z(se){n[7](se)}let K={id:"start"};n[1].start!==void 0&&(K.value=n[1].start),r=new pf({props:K}),Dt.push(()=>Bi(r,"value",Z)),f=new Sr({props:{class:"font-semibold",for:"start",$$slots:{default:[A6]},$$scope:{ctx:n}}});function q(se){n[8](se)}let ie={id:"start"};n[1].end!==void 0&&(ie.value=n[1].end),g=new pf({props:ie}),Dt.push(()=>Bi(g,"value",q));let oe=u0(n);return{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),ce(r.$$.fragment),l=it(),o=Ze("div"),ce(f.$$.fragment),p=it(),ce(g.$$.fragment),A=it(),oe.c(),U=He(),this.h()},l(se){e=Ge(se,"DIV",{class:!0});var pe=$e(e);ue(i.$$.fragment,pe),t=nt(pe),ue(r.$$.fragment,pe),pe.forEach(F),l=nt(se),o=Ge(se,"DIV",{class:!0});var Ie=$e(o);ue(f.$$.fragment,Ie),p=nt(Ie),ue(g.$$.fragment,Ie),Ie.forEach(F),A=nt(se),oe.l(se),U=He(),this.h()},h(){gt(e,"class","flex w-full flex-col gap-1.5"),gt(o,"class","flex w-full flex-col gap-1.5")},m(se,pe){Q(se,e,pe),fe(i,e,null),ut(e,t),fe(r,e,null),Q(se,l,pe),Q(se,o,pe),fe(f,o,null),ut(o,p),fe(g,o,null),Q(se,A,pe),oe.m(se,pe),Q(se,U,pe),G=!0},p(se,pe){const Ie={};pe&512&&(Ie.$$scope={dirty:pe,ctx:se}),i.$set(Ie);const Ce={};!s&&pe&2&&(s=!0,Ce.value=se[1].start,Fi(()=>s=!1)),r.$set(Ce);const je={};pe&512&&(je.$$scope={dirty:pe,ctx:se}),f.$set(je);const Ve={};!C&&pe&2&&(C=!0,Ve.value=se[1].end,Fi(()=>C=!1)),g.$set(Ve),pe&2&&st(V,V=se[1])?(oe.d(1),oe=u0(se),oe.c(),oe.m(U.parentNode,U)):oe.p(se,pe)},i(se){G||(z(i.$$.fragment,se),z(r.$$.fragment,se),z(f.$$.fragment,se),z(g.$$.fragment,se),G=!0)},o(se){D(i.$$.fragment,se),D(r.$$.fragment,se),D(f.$$.fragment,se),D(g.$$.fragment,se),G=!1},d(se){se&&(F(e),F(l),F(o),F(A),F(U)),he(i),he(r),he(f),he(g),oe.d(se)}}}function T6(n){let e,i,t;function r(l){n[6](l)}let s={};return n[1].recurrenceOptions!==void 0&&(s.recurrence=n[1].recurrenceOptions),e=new gy({props:s}),Dt.push(()=>Bi(e,"recurrence",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&2&&(i=!0,f.recurrence=l[1].recurrenceOptions,Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function I6(n){let e;return{c(){e=Ct("Start Time")},l(i){e=St(i,"Start Time")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function A6(n){let e;return{c(){e=Ct("End Time")},l(i){e=St(i,"End Time")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function u0(n){let e,i,t=n[0].describePattern()+"",r,s,l=n[0].fmtStartTime()+"",o,f,p=n[0].fmtEndTime()+"",g;return{c(){e=Ze("p"),i=Ct("Lasts "),r=Ct(t),s=Ct(" from "),o=Ct(l),f=Ct(" to "),g=Ct(p),this.h()},l(C){e=Ge(C,"P",{class:!0});var A=$e(e);i=St(A,"Lasts "),r=St(A,t),s=St(A," from "),o=St(A,l),f=St(A," to "),g=St(A,p),A.forEach(F),this.h()},h(){gt(e,"class","text-muted-foreground")},m(C,A){Q(C,e,A),ut(e,i),ut(e,r),ut(e,s),ut(e,o),ut(e,f),ut(e,g)},p(C,A){A&1&&t!==(t=C[0].describePattern()+"")&&Ai(r,t),A&1&&l!==(l=C[0].fmtStartTime()+"")&&Ai(o,l),A&1&&p!==(p=C[0].fmtEndTime()+"")&&Ai(g,p)},d(C){C&&F(e)}}}function E6(n){let e,i,t,r,s,l,o,f,p,g,C="Pattern",A,V,U,G,Z,K,q;i=new Sr({props:{class:"font-semibold",for:"duration",$$slots:{default:[b6]},$$scope:{ctx:n}}});function ie(Ce){n[4](Ce)}let oe={id:"duration"};n[0].paidDuration!==void 0&&(oe.value=n[0].paidDuration),s=new pf({props:oe}),Dt.push(()=>Bi(s,"value",ie)),V=new xl({props:{selected:n[2](n[1]),onSelectedChange:n[5],$$slots:{default:[C6]},$$scope:{ctx:n}}});const se=[T6,S6],pe=[];function Ie(Ce,je){return Ce[1]instanceof I0?0:1}return G=Ie(n),Z=pe[G]=se[G](n),{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),r=Ze("div"),ce(s.$$.fragment),o=Ct(`
    hours`),f=it(),p=Ze("div"),g=Ze("span"),g.textContent=C,A=it(),ce(V.$$.fragment),U=it(),Z.c(),K=He(),this.h()},l(Ce){e=Ge(Ce,"DIV",{class:!0});var je=$e(e);ue(i.$$.fragment,je),t=nt(je),r=Ge(je,"DIV",{class:!0});var Ve=$e(r);ue(s.$$.fragment,Ve),o=St(Ve,`
    hours`),Ve.forEach(F),je.forEach(F),f=nt(Ce),p=Ge(Ce,"DIV",{class:!0});var de=$e(p);g=Ge(de,"SPAN",{class:!0,"data-svelte-h":!0}),ts(g)!=="svelte-lv1ps8"&&(g.textContent=C),A=nt(de),ue(V.$$.fragment,de),de.forEach(F),U=nt(Ce),Z.l(Ce),K=He(),this.h()},h(){gt(r,"class","flex flex-row items-center gap-2"),gt(e,"class","flex w-full flex-col gap-1.5"),gt(g,"class","text-sm font-semibold"),gt(p,"class","flex w-full flex-col gap-1.5")},m(Ce,je){Q(Ce,e,je),fe(i,e,null),ut(e,t),ut(e,r),fe(s,r,null),ut(r,o),Q(Ce,f,je),Q(Ce,p,je),ut(p,g),ut(p,A),fe(V,p,null),Q(Ce,U,je),pe[G].m(Ce,je),Q(Ce,K,je),q=!0},p(Ce,[je]){const Ve={};je&512&&(Ve.$$scope={dirty:je,ctx:Ce}),i.$set(Ve);const de={};!l&&je&1&&(l=!0,de.value=Ce[0].paidDuration,Fi(()=>l=!1)),s.$set(de);const Me={};je&2&&(Me.selected=Ce[2](Ce[1])),je&1&&(Me.onSelectedChange=Ce[5]),je&512&&(Me.$$scope={dirty:je,ctx:Ce}),V.$set(Me);let Re=G;G=Ie(Ce),G===Re?pe[G].p(Ce,je):(Tt(),D(pe[Re],1,1,()=>{pe[Re]=null}),It(),Z=pe[G],Z?Z.p(Ce,je):(Z=pe[G]=se[G](Ce),Z.c()),z(Z,1),Z.m(K.parentNode,K))},i(Ce){q||(z(i.$$.fragment,Ce),z(s.$$.fragment,Ce),z(V.$$.fragment,Ce),z(Z),q=!0)},o(Ce){D(i.$$.fragment,Ce),D(s.$$.fragment,Ce),D(V.$$.fragment,Ce),D(Z),q=!1},d(Ce){Ce&&(F(e),F(f),F(p),F(U),F(K)),he(i),he(s),he(V),pe[G].d(Ce)}}}function P6(n,e,i){let t,{item:r}=e;function s(A){return A instanceof I0?{value:"complex",label:"Complex"}:{value:"simple",label:"Simple"}}const l=r.rPattern;ei(n,l,A=>i(1,t=A));function o(A){n.$$.not_equal(r.paidDuration,A)&&(r.paidDuration=A,i(0,r))}const f=A=>{if(A)switch(A.value){case"simple":l.update(V=>c2(V));break;case"complex":l.update(V=>l2(V,r.state));break}};function p(A){n.$$.not_equal(t.recurrenceOptions,A)&&(t.recurrenceOptions=A,l.set(t))}function g(A){n.$$.not_equal(t.start,A)&&(t.start=A,l.set(t))}function C(A){n.$$.not_equal(t.end,A)&&(t.end=A,l.set(t))}return n.$$set=A=>{"item"in A&&i(0,r=A.item)},[r,t,s,l,o,f,p,g,C]}class M6 extends lt{constructor(e){super(),ct(this,e,P6,E6,st,{item:0})}}const z6=n=>({item:n&1}),f0=n=>({item:n[0]});function h0(n){let e,i,t;function r(l){n[6](l)}let s={};return n[0]!==void 0&&(s.item=n[0]),e=new wz({props:s}),Dt.push(()=>Bi(e,"item",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&1&&(i=!0,f.item=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function d0(n){let e,i,t,r,s,l;i=new Sr({props:{class:"font-semibold",for:"birthday",$$slots:{default:[D6]},$$scope:{ctx:n}}});function o(p){n[7](p)}let f={id:"birthday",class:"w-full"};return n[0].dob!==void 0&&(f.value=n[0].dob),r=new Dd({props:f}),Dt.push(()=>Bi(r,"value",o)),{c(){e=Ze("div"),ce(i.$$.fragment),t=it(),ce(r.$$.fragment),this.h()},l(p){e=Ge(p,"DIV",{class:!0});var g=$e(e);ue(i.$$.fragment,g),t=nt(g),ue(r.$$.fragment,g),g.forEach(F),this.h()},h(){gt(e,"class","flex w-full flex-col gap-1.5")},m(p,g){Q(p,e,g),fe(i,e,null),ut(e,t),fe(r,e,null),l=!0},p(p,g){const C={};g&1024&&(C.$$scope={dirty:g,ctx:p}),i.$set(C);const A={};!s&&g&1&&(s=!0,A.value=p[0].dob,Fi(()=>s=!1)),r.$set(A)},i(p){l||(z(i.$$.fragment,p),z(r.$$.fragment,p),l=!0)},o(p){D(i.$$.fragment,p),D(r.$$.fragment,p),l=!1},d(p){p&&F(e),he(i),he(r)}}}function D6(n){let e;return{c(){e=Ct("Date of Birth")},l(i){e=St(i,"Date of Birth")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function m0(n){let e,i;return e=new O5({props:{properties:n[0].properties}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.properties=t[0].properties),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function L6(n){let e,i,t;function r(l){n[9](l)}let s={};return n[0]!==void 0&&(s.item=n[0]),e=new M6({props:s}),Dt.push(()=>Bi(e,"item",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&1&&(i=!0,f.item=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function R6(n){let e,i,t;function r(l){n[8](l)}let s={};return n[0]!==void 0&&(s.item=n[0]),e=new hD({props:s}),Dt.push(()=>Bi(e,"item",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,o){const f={};!i&&o&1&&(i=!0,f.item=l[0],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function O6(n){let e,i;return e=new y6({props:{item:n[0],locations:n[2]}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&1&&(s.item=t[0]),r&4&&(s.locations=t[2]),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function F6(n){let e,i=ff(n[0]),t,r,s,l,o,f,p,g,C=i&&h0(n),A=n[0]instanceof td&&d0(n),V=n[0]instanceof Mp&&m0(n);const U=[O6,R6,L6],G=[];function Z(ie,oe){return ie[0]instanceof Zc?0:ie[0]instanceof u2?1:ie[0]instanceof S0?2:-1}~(l=Z(n))&&(o=G[l]=U[l](n));const K=n[5].default,q=Ke(K,n,n[10],f0);return{c(){e=Ze("div"),C&&C.c(),t=it(),A&&A.c(),r=it(),V&&V.c(),s=it(),o&&o.c(),f=it(),q&&q.c(),this.h()},l(ie){e=Ge(ie,"DIV",{class:!0});var oe=$e(e);C&&C.l(oe),t=nt(oe),A&&A.l(oe),r=nt(oe),V&&V.l(oe),s=nt(oe),o&&o.l(oe),f=nt(oe),q&&q.l(oe),oe.forEach(F),this.h()},h(){gt(e,"class",p="mb-4 mt-4 flex h-full max-h-[60vh] w-full flex-col gap-6 overflow-y-scroll p-1 "+n[1])},m(ie,oe){Q(ie,e,oe),C&&C.m(e,null),ut(e,t),A&&A.m(e,null),ut(e,r),V&&V.m(e,null),ut(e,s),~l&&G[l].m(e,null),ut(e,f),q&&q.m(e,null),g=!0},p(ie,[oe]){oe&1&&(i=ff(ie[0])),i?C?(C.p(ie,oe),oe&1&&z(C,1)):(C=h0(ie),C.c(),z(C,1),C.m(e,t)):C&&(Tt(),D(C,1,1,()=>{C=null}),It()),ie[0]instanceof td?A?(A.p(ie,oe),oe&1&&z(A,1)):(A=d0(ie),A.c(),z(A,1),A.m(e,r)):A&&(Tt(),D(A,1,1,()=>{A=null}),It()),ie[0]instanceof Mp?V?(V.p(ie,oe),oe&1&&z(V,1)):(V=m0(ie),V.c(),z(V,1),V.m(e,s)):V&&(Tt(),D(V,1,1,()=>{V=null}),It());let se=l;l=Z(ie),l===se?~l&&G[l].p(ie,oe):(o&&(Tt(),D(G[se],1,1,()=>{G[se]=null}),It()),~l?(o=G[l],o?o.p(ie,oe):(o=G[l]=U[l](ie),o.c()),z(o,1),o.m(e,f)):o=null),q&&q.p&&(!g||oe&1025)&&Je(q,K,ie,ie[10],g?Qe(K,ie[10],oe,z6):Ye(ie[10]),f0),(!g||oe&2&&p!==(p="mb-4 mt-4 flex h-full max-h-[60vh] w-full flex-col gap-6 overflow-y-scroll p-1 "+ie[1]))&&gt(e,"class",p)},i(ie){g||(z(C),z(A),z(V),z(o),z(q,ie),g=!0)},o(ie){D(C),D(A),D(V),D(o),D(q,ie),g=!1},d(ie){ie&&F(e),C&&C.d(),A&&A.d(),V&&V.d(),~l&&G[l].d(),q&&q.d(ie)}}}function B6(n,e,i){let t,{$$slots:r={},$$scope:s}=e,{item:l}=e,{state:o=bd}=e,{class:f=""}=e;const p=o.locations;ei(n,p,U=>i(2,t=U));function g(U){l=U,i(0,l)}function C(U){n.$$.not_equal(l.dob,U)&&(l.dob=U,i(0,l))}function A(U){l=U,i(0,l)}function V(U){l=U,i(0,l)}return n.$$set=U=>{"item"in U&&i(0,l=U.item),"state"in U&&i(4,o=U.state),"class"in U&&i(1,f=U.class),"$$scope"in U&&i(10,s=U.$$scope)},[l,f,t,p,o,r,g,C,A,V,s]}class N6 extends lt{constructor(e){super(),ct(this,e,B6,F6,st,{item:0,state:4,class:1})}}const V6=n=>({}),p0=n=>({}),j6=n=>({}),_0=n=>({});function U6(n){let e;const i=n[7].default,t=Ke(i,n,n[10],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&Je(t,i,r,r[10],e?Qe(i,r[10],s,null):Ye(r[10]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function q6(n){let e;return{c(){e=Ct(n[2])},l(i){e=St(i,n[2])},m(i,t){Q(i,e,t)},p(i,t){t&4&&Ai(e,i[2])},d(i){i&&F(e)}}}function Z6(n){let e;return{c(){e=Ct("Click save to apply changes. Press ESC or close the dialog to cancel.")},l(i){e=St(i,"Click save to apply changes. Press ESC or close the dialog to cancel.")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function G6(n){let e,i,t,r;return e=new P2({props:{class:"text-xl font-semibold",$$slots:{default:[q6]},$$scope:{ctx:n}}}),t=new M2({props:{$$slots:{default:[Z6]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&1028&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&1024&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function H6(n){let e,i='<p class="text-lg font-semibold text-muted-foreground">No item selected</p>';return{c(){e=Ze("div"),e.innerHTML=i,this.h()},l(t){e=Ge(t,"DIV",{class:!0,"data-svelte-h":!0}),ts(e)!=="svelte-17e47eh"&&(e.innerHTML=i),this.h()},h(){gt(e,"class","flex h-40 w-full items-center justify-center bg-muted")},m(t,r){Q(t,e,r)},p:Ci,i:Ci,o:Ci,d(t){t&&F(e)}}}function W6(n){let e,i,t,r,s;function l(f){n[8](f)}let o={state:n[3],$$slots:{default:[X6]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.item=n[0]),e=new N6({props:o}),Dt.push(()=>Bi(e,"item",l)),r=new z2({props:{class:"mt-4",$$slots:{default:[J6]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),t=it(),ce(r.$$.fragment)},l(f){ue(e.$$.fragment,f),t=nt(f),ue(r.$$.fragment,f)},m(f,p){fe(e,f,p),Q(f,t,p),fe(r,f,p),s=!0},p(f,p){const g={};p&8&&(g.state=f[3]),p&1024&&(g.$$scope={dirty:p,ctx:f}),!i&&p&1&&(i=!0,g.item=f[0],Fi(()=>i=!1)),e.$set(g);const C={};p&1024&&(C.$$scope={dirty:p,ctx:f}),r.$set(C)},i(f){s||(z(e.$$.fragment,f),z(r.$$.fragment,f),s=!0)},o(f){D(e.$$.fragment,f),D(r.$$.fragment,f),s=!1},d(f){f&&F(t),he(e,f),he(r,f)}}}function X6(n){let e;const i=n[7].options,t=Ke(i,n,n[10],_0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&Je(t,i,r,r[10],e?Qe(i,r[10],s,j6):Ye(r[10]),_0)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function K6(n){let e;return{c(){e=Ct("Save changes")},l(i){e=St(i,"Save changes")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function J6(n){let e,i,t;const r=n[7].actions,s=Ke(r,n,n[10],p0);return i=new jr({props:{type:"submit",$$slots:{default:[K6]},$$scope:{ctx:n}}}),i.$on("click",n[5]),{c(){s&&s.c(),e=it(),ce(i.$$.fragment)},l(l){s&&s.l(l),e=nt(l),ue(i.$$.fragment,l)},m(l,o){s&&s.m(l,o),Q(l,e,o),fe(i,l,o),t=!0},p(l,o){s&&s.p&&(!t||o&1024)&&Je(s,r,l,l[10],t?Qe(r,l[10],o,V6):Ye(l[10]),p0);const f={};o&1024&&(f.$$scope={dirty:o,ctx:l}),i.$set(f)},i(l){t||(z(s,l),z(i.$$.fragment,l),t=!0)},o(l){D(s,l),D(i.$$.fragment,l),t=!1},d(l){l&&F(e),s&&s.d(l),he(i,l)}}}function Y6(n){let e,i,t,r,s,l;e=new E2({props:{$$slots:{default:[G6]},$$scope:{ctx:n}}});const o=[W6,H6],f=[];function p(g,C){return g[0]?0:1}return t=p(n),r=f[t]=o[t](n),{c(){ce(e.$$.fragment),i=it(),r.c(),s=He()},l(g){ue(e.$$.fragment,g),i=nt(g),r.l(g),s=He()},m(g,C){fe(e,g,C),Q(g,i,C),f[t].m(g,C),Q(g,s,C),l=!0},p(g,C){const A={};C&1028&&(A.$$scope={dirty:C,ctx:g}),e.$set(A);let V=t;t=p(g),t===V?f[t].p(g,C):(Tt(),D(f[V],1,1,()=>{f[V]=null}),It(),r=f[t],r?r.p(g,C):(r=f[t]=o[t](g),r.c()),z(r,1),r.m(s.parentNode,s))},i(g){l||(z(e.$$.fragment,g),z(r),l=!0)},o(g){D(e.$$.fragment,g),D(r),l=!1},d(g){g&&(F(i),F(s)),he(e,g),f[t].d(g)}}}function Q6(n){let e,i,t,r;return e=new I2({props:{$$slots:{default:[U6]},$$scope:{ctx:n}}}),t=new A2({props:{class:"max-w-2xl p-4",$$slots:{default:[Y6]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&1024&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&1037&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function $6(n){let e,i,t;function r(l){n[9](l)}let s={onOpenChange:n[4],$$slots:{default:[Q6]},$$scope:{ctx:n}};return n[1]!==void 0&&(s.open=n[1]),e=new T2({props:s}),Dt.push(()=>Bi(e,"open",r)),{c(){ce(e.$$.fragment)},l(l){ue(e.$$.fragment,l)},m(l,o){fe(e,l,o),t=!0},p(l,[o]){const f={};o&16&&(f.onOpenChange=l[4]),o&1037&&(f.$$scope={dirty:o,ctx:l}),!i&&o&2&&(i=!0,f.open=l[1],Fi(()=>i=!1)),e.$set(f)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){D(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function eL(n,e,i){let{$$slots:t={},$$scope:r}=e,{selected:s}=e,{title:l="Edit"}=e,{open:o=!1}=e,{state:f=bd}=e,{onSubmit:p=()=>{}}=e,{onOpenChange:g=()=>{}}=e;function C(){s&&(s instanceof f2&&s.push(),p(s)),i(1,o=!1)}function A(U){s=U,i(0,s)}function V(U){o=U,i(1,o)}return n.$$set=U=>{"selected"in U&&i(0,s=U.selected),"title"in U&&i(2,l=U.title),"open"in U&&i(1,o=U.open),"state"in U&&i(3,f=U.state),"onSubmit"in U&&i(6,p=U.onSubmit),"onOpenChange"in U&&i(4,g=U.onOpenChange),"$$scope"in U&&i(10,r=U.$$scope)},[s,o,l,f,g,C,p,t,A,V,r]}class jR extends lt{constructor(e){super(),ct(this,e,eL,$6,st,{selected:0,title:2,open:1,state:3,onSubmit:6,onOpenChange:4})}}function tL(n){let e;const i=n[3].default,t=Ke(i,n,n[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Je(t,i,r,r[4],e?Qe(i,r[4],s,null):Ye(r[4]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function iL(n){let e,i;const t=[{class:Lt("text-lg font-semibold",n[0])},{level:n[1]},n[2]];let r={$$slots:{default:[tL]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Hw({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&7?yt(t,[l&1&&{class:Lt("text-lg font-semibold",s[0])},l&2&&{level:s[1]},l&4&&Ei(s[2])]):{};l&16&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function nL(n,e,i){const t=["class","level"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e,{level:f="h3"}=e;return n.$$set=p=>{e=re(re({},e),wt(p)),i(2,r=qe(e,t)),"class"in p&&i(0,o=p.class),"level"in p&&i(1,f=p.level),"$$scope"in p&&i(4,l=p.$$scope)},[o,f,r,s,l]}class rL extends lt{constructor(e){super(),ct(this,e,nL,iL,st,{class:0,level:1})}}const sL=n=>({builder:n&64}),g0=n=>({builder:n[6]});function oL(n){let e;const i=n[2].default,t=Ke(i,n,n[5],g0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&96)&&Je(t,i,r,r[5],e?Qe(i,r[5],s,sL):Ye(r[5]),g0)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function aL(n){let e,i;const t=[{class:Lt(Ts(),n[0])},n[1]];let r={$$slots:{default:[oL,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new $w({props:r}),e.$on("click",n[3]),e.$on("keydown",n[4]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(Ts(),s[0])},l&2&&Ei(s[1])]):{};l&96&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function lL(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(5,l=g.$$scope)},[o,r,s,f,p,l]}class cL extends lt{constructor(e){super(),ct(this,e,lL,aL,st,{class:0})}}const uL=n=>({builder:n&64}),y0=n=>({builder:n[6]});function fL(n){let e;const i=n[2].default,t=Ke(i,n,n[5],y0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&96)&&Je(t,i,r,r[5],e?Qe(i,r[5],s,uL):Ye(r[5]),y0)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function hL(n){let e,i;const t=[{class:Lt(Ts({variant:"outline"}),"mt-2 sm:mt-0",n[0])},n[1]];let r={$$slots:{default:[fL,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new ox({props:r}),e.$on("click",n[3]),e.$on("keydown",n[4]),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt(Ts({variant:"outline"}),"mt-2 sm:mt-0",s[0])},l&2&&Ei(s[1])]):{};l&96&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function dL(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;function f(g){jt.call(this,n,g)}function p(g){jt.call(this,n,g)}return n.$$set=g=>{e=re(re({},e),wt(g)),i(1,r=qe(e,t)),"class"in g&&i(0,o=g.class),"$$scope"in g&&i(5,l=g.$$scope)},[o,r,s,f,p,l]}class mL extends lt{constructor(e){super(),ct(this,e,dL,hL,st,{class:0})}}function pL(n){let e;const i=n[1].default,t=Ke(i,n,n[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4)&&Je(t,i,r,r[2],e?Qe(i,r[2],s,null):Ye(r[2]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function _L(n){let e,i;const t=[n[0]];let r={$$slots:{default:[pL]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new dx({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&1?yt(t,[Ei(s[0])]):{};l&4&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function gL(n,e,i){const t=[];let r=qe(e,t),{$$slots:s={},$$scope:l}=e;return n.$$set=o=>{e=re(re({},e),wt(o)),i(0,r=qe(e,t)),"$$scope"in o&&i(2,l=o.$$scope)},[r,s,l]}class yL extends lt{constructor(e){super(),ct(this,e,gL,_L,st,{})}}function bL(n){let e,i,t;const r=n[3].default,s=Ke(r,n,n[2],null);let l=[{class:i=Lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n[0])},n[1]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("div"),s&&s.c(),this.h()},l(f){e=Ge(f,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),s&&s.m(e,null),t=!0},p(f,[p]){s&&s.p&&(!t||p&4)&&Je(s,r,f,f[2],t?Qe(r,f[2],p,null):Ye(f[2]),null),rt(e,o=yt(l,[(!t||p&1&&i!==(i=Lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",f[0])))&&{class:i},p&2&&f[1]]))},i(f){t||(z(s,f),t=!0)},o(f){D(s,f),t=!1},d(f){f&&F(e),s&&s.d(f)}}}function vL(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(2,l=f.$$scope)},[o,r,l,s]}class wL extends lt{constructor(e){super(),ct(this,e,vL,bL,st,{class:0})}}function xL(n){let e,i,t;const r=n[3].default,s=Ke(r,n,n[2],null);let l=[{class:i=Lt("flex flex-col space-y-2 text-center sm:text-left",n[0])},n[1]],o={};for(let f=0;f<l.length;f+=1)o=re(o,l[f]);return{c(){e=Ze("div"),s&&s.c(),this.h()},l(f){e=Ge(f,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(F),this.h()},h(){rt(e,o)},m(f,p){Q(f,e,p),s&&s.m(e,null),t=!0},p(f,[p]){s&&s.p&&(!t||p&4)&&Je(s,r,f,f[2],t?Qe(r,f[2],p,null):Ye(f[2]),null),rt(e,o=yt(l,[(!t||p&1&&i!==(i=Lt("flex flex-col space-y-2 text-center sm:text-left",f[0])))&&{class:i},p&2&&f[1]]))},i(f){t||(z(s,f),t=!0)},o(f){D(s,f),t=!1},d(f){f&&F(e),s&&s.d(f)}}}function kL(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(2,l=f.$$scope)},[o,r,l,s]}class CL extends lt{constructor(e){super(),ct(this,e,kL,xL,st,{class:0})}}function SL(n){let e,i;const t=[{transition:n[1]},{transitionConfig:n[2]},{class:Lt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm ",n[0])},n[3]];let r={};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Bx({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&15?yt(t,[l&2&&{transition:s[1]},l&4&&{transitionConfig:s[2]},l&1&&{class:Lt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm ",s[0])},l&8&&Ei(s[3])]):{};e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function TL(n,e,i){const t=["class","transition","transitionConfig"];let r=qe(e,t),{class:s=void 0}=e,{transition:l=D2}=e,{transitionConfig:o={duration:150}}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(3,r=qe(e,t)),"class"in f&&i(0,s=f.class),"transition"in f&&i(1,l=f.transition),"transitionConfig"in f&&i(2,o=f.transitionConfig)},[s,l,o,r]}class IL extends lt{constructor(e){super(),ct(this,e,TL,SL,st,{class:0,transition:1,transitionConfig:2})}}function AL(n){let e;const i=n[4].default,t=Ke(i,n,n[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Je(t,i,r,r[5],e?Qe(i,r[5],s,null):Ye(r[5]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function EL(n){let e,i,t,r;e=new IL({});const s=[{transition:n[0]},{transitionConfig:n[1]},{class:Lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",n[2])},n[3]];let l={$$slots:{default:[AL]},$$scope:{ctx:n}};for(let o=0;o<s.length;o+=1)l=re(l,s[o]);return t=new Ax({props:l}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(o){ue(e.$$.fragment,o),i=nt(o),ue(t.$$.fragment,o)},m(o,f){fe(e,o,f),Q(o,i,f),fe(t,o,f),r=!0},p(o,f){const p=f&15?yt(s,[f&1&&{transition:o[0]},f&2&&{transitionConfig:o[1]},f&4&&{class:Lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",o[2])},f&8&&Ei(o[3])]):{};f&32&&(p.$$scope={dirty:f,ctx:o}),t.$set(p)},i(o){r||(z(e.$$.fragment,o),z(t.$$.fragment,o),r=!0)},o(o){D(e.$$.fragment,o),D(t.$$.fragment,o),r=!1},d(o){o&&F(i),he(e,o),he(t,o)}}}function PL(n){let e,i;return e=new yL({props:{$$slots:{default:[EL]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&47&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function ML(n,e,i){const t=["transition","transitionConfig","class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{transition:o=gd}=e,{transitionConfig:f=void 0}=e,{class:p=void 0}=e;return n.$$set=g=>{e=re(re({},e),wt(g)),i(3,r=qe(e,t)),"transition"in g&&i(0,o=g.transition),"transitionConfig"in g&&i(1,f=g.transitionConfig),"class"in g&&i(2,p=g.class),"$$scope"in g&&i(5,l=g.$$scope)},[o,f,p,r,s,l]}class zL extends lt{constructor(e){super(),ct(this,e,ML,PL,st,{transition:0,transitionConfig:1,class:2})}}function DL(n){let e;const i=n[2].default,t=Ke(i,n,n[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Je(t,i,r,r[3],e?Qe(i,r[3],s,null):Ye(r[3]),null)},i(r){e||(z(t,r),e=!0)},o(r){D(t,r),e=!1},d(r){t&&t.d(r)}}}function LL(n){let e,i;const t=[{class:Lt("text-sm text-muted-foreground",n[0])},n[1]];let r={$$slots:{default:[DL]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)r=re(r,t[s]);return e=new Gx({props:r}),{c(){ce(e.$$.fragment)},l(s){ue(e.$$.fragment,s)},m(s,l){fe(e,s,l),i=!0},p(s,[l]){const o=l&3?yt(t,[l&1&&{class:Lt("text-sm text-muted-foreground",s[0])},l&2&&Ei(s[1])]):{};l&8&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){i||(z(e.$$.fragment,s),i=!0)},o(s){D(e.$$.fragment,s),i=!1},d(s){he(e,s)}}}function RL(n,e,i){const t=["class"];let r=qe(e,t),{$$slots:s={},$$scope:l}=e,{class:o=void 0}=e;return n.$$set=f=>{e=re(re({},e),wt(f)),i(1,r=qe(e,t)),"class"in f&&i(0,o=f.class),"$$scope"in f&&i(3,l=f.$$scope)},[o,r,s,l]}class OL extends lt{constructor(e){super(),ct(this,e,RL,LL,st,{class:0})}}const FL=Nw;function b0(n){let e,i;return e=new zL({props:{$$slots:{default:[GL]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,r){const s={};r&543&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function BL(n){let e;return{c(){e=Ct("Are you sure?")},l(i){e=St(i,"Are you sure?")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function v0(n){let e,i,t;return{c(){e=Ct(n[2]),i=it(),t=Ze("br")},l(r){e=St(r,n[2]),i=nt(r),t=Ge(r,"BR",{})},m(r,s){Q(r,e,s),Q(r,i,s),Q(r,t,s)},p(r,s){s&4&&Ai(e,r[2])},d(r){r&&(F(e),F(i),F(t))}}}function NL(n){let e;return{c(){e=Ct("Always ask me to confirm destructive operations")},l(i){e=St(i,"Always ask me to confirm destructive operations")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function VL(n){let e,i,t=ff(n[0])?'"'+n[0].name+'"':"this item",r,s,l,o,f,p,g="This action cannot be undone.",C,A,V,U,G,Z,K,q=n[2]&&v0(n);function ie(se){n[7](se)}let oe={id:"terms","aria-labelledby":"terms-label"};return n[4].askDeleteConfirmation!==void 0&&(oe.checked=n[4].askDeleteConfirmation),V=new V0({props:oe}),Dt.push(()=>Bi(V,"checked",ie)),Z=new Sr({props:{id:"terms-label",for:"terms",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",$$slots:{default:[NL]},$$scope:{ctx:n}}}),{c(){e=Ze("p"),i=Ct("You are about to delete "),r=Ct(t),s=Ct(`.
            `),l=Ze("br"),o=it(),q&&q.c(),f=it(),p=Ze("span"),p.textContent=g,C=it(),A=Ze("div"),ce(V.$$.fragment),G=it(),ce(Z.$$.fragment),this.h()},l(se){e=Ge(se,"P",{});var pe=$e(e);i=St(pe,"You are about to delete "),r=St(pe,t),s=St(pe,`.
            `),l=Ge(pe,"BR",{}),o=nt(pe),q&&q.l(pe),f=nt(pe),p=Ge(pe,"SPAN",{class:!0,"data-svelte-h":!0}),ts(p)!=="svelte-yx7fx3"&&(p.textContent=g),pe.forEach(F),C=nt(se),A=Ge(se,"DIV",{class:!0});var Ie=$e(A);ue(V.$$.fragment,Ie),G=nt(Ie),ue(Z.$$.fragment,Ie),Ie.forEach(F),this.h()},h(){gt(p,"class","font-semibold"),gt(A,"class","mb-4 mt-4 flex items-center space-x-2 text-foreground")},m(se,pe){Q(se,e,pe),ut(e,i),ut(e,r),ut(e,s),ut(e,l),ut(e,o),q&&q.m(e,null),ut(e,f),ut(e,p),Q(se,C,pe),Q(se,A,pe),fe(V,A,null),ut(A,G),fe(Z,A,null),K=!0},p(se,pe){(!K||pe&1)&&t!==(t=ff(se[0])?'"'+se[0].name+'"':"this item")&&Ai(r,t),se[2]?q?q.p(se,pe):(q=v0(se),q.c(),q.m(e,f)):q&&(q.d(1),q=null);const Ie={};!U&&pe&16&&(U=!0,Ie.checked=se[4].askDeleteConfirmation,Fi(()=>U=!1)),V.$set(Ie);const Ce={};pe&512&&(Ce.$$scope={dirty:pe,ctx:se}),Z.$set(Ce)},i(se){K||(z(V.$$.fragment,se),z(Z.$$.fragment,se),K=!0)},o(se){D(V.$$.fragment,se),D(Z.$$.fragment,se),K=!1},d(se){se&&(F(e),F(C),F(A)),q&&q.d(),he(V),he(Z)}}}function jL(n){let e,i,t,r;return e=new rL({props:{$$slots:{default:[BL]},$$scope:{ctx:n}}}),t=new OL({props:{$$slots:{default:[VL]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&533&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function UL(n){let e;return{c(){e=Ct("Cancel")},l(i){e=St(i,"Cancel")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function qL(n){let e;return{c(){e=Ct("Delete")},l(i){e=St(i,"Delete")},m(i,t){Q(i,e,t)},d(i){i&&F(e)}}}function ZL(n){let e,i,t,r;return e=new mL({props:{$$slots:{default:[UL]},$$scope:{ctx:n}}}),t=new cL({props:{class:"bg-destructive text-destructive-foreground",$$slots:{default:[qL]},$$scope:{ctx:n}}}),t.$on("click",n[8]),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&512&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function GL(n){let e,i,t,r;return e=new CL({props:{$$slots:{default:[jL]},$$scope:{ctx:n}}}),t=new wL({props:{$$slots:{default:[ZL]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment),i=it(),ce(t.$$.fragment)},l(s){ue(e.$$.fragment,s),i=nt(s),ue(t.$$.fragment,s)},m(s,l){fe(e,s,l),Q(s,i,l),fe(t,s,l),r=!0},p(s,l){const o={};l&533&&(o.$$scope={dirty:l,ctx:s}),e.$set(o);const f={};l&523&&(f.$$scope={dirty:l,ctx:s}),t.$set(f)},i(s){r||(z(e.$$.fragment,s),z(t.$$.fragment,s),r=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),r=!1},d(s){s&&F(i),he(e,s),he(t,s)}}}function HL(n){let e,i,t=n[0]&&b0(n);return{c(){t&&t.c(),e=He()},l(r){t&&t.l(r),e=He()},m(r,s){t&&t.m(r,s),Q(r,e,s),i=!0},p(r,s){r[0]?t?(t.p(r,s),s&1&&z(t,1)):(t=b0(r),t.c(),z(t,1),t.m(e.parentNode,e)):t&&(Tt(),D(t,1,1,()=>{t=null}),It())},i(r){i||(z(t),i=!0)},o(r){D(t),i=!1},d(r){r&&F(e),t&&t.d(r)}}}function WL(n){let e,i;return e=new FL({props:{open:n[1],$$slots:{default:[HL]},$$scope:{ctx:n}}}),{c(){ce(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,r){fe(e,t,r),i=!0},p(t,[r]){const s={};r&2&&(s.open=t[1]),r&543&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){i||(z(e.$$.fragment,t),i=!0)},o(t){D(e.$$.fragment,t),i=!1},d(t){he(e,t)}}}function XL(n,e,i){let t,{selected:r}=e,{open:s=!1}=e,{extraDescription:l=""}=e,{state:o=bd}=e,{onDelete:f=()=>{}}=e;const p=o.settings;ei(n,p,A=>i(4,t=A));function g(A){n.$$.not_equal(t.askDeleteConfirmation,A)&&(t.askDeleteConfirmation=A,p.set(t))}const C=()=>{r&&(r.delete(),i(0,r=void 0)),f(),i(1,s=!1)};return n.$$set=A=>{"selected"in A&&i(0,r=A.selected),"open"in A&&i(1,s=A.open),"extraDescription"in A&&i(2,l=A.extraDescription),"state"in A&&i(6,o=A.state),"onDelete"in A&&i(3,f=A.onDelete)},[r,s,l,f,t,p,o,g,C]}class UR extends lt{constructor(e){super(),ct(this,e,XL,WL,st,{selected:0,open:1,extraDescription:2,state:6,onDelete:3})}}export{Td as A,vf as B,HA as C,UR as D,jR as E,BR as F,xl as G,Il as H,oz as I,Tl as J,Oo as K,gw as L,h6 as M,pa as N,Ew as O,Sf as P,aw as Q,Yc as R,N0 as S,Is as T,iR as U,Al as V,nR as W,ow as X,R2 as Y,wd as a,lE as b,JA as c,eE as d,sE as e,vd as f,Ks as g,M0 as h,T3 as i,Jc as j,DR as k,OR as l,LR as m,FR as n,RR as o,fd as p,V0 as q,wf as r,Qc as s,Ws as t,Wc as u,pf as v,dz as w,Ld as x,w5 as y,gy as z};
