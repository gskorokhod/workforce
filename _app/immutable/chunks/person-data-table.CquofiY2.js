import{s as ne,w as S,e as oe,a as y,c as le,b as re,g as z,f as H,m as X,i as N,h as ie,x as A,B as Y,q as L,u as Q,r as U,v as W}from"./scheduler.DpdggcV9.js";import{S as fe,i as ue,e as E,c as k,a as P,m as D,t as g,g as de,b as p,f as _e,d as K}from"./index.KweK3yxl.js";import{E as ce,D as me,h as ge,S as he,i as pe}from"./delete-dialog.CnbigHOQ.js";import{s as be,$ as we,P as Ie,B as Fe}from"./stores.DpWtvk7A.js";import{w as Ce}from"./index.DKR0vYLz.js";import{D as ke,c as Z,T as Pe,a as De}from"./table-header.Cc4FT3QJ.js";import{P as Ke}from"./property-value.dcqUduUn.js";import{C as Ve}from"./column-hide-selector.BsKOzcZA.js";const Se=s=>({}),x=s=>({}),Ae=s=>({}),ee=s=>({}),Ee=s=>({}),te=s=>({});function se(s){let e;const a=s[17].header,t=L(a,s,s[26],te),n=t||ye(s);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,i){n&&n.m(r,i),e=!0},p(r,i){t?t.p&&(!e||i&67108864)&&Q(t,a,r,r[26],e?W(a,r[26],i,Ee):U(r[26]),te):n&&n.p&&(!e||i&67108933)&&n.p(r,e?i:-1)},i(r){e||(g(n,r),e=!0)},o(r){p(n,r),e=!1},d(r){n&&n.d(r)}}}function Be(s){let e,a;return e=new pe({}),{c(){k(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){D(e,t,n),a=!0},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){K(e,t)}}}function He(s){let e,a,t;e=new Fe({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[Be]},$$scope:{ctx:s}}}),e.$on("click",s[14]);const n=s[17].start,r=L(n,s,s[26],x);return{c(){k(e.$$.fragment),a=y(),r&&r.c()},l(i){P(e.$$.fragment,i),a=z(i),r&&r.l(i)},m(i,_){D(e,i,_),N(i,a,_),r&&r.m(i,_),t=!0},p(i,_){const f={};_&67108864&&(f.$$scope={dirty:_,ctx:i}),e.$set(f),r&&r.p&&(!t||_&67108864)&&Q(r,n,i,i[26],t?W(n,i[26],_,Se):U(i[26]),x)},i(i){t||(g(e.$$.fragment,i),g(r,i),t=!0)},o(i){p(e.$$.fragment,i),p(r,i),t=!1},d(i){i&&H(a),K(e,i),r&&r.d(i)}}}function Te(s){let e;const a=s[17].middle,t=L(a,s,s[26],ee);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&67108864)&&Q(t,a,n,n[26],e?W(a,n[26],r,Ae):U(n[26]),ee)},i(n){e||(g(t,n),e=!0)},o(n){p(t,n),e=!1},d(n){t&&t.d(n)}}}function ve(s){let e,a,t,n,r;function i(f){s[18](f)}let _={flatColumns:s[6]};return s[2]!==void 0&&(_.hideForId=s[2]),e=new Ve({props:_}),S.push(()=>E(e,"hideForId",i)),n=new he({props:{onInput:s[19]}}),{c(){k(e.$$.fragment),t=y(),k(n.$$.fragment)},l(f){P(e.$$.fragment,f),t=z(f),P(n.$$.fragment,f)},m(f,c){D(e,f,c),N(f,t,c),D(n,f,c),r=!0},p(f,c){const m={};c&64&&(m.flatColumns=f[6]),!a&&c&4&&(a=!0,m.hideForId=f[2],A(()=>a=!1)),e.$set(m);const h={};c&1&&(h.onInput=f[19]),n.$set(h)},i(f){r||(g(e.$$.fragment,f),g(n.$$.fragment,f),r=!0)},o(f){p(e.$$.fragment,f),p(n.$$.fragment,f),r=!1},d(f){f&&H(t),K(e,f),K(n,f)}}}function ye(s){let e,a;return e=new Pe({props:{sticky:!0,$$slots:{end:[ve],middle:[Te],start:[He]},$$scope:{ctx:s}}}),{c(){k(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,n){D(e,t,n),a=!0},p(t,n){const r={};n&67108933&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){K(e,t)}}}function ze(s){let e,a,t,n,r,i,_,f,c,m,h,F,b,C,w,d=s[4]&&se(s);function T(o){s[20](o)}function O(o){s[21](o)}function $(o){s[22](o)}function R(o){s[23](o)}let V={class:"w-full",columnInitializers:s[11],data:s[3],actions:s[12],header:s[4],defaultAction:s[13]};s[0]!==void 0&&(V.filterValue=s[0]),s[6]!==void 0&&(V.flatColumns=s[6]),s[2]!==void 0&&(V.hideForId=s[2]),s[1]!==void 0&&(V.sortKeys=s[1]),t=new ke({props:V}),S.push(()=>E(t,"filterValue",T)),S.push(()=>E(t,"flatColumns",O)),S.push(()=>E(t,"hideForId",$)),S.push(()=>E(t,"sortKeys",R));function j(o){s[24](o)}let q={selected:s[7],title:s[10]};s[9]!==void 0&&(q.open=s[9]),m=new ce({props:q}),S.push(()=>E(m,"open",j));function G(o){s[25](o)}let M={selected:s[7]};return s[8]!==void 0&&(M.open=s[8]),b=new me({props:M}),S.push(()=>E(b,"open",G)),{c(){e=oe("div"),d&&d.c(),a=y(),k(t.$$.fragment),c=y(),k(m.$$.fragment),F=y(),k(b.$$.fragment),this.h()},l(o){e=le(o,"DIV",{class:!0});var u=re(e);d&&d.l(u),a=z(u),P(t.$$.fragment,u),u.forEach(H),c=z(o),P(m.$$.fragment,o),F=z(o),P(b.$$.fragment,o),this.h()},h(){X(e,"class",f="flex flex-col items-start justify-start "+s[5])},m(o,u){N(o,e,u),d&&d.m(e,null),ie(e,a),D(t,e,null),N(o,c,u),D(m,o,u),N(o,F,u),D(b,o,u),w=!0},p(o,[u]){o[4]?d?(d.p(o,u),u&16&&g(d,1)):(d=se(o),d.c(),g(d,1),d.m(e,a)):d&&(de(),p(d,1,1,()=>{d=null}),_e());const I={};u&8&&(I.data=o[3]),u&16&&(I.header=o[4]),!n&&u&1&&(n=!0,I.filterValue=o[0],A(()=>n=!1)),!r&&u&64&&(r=!0,I.flatColumns=o[6],A(()=>r=!1)),!i&&u&4&&(i=!0,I.hideForId=o[2],A(()=>i=!1)),!_&&u&2&&(_=!0,I.sortKeys=o[1],A(()=>_=!1)),t.$set(I),(!w||u&32&&f!==(f="flex flex-col items-start justify-start "+o[5]))&&X(e,"class",f);const B={};u&128&&(B.selected=o[7]),u&1024&&(B.title=o[10]),!h&&u&512&&(h=!0,B.open=o[9],A(()=>h=!1)),m.$set(B);const v={};u&128&&(v.selected=o[7]),!C&&u&256&&(C=!0,v.open=o[8],A(()=>C=!1)),b.$set(v)},i(o){w||(g(d),g(t.$$.fragment,o),g(m.$$.fragment,o),g(b.$$.fragment,o),w=!0)},o(o){p(d),p(t.$$.fragment,o),p(m.$$.fragment,o),p(b.$$.fragment,o),w=!1},d(o){o&&(H(e),H(c),H(F)),d&&d.d(),K(t),K(m,o),K(b,o)}}}function Ne(s,e,a){let{$$slots:t={},$$scope:n}=e,{data:r}=e,{showHeader:i=!0}=e,{state:_=be}=e,{rowActions:f=new Map}=e,{filterValue:c=Ce("")}=e,{sortKeys:m=De([])}=e,{hideForId:h={}}=e,F,{class:b=""}=e,C,w=!1,d=!1,T="Edit Person";const O=new Intl.DateTimeFormat(navigator.language||"en",{day:"numeric",month:"short",year:"numeric"});let $=[{accessor:l=>l,cell:l=>Z(ge,{item:l.value}),header:"Avatar",id:"avatar",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:l=>l.name,header:"Name",id:"name"},{accessor:l=>l.dob?O.format(l.dob.toDate(we())):"Not Set",header:"Date of Birth",id:"dob"}];for(const l of Y(_.templates).person.keys)$.push({accessor:J=>J.properties.get(l),cell:J=>Z(Ke,{property:l,value:J.value}),header:l.name,id:l.uuid});let R=new Map([...f,["Edit",j],["Delete",V]]);function V(l){Y(_.settings).askDeleteConfirmation?(a(7,C=l),a(8,w=!0)):l.delete()}function j(l){a(10,T="Edit Person"),a(7,C=l.pull()),a(9,d=!0)}function q(){a(10,T="Create new Person"),a(7,C=new Ie({name:""},_)),a(9,d=!0)}function G(l){h=l,a(2,h)}const M=l=>c.set(l);function o(l){c=l,a(0,c)}function u(l){F=l,a(6,F)}function I(l){h=l,a(2,h)}function B(l){m=l,a(1,m)}function v(l){d=l,a(9,d)}function ae(l){w=l,a(8,w)}return s.$$set=l=>{"data"in l&&a(3,r=l.data),"showHeader"in l&&a(4,i=l.showHeader),"state"in l&&a(15,_=l.state),"rowActions"in l&&a(16,f=l.rowActions),"filterValue"in l&&a(0,c=l.filterValue),"sortKeys"in l&&a(1,m=l.sortKeys),"hideForId"in l&&a(2,h=l.hideForId),"class"in l&&a(5,b=l.class),"$$scope"in l&&a(26,n=l.$$scope)},[c,m,h,r,i,b,F,C,w,d,T,$,R,j,q,_,f,t,G,M,o,u,I,B,v,ae,n]}class Le extends fe{constructor(e){super(),ue(this,e,Ne,ze,ne,{data:3,showHeader:4,state:15,rowActions:16,filterValue:0,sortKeys:1,hideForId:2,class:5})}}export{Le as P};
