import{s as ne,w as E,e as ie,a as B,c as le,b as oe,g as M,f as P,m as Q,i as N,h as re,x as T,B as U,q as x,u as ee,r as te,v as se}from"./scheduler.DpdggcV9.js";import{S as fe,i as ue,e as K,c as C,a as F,m as k,t as g,g as de,b,f as ce,d as D}from"./index.KweK3yxl.js";import{B as me,s as _e,f as ge,d as pe,S as he,h as W}from"./stores.BojXDT7e.js";import{w as be}from"./index.DKR0vYLz.js";import{D as $e,c as X,T as we,a as Ie}from"./table-header.BDkE_Q_R.js";import{E as Se,D as Ce,j as Fe,S as ke,h as De,i as Ve}from"./delete-dialog.BUglZHCm.js";import{C as Ee}from"./column-hide-selector.-inXuVSG.js";const Te=s=>({}),Y=s=>({}),Ke=s=>({}),Z=s=>({});function y(s){let e,i;return e=new we({props:{sticky:!0,$$slots:{end:[Ae],middle:[ze],start:[Pe]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){k(e,t,l),i=!0},p(t,l){const o={};l&33554640&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){D(e,t)}}}function je(s){let e,i;return e=new Ve({}),{c(){C(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){k(e,t,l),i=!0},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){D(e,t)}}}function Pe(s){let e,i,t;e=new me({props:{class:"text-muted-foreground hover:text-accent-foreground",size:"icon-xl",variant:"ghost",$$slots:{default:[je]},$$scope:{ctx:s}}}),e.$on("click",s[14]);const l=s[16].start,o=x(l,s,s[25],Y);return{c(){C(e.$$.fragment),i=B(),o&&o.c()},l(f){F(e.$$.fragment,f),i=M(f),o&&o.l(f)},m(f,c){k(e,f,c),N(f,i,c),o&&o.m(f,c),t=!0},p(f,c){const r={};c&33554432&&(r.$$scope={dirty:c,ctx:f}),e.$set(r),o&&o.p&&(!t||c&33554432)&&ee(o,l,f,f[25],t?se(l,f[25],c,Te):te(f[25]),Y)},i(f){t||(g(e.$$.fragment,f),g(o,f),t=!0)},o(f){b(e.$$.fragment,f),b(o,f),t=!1},d(f){f&&P(i),D(e,f),o&&o.d(f)}}}function ze(s){let e;const i=s[16].middle,t=x(i,s,s[25],Z);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&33554432)&&ee(t,i,l,l[25],e?se(i,l[25],o,Ke):te(l[25]),Z)},i(l){e||(g(t,l),e=!0)},o(l){b(t,l),e=!1},d(l){t&&t.d(l)}}}function Ae(s){let e,i,t,l,o;function f(r){s[17](r)}let c={flatColumns:s[7]};return s[6]!==void 0&&(c.hideForId=s[6]),e=new Ee({props:c}),E.push(()=>K(e,"hideForId",f)),l=new ke({props:{onInput:s[18]}}),{c(){C(e.$$.fragment),t=B(),C(l.$$.fragment)},l(r){F(e.$$.fragment,r),t=M(r),F(l.$$.fragment,r)},m(r,m){k(e,r,m),N(r,t,m),k(l,r,m),o=!0},p(r,m){const _={};m&128&&(_.flatColumns=r[7]),!i&&m&64&&(i=!0,_.hideForId=r[6],T(()=>i=!1)),e.$set(_);const p={};m&16&&(p.onInput=r[18]),l.$set(p)},i(r){o||(g(e.$$.fragment,r),g(l.$$.fragment,r),o=!0)},o(r){b(e.$$.fragment,r),b(l.$$.fragment,r),o=!1},d(r){r&&P(t),D(e,r),D(l,r)}}}function Be(s){let e,i,t,l,o,f,c,r,m,_,p,I,h,S,$,d=s[1]&&y(s);function z(n){s[19](n)}function q(n){s[20](n)}function H(n){s[21](n)}function v(n){s[22](n)}let V={class:"w-full",columnInitializers:s[12],data:s[0],actions:s[3],header:s[1],defaultAction:s[13]};s[4]!==void 0&&(V.filterValue=s[4]),s[7]!==void 0&&(V.flatColumns=s[7]),s[6]!==void 0&&(V.hideForId=s[6]),s[5]!==void 0&&(V.sortKeys=s[5]),t=new $e({props:V}),E.push(()=>K(t,"filterValue",z)),E.push(()=>K(t,"flatColumns",q)),E.push(()=>K(t,"hideForId",H)),E.push(()=>K(t,"sortKeys",v));function O(n){s[23](n)}let R={selected:s[8],title:s[11]};s[10]!==void 0&&(R.open=s[10]),_=new Se({props:R}),E.push(()=>K(_,"open",O));function J(n){s[24](n)}let G={selected:s[8]};return s[9]!==void 0&&(G.open=s[9]),h=new Ce({props:G}),E.push(()=>K(h,"open",J)),{c(){e=ie("div"),d&&d.c(),i=B(),C(t.$$.fragment),m=B(),C(_.$$.fragment),I=B(),C(h.$$.fragment),this.h()},l(n){e=le(n,"DIV",{class:!0});var u=oe(e);d&&d.l(u),i=M(u),F(t.$$.fragment,u),u.forEach(P),m=M(n),F(_.$$.fragment,n),I=M(n),F(h.$$.fragment,n),this.h()},h(){Q(e,"class",r="flex flex-col items-start justify-start "+s[2])},m(n,u){N(n,e,u),d&&d.m(e,null),re(e,i),k(t,e,null),N(n,m,u),k(_,n,u),N(n,I,u),k(h,n,u),$=!0},p(n,[u]){n[1]?d?(d.p(n,u),u&2&&g(d,1)):(d=y(n),d.c(),g(d,1),d.m(e,i)):d&&(de(),b(d,1,1,()=>{d=null}),ce());const w={};u&1&&(w.data=n[0]),u&8&&(w.actions=n[3]),u&2&&(w.header=n[1]),!l&&u&16&&(l=!0,w.filterValue=n[4],T(()=>l=!1)),!o&&u&128&&(o=!0,w.flatColumns=n[7],T(()=>o=!1)),!f&&u&64&&(f=!0,w.hideForId=n[6],T(()=>f=!1)),!c&&u&32&&(c=!0,w.sortKeys=n[5],T(()=>c=!1)),t.$set(w),(!$||u&4&&r!==(r="flex flex-col items-start justify-start "+n[2]))&&Q(e,"class",r);const j={};u&256&&(j.selected=n[8]),u&2048&&(j.title=n[11]),!p&&u&1024&&(p=!0,j.open=n[10],T(()=>p=!1)),_.$set(j);const A={};u&256&&(A.selected=n[8]),!S&&u&512&&(S=!0,A.open=n[9],T(()=>S=!1)),h.$set(A)},i(n){$||(g(d),g(t.$$.fragment,n),g(_.$$.fragment,n),g(h.$$.fragment,n),$=!0)},o(n){b(d),b(t.$$.fragment,n),b(_.$$.fragment,n),b(h.$$.fragment,n),$=!1},d(n){n&&(P(e),P(m),P(I)),d&&d.d(),D(t),D(_,n),D(h,n)}}}function Me(s,e,i){let{$$slots:t={},$$scope:l}=e,{data:o}=e,{header:f=!0}=e,{state:c=_e}=e,r=new Map,m=be(""),_=Ie([]),p={},I,{class:h=""}=e,S,$=!1,d=!1,z="Edit Person",q=[{accessor:a=>a,cell:a=>X(De,{item:a.value}),header:"Icon",id:"icon",plugins:{sort:{disable:!0},tableFilter:{disable:!0}}},{accessor:a=>a.name,header:"Name",id:"name"},{accessor:a=>a.fmtStartTime(),header:"Start Time",id:"timeStart"},{accessor:a=>a.fmtEndTime(),header:"End Time",id:"timeEnd"},{accessor:a=>`${ge(a.paidDuration)}`,header:"Contracted Duration",id:"contractedDuration"},{accessor:a=>pe(a.describePattern()),header:"Recurrence",id:"recurrence"}];const H=c.settings;U(H).assignmentMode==="granular"&&q.push({accessor:a=>Array.from(a.tasks.values()),cell:a=>X(Fe,{items:a.value,placeholder:"No Tasks"}),header:"Tasks in Shift",id:"tasks",plugins:{sort:{getSortValue:a=>a.map(L=>L.name).join(" ")},tableFilter:{getFilterValue:a=>a.map(L=>L.name).join(" ")}}});let{actions:v=new Map([...r,["Edit",O],["Delete",V]])}=e;function V(a){U(c.settings).askDeleteConfirmation?(i(8,S=a),i(9,$=!0)):a.delete()}function O(a){i(11,z="Edit Shift"),i(8,S=a.pull()),i(10,d=!0)}function R(){i(11,z="Create new Shift"),i(8,S=new he({name:"",pattern:{start:new W(9,0),end:new W(17,0)}},c)),i(10,d=!0)}function J(a){p=a,i(6,p)}const G=a=>m.set(a);function n(a){m=a,i(4,m)}function u(a){I=a,i(7,I)}function w(a){p=a,i(6,p)}function j(a){_=a,i(5,_)}function A(a){d=a,i(10,d)}function ae(a){$=a,i(9,$)}return s.$$set=a=>{"data"in a&&i(0,o=a.data),"header"in a&&i(1,f=a.header),"state"in a&&i(15,c=a.state),"class"in a&&i(2,h=a.class),"actions"in a&&i(3,v=a.actions),"$$scope"in a&&i(25,l=a.$$scope)},[o,f,h,v,m,_,p,I,S,$,d,z,q,O,R,c,t,J,G,n,u,w,j,A,ae,l]}class Je extends fe{constructor(e){super(),ue(this,e,Me,Be,ne,{data:0,header:1,state:15,class:2,actions:3})}}export{Je as S};
